var Nb=Object.defineProperty;var Sb=(e,t,n)=>t in e?Nb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var at=(e,t,n)=>Sb(e,typeof t!="symbol"?t+"":t,n);import{u as Eb,R as Ie,r as T,j as p,c as kn,g as Cb}from"./index-CKB-v0eF.js";import{X as Ru,u as ov,c as Ge,a as cv,b as kb,P as jb,C as uv,d as lv,T as Ab}from"./index-Bmha2bSx.js";import{c as re,a as ln,u as pu,b as El,C as dv,d as fv,e as hv,f as pv,B as Se,g as Rb}from"./card-CdOATahm.js";import{C as Ib,A as Ut,a as Gn,b as Yt,c as Mb}from"./alert-DYhajS-c.js";import{E as Tb,c as Iu,P as Mt}from"./index-4CZqBsOn.js";import{N as qb}from"./network-CfydrYR3.js";function ue(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ue(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Pb={value:()=>{}};function dn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Fn(n)}function Fn(e){this._=e}function Db(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Fn.prototype=dn.prototype={constructor:Fn,on:function(e,t){var n=this._,r=Db(e+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(e=r[a]).type)&&(i=Lb(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=r[a]).type)n[i]=Cl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Cl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Fn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Lb(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Cl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Pb,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gu="http://www.w3.org/1999/xhtml";const kl={svg:"http://www.w3.org/2000/svg",xhtml:gu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function or(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),kl.hasOwnProperty(t)?{space:kl[t],local:e}:e}function Ob(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gu&&t.documentElement.namespaceURI===gu?t.createElement(e):t.createElementNS(n,e)}}function Fb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function gv(e){var t=or(e);return(t.local?Fb:Ob)(t)}function $b(){}function Mu(e){return e==null?$b:function(){return this.querySelector(e)}}function zb(e){typeof e!="function"&&(e=Mu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=a[c])&&(l=e.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),o[c]=l);return new xe(r,this._parents)}function Bb(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hb(){return[]}function mv(e){return e==null?Hb:function(){return this.querySelectorAll(e)}}function Gb(e){return function(){return Bb(e.apply(this,arguments))}}function Vb(e){typeof e=="function"?e=Gb(e):e=mv(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var s=t[a],o=s.length,u,l=0;l<o;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new xe(r,i)}function vv(e){return function(){return this.matches(e)}}function yv(e){return function(t){return t.matches(e)}}var Ub=Array.prototype.find;function Yb(e){return function(){return Ub.call(this.children,e)}}function Wb(){return this.firstElementChild}function Xb(e){return this.select(e==null?Wb:Yb(typeof e=="function"?e:yv(e)))}var Kb=Array.prototype.filter;function Zb(){return Array.from(this.children)}function Jb(e){return function(){return Kb.call(this.children,e)}}function Qb(e){return this.selectAll(e==null?Zb:Jb(typeof e=="function"?e:yv(e)))}function e1(e){typeof e!="function"&&(e=vv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=[],u,l=0;l<s;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&o.push(u);return new xe(r,this._parents)}function xv(e){return new Array(e.length)}function t1(){return new xe(this._enter||this._groups.map(xv),this._parents)}function Vn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vn.prototype={constructor:Vn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function n1(e){return function(){return e}}function r1(e,t,n,r,i,a){for(var s=0,o,u=t.length,l=a.length;s<l;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new Vn(e,a[s]);for(;s<u;++s)(o=t[s])&&(i[s]=o)}function i1(e,t,n,r,i,a,s){var o,u,l=new Map,c=t.length,f=a.length,d=new Array(c),h;for(o=0;o<c;++o)(u=t[o])&&(d[o]=h=s.call(u,u.__data__,o,t)+"",l.has(h)?i[o]=u:l.set(h,u));for(o=0;o<f;++o)h=s.call(e,a[o],o,a)+"",(u=l.get(h))?(r[o]=u,u.__data__=a[o],l.delete(h)):n[o]=new Vn(e,a[o]);for(o=0;o<c;++o)(u=t[o])&&l.get(d[o])===u&&(i[o]=u)}function a1(e){return e.__data__}function s1(e,t){if(!arguments.length)return Array.from(this,a1);var n=t?i1:r1,r=this._parents,i=this._groups;typeof e!="function"&&(e=n1(e));for(var a=i.length,s=new Array(a),o=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],d=f.length,h=o1(e.call(c,c&&c.__data__,l,r)),b=h.length,m=o[l]=new Array(b),v=s[l]=new Array(b),y=u[l]=new Array(d);n(c,f,m,v,y,h,t);for(var _=0,g=0,x,w;_<b;++_)if(x=m[_]){for(_>=g&&(g=_+1);!(w=v[g])&&++g<b;);x._next=w||null}}return s=new xe(s,r),s._enter=o,s._exit=u,s}function o1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function c1(){return new xe(this._exit||this._groups.map(xv),this._parents)}function u1(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function l1(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],f=l.length,d=o[u]=new Array(f),h,b=0;b<f;++b)(h=l[b]||c[b])&&(d[b]=h);for(;u<i;++u)o[u]=n[u];return new xe(o,this._parents)}function d1(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function f1(e){e||(e=h1);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,u=i[a]=new Array(o),l,c=0;c<o;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new xe(i,this._parents).order()}function h1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function p1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function g1(){return Array.from(this)}function m1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function v1(){let e=0;for(const t of this)++e;return e}function y1(){return!this.node()}function x1(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function b1(e){return function(){this.removeAttribute(e)}}function _1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function w1(e,t){return function(){this.setAttribute(e,t)}}function N1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function S1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function E1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function C1(e,t){var n=or(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_1:b1:typeof t=="function"?n.local?E1:S1:n.local?N1:w1)(n,t))}function bv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function k1(e){return function(){this.style.removeProperty(e)}}function j1(e,t,n){return function(){this.style.setProperty(e,t,n)}}function A1(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function R1(e,t,n){return arguments.length>1?this.each((t==null?k1:typeof t=="function"?A1:j1)(e,t,n??"")):Et(this.node(),e)}function Et(e,t){return e.style.getPropertyValue(t)||bv(e).getComputedStyle(e,null).getPropertyValue(t)}function I1(e){return function(){delete this[e]}}function M1(e,t){return function(){this[e]=t}}function T1(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function q1(e,t){return arguments.length>1?this.each((t==null?I1:typeof t=="function"?T1:M1)(e,t)):this.node()[e]}function _v(e){return e.trim().split(/^|\s+/)}function Tu(e){return e.classList||new wv(e)}function wv(e){this._node=e,this._names=_v(e.getAttribute("class")||"")}wv.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Nv(e,t){for(var n=Tu(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Sv(e,t){for(var n=Tu(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function P1(e){return function(){Nv(this,e)}}function D1(e){return function(){Sv(this,e)}}function L1(e,t){return function(){(t.apply(this,arguments)?Nv:Sv)(this,e)}}function O1(e,t){var n=_v(e+"");if(arguments.length<2){for(var r=Tu(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?L1:t?P1:D1)(n,t))}function F1(){this.textContent=""}function $1(e){return function(){this.textContent=e}}function z1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function B1(e){return arguments.length?this.each(e==null?F1:(typeof e=="function"?z1:$1)(e)):this.node().textContent}function H1(){this.innerHTML=""}function G1(e){return function(){this.innerHTML=e}}function V1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function U1(e){return arguments.length?this.each(e==null?H1:(typeof e=="function"?V1:G1)(e)):this.node().innerHTML}function Y1(){this.nextSibling&&this.parentNode.appendChild(this)}function W1(){return this.each(Y1)}function X1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function K1(){return this.each(X1)}function Z1(e){var t=typeof e=="function"?e:gv(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function J1(){return null}function Q1(e,t){var n=typeof e=="function"?e:gv(e),r=t==null?J1:typeof t=="function"?t:Mu(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function e_(){var e=this.parentNode;e&&e.removeChild(this)}function t_(){return this.each(e_)}function n_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function r_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function i_(e){return this.select(e?r_:n_)}function a_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function s_(e){return function(t){e.call(this,t,this.__data__)}}function o_(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function c_(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function u_(e,t,n){return function(){var r=this.__on,i,a=s_(t);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function l_(e,t,n){var r=o_(e+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,c;u<l;++u)for(i=0,c=o[u];i<a;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(o=t?u_:c_,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function Ev(e,t,n){var r=bv(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function d_(e,t){return function(){return Ev(this,e,t)}}function f_(e,t){return function(){return Ev(this,e,t.apply(this,arguments))}}function h_(e,t){return this.each((typeof t=="function"?f_:d_)(e,t))}function*p_(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var Cv=[null];function xe(e,t){this._groups=e,this._parents=t}function fn(){return new xe([[document.documentElement]],Cv)}function g_(){return this}xe.prototype=fn.prototype={constructor:xe,select:zb,selectAll:Vb,selectChild:Xb,selectChildren:Qb,filter:e1,data:s1,enter:t1,exit:c1,join:u1,merge:l1,selection:g_,order:d1,sort:f1,call:p1,nodes:g1,node:m1,size:v1,empty:y1,each:x1,attr:C1,style:R1,property:q1,classed:O1,text:B1,html:U1,raise:W1,lower:K1,append:Z1,insert:Q1,remove:t_,clone:i_,datum:a_,on:l_,dispatch:h_,[Symbol.iterator]:p_};function ye(e){return typeof e=="string"?new xe([[document.querySelector(e)]],[document.documentElement]):new xe([[e]],Cv)}function m_(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ne(e,t){if(e=m_(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const v_={passive:!1},Kt={capture:!0,passive:!1};function Fr(e){e.stopImmediatePropagation()}function Nt(e){e.preventDefault(),e.stopImmediatePropagation()}function kv(e){var t=e.document.documentElement,n=ye(e).on("dragstart.drag",Nt,Kt);"onselectstart"in t?n.on("selectstart.drag",Nt,Kt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jv(e,t){var n=e.document.documentElement,r=ye(e).on("dragstart.drag",null);t&&(r.on("click.drag",Nt,Kt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const jn=e=>()=>e;function mu(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:s,y:o,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}mu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function y_(e){return!e.ctrlKey&&!e.button}function x_(){return this.parentNode}function b_(e,t){return t??{x:e.x,y:e.y}}function __(){return navigator.maxTouchPoints||"ontouchstart"in this}function Av(){var e=y_,t=x_,n=b_,r=__,i={},a=dn("start","drag","end"),s=0,o,u,l,c,f=0;function d(x){x.on("mousedown.drag",h).filter(r).on("touchstart.drag",v).on("touchmove.drag",y,v_).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(x,w){if(!(c||!e.call(this,x,w))){var S=g(this,t.call(this,x,w),x,w,"mouse");S&&(ye(x.view).on("mousemove.drag",b,Kt).on("mouseup.drag",m,Kt),kv(x.view),Fr(x),l=!1,o=x.clientX,u=x.clientY,S("start",x))}}function b(x){if(Nt(x),!l){var w=x.clientX-o,S=x.clientY-u;l=w*w+S*S>f}i.mouse("drag",x)}function m(x){ye(x.view).on("mousemove.drag mouseup.drag",null),jv(x.view,l),Nt(x),i.mouse("end",x)}function v(x,w){if(e.call(this,x,w)){var S=x.changedTouches,N=t.call(this,x,w),E=S.length,j,R;for(j=0;j<E;++j)(R=g(this,N,x,w,S[j].identifier,S[j]))&&(Fr(x),R("start",x,S[j]))}}function y(x){var w=x.changedTouches,S=w.length,N,E;for(N=0;N<S;++N)(E=i[w[N].identifier])&&(Nt(x),E("drag",x,w[N]))}function _(x){var w=x.changedTouches,S=w.length,N,E;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),N=0;N<S;++N)(E=i[w[N].identifier])&&(Fr(x),E("end",x,w[N]))}function g(x,w,S,N,E,j){var R=a.copy(),A=Ne(j||S,w),P,O,C;if((C=n.call(x,new mu("beforestart",{sourceEvent:S,target:d,identifier:E,active:s,x:A[0],y:A[1],dx:0,dy:0,dispatch:R}),N))!=null)return P=C.x-A[0]||0,O=C.y-A[1]||0,function q(k,M,z){var L=A,B;switch(k){case"start":i[E]=q,B=s++;break;case"end":delete i[E],--s;case"drag":A=Ne(z||M,w),B=s;break}R.call(k,x,new mu(k,{sourceEvent:M,subject:C,target:d,identifier:E,active:B,x:A[0]+P,y:A[1]+O,dx:A[0]-L[0],dy:A[1]-L[1],dispatch:R}),N)}}return d.filter=function(x){return arguments.length?(e=typeof x=="function"?x:jn(!!x),d):e},d.container=function(x){return arguments.length?(t=typeof x=="function"?x:jn(x),d):t},d.subject=function(x){return arguments.length?(n=typeof x=="function"?x:jn(x),d):n},d.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:jn(!!x),d):r},d.on=function(){var x=a.on.apply(a,arguments);return x===a?d:x},d.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,d):Math.sqrt(f)},d}function qu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hn(){}var Zt=.7,Un=1/Zt,St="\\s*([+-]?\\d+)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w_=/^#([0-9a-f]{3,8})$/,N_=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),S_=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),E_=new RegExp(`^rgba\\(${St},${St},${St},${Jt}\\)$`),C_=new RegExp(`^rgba\\(${qe},${qe},${qe},${Jt}\\)$`),k_=new RegExp(`^hsl\\(${Jt},${qe},${qe}\\)$`),j_=new RegExp(`^hsla\\(${Jt},${qe},${qe},${Jt}\\)$`),jl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qu(hn,lt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Al,formatHex:Al,formatHex8:A_,formatHsl:R_,formatRgb:Rl,toString:Rl});function Al(){return this.rgb().formatHex()}function A_(){return this.rgb().formatHex8()}function R_(){return Iv(this).formatHsl()}function Rl(){return this.rgb().formatRgb()}function lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=w_.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Il(t):n===3?new ge(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?An(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?An(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=N_.exec(e))?new ge(t[1],t[2],t[3],1):(t=S_.exec(e))?new ge(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=E_.exec(e))?An(t[1],t[2],t[3],t[4]):(t=C_.exec(e))?An(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=k_.exec(e))?ql(t[1],t[2]/100,t[3]/100,1):(t=j_.exec(e))?ql(t[1],t[2]/100,t[3]/100,t[4]):jl.hasOwnProperty(e)?Il(jl[e]):e==="transparent"?new ge(NaN,NaN,NaN,0):null}function Il(e){return new ge(e>>16&255,e>>8&255,e&255,1)}function An(e,t,n,r){return r<=0&&(e=t=n=NaN),new ge(e,t,n,r)}function I_(e){return e instanceof hn||(e=lt(e)),e?(e=e.rgb(),new ge(e.r,e.g,e.b,e.opacity)):new ge}function vu(e,t,n,r){return arguments.length===1?I_(e):new ge(e,t,n,r??1)}function ge(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}qu(ge,vu,Rv(hn,{brighter(e){return e=e==null?Un:Math.pow(Un,e),new ge(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zt:Math.pow(Zt,e),new ge(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ge(ct(this.r),ct(this.g),ct(this.b),Yn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ml,formatHex:Ml,formatHex8:M_,formatRgb:Tl,toString:Tl}));function Ml(){return`#${ot(this.r)}${ot(this.g)}${ot(this.b)}`}function M_(){return`#${ot(this.r)}${ot(this.g)}${ot(this.b)}${ot((isNaN(this.opacity)?1:this.opacity)*255)}`}function Tl(){const e=Yn(this.opacity);return`${e===1?"rgb(":"rgba("}${ct(this.r)}, ${ct(this.g)}, ${ct(this.b)}${e===1?")":`, ${e})`}`}function Yn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ct(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ot(e){return e=ct(e),(e<16?"0":"")+e.toString(16)}function ql(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ee(e,t,n,r)}function Iv(e){if(e instanceof Ee)return new Ee(e.h,e.s,e.l,e.opacity);if(e instanceof hn||(e=lt(e)),!e)return new Ee;if(e instanceof Ee)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,o=a-i,u=(a+i)/2;return o?(t===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-t)/o+2:s=(t-n)/o+4,o/=u<.5?a+i:2-a-i,s*=60):o=u>0&&u<1?0:s,new Ee(s,o,u,e.opacity)}function T_(e,t,n,r){return arguments.length===1?Iv(e):new Ee(e,t,n,r??1)}function Ee(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qu(Ee,T_,Rv(hn,{brighter(e){return e=e==null?Un:Math.pow(Un,e),new Ee(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zt:Math.pow(Zt,e),new Ee(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ge($r(e>=240?e-240:e+120,i,r),$r(e,i,r),$r(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ee(Pl(this.h),Rn(this.s),Rn(this.l),Yn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yn(this.opacity);return`${e===1?"hsl(":"hsla("}${Pl(this.h)}, ${Rn(this.s)*100}%, ${Rn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pl(e){return e=(e||0)%360,e<0?e+360:e}function Rn(e){return Math.max(0,Math.min(1,e||0))}function $r(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Pu=e=>()=>e;function q_(e,t){return function(n){return e+n*t}}function P_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function D_(e){return(e=+e)==1?Mv:function(t,n){return n-t?P_(t,n,e):Pu(isNaN(t)?n:t)}}function Mv(e,t){var n=t-e;return n?q_(e,n):Pu(isNaN(e)?t:e)}const Wn=function e(t){var n=D_(t);function r(i,a){var s=n((i=vu(i)).r,(a=vu(a)).r),o=n(i.g,a.g),u=n(i.b,a.b),l=Mv(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=o(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function L_(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function O_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function F_(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Wt(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function $_(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Me(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function z_(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Wt(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var yu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zr=new RegExp(yu.source,"g");function B_(e){return function(){return e}}function H_(e){return function(t){return e(t)+""}}function Tv(e,t){var n=yu.lastIndex=zr.lastIndex=0,r,i,a,s=-1,o=[],u=[];for(e=e+"",t=t+"";(r=yu.exec(e))&&(i=zr.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,u.push({i:s,x:Me(r,i)})),n=zr.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?u[0]?H_(u[0].x):B_(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)o[(f=u[c]).i]=f.x(l);return o.join("")})}function Wt(e,t){var n=typeof t,r;return t==null||n==="boolean"?Pu(t):(n==="number"?Me:n==="string"?(r=lt(t))?(t=r,Wn):Tv:t instanceof lt?Wn:t instanceof Date?$_:O_(t)?L_:Array.isArray(t)?F_:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?z_:Me)(e,t)}var Dl=180/Math.PI,xu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qv(e,t,n,r,i,a){var s,o,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Dl,skewX:Math.atan(u)*Dl,scaleX:s,scaleY:o}}var In;function G_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xu:qv(t.a,t.b,t.c,t.d,t.e,t.f)}function V_(e){return e==null||(In||(In=document.createElementNS("http://www.w3.org/2000/svg","g")),In.setAttribute("transform",e),!(e=In.transform.baseVal.consolidate()))?xu:(e=e.matrix,qv(e.a,e.b,e.c,e.d,e.e,e.f))}function Pv(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,d,h,b){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);b.push({i:m-4,x:Me(l,f)},{i:m-2,x:Me(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Me(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function o(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Me(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,b){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");b.push({i:m-4,x:Me(l,f)},{i:m-2,x:Me(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),o(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var b=-1,m=d.length,v;++b<m;)f[(v=d[b]).i]=v.x(h);return f.join("")}}}var U_=Pv(G_,"px, ","px)","deg)"),Y_=Pv(V_,", ",")",")"),W_=1e-12;function Ll(e){return((e=Math.exp(e))+1/e)/2}function X_(e){return((e=Math.exp(e))-1/e)/2}function K_(e){return((e=Math.exp(2*e))-1)/(e+1)}const $n=function e(t,n,r){function i(a,s){var o=a[0],u=a[1],l=a[2],c=s[0],f=s[1],d=s[2],h=c-o,b=f-u,m=h*h+b*b,v,y;if(m<W_)y=Math.log(d/l)/t,v=function(N){return[o+N*h,u+N*b,l*Math.exp(t*N*y)]};else{var _=Math.sqrt(m),g=(d*d-l*l+r*m)/(2*l*n*_),x=(d*d-l*l-r*m)/(2*d*n*_),w=Math.log(Math.sqrt(g*g+1)-g),S=Math.log(Math.sqrt(x*x+1)-x);y=(S-w)/t,v=function(N){var E=N*y,j=Ll(w),R=l/(n*_)*(j*K_(t*E+w)-X_(w));return[o+R*h,u+R*b,l*j/Ll(t*E+w)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,u=o*o;return e(s,o,u)},i}(Math.SQRT2,2,4);var Ct=0,zt=0,Ft=0,Dv=1e3,Xn,Bt,Kn=0,dt=0,cr=0,Qt=typeof performance=="object"&&performance.now?performance:Date,Lv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Du(){return dt||(Lv(Z_),dt=Qt.now()+cr)}function Z_(){dt=0}function Zn(){this._call=this._time=this._next=null}Zn.prototype=Lu.prototype={constructor:Zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Du():+n)+(t==null?0:+t),!this._next&&Bt!==this&&(Bt?Bt._next=this:Xn=this,Bt=this),this._call=e,this._time=n,bu()},stop:function(){this._call&&(this._call=null,this._time=1/0,bu())}};function Lu(e,t,n){var r=new Zn;return r.restart(e,t,n),r}function J_(){Du(),++Ct;for(var e=Xn,t;e;)(t=dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ct}function Ol(){dt=(Kn=Qt.now())+cr,Ct=zt=0;try{J_()}finally{Ct=0,ew(),dt=0}}function Q_(){var e=Qt.now(),t=e-Kn;t>Dv&&(cr-=t,Kn=e)}function ew(){for(var e,t=Xn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Xn=n);Bt=e,bu(r)}function bu(e){if(!Ct){zt&&(zt=clearTimeout(zt));var t=e-dt;t>24?(e<1/0&&(zt=setTimeout(Ol,e-Qt.now()-cr)),Ft&&(Ft=clearInterval(Ft))):(Ft||(Kn=Qt.now(),Ft=setInterval(Q_,Dv)),Ct=1,Lv(Ol))}}function Fl(e,t,n){var r=new Zn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var tw=dn("start","end","cancel","interrupt"),nw=[],Ov=0,$l=1,_u=2,zn=3,zl=4,wu=5,Bn=6;function ur(e,t,n,r,i,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;rw(e,n,{name:t,index:r,group:i,on:tw,tween:nw,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ov})}function Ou(e,t){var n=je(e,t);if(n.state>Ov)throw new Error("too late; already scheduled");return n}function De(e,t){var n=je(e,t);if(n.state>zn)throw new Error("too late; already running");return n}function je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rw(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Lu(a,0,n.time);function a(l){n.state=$l,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,f,d,h;if(n.state!==$l)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===zn)return Fl(s);h.state===zl?(h.state=Bn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Bn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Fl(function(){n.state===zn&&(n.state=zl,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=_u,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_u){for(n.state=zn,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function o(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=wu,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===wu&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Bn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Hn(e,t){var n=e.__transition,r,i,a=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){a=!1;continue}i=r.state>_u&&r.state<wu,r.state=Bn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}a&&delete e.__transition}}function iw(e){return this.each(function(){Hn(this,e)})}function aw(e,t){var n,r;return function(){var i=De(this,e),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function sw(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=De(this,e),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=o;break}u===l&&i.push(o)}a.tween=i}}function ow(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=je(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?aw:sw)(n,e,t))}function Fu(e,t,n){var r=e._id;return e.each(function(){var i=De(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return je(i,r).value[t]}}function Fv(e,t){var n;return(typeof t=="number"?Me:t instanceof lt?Wn:(n=lt(t))?(t=n,Wn):Tv)(e,t)}function cw(e){return function(){this.removeAttribute(e)}}function uw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lw(e,t,n){var r,i=n+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===r?a:a=t(r=s,n)}}function dw(e,t,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?a:a=t(r=s,n)}}function fw(e,t,n){var r,i,a;return function(){var s,o=n(this),u;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=o+"",s===u?null:s===r&&u===i?a:(i=u,a=t(r=s,o)))}}function hw(e,t,n){var r,i,a;return function(){var s,o=n(this),u;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=o+"",s===u?null:s===r&&u===i?a:(i=u,a=t(r=s,o)))}}function pw(e,t){var n=or(e),r=n==="transform"?Y_:Fv;return this.attrTween(e,typeof t=="function"?(n.local?hw:fw)(n,r,Fu(this,"attr."+e,t)):t==null?(n.local?uw:cw)(n):(n.local?dw:lw)(n,r,t))}function gw(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mw(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function vw(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&mw(e,a)),n}return i._value=t,i}function yw(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&gw(e,a)),n}return i._value=t,i}function xw(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=or(e);return this.tween(n,(r.local?vw:yw)(r,t))}function bw(e,t){return function(){Ou(this,e).delay=+t.apply(this,arguments)}}function _w(e,t){return t=+t,function(){Ou(this,e).delay=t}}function ww(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bw:_w)(t,e)):je(this.node(),t).delay}function Nw(e,t){return function(){De(this,e).duration=+t.apply(this,arguments)}}function Sw(e,t){return t=+t,function(){De(this,e).duration=t}}function Ew(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nw:Sw)(t,e)):je(this.node(),t).duration}function Cw(e,t){if(typeof t!="function")throw new Error;return function(){De(this,e).ease=t}}function kw(e){var t=this._id;return arguments.length?this.each(Cw(t,e)):je(this.node(),t).ease}function jw(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;De(this,e).ease=n}}function Aw(e){if(typeof e!="function")throw new Error;return this.each(jw(this._id,e))}function Rw(e){typeof e!="function"&&(e=vv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=[],u,l=0;l<s;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&o.push(u);return new Ue(r,this._parents,this._name,this._id)}function Iw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var u=t[o],l=n[o],c=u.length,f=s[o]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;o<r;++o)s[o]=t[o];return new Ue(s,this._parents,this._name,this._id)}function Mw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Tw(e,t,n){var r,i,a=Mw(t)?Ou:De;return function(){var s=a(this,e),o=s.on;o!==r&&(i=(r=o).copy()).on(t,n),s.on=i}}function qw(e,t){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(e):this.each(Tw(n,e,t))}function Pw(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Dw(){return this.on("end.remove",Pw(this._id))}function Lw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mu(e));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],u=o.length,l=a[s]=new Array(u),c,f,d=0;d<u;++d)(c=o[d])&&(f=e.call(c,c.__data__,d,o))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,ur(l[d],t,n,d,l,je(c,n)));return new Ue(a,this._parents,t,n)}function Ow(e){var t=this._name,n=this._id;typeof e!="function"&&(e=mv(e));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var u=r[o],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,b=je(c,n),m=0,v=d.length;m<v;++m)(h=d[m])&&ur(h,t,n,m,d,b);a.push(d),s.push(c)}return new Ue(a,s,t,n)}var Fw=fn.prototype.constructor;function $w(){return new Fw(this._groups,this._parents)}function zw(e,t){var n,r,i;return function(){var a=Et(this,e),s=(this.style.removeProperty(e),Et(this,e));return a===s?null:a===n&&s===r?i:i=t(n=a,r=s)}}function $v(e){return function(){this.style.removeProperty(e)}}function Bw(e,t,n){var r,i=n+"",a;return function(){var s=Et(this,e);return s===i?null:s===r?a:a=t(r=s,n)}}function Hw(e,t,n){var r,i,a;return function(){var s=Et(this,e),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(e),Et(this,e))),s===u?null:s===r&&u===i?a:(i=u,a=t(r=s,o))}}function Gw(e,t){var n,r,i,a="style."+t,s="end."+a,o;return function(){var u=De(this,e),l=u.on,c=u.value[a]==null?o||(o=$v(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function Vw(e,t,n){var r=(e+="")=="transform"?U_:Fv;return t==null?this.styleTween(e,zw(e,r)).on("end.style."+e,$v(e)):typeof t=="function"?this.styleTween(e,Hw(e,r,Fu(this,"style."+e,t))).each(Gw(this._id,e)):this.styleTween(e,Bw(e,r,t),n).on("end.style."+e,null)}function Uw(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Yw(e,t,n){var r,i;function a(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Uw(e,s,n)),r}return a._value=t,a}function Ww(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Yw(e,t,n??""))}function Xw(e){return function(){this.textContent=e}}function Kw(e){return function(){var t=e(this);this.textContent=t??""}}function Zw(e){return this.tween("text",typeof e=="function"?Kw(Fu(this,"text",e)):Xw(e==null?"":e+""))}function Jw(e){return function(t){this.textContent=e.call(this,t)}}function Qw(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Jw(i)),t}return r._value=e,r}function eN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qw(e))}function tN(){for(var e=this._name,t=this._id,n=zv(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,u,l=0;l<o;++l)if(u=s[l]){var c=je(u,t);ur(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ue(r,this._parents,e,n)}function nN(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},u={value:function(){--i===0&&a()}};n.each(function(){var l=De(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(u)),l.on=t}),i===0&&a()})}var rN=0;function Ue(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zv(){return++rN}var Be=fn.prototype;Ue.prototype={constructor:Ue,select:Lw,selectAll:Ow,selectChild:Be.selectChild,selectChildren:Be.selectChildren,filter:Rw,merge:Iw,selection:$w,transition:tN,call:Be.call,nodes:Be.nodes,node:Be.node,size:Be.size,empty:Be.empty,each:Be.each,on:qw,attr:pw,attrTween:xw,style:Vw,styleTween:Ww,text:Zw,textTween:eN,remove:Dw,tween:ow,delay:ww,duration:Ew,ease:kw,easeVarying:Aw,end:nN,[Symbol.iterator]:Be[Symbol.iterator]};function iN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var aN={time:null,delay:0,duration:250,ease:iN};function sN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function oN(e){var t,n;e instanceof Ue?(t=e._id,e=e._name):(t=zv(),(n=aN).time=Du(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,u,l=0;l<o;++l)(u=s[l])&&ur(u,e,t,l,s,n||sN(u,t));return new Ue(r,this._parents,e,t)}fn.prototype.interrupt=iw;fn.prototype.transition=oN;const Mn=e=>()=>e;function cN(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function He(e,t,n){this.k=e,this.x=t,this.y=n}He.prototype={constructor:He,scale:function(e){return e===1?this:new He(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new He(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lr=new He(1,0,0);Bv.prototype=He.prototype;function Bv(e){for(;!e.__zoom;)if(!(e=e.parentNode))return lr;return e.__zoom}function Br(e){e.stopImmediatePropagation()}function $t(e){e.preventDefault(),e.stopImmediatePropagation()}function uN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function lN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bl(){return this.__zoom||lr}function dN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fN(){return navigator.maxTouchPoints||"ontouchstart"in this}function hN(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function Hv(){var e=uN,t=lN,n=hN,r=dN,i=fN,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,u=$n,l=dn("start","zoom","end"),c,f,d,h=500,b=150,m=0,v=10;function y(C){C.property("__zoom",Bl).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",R).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(C,q,k,M){var z=C.selection?C.selection():C;z.property("__zoom",Bl),C!==z?w(C,q,k,M):z.interrupt().each(function(){S(this,arguments).event(M).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},y.scaleBy=function(C,q,k,M){y.scaleTo(C,function(){var z=this.__zoom.k,L=typeof q=="function"?q.apply(this,arguments):q;return z*L},k,M)},y.scaleTo=function(C,q,k,M){y.transform(C,function(){var z=t.apply(this,arguments),L=this.__zoom,B=k==null?x(z):typeof k=="function"?k.apply(this,arguments):k,G=L.invert(B),F=typeof q=="function"?q.apply(this,arguments):q;return n(g(_(L,F),B,G),z,s)},k,M)},y.translateBy=function(C,q,k,M){y.transform(C,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),s)},null,M)},y.translateTo=function(C,q,k,M,z){y.transform(C,function(){var L=t.apply(this,arguments),B=this.__zoom,G=M==null?x(L):typeof M=="function"?M.apply(this,arguments):M;return n(lr.translate(G[0],G[1]).scale(B.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof k=="function"?-k.apply(this,arguments):-k),L,s)},M,z)};function _(C,q){return q=Math.max(a[0],Math.min(a[1],q)),q===C.k?C:new He(q,C.x,C.y)}function g(C,q,k){var M=q[0]-k[0]*C.k,z=q[1]-k[1]*C.k;return M===C.x&&z===C.y?C:new He(C.k,M,z)}function x(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function w(C,q,k,M){C.on("start.zoom",function(){S(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(M).end()}).tween("zoom",function(){var z=this,L=arguments,B=S(z,L).event(M),G=t.apply(z,L),F=k==null?x(G):typeof k=="function"?k.apply(z,L):k,V=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),I=z.__zoom,D=typeof q=="function"?q.apply(z,L):q,$=u(I.invert(F).concat(V/I.k),D.invert(F).concat(V/D.k));return function(H){if(H===1)H=D;else{var U=$(H),Y=V/U[2];H=new He(Y,F[0]-U[0]*Y,F[1]-U[1]*Y)}B.zoom(null,H)}})}function S(C,q,k){return!k&&C.__zooming||new N(C,q)}function N(C,q){this.that=C,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,q),this.taps=0}N.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,q){return this.mouse&&C!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var q=ye(this.that).datum();l.call(C,this.that,new cN(C,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:l}),q)}};function E(C,...q){if(!e.apply(this,arguments))return;var k=S(this,q).event(C),M=this.__zoom,z=Math.max(a[0],Math.min(a[1],M.k*Math.pow(2,r.apply(this,arguments)))),L=Ne(C);if(k.wheel)(k.mouse[0][0]!==L[0]||k.mouse[0][1]!==L[1])&&(k.mouse[1]=M.invert(k.mouse[0]=L)),clearTimeout(k.wheel);else{if(M.k===z)return;k.mouse=[L,M.invert(L)],Hn(this),k.start()}$t(C),k.wheel=setTimeout(B,b),k.zoom("mouse",n(g(_(M,z),k.mouse[0],k.mouse[1]),k.extent,s));function B(){k.wheel=null,k.end()}}function j(C,...q){if(d||!e.apply(this,arguments))return;var k=C.currentTarget,M=S(this,q,!0).event(C),z=ye(C.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",V,!0),L=Ne(C,k),B=C.clientX,G=C.clientY;kv(C.view),Br(C),M.mouse=[L,this.__zoom.invert(L)],Hn(this),M.start();function F(I){if($t(I),!M.moved){var D=I.clientX-B,$=I.clientY-G;M.moved=D*D+$*$>m}M.event(I).zoom("mouse",n(g(M.that.__zoom,M.mouse[0]=Ne(I,k),M.mouse[1]),M.extent,s))}function V(I){z.on("mousemove.zoom mouseup.zoom",null),jv(I.view,M.moved),$t(I),M.event(I).end()}}function R(C,...q){if(e.apply(this,arguments)){var k=this.__zoom,M=Ne(C.changedTouches?C.changedTouches[0]:C,this),z=k.invert(M),L=k.k*(C.shiftKey?.5:2),B=n(g(_(k,L),M,z),t.apply(this,q),s);$t(C),o>0?ye(this).transition().duration(o).call(w,B,M,C):ye(this).call(y.transform,B,M,C)}}function A(C,...q){if(e.apply(this,arguments)){var k=C.touches,M=k.length,z=S(this,q,C.changedTouches.length===M).event(C),L,B,G,F;for(Br(C),B=0;B<M;++B)G=k[B],F=Ne(G,this),F=[F,this.__zoom.invert(F),G.identifier],z.touch0?!z.touch1&&z.touch0[2]!==F[2]&&(z.touch1=F,z.taps=0):(z.touch0=F,L=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),L&&(z.taps<2&&(f=F[0],c=setTimeout(function(){c=null},h)),Hn(this),z.start())}}function P(C,...q){if(this.__zooming){var k=S(this,q).event(C),M=C.changedTouches,z=M.length,L,B,G,F;for($t(C),L=0;L<z;++L)B=M[L],G=Ne(B,this),k.touch0&&k.touch0[2]===B.identifier?k.touch0[0]=G:k.touch1&&k.touch1[2]===B.identifier&&(k.touch1[0]=G);if(B=k.that.__zoom,k.touch1){var V=k.touch0[0],I=k.touch0[1],D=k.touch1[0],$=k.touch1[1],H=(H=D[0]-V[0])*H+(H=D[1]-V[1])*H,U=(U=$[0]-I[0])*U+(U=$[1]-I[1])*U;B=_(B,Math.sqrt(H/U)),G=[(V[0]+D[0])/2,(V[1]+D[1])/2],F=[(I[0]+$[0])/2,(I[1]+$[1])/2]}else if(k.touch0)G=k.touch0[0],F=k.touch0[1];else return;k.zoom("touch",n(g(B,G,F),k.extent,s))}}function O(C,...q){if(this.__zooming){var k=S(this,q).event(C),M=C.changedTouches,z=M.length,L,B;for(Br(C),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),L=0;L<z;++L)B=M[L],k.touch0&&k.touch0[2]===B.identifier?delete k.touch0:k.touch1&&k.touch1[2]===B.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(B=Ne(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<v)){var G=ye(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return y.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:Mn(+C),y):r},y.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Mn(!!C),y):e},y.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:Mn(!!C),y):i},y.extent=function(C){return arguments.length?(t=typeof C=="function"?C:Mn([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),y):t},y.scaleExtent=function(C){return arguments.length?(a[0]=+C[0],a[1]=+C[1],y):[a[0],a[1]]},y.translateExtent=function(C){return arguments.length?(s[0][0]=+C[0][0],s[1][0]=+C[1][0],s[0][1]=+C[0][1],s[1][1]=+C[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(C){return arguments.length?(n=C,y):n},y.duration=function(C){return arguments.length?(o=+C,y):o},y.interpolate=function(C){return arguments.length?(u=C,y):u},y.on=function(){var C=l.on.apply(l,arguments);return C===l?y:C},y.clickDistance=function(C){return arguments.length?(m=(C=+C)*C,y):Math.sqrt(m)},y.tapDistance=function(C){return arguments.length?(v=+C,y):v},y}const Pe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},en=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Gv=["Enter"," ","Escape"],Vv={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ft;(function(e){e.Strict="strict",e.Loose="loose"})(ft||(ft={}));var ut;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ut||(ut={}));var tn;(function(e){e.Partial="partial",e.Full="full"})(tn||(tn={}));const Uv={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var nt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(nt||(nt={}));var Jn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Jn||(Jn={}));var ee;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ee||(ee={}));const Hl={[ee.Left]:ee.Right,[ee.Right]:ee.Left,[ee.Top]:ee.Bottom,[ee.Bottom]:ee.Top};function Yv(e){return e===null?null:e?"valid":"invalid"}const Wv=e=>"id"in e&&"source"in e&&"target"in e,pN=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),$u=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),pn=(e,t=[0,0])=>{const{width:n,height:r}=We(e),i=e.origin??t,a=n*i[0],s=r*i[1];return{x:e.position.x-a,y:e.position.y-s}},gN=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const a=typeof i=="string";let s=!t.nodeLookup&&!a?i:void 0;t.nodeLookup&&(s=a?t.nodeLookup.get(i):$u(i)?i:t.nodeLookup.get(i.id));const o=s?Qn(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return dr(r,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return fr(n)},gn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Qn(r);n=dr(n,i)}}),fr(n)},zu=(e,t,[n,r,i]=[0,0,1],a=!1,s=!1)=>{const o={...mn(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const l of e.values()){const{measured:c,selectable:f=!0,hidden:d=!1}=l;if(s&&!f||d)continue;const h=c.width??l.width??l.initialWidth??null,b=c.height??l.height??l.initialHeight??null,m=nn(o,jt(l)),v=(h??0)*(b??0),y=a&&m>0;(!l.internals.handleBounds||y||m>=v||l.dragging)&&u.push(l)}return u},mN=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function vN(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function yN({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:a},s){if(e.size===0)return Promise.resolve(!0);const o=vN(e,s),u=gn(o),l=Bu(u,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??a,(s==null?void 0:s.padding)??.1);return await r.setViewport(l,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function Xv({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:a}){const s=n.get(e),o=s.parentId?n.get(s.parentId):void 0,{x:u,y:l}=o?o.internals.positionAbsolute:{x:0,y:0},c=s.origin??r;let f=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!o)a==null||a("005",Pe.error005());else{const h=o.measured.width,b=o.measured.height;h&&b&&(f=[[u,l],[u+h,l+b]])}else o&&At(s.extent)&&(f=[[s.extent[0][0]+u,s.extent[0][1]+l],[s.extent[1][0]+u,s.extent[1][1]+l]]);const d=At(f)?ht(t,f,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(a==null||a("015",Pe.error015())),{position:{x:d.x-u+(s.measured.width??0)*c[0],y:d.y-l+(s.measured.height??0)*c[1]},positionAbsolute:d}}async function xN({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const a=new Set(e.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const h=a.has(d.id),b=!h&&d.parentId&&s.find(m=>m.id===d.parentId);(h||b)&&s.push(d)}const o=new Set(t.map(d=>d.id)),u=r.filter(d=>d.deletable!==!1),c=mN(s,u);for(const d of u)o.has(d.id)&&!c.find(b=>b.id===d.id)&&c.push(d);if(!i)return{edges:c,nodes:s};const f=await i({nodes:s,edges:c});return typeof f=="boolean"?f?{edges:c,nodes:s}:{edges:[],nodes:[]}:f}const kt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ht=(e={x:0,y:0},t,n)=>({x:kt(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:kt(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Kv(e,t,n){const{width:r,height:i}=We(n),{x:a,y:s}=n.internals.positionAbsolute;return ht(e,[[a,s],[a+r,s+i]],t)}const Gl=(e,t,n)=>e<t?kt(Math.abs(e-t),1,t)/t:e>n?-kt(Math.abs(e-n),1,t)/t:0,Zv=(e,t,n=15,r=40)=>{const i=Gl(e.x,r,t.width-r)*n,a=Gl(e.y,r,t.height-r)*n;return[i,a]},dr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Nu=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),fr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),jt=(e,t=[0,0])=>{var i,a;const{x:n,y:r}=$u(e)?e.internals.positionAbsolute:pn(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},Qn=(e,t=[0,0])=>{var i,a;const{x:n,y:r}=$u(e)?e.internals.positionAbsolute:pn(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},Jv=(e,t)=>fr(dr(Nu(e),Nu(t))),nn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Vl=e=>Ce(e.width)&&Ce(e.height)&&Ce(e.x)&&Ce(e.y),Ce=e=>!isNaN(e)&&isFinite(e),bN=(e,t)=>{},hr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),mn=({x:e,y:t},[n,r,i],a=!1,s=[1,1])=>{const o={x:(e-n)/i,y:(t-r)/i};return a?hr(o,s):o},er=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function bt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function _N(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=bt(e,n),i=bt(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=bt(e.top??e.y??0,n),i=bt(e.bottom??e.y??0,n),a=bt(e.left??e.x??0,t),s=bt(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:a,x:a+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function wN(e,t,n,r,i,a){const{x:s,y:o}=er(e,[t,n,r]),{x:u,y:l}=er({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-u,f=a-l;return{left:Math.floor(s),top:Math.floor(o),right:Math.floor(c),bottom:Math.floor(f)}}const Bu=(e,t,n,r,i,a)=>{const s=_N(a,t,n),o=(t-s.x)/e.width,u=(n-s.y)/e.height,l=Math.min(o,u),c=kt(l,r,i),f=e.x+e.width/2,d=e.y+e.height/2,h=t/2-f*c,b=n/2-d*c,m=wN(e,h,b,c,t,n),v={left:Math.min(m.left-s.left,0),top:Math.min(m.top-s.top,0),right:Math.min(m.right-s.right,0),bottom:Math.min(m.bottom-s.bottom,0)};return{x:h-v.left+v.right,y:b-v.top+v.bottom,zoom:c}},tr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function At(e){return e!==void 0&&e!=="parent"}function We(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Qv(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function e0(e,t={width:0,height:0},n,r,i){const a={...e},s=r.get(n);if(s){const o=s.origin||i;a.x+=s.internals.positionAbsolute.x-(t.width??0)*o[0],a.y+=s.internals.positionAbsolute.y-(t.height??0)*o[1]}return a}function Ul(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function NN(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function SN(e){return{...Vv,...e||{}}}function Xt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:a,y:s}=Te(e),o=mn({x:a-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:u,y:l}=n?hr(o,t):o;return{xSnapped:u,ySnapped:l,...o}}const Hu=e=>({width:e.offsetWidth,height:e.offsetHeight}),t0=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},EN=["INPUT","SELECT","TEXTAREA"];function n0(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:EN.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const r0=e=>"clientX"in e,Te=(e,t)=>{var a,s;const n=r0(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Yl=(e,t,n,r,i)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(s=>{const o=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(o.left-n.left)/r,y:(o.top-n.top)/r,...Hu(s)}})};function i0({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:o}){const u=e*.125+i*.375+s*.375+n*.125,l=t*.125+a*.375+o*.375+r*.125,c=Math.abs(u-e),f=Math.abs(l-t);return[u,l,c,f]}function Tn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Wl({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case ee.Left:return[t-Tn(t-r,a),n];case ee.Right:return[t+Tn(r-t,a),n];case ee.Top:return[t,n-Tn(n-i,a)];case ee.Bottom:return[t,n+Tn(i-n,a)]}}function a0({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:i,targetPosition:a=ee.Top,curvature:s=.25}){const[o,u]=Wl({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[l,c]=Wl({pos:a,x1:r,y1:i,x2:e,y2:t,c:s}),[f,d,h,b]=i0({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${e},${t} C${o},${u} ${l},${c} ${r},${i}`,f,d,h,b]}function s0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,s=Math.abs(r-t)/2,o=r<t?r+s:r-s;return[a,o,i,s]}function CN({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const a=i&&n?1e3:0,s=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return a+s}function kN({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const a=dr(Qn(e),Qn(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return nn(s,fr(a))>0}const jN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,AN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),o0=(e,t)=>{if(!e.source||!e.target)return t;let n;return Wv(e)?n={...e}:n={...e,id:jN(e)},AN(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function c0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,a,s,o]=s0({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,s,o]}const Xl={[ee.Left]:{x:-1,y:0},[ee.Right]:{x:1,y:0},[ee.Top]:{x:0,y:-1},[ee.Bottom]:{x:0,y:1}},RN=({source:e,sourcePosition:t=ee.Bottom,target:n})=>t===ee.Left||t===ee.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Kl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function IN({source:e,sourcePosition:t=ee.Bottom,target:n,targetPosition:r=ee.Top,center:i,offset:a,stepPosition:s}){const o=Xl[t],u=Xl[r],l={x:e.x+o.x*a,y:e.y+o.y*a},c={x:n.x+u.x*a,y:n.y+u.y*a},f=RN({source:l,sourcePosition:t,target:c}),d=f.x!==0?"x":"y",h=f[d];let b=[],m,v;const y={x:0,y:0},_={x:0,y:0},[,,g,x]=s0({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*u[d]===-1){d==="x"?(m=i.x??l.x+(c.x-l.x)*s,v=i.y??(l.y+c.y)/2):(m=i.x??(l.x+c.x)/2,v=i.y??l.y+(c.y-l.y)*s);const S=[{x:m,y:l.y},{x:m,y:c.y}],N=[{x:l.x,y:v},{x:c.x,y:v}];o[d]===h?b=d==="x"?S:N:b=d==="x"?N:S}else{const S=[{x:l.x,y:c.y}],N=[{x:c.x,y:l.y}];if(d==="x"?b=o.x===h?N:S:b=o.y===h?S:N,t===r){const P=Math.abs(e[d]-n[d]);if(P<=a){const O=Math.min(a-1,a-P);o[d]===h?y[d]=(l[d]>e[d]?-1:1)*O:_[d]=(c[d]>n[d]?-1:1)*O}}if(t!==r){const P=d==="x"?"y":"x",O=o[d]===u[P],C=l[P]>c[P],q=l[P]<c[P];(o[d]===1&&(!O&&C||O&&q)||o[d]!==1&&(!O&&q||O&&C))&&(b=d==="x"?S:N)}const E={x:l.x+y.x,y:l.y+y.y},j={x:c.x+_.x,y:c.y+_.y},R=Math.max(Math.abs(E.x-b[0].x),Math.abs(j.x-b[0].x)),A=Math.max(Math.abs(E.y-b[0].y),Math.abs(j.y-b[0].y));R>=A?(m=(E.x+j.x)/2,v=b[0].y):(m=b[0].x,v=(E.y+j.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...b,{x:c.x+_.x,y:c.y+_.y},n],m,v,g,x]}function MN(e,t,n,r){const i=Math.min(Kl(e,t)/2,Kl(t,n)/2,r),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s){const l=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+i*l},${s}Q ${a},${s} ${a},${s+i*c}`}const o=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${a},${s+i*u}Q ${a},${s} ${a+i*o},${s}`}function Su({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:i,targetPosition:a=ee.Top,borderRadius:s=5,centerX:o,centerY:u,offset:l=20,stepPosition:c=.5}){const[f,d,h,b,m]=IN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:o,y:u},offset:l,stepPosition:c});return[f.reduce((y,_,g)=>{let x="";return g>0&&g<f.length-1?x=MN(f[g-1],_,f[g+1],s):x=`${g===0?"M":"L"}${_.x} ${_.y}`,y+=x,y},""),d,h,b,m]}function Zl(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function TN(e){var f;const{sourceNode:t,targetNode:n}=e;if(!Zl(t)||!Zl(n))return null;const r=t.internals.handleBounds||Jl(t.handles),i=n.internals.handleBounds||Jl(n.handles),a=Ql((r==null?void 0:r.source)??[],e.sourceHandle),s=Ql(e.connectionMode===ft.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!a||!s)return(f=e.onError)==null||f.call(e,"008",Pe.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const o=(a==null?void 0:a.position)||ee.Bottom,u=(s==null?void 0:s.position)||ee.Top,l=rn(t,a,o),c=rn(n,s,u);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y,sourcePosition:o,targetPosition:u}}function Jl(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function rn(e,t,n=ee.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:o}=t??We(e);if(r)return{x:i+s/2,y:a+o/2};switch((t==null?void 0:t.position)??n){case ee.Top:return{x:i+s/2,y:a};case ee.Right:return{x:i+s,y:a+o/2};case ee.Bottom:return{x:i+s/2,y:a+o};case ee.Left:return{x:i,y:a+o/2}}}function Ql(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Eu(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function qN(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const a=new Set;return e.reduce((s,o)=>([o.markerStart||r,o.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const l=Eu(u,t);a.has(l)||(s.push({id:l,color:u.color||n,...u}),a.add(l))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))}const Gu={nodeOrigin:[0,0],nodeExtent:en,elevateNodesOnSelect:!0,defaults:{}},PN={...Gu,checkEquality:!0};function Vu(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function DN(e,t,n){const r=Vu(Gu,n);for(const i of e.values())if(i.parentId)Uu(i,e,t,r);else{const a=pn(i,r.nodeOrigin),s=At(i.extent)?i.extent:r.nodeExtent,o=ht(a,s,We(i));i.internals.positionAbsolute=o}}function Cu(e,t,n,r){var u,l;const i=Vu(PN,r);let a=e.length>0;const s=new Map(t),o=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let f=s.get(c.id);if(i.checkEquality&&c===(f==null?void 0:f.internals.userNode))t.set(c.id,f);else{const d=pn(c,i.nodeOrigin),h=At(c.extent)?c.extent:i.nodeExtent,b=ht(d,h,We(c));f={...i.defaults,...c,measured:{width:(u=c.measured)==null?void 0:u.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:b,handleBounds:c.measured?f==null?void 0:f.internals.handleBounds:void 0,z:u0(c,o),userNode:c}},t.set(c.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(a=!1),c.parentId&&Uu(f,t,n,r)}return a}function LN(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Uu(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:a,nodeExtent:s}=Vu(Gu,r),o=e.parentId,u=t.get(o);if(!u){console.warn(`Parent node ${o} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}LN(e,n);const l=i?1e3:0,{x:c,y:f,z:d}=ON(e,u,a,s,l),{positionAbsolute:h}=e.internals,b=c!==h.x||f!==h.y;(b||d!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:b?{x:c,y:f}:h,z:d}})}function u0(e,t){return(Ce(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function ON(e,t,n,r,i){const{x:a,y:s}=t.internals.positionAbsolute,o=We(e),u=pn(e,n),l=At(e.extent)?ht(u,e.extent,o):u;let c=ht({x:a+l.x,y:s+l.y},r,o);e.extent==="parent"&&(c=Kv(c,o,t));const f=u0(e,i),d=t.internals.z??0;return{x:c.x,y:c.y,z:d>=f?d+1:f}}function Yu(e,t,n,r=[0,0]){var s;const i=[],a=new Map;for(const o of e){const u=t.get(o.parentId);if(!u)continue;const l=((s=a.get(o.parentId))==null?void 0:s.expandedRect)??jt(u),c=Jv(l,o.rect);a.set(o.parentId,{expandedRect:c,parent:u})}return a.size>0&&a.forEach(({expandedRect:o,parent:u},l)=>{var g;const c=u.internals.positionAbsolute,f=We(u),d=u.origin??r,h=o.x<c.x?Math.round(Math.abs(c.x-o.x)):0,b=o.y<c.y?Math.round(Math.abs(c.y-o.y)):0,m=Math.max(f.width,Math.round(o.width)),v=Math.max(f.height,Math.round(o.height)),y=(m-f.width)*d[0],_=(v-f.height)*d[1];(h>0||b>0||y||_)&&(i.push({id:l,type:"position",position:{x:u.position.x-h+y,y:u.position.y-b+_}}),(g=n.get(l))==null||g.forEach(x=>{e.some(w=>w.id===x.id)||i.push({id:x.id,type:"position",position:{x:x.position.x+h,y:x.position.y+b}})})),(f.width<o.width||f.height<o.height||h||b)&&i.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(h?d[0]*h-y:0),height:v+(b?d[1]*b-_:0)}})}),i}function FN(e,t,n,r,i,a){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let o=!1;if(!s)return{changes:[],updatedInternals:o};const u=[],l=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(l.transform),f=[];for(const d of e.values()){const h=t.get(d.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),o=!0;continue}const b=Hu(d.nodeElement),m=h.measured.width!==b.width||h.measured.height!==b.height;if(!!(b.width&&b.height&&(m||!h.internals.handleBounds||d.force))){const y=d.nodeElement.getBoundingClientRect(),_=At(h.extent)?h.extent:a;let{positionAbsolute:g}=h.internals;h.parentId&&h.extent==="parent"?g=Kv(g,b,t.get(h.parentId)):_&&(g=ht(g,_,b));const x={...h,measured:b,internals:{...h.internals,positionAbsolute:g,handleBounds:{source:Yl("source",d.nodeElement,y,c,h.id),target:Yl("target",d.nodeElement,y,c,h.id)}}};t.set(h.id,x),h.parentId&&Uu(x,t,n,{nodeOrigin:i}),o=!0,m&&(u.push({id:h.id,type:"dimensions",dimensions:b}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:jt(x,i)}))}}if(f.length>0){const d=Yu(f,t,n,i);u.push(...d)}return{changes:u,updatedInternals:o}}async function $N({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,a]],r),o=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(o)}function ed(e,t,n,r,i,a){let s=i;const o=r.get(s)||new Map;r.set(s,o.set(n,t)),s=`${i}-${e}`;const u=r.get(s)||new Map;if(r.set(s,u.set(n,t)),a){s=`${i}-${e}-${a}`;const l=r.get(s)||new Map;r.set(s,l.set(n,t))}}function l0(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:a,sourceHandle:s=null,targetHandle:o=null}=r,u={edgeId:r.id,source:i,target:a,sourceHandle:s,targetHandle:o},l=`${i}-${s}--${a}-${o}`,c=`${a}-${o}--${i}-${s}`;ed("source",u,c,e,i,s),ed("target",u,l,e,a,o),t.set(r.id,r)}}function d0(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:d0(n,t):!1}function td(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function zN(e,t,n,r){const i=new Map;for(const[a,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!d0(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const o=e.get(a);o&&i.set(a,{id:a,position:o.position||{x:0,y:0},distance:{x:n.x-o.internals.positionAbsolute.x,y:n.y-o.internals.positionAbsolute.y},extent:o.extent,parentId:o.parentId,origin:o.origin,expandParent:o.expandParent,internals:{positionAbsolute:o.internals.positionAbsolute||{x:0,y:0}},measured:{width:o.measured.width??0,height:o.measured.height??0}})}return i}function Hr({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,o,u;const i=[];for(const[l,c]of t){const f=(s=n.get(l))==null?void 0:s.internals.userNode;f&&i.push({...f,position:c.position,dragging:r})}if(!e)return[i[0],i];const a=(o=n.get(e))==null?void 0:o.internals.userNode;return[a?{...a,position:((u=t.get(e))==null?void 0:u.position)||a.position,dragging:r}:i[0],i]}function BN({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let a={x:null,y:null},s=0,o=new Map,u=!1,l={x:0,y:0},c=null,f=!1,d=null,h=!1,b=!1;function m({noDragClassName:y,handleSelector:_,domNode:g,isSelectable:x,nodeId:w,nodeClickDistance:S=0}){d=ye(g);function N({x:A,y:P},O){const{nodeLookup:C,nodeExtent:q,snapGrid:k,snapToGrid:M,nodeOrigin:z,onNodeDrag:L,onSelectionDrag:B,onError:G,updateNodePositions:F}=t();a={x:A,y:P};let V=!1,I={x:0,y:0,x2:0,y2:0};if(o.size>1&&q){const D=gn(o);I=Nu(D)}for(const[D,$]of o){if(!C.has(D))continue;let H={x:A-$.distance.x,y:P-$.distance.y};M&&(H=hr(H,k));let U=[[q[0][0],q[0][1]],[q[1][0],q[1][1]]];if(o.size>1&&q&&!$.extent){const{positionAbsolute:Q}=$.internals,J=Q.x-I.x+q[0][0],Z=Q.x+$.measured.width-I.x2+q[1][0],X=Q.y-I.y+q[0][1],W=Q.y+$.measured.height-I.y2+q[1][1];U=[[J,X],[Z,W]]}const{position:Y,positionAbsolute:K}=Xv({nodeId:D,nextPosition:H,nodeLookup:C,nodeExtent:U,nodeOrigin:z,onError:G});V=V||$.position.x!==Y.x||$.position.y!==Y.y,$.position=Y,$.internals.positionAbsolute=K}if(b=b||V,!!V&&(F(o,!0),O&&(r||L||!w&&B))){const[D,$]=Hr({nodeId:w,dragItems:o,nodeLookup:C});r==null||r(O,o,D,$),L==null||L(O,D,$),w||B==null||B(O,$)}}async function E(){if(!c)return;const{transform:A,panBy:P,autoPanSpeed:O,autoPanOnNodeDrag:C}=t();if(!C){u=!1,cancelAnimationFrame(s);return}const[q,k]=Zv(l,c,O);(q!==0||k!==0)&&(a.x=(a.x??0)-q/A[2],a.y=(a.y??0)-k/A[2],await P({x:q,y:k})&&N(a,null)),s=requestAnimationFrame(E)}function j(A){var V;const{nodeLookup:P,multiSelectionActive:O,nodesDraggable:C,transform:q,snapGrid:k,snapToGrid:M,selectNodesOnDrag:z,onNodeDragStart:L,onSelectionDragStart:B,unselectNodesAndEdges:G}=t();f=!0,(!z||!x)&&!O&&w&&((V=P.get(w))!=null&&V.selected||G()),x&&z&&w&&(e==null||e(w));const F=Xt(A.sourceEvent,{transform:q,snapGrid:k,snapToGrid:M,containerBounds:c});if(a=F,o=zN(P,C,F,w),o.size>0&&(n||L||!w&&B)){const[I,D]=Hr({nodeId:w,dragItems:o,nodeLookup:P});n==null||n(A.sourceEvent,o,I,D),L==null||L(A.sourceEvent,I,D),w||B==null||B(A.sourceEvent,D)}}const R=Av().clickDistance(S).on("start",A=>{const{domNode:P,nodeDragThreshold:O,transform:C,snapGrid:q,snapToGrid:k}=t();c=(P==null?void 0:P.getBoundingClientRect())||null,h=!1,b=!1,O===0&&j(A),a=Xt(A.sourceEvent,{transform:C,snapGrid:q,snapToGrid:k,containerBounds:c}),l=Te(A.sourceEvent,c)}).on("drag",A=>{const{autoPanOnNodeDrag:P,transform:O,snapGrid:C,snapToGrid:q,nodeDragThreshold:k,nodeLookup:M}=t(),z=Xt(A.sourceEvent,{transform:O,snapGrid:C,snapToGrid:q,containerBounds:c});if((A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1||w&&!M.has(w))&&(h=!0),!h){if(!u&&P&&f&&(u=!0,E()),!f){const L=z.xSnapped-(a.x??0),B=z.ySnapped-(a.y??0);Math.sqrt(L*L+B*B)>k&&j(A)}(a.x!==z.xSnapped||a.y!==z.ySnapped)&&o&&f&&(l=Te(A.sourceEvent,c),N(z,A.sourceEvent))}}).on("end",A=>{if(!(!f||h)&&(u=!1,f=!1,cancelAnimationFrame(s),o.size>0)){const{nodeLookup:P,updateNodePositions:O,onNodeDragStop:C,onSelectionDragStop:q}=t();if(b&&(O(o,!1),b=!1),i||C||!w&&q){const[k,M]=Hr({nodeId:w,dragItems:o,nodeLookup:P,dragging:!1});i==null||i(A.sourceEvent,o,k,M),C==null||C(A.sourceEvent,k,M),w||q==null||q(A.sourceEvent,M)}}}).filter(A=>{const P=A.target;return!A.button&&(!y||!td(P,`.${y}`,g))&&(!_||td(P,_,g))});d.call(R)}function v(){d==null||d.on(".drag",null)}return{update:m,destroy:v}}function HN(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())nn(i,jt(a))>0&&r.push(a);return r}const GN=250;function VN(e,t,n,r){var o,u;let i=[],a=1/0;const s=HN(e,n,t+GN);for(const l of s){const c=[...((o=l.internals.handleBounds)==null?void 0:o.source)??[],...((u=l.internals.handleBounds)==null?void 0:u.target)??[]];for(const f of c){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:d,y:h}=rn(l,f,f.position,!0),b=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(h-e.y,2));b>t||(b<a?(i=[{...f,x:d,y:h}],a=b):b===a&&i.push({...f,x:d,y:h}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(c=>c.type===l)??i[0]}return i[0]}function f0(e,t,n,r,i,a=!1){var l,c,f;const s=r.get(e);if(!s)return null;const o=i==="strict"?(l=s.internals.handleBounds)==null?void 0:l[t]:[...((c=s.internals.handleBounds)==null?void 0:c.source)??[],...((f=s.internals.handleBounds)==null?void 0:f.target)??[]],u=(n?o==null?void 0:o.find(d=>d.id===n):o==null?void 0:o[0])??null;return u&&a?{...u,...rn(s,u,u.position,!0)}:u}function h0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function UN(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const p0=()=>!0;function YN(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:a,isTarget:s,domNode:o,nodeLookup:u,lib:l,autoPanOnConnect:c,flowId:f,panBy:d,cancelConnection:h,onConnectStart:b,onConnect:m,onConnectEnd:v,isValidConnection:y=p0,onReconnectEnd:_,updateConnection:g,getTransform:x,getFromHandle:w,autoPanSpeed:S,dragThreshold:N=1}){const E=t0(e.target);let j=0,R;const{x:A,y:P}=Te(e),O=E==null?void 0:E.elementFromPoint(A,P),C=h0(a,O),q=o==null?void 0:o.getBoundingClientRect();let k=!1;if(!q||!C)return;const M=f0(i,C,r,u,t);if(!M)return;let z=Te(e,q),L=!1,B=null,G=!1,F=null;function V(){if(!c||!q)return;const[Q,J]=Zv(z,q,S);d({x:Q,y:J}),j=requestAnimationFrame(V)}const I={...M,nodeId:i,type:C,position:M.position},D=u.get(i);let H={inProgress:!0,isValid:null,from:rn(D,I,ee.Left,!0),fromHandle:I,fromPosition:I.position,fromNode:D,to:z,toHandle:null,toPosition:Hl[I.position],toNode:null};function U(){k=!0,g(H),b==null||b(e,{nodeId:i,handleId:r,handleType:C})}N===0&&U();function Y(Q){if(!k){const{x:W,y:ie}=Te(Q),te=W-A,ve=ie-P;if(!(te*te+ve*ve>N*N))return;U()}if(!w()||!I){K(Q);return}const J=x();z=Te(Q,q),R=VN(mn(z,J,!1,[1,1]),n,u,I),L||(V(),L=!0);const Z=g0(Q,{handle:R,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:y,doc:E,lib:l,flowId:f,nodeLookup:u});F=Z.handleDomNode,B=Z.connection,G=UN(!!R,Z.isValid);const X={...H,isValid:G,to:Z.toHandle&&G?er({x:Z.toHandle.x,y:Z.toHandle.y},J):z,toHandle:Z.toHandle,toPosition:G&&Z.toHandle?Z.toHandle.position:Hl[I.position],toNode:Z.toHandle?u.get(Z.toHandle.nodeId):null};G&&R&&H.toHandle&&X.toHandle&&H.toHandle.type===X.toHandle.type&&H.toHandle.nodeId===X.toHandle.nodeId&&H.toHandle.id===X.toHandle.id&&H.to.x===X.to.x&&H.to.y===X.to.y||(g(X),H=X)}function K(Q){if(k){(R||F)&&B&&G&&(m==null||m(B));const{inProgress:J,...Z}=H,X={...Z,toPosition:H.toHandle?H.toPosition:null};v==null||v(Q,X),a&&(_==null||_(Q,X))}h(),cancelAnimationFrame(j),L=!1,G=!1,B=null,F=null,E.removeEventListener("mousemove",Y),E.removeEventListener("mouseup",K),E.removeEventListener("touchmove",Y),E.removeEventListener("touchend",K)}E.addEventListener("mousemove",Y),E.addEventListener("mouseup",K),E.addEventListener("touchmove",Y),E.addEventListener("touchend",K)}function g0(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:a,doc:s,lib:o,flowId:u,isValidConnection:l=p0,nodeLookup:c}){const f=a==="target",d=t?s.querySelector(`.${o}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:b}=Te(e),m=s.elementFromPoint(h,b),v=m!=null&&m.classList.contains(`${o}-flow__handle`)?m:d,y={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const _=h0(void 0,v),g=v.getAttribute("data-nodeid"),x=v.getAttribute("data-handleid"),w=v.classList.contains("connectable"),S=v.classList.contains("connectableend");if(!g||!_)return y;const N={source:f?g:r,sourceHandle:f?x:i,target:f?r:g,targetHandle:f?i:x};y.connection=N;const j=w&&S&&(n===ft.Strict?f&&_==="source"||!f&&_==="target":g!==r||x!==i);y.isValid=j&&l(N),y.toHandle=f0(g,_,x,c,n,!0)}return y}const ku={onPointerDown:YN,isValid:g0};function WN({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=ye(e);function a({translateExtent:o,width:u,height:l,zoomStep:c=10,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const b=g=>{const x=n();if(g.sourceEvent.type!=="wheel"||!t)return;const w=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*c,S=x[2]*Math.pow(2,w);t.scaleTo(S)};let m=[0,0];const v=g=>{(g.sourceEvent.type==="mousedown"||g.sourceEvent.type==="touchstart")&&(m=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY])},y=g=>{const x=n();if(g.sourceEvent.type!=="mousemove"&&g.sourceEvent.type!=="touchmove"||!t)return;const w=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY],S=[w[0]-m[0],w[1]-m[1]];m=w;const N=r()*Math.max(x[2],Math.log(x[2]))*(h?-1:1),E={x:x[0]-S[0]*N,y:x[1]-S[1]*N},j=[[0,0],[u,l]];t.setViewportConstrained({x:E.x,y:E.y,zoom:x[2]},j,o)},_=Hv().on("start",v).on("zoom",f?y:null).on("zoom.wheel",d?b:null);i.call(_,{})}function s(){i.on("zoom",null)}return{update:a,destroy:s,pointer:Ne}}const XN=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,pr=e=>({x:e.x,y:e.y,zoom:e.k}),Gr=({x:e,y:t,zoom:n})=>lr.translate(e,t).scale(n),_t=(e,t)=>e.target.closest(`.${t}`),m0=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),KN=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Vr=(e,t=0,n=KN,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},v0=e=>{const t=e.ctrlKey&&tr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function ZN({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:o,onPanZoom:u,onPanZoomEnd:l}){return c=>{if(_t(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(c.ctrlKey&&s){const v=Ne(c),y=v0(c),_=f*Math.pow(2,y);r.scaleTo(n,_,v,c);return}const d=c.deltaMode===1?20:1;let h=i===ut.Vertical?0:c.deltaX*d,b=i===ut.Horizontal?0:c.deltaY*d;!tr()&&c.shiftKey&&i!==ut.Vertical&&(h=c.deltaY*d,b=0),r.translateBy(n,-(h/f)*a,-(b/f)*a,{internal:!0});const m=pr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,o==null||o(c,m)),e.isPanScrolling&&(u==null||u(c,m),e.panScrollTimeout=setTimeout(()=>{l==null||l(c,m),e.isPanScrolling=!1},150))}}function JN({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const a=r.type==="wheel",s=!t&&a&&!r.ctrlKey,o=_t(r,e);if(r.ctrlKey&&a&&o&&r.preventDefault(),s||o)return null;r.preventDefault(),n.call(this,r,i)}}function QN({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,s,o;if((a=r.sourceEvent)!=null&&a.internal)return;const i=pr(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((o=r.sourceEvent)==null?void 0:o.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function eS({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return a=>{var s,o;e.usedRightMouseButton=!!(n&&m0(t,e.mouseButton??0)),(s=a.sourceEvent)!=null&&s.sync||r([a.transform.x,a.transform.y,a.transform.k]),i&&!((o=a.sourceEvent)!=null&&o.internal)&&(i==null||i(a.sourceEvent,pr(a.transform)))}}function tS({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:a}){return s=>{var o;if(!((o=s.sourceEvent)!=null&&o.internal)&&(e.isZoomingOrPanning=!1,a&&m0(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&XN(e.prevViewport,s.transform))){const u=pr(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},n?150:0)}}}function nS({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:o,noPanClassName:u,lib:l}){return c=>{var b;const f=e||t,d=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(_t(c,`${l}-flow__node`)||_t(c,`${l}-flow__edge`)))return!0;if(!r&&!f&&!i&&!a&&!n||s||_t(c,o)&&c.type==="wheel"||_t(c,u)&&(c.type!=="wheel"||i&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((b=c.touches)==null?void 0:b.length)>1)return c.preventDefault(),!1;if(!f&&!i&&!d&&c.type==="wheel"||!r&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(r)&&!r.includes(c.button)&&c.type==="mousedown")return!1;const h=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function rS({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:u,onDraggingChange:l}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),d=Hv().clickDistance(!Ce(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),h=ye(e).call(d);g({x:a.x,y:a.y,zoom:kt(a.zoom,t,n)},[[0,0],[f.width,f.height]],i);const b=h.on("wheel.zoom"),m=h.on("dblclick.zoom");d.wheelDelta(v0);function v(P,O){return h?new Promise(C=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?Wt:$n).transform(Vr(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>C(!0)),P)}):Promise.resolve(!1)}function y({noWheelClassName:P,noPanClassName:O,onPaneContextMenu:C,userSelectionActive:q,panOnScroll:k,panOnDrag:M,panOnScrollMode:z,panOnScrollSpeed:L,preventScrolling:B,zoomOnPinch:G,zoomOnScroll:F,zoomOnDoubleClick:V,zoomActivationKeyPressed:I,lib:D,onTransformChange:$}){q&&!c.isZoomingOrPanning&&_();const U=k&&!I&&!q?ZN({zoomPanValues:c,noWheelClassName:P,d3Selection:h,d3Zoom:d,panOnScrollMode:z,panOnScrollSpeed:L,zoomOnPinch:G,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:u}):JN({noWheelClassName:P,preventScrolling:B,d3ZoomHandler:b});if(h.on("wheel.zoom",U,{passive:!1}),!q){const K=QN({zoomPanValues:c,onDraggingChange:l,onPanZoomStart:o});d.on("start",K);const Q=eS({zoomPanValues:c,panOnDrag:M,onPaneContextMenu:!!C,onPanZoom:s,onTransformChange:$});d.on("zoom",Q);const J=tS({zoomPanValues:c,panOnDrag:M,panOnScroll:k,onPaneContextMenu:C,onPanZoomEnd:u,onDraggingChange:l});d.on("end",J)}const Y=nS({zoomActivationKeyPressed:I,panOnDrag:M,zoomOnScroll:F,panOnScroll:k,zoomOnDoubleClick:V,zoomOnPinch:G,userSelectionActive:q,noPanClassName:O,noWheelClassName:P,lib:D});d.filter(Y),V?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)}function _(){d.on("zoom",null)}async function g(P,O,C){const q=Gr(P),k=d==null?void 0:d.constrain()(q,O,C);return k&&await v(k),new Promise(M=>M(k))}async function x(P,O){const C=Gr(P);return await v(C,O),new Promise(q=>q(C))}function w(P){if(h){const O=Gr(P),C=h.property("__zoom");(C.k!==P.zoom||C.x!==P.x||C.y!==P.y)&&(d==null||d.transform(h,O,null,{sync:!0}))}}function S(){const P=h?Bv(h.node()):{x:0,y:0,k:1};return{x:P.x,y:P.y,zoom:P.k}}function N(P,O){return h?new Promise(C=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?Wt:$n).scaleTo(Vr(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>C(!0)),P)}):Promise.resolve(!1)}function E(P,O){return h?new Promise(C=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?Wt:$n).scaleBy(Vr(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>C(!0)),P)}):Promise.resolve(!1)}function j(P){d==null||d.scaleExtent(P)}function R(P){d==null||d.translateExtent(P)}function A(P){const O=!Ce(P)||P<0?0:P;d==null||d.clickDistance(O)}return{update:y,destroy:_,setViewport:x,setViewportConstrained:g,getViewport:S,scaleTo:N,scaleBy:E,setScaleExtent:j,setTranslateExtent:R,syncViewport:w,setClickDistance:A}}var Rt;(function(e){e.Line="line",e.Handle="handle"})(Rt||(Rt={}));function iS({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:a}){const s=e-t,o=n-r,u=[s>0?1:s<0?-1:0,o>0?1:o<0?-1:0];return s&&i&&(u[0]=u[0]*-1),o&&a&&(u[1]=u[1]*-1),u}function aS(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function et(e,t){return Math.max(0,t-e)}function tt(e,t){return Math.max(0,e-t)}function qn(e,t,n){return Math.max(0,t-e,e-n)}function nd(e,t){return e?!t:t}function sS(e,t,n,r,i,a,s,o){let{affectsX:u,affectsY:l}=t;const{isHorizontal:c,isVertical:f}=t,d=c&&f,{xSnapped:h,ySnapped:b}=n,{minWidth:m,maxWidth:v,minHeight:y,maxHeight:_}=r,{x:g,y:x,width:w,height:S,aspectRatio:N}=e;let E=Math.floor(c?h-e.pointerX:0),j=Math.floor(f?b-e.pointerY:0);const R=w+(u?-E:E),A=S+(l?-j:j),P=-a[0]*w,O=-a[1]*S;let C=qn(R,m,v),q=qn(A,y,_);if(s){let z=0,L=0;u&&E<0?z=et(g+E+P,s[0][0]):!u&&E>0&&(z=tt(g+R+P,s[1][0])),l&&j<0?L=et(x+j+O,s[0][1]):!l&&j>0&&(L=tt(x+A+O,s[1][1])),C=Math.max(C,z),q=Math.max(q,L)}if(o){let z=0,L=0;u&&E>0?z=tt(g+E,o[0][0]):!u&&E<0&&(z=et(g+R,o[1][0])),l&&j>0?L=tt(x+j,o[0][1]):!l&&j<0&&(L=et(x+A,o[1][1])),C=Math.max(C,z),q=Math.max(q,L)}if(i){if(c){const z=qn(R/N,y,_)*N;if(C=Math.max(C,z),s){let L=0;!u&&!l||u&&!l&&d?L=tt(x+O+R/N,s[1][1])*N:L=et(x+O+(u?E:-E)/N,s[0][1])*N,C=Math.max(C,L)}if(o){let L=0;!u&&!l||u&&!l&&d?L=et(x+R/N,o[1][1])*N:L=tt(x+(u?E:-E)/N,o[0][1])*N,C=Math.max(C,L)}}if(f){const z=qn(A*N,m,v)/N;if(q=Math.max(q,z),s){let L=0;!u&&!l||l&&!u&&d?L=tt(g+A*N+P,s[1][0])/N:L=et(g+(l?j:-j)*N+P,s[0][0])/N,q=Math.max(q,L)}if(o){let L=0;!u&&!l||l&&!u&&d?L=et(g+A*N,o[1][0])/N:L=tt(g+(l?j:-j)*N,o[0][0])/N,q=Math.max(q,L)}}}j=j+(j<0?q:-q),E=E+(E<0?C:-C),i&&(d?R>A*N?j=(nd(u,l)?-E:E)/N:E=(nd(u,l)?-j:j)*N:c?(j=E/N,l=u):(E=j*N,u=l));const k=u?g+E:g,M=l?x+j:x;return{width:w+(u?-E:E),height:S+(l?-j:j),x:a[0]*E*(u?-1:1)+k,y:a[1]*j*(l?-1:1)+M}}const y0={width:0,height:0,x:0,y:0},oS={...y0,pointerX:0,pointerY:0,aspectRatio:1};function cS(e){return[[0,0],[e.measured.width,e.measured.height]]}function uS(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,a=e.measured.width??0,s=e.measured.height??0,o=n[0]*a,u=n[1]*s;return[[r-o,i-u],[r+a-o,i+s-u]]}function lS({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const a=ye(e);function s({controlPosition:u,boundaries:l,keepAspectRatio:c,resizeDirection:f,onResizeStart:d,onResize:h,onResizeEnd:b,shouldResize:m}){let v={...y0},y={...oS};const _=aS(u);let g,x=null,w=[],S,N,E;const j=Av().on("start",R=>{const{nodeLookup:A,transform:P,snapGrid:O,snapToGrid:C,nodeOrigin:q,paneDomNode:k}=n();if(g=A.get(t),!g)return;x=(k==null?void 0:k.getBoundingClientRect())??null;const{xSnapped:M,ySnapped:z}=Xt(R.sourceEvent,{transform:P,snapGrid:O,snapToGrid:C,containerBounds:x});v={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},y={...v,pointerX:M,pointerY:z,aspectRatio:v.width/v.height},S=void 0,g.parentId&&(g.extent==="parent"||g.expandParent)&&(S=A.get(g.parentId),N=S&&g.extent==="parent"?cS(S):void 0),w=[],E=void 0;for(const[L,B]of A)if(B.parentId===t&&(w.push({id:L,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const G=uS(B,g,B.origin??q);E?E=[[Math.min(G[0][0],E[0][0]),Math.min(G[0][1],E[0][1])],[Math.max(G[1][0],E[1][0]),Math.max(G[1][1],E[1][1])]]:E=G}d==null||d(R,{...v})}).on("drag",R=>{const{transform:A,snapGrid:P,snapToGrid:O,nodeOrigin:C}=n(),q=Xt(R.sourceEvent,{transform:A,snapGrid:P,snapToGrid:O,containerBounds:x}),k=[];if(!g)return;const{x:M,y:z,width:L,height:B}=v,G={},F=g.origin??C,{width:V,height:I,x:D,y:$}=sS(y,_,q,l,c,F,N,E),H=V!==L,U=I!==B,Y=D!==M&&H,K=$!==z&&U;if(!Y&&!K&&!H&&!U)return;if((Y||K||F[0]===1||F[1]===1)&&(G.x=Y?D:v.x,G.y=K?$:v.y,v.x=G.x,v.y=G.y,w.length>0)){const X=D-M,W=$-z;for(const ie of w)ie.position={x:ie.position.x-X+F[0]*(V-L),y:ie.position.y-W+F[1]*(I-B)},k.push(ie)}if((H||U)&&(G.width=H&&(!f||f==="horizontal")?V:v.width,G.height=U&&(!f||f==="vertical")?I:v.height,v.width=G.width,v.height=G.height),S&&g.expandParent){const X=F[0]*(G.width??0);G.x&&G.x<X&&(v.x=X,y.x=y.x-(G.x-X));const W=F[1]*(G.height??0);G.y&&G.y<W&&(v.y=W,y.y=y.y-(G.y-W))}const Q=iS({width:v.width,prevWidth:L,height:v.height,prevHeight:B,affectsX:_.affectsX,affectsY:_.affectsY}),J={...v,direction:Q};(m==null?void 0:m(R,J))!==!1&&(h==null||h(R,J),r(G,k))}).on("end",R=>{b==null||b(R,{...v}),i==null||i({...v})});a.call(j)}function o(){a.on(".drag",null)}return{update:s,destroy:o}}const dS={},rd=e=>{let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(b=>b(t,h))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(dS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,i,u);return u},fS=e=>e?rd(e):rd,{useDebugValue:hS}=Ie,{useSyncExternalStoreWithSelector:pS}=Eb,gS=e=>e;function x0(e,t=gS,n){const r=pS(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return hS(r),r}const id=(e,t)=>{const n=fS(e),r=(i,a=t)=>x0(n,i,a);return Object.assign(r,n),r},mS=(e,t)=>e?id(e,t):id;function oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const gr=T.createContext(null),vS=gr.Provider,b0=Pe.error001();function ne(e,t){const n=T.useContext(gr);if(n===null)throw new Error(b0);return x0(n,e,t)}function ae(){const e=T.useContext(gr);if(e===null)throw new Error(b0);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ad={display:"none"},yS={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},_0="react-flow__node-desc",w0="react-flow__edge-desc",xS="react-flow__aria-live",bS=e=>e.ariaLiveMessage,_S=e=>e.ariaLabelConfig;function wS({rfId:e}){const t=ne(bS);return p.jsx("div",{id:`${xS}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:yS,children:t})}function NS({rfId:e,disableKeyboardA11y:t}){const n=ne(_S);return p.jsxs(p.Fragment,{children:[p.jsx("div",{id:`${_0}-${e}`,style:ad,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),p.jsx("div",{id:`${w0}-${e}`,style:ad,children:n["edge.a11yDescription.default"]}),!t&&p.jsx(wS,{rfId:e})]})}const vn=T.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},a)=>{const s=`${e}`.split("-");return p.jsx("div",{className:ue(["react-flow__panel",n,...s]),style:r,ref:a,...i,children:t})});vn.displayName="Panel";function SS({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:p.jsx(vn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:p.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const ES=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Pn=e=>e.id;function CS(e,t){return oe(e.selectedNodes.map(Pn),t.selectedNodes.map(Pn))&&oe(e.selectedEdges.map(Pn),t.selectedEdges.map(Pn))}function kS({onSelectionChange:e}){const t=ae(),{selectedNodes:n,selectedEdges:r}=ne(ES,CS);return T.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(a=>a(i))},[n,r,e]),null}const jS=e=>!!e.onSelectionChangeHandlers;function AS({onSelectionChange:e}){const t=ne(jS);return e||t?p.jsx(kS,{onSelectionChange:e}):null}const N0=[0,0],RS={x:0,y:0,zoom:1},IS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],sd=[...IS,"rfId"],MS=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),od={translateExtent:en,nodeOrigin:N0,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function TS(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:o,setDefaultNodesAndEdges:u,setPaneClickDistance:l}=ne(MS,oe),c=ae();T.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{f.current=od,o()}),[]);const f=T.useRef(od);return T.useEffect(()=>{for(const d of sd){const h=e[d],b=f.current[d];h!==b&&(typeof e[d]>"u"||(d==="nodes"?t(h):d==="edges"?n(h):d==="minZoom"?r(h):d==="maxZoom"?i(h):d==="translateExtent"?a(h):d==="nodeExtent"?s(h):d==="paneClickDistance"?l(h):d==="ariaLabelConfig"?c.setState({ariaLabelConfig:SN(h)}):d==="fitView"?c.setState({fitViewQueued:h}):d==="fitViewOptions"?c.setState({fitViewOptions:h}):c.setState({[d]:h})))}f.current=e},sd.map(d=>e[d])),null}function cd(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function qS(e){var r;const[t,n]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){n(e);return}const i=cd(),a=()=>n(i!=null&&i.matches?"dark":"light");return a(),i==null||i.addEventListener("change",a),()=>{i==null||i.removeEventListener("change",a)}},[e]),t!==null?t:(r=cd())!=null&&r.matches?"dark":"light"}const ud=typeof document<"u"?document:null;function an(e=null,t={target:ud,actInsideInputWithModifier:!0}){const[n,r]=T.useState(!1),i=T.useRef(!1),a=T.useRef(new Set([])),[s,o]=T.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=l.reduce((f,d)=>f.concat(...d),[]);return[l,c]}return[[],[]]},[e]);return T.useEffect(()=>{const u=(t==null?void 0:t.target)??ud,l=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=h=>{var v,y;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!l)&&n0(h))return!1;const m=dd(h.code,o);if(a.current.add(h[m]),ld(s,a.current,!1)){const _=((y=(v=h.composedPath)==null?void 0:v.call(h))==null?void 0:y[0])||h.target,g=(_==null?void 0:_.nodeName)==="BUTTON"||(_==null?void 0:_.nodeName)==="A";t.preventDefault!==!1&&(i.current||!g)&&h.preventDefault(),r(!0)}},f=h=>{const b=dd(h.code,o);ld(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(h[b]),h.key==="Meta"&&a.current.clear(),i.current=!1},d=()=>{a.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function ld(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function dd(e,t){return t.includes(e)?"code":"key"}const PS=()=>{const e=ae();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,a],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??a},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:a,maxZoom:s,panZoom:o}=e.getState(),u=Bu(t,r,i,a,s,(n==null?void 0:n.padding)??.1);return o?(await o.setViewport(u,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:a,domNode:s}=e.getState();if(!s)return t;const{x:o,y:u}=s.getBoundingClientRect(),l={x:t.x-o,y:t.y-u},c=n.snapGrid??i,f=n.snapToGrid??a;return mn(l,r,f,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:a}=r.getBoundingClientRect(),s=er(t,n);return{x:s.x+i,y:s.y+a}}}),[])};function S0(e,t){const n=[],r=new Map,i=[];for(const a of e)if(a.type==="add"){i.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const s=r.get(a.id);s?s.push(a):r.set(a.id,[a])}for(const a of t){const s=r.get(a.id);if(!s){n.push(a);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const o={...a};for(const u of s)DS(u,o);n.push(o)}return i.length&&i.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function DS(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function E0(e,t){return S0(e,t)}function C0(e,t){return S0(e,t)}function st(e,t){return{id:e,type:"select",selected:t}}function wt(e,t=new Set,n=!1){const r=[];for(const[i,a]of e){const s=t.has(i);!(a.selected===void 0&&!s)&&a.selected!==s&&(n&&(a.selected=s),r.push(st(a.id,s)))}return r}function fd({items:e=[],lookup:t}){var i;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,s]of e.entries()){const o=t.get(s.id),u=((i=o==null?void 0:o.internals)==null?void 0:i.userNode)??o;u!==void 0&&u!==s&&n.push({id:s.id,item:s,type:"replace"}),u===void 0&&n.push({item:s,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function hd(e){return{id:e.id,type:"remove"}}const pd=e=>pN(e),LS=e=>Wv(e);function k0(e){return T.forwardRef(e)}const OS=typeof window<"u"?T.useLayoutEffect:T.useEffect;function gd(e){const[t,n]=T.useState(BigInt(0)),[r]=T.useState(()=>FS(()=>n(i=>i+BigInt(1))));return OS(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function FS(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const j0=T.createContext(null);function $S({children:e}){const t=ae(),n=T.useCallback(o=>{const{nodes:u=[],setNodes:l,hasDefaultNodes:c,onNodesChange:f,nodeLookup:d,fitViewQueued:h}=t.getState();let b=u;for(const v of o)b=typeof v=="function"?v(b):v;const m=fd({items:b,lookup:d});c&&l(b),m.length>0?f==null||f(m):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:v,nodes:y,setNodes:_}=t.getState();v&&_(y)})},[]),r=gd(n),i=T.useCallback(o=>{const{edges:u=[],setEdges:l,hasDefaultEdges:c,onEdgesChange:f,edgeLookup:d}=t.getState();let h=u;for(const b of o)h=typeof b=="function"?b(h):b;c?l(h):f&&f(fd({items:h,lookup:d}))},[]),a=gd(i),s=T.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return p.jsx(j0.Provider,{value:s,children:e})}function zS(){const e=T.useContext(j0);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const BS=e=>!!e.panZoom;function mr(){const e=PS(),t=ae(),n=zS(),r=ne(BS),i=T.useMemo(()=>{const a=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},o=f=>{n.edgeQueue.push(f)},u=f=>{var y,_;const{nodeLookup:d,nodeOrigin:h}=t.getState(),b=pd(f)?f:d.get(f.id),m=b.parentId?e0(b.position,b.measured,b.parentId,d,h):b.position,v={...b,position:m,width:((y=b.measured)==null?void 0:y.width)??b.width,height:((_=b.measured)==null?void 0:_.height)??b.height};return jt(v)},l=(f,d,h={replace:!1})=>{s(b=>b.map(m=>{if(m.id===f){const v=typeof d=="function"?d(m):d;return h.replace&&pd(v)?v:{...m,...v}}return m}))},c=(f,d,h={replace:!1})=>{o(b=>b.map(m=>{if(m.id===f){const v=typeof d=="function"?d(m):d;return h.replace&&LS(v)?v:{...m,...v}}return m}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var d;return(d=a(f))==null?void 0:d.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(d=>({...d}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:o,addNodes:f=>{const d=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...d])},addEdges:f=>{const d=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...d])},toObject:()=>{const{nodes:f=[],edges:d=[],transform:h}=t.getState(),[b,m,v]=h;return{nodes:f.map(y=>({...y})),edges:d.map(y=>({...y})),viewport:{x:b,y:m,zoom:v}}},deleteElements:async({nodes:f=[],edges:d=[]})=>{const{nodes:h,edges:b,onNodesDelete:m,onEdgesDelete:v,triggerNodeChanges:y,triggerEdgeChanges:_,onDelete:g,onBeforeDelete:x}=t.getState(),{nodes:w,edges:S}=await xN({nodesToRemove:f,edgesToRemove:d,nodes:h,edges:b,onBeforeDelete:x}),N=S.length>0,E=w.length>0;if(N){const j=S.map(hd);v==null||v(S),_(j)}if(E){const j=w.map(hd);m==null||m(w),y(j)}return(E||N)&&(g==null||g({nodes:w,edges:S})),{deletedNodes:w,deletedEdges:S}},getIntersectingNodes:(f,d=!0,h)=>{const b=Vl(f),m=b?f:u(f),v=h!==void 0;return m?(h||t.getState().nodes).filter(y=>{const _=t.getState().nodeLookup.get(y.id);if(_&&!b&&(y.id===f.id||!_.internals.positionAbsolute))return!1;const g=jt(v?y:_),x=nn(g,m);return d&&x>0||x>=g.width*g.height||x>=m.width*m.height}):[]},isNodeIntersecting:(f,d,h=!0)=>{const m=Vl(f)?f:u(f);if(!m)return!1;const v=nn(m,d);return h&&v>0||v>=m.width*m.height},updateNode:l,updateNodeData:(f,d,h={replace:!1})=>{l(f,b=>{const m=typeof d=="function"?d(b):d;return h.replace?{...b,data:m}:{...b,data:{...b.data,...m}}},h)},updateEdge:c,updateEdgeData:(f,d,h={replace:!1})=>{c(f,b=>{const m=typeof d=="function"?d(b):d;return h.replace?{...b,data:m}:{...b,data:{...b.data,...m}}},h)},getNodesBounds:f=>{const{nodeLookup:d,nodeOrigin:h}=t.getState();return gN(f,{nodeLookup:d,nodeOrigin:h})},getHandleConnections:({type:f,id:d,nodeId:h})=>{var b;return Array.from(((b=t.getState().connectionLookup.get(`${h}-${f}${d?`-${d}`:""}`))==null?void 0:b.values())??[])},getNodeConnections:({type:f,handleId:d,nodeId:h})=>{var b;return Array.from(((b=t.getState().connectionLookup.get(`${h}${f?d?`-${f}-${d}`:`-${f}`:""}`))==null?void 0:b.values())??[])},fitView:async f=>{const d=t.getState().fitViewResolver??NN();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:d}),n.nodeQueue.push(h=>[...h]),d.promise}}},[]);return T.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const md=e=>e.selected,HS=typeof window<"u"?window:void 0;function GS({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ae(),{deleteElements:r}=mr(),i=an(e,{actInsideInputWithModifier:!1}),a=an(t,{target:HS});T.useEffect(()=>{if(i){const{edges:s,nodes:o}=n.getState();r({nodes:o.filter(md),edges:s.filter(md)}),n.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function VS(e){const t=ae();T.useEffect(()=>{const n=()=>{var i,a;if(!e.current)return!1;const r=Hu(e.current);(r.height===0||r.width===0)&&((a=(i=t.getState()).onError)==null||a.call(i,"004",Pe.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const vr={position:"absolute",width:"100%",height:"100%",top:0,left:0},US=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function YS({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:a=ut.Free,zoomOnDoubleClick:s=!0,panOnDrag:o=!0,defaultViewport:u,translateExtent:l,minZoom:c,maxZoom:f,zoomActivationKeyCode:d,preventScrolling:h=!0,children:b,noWheelClassName:m,noPanClassName:v,onViewportChange:y,isControlledViewport:_,paneClickDistance:g}){const x=ae(),w=T.useRef(null),{userSelectionActive:S,lib:N}=ne(US,oe),E=an(d),j=T.useRef();VS(w);const R=T.useCallback(A=>{y==null||y({x:A[0],y:A[1],zoom:A[2]}),_||x.setState({transform:A})},[y,_]);return T.useEffect(()=>{if(w.current){j.current=rS({domNode:w.current,minZoom:c,maxZoom:f,translateExtent:l,viewport:u,paneClickDistance:g,onDraggingChange:C=>x.setState({paneDragging:C}),onPanZoomStart:(C,q)=>{const{onViewportChangeStart:k,onMoveStart:M}=x.getState();M==null||M(C,q),k==null||k(q)},onPanZoom:(C,q)=>{const{onViewportChange:k,onMove:M}=x.getState();M==null||M(C,q),k==null||k(q)},onPanZoomEnd:(C,q)=>{const{onViewportChangeEnd:k,onMoveEnd:M}=x.getState();M==null||M(C,q),k==null||k(q)}});const{x:A,y:P,zoom:O}=j.current.getViewport();return x.setState({panZoom:j.current,transform:[A,P,O],domNode:w.current.closest(".react-flow")}),()=>{var C;(C=j.current)==null||C.destroy()}}},[]),T.useEffect(()=>{var A;(A=j.current)==null||A.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:o,zoomActivationKeyPressed:E,preventScrolling:h,noPanClassName:v,userSelectionActive:S,noWheelClassName:m,lib:N,onTransformChange:R})},[e,t,n,r,i,a,s,o,E,h,v,S,m,N,R]),p.jsx("div",{className:"react-flow__renderer",ref:w,style:vr,children:b})}const WS=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function XS(){const{userSelectionActive:e,userSelectionRect:t}=ne(WS,oe);return e&&t?p.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Ur=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},KS=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function ZS({isSelecting:e,selectionKeyPressed:t,selectionMode:n=tn.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:a,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:u,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:f,onPaneMouseLeave:d,children:h}){const b=ae(),{userSelectionActive:m,elementsSelectable:v,dragging:y,connectionInProgress:_}=ne(KS,oe),g=v&&(e||m),x=T.useRef(null),w=T.useRef(),S=T.useRef(new Set),N=T.useRef(new Set),E=T.useRef(!1),j=T.useRef(!1),R=M=>{if(E.current||_){E.current=!1;return}o==null||o(M),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},A=M=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){M.preventDefault();return}u==null||u(M)},P=l?M=>l(M):void 0,O=M=>{var F,V;const{resetSelectedElements:z,domNode:L}=b.getState();if(w.current=L==null?void 0:L.getBoundingClientRect(),!v||!e||M.button!==0||M.target!==x.current||!w.current)return;(V=(F=M.target)==null?void 0:F.setPointerCapture)==null||V.call(F,M.pointerId),j.current=!0,E.current=!1;const{x:B,y:G}=Te(M.nativeEvent,w.current);z(),b.setState({userSelectionRect:{width:0,height:0,startX:B,startY:G,x:B,y:G}}),a==null||a(M)},C=M=>{const{userSelectionRect:z,transform:L,nodeLookup:B,edgeLookup:G,connectionLookup:F,triggerNodeChanges:V,triggerEdgeChanges:I,defaultEdgeOptions:D}=b.getState();if(!w.current||!z)return;E.current=!0;const{x:$,y:H}=Te(M.nativeEvent,w.current),{startX:U,startY:Y}=z,K={startX:U,startY:Y,x:$<U?$:U,y:H<Y?H:Y,width:Math.abs($-U),height:Math.abs(H-Y)},Q=S.current,J=N.current;S.current=new Set(zu(B,K,L,n===tn.Partial,!0).map(X=>X.id)),N.current=new Set;const Z=(D==null?void 0:D.selectable)??!0;for(const X of S.current){const W=F.get(X);if(W)for(const{edgeId:ie}of W.values()){const te=G.get(ie);te&&(te.selectable??Z)&&N.current.add(ie)}}if(!Ul(Q,S.current)){const X=wt(B,S.current,!0);V(X)}if(!Ul(J,N.current)){const X=wt(G,N.current);I(X)}b.setState({userSelectionRect:K,userSelectionActive:!0,nodesSelectionActive:!1})},q=M=>{var L,B;if(M.button!==0||!j.current)return;(B=(L=M.target)==null?void 0:L.releasePointerCapture)==null||B.call(L,M.pointerId);const{userSelectionRect:z}=b.getState();!m&&z&&M.target===x.current&&(R==null||R(M)),b.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:S.current.size>0}),s==null||s(M),(t||i)&&(E.current=!1),j.current=!1},k=r===!0||Array.isArray(r)&&r.includes(0);return p.jsxs("div",{className:ue(["react-flow__pane",{draggable:k,dragging:y,selection:e}]),onClick:g?void 0:Ur(R,x),onContextMenu:Ur(A,x),onWheel:Ur(P,x),onPointerEnter:g?void 0:c,onPointerDown:g?O:f,onPointerMove:g?C:f,onPointerUp:g?q:void 0,onPointerLeave:d,ref:x,style:vr,children:[h,p.jsx(XS,{})]})}function ju({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:o,onError:u}=t.getState(),l=o.get(e);if(!l){u==null||u("012",Pe.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&s)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function A0({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,nodeClickDistance:s}){const o=ae(),[u,l]=T.useState(!1),c=T.useRef();return T.useEffect(()=>{c.current=BN({getStoreItems:()=>o.getState(),onNodeMouseDown:f=>{ju({id:f,store:o,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),T.useEffect(()=>{var f,d;if(t)(f=c.current)==null||f.destroy();else if(e.current)return(d=c.current)==null||d.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:s}),()=>{var h;(h=c.current)==null||h.destroy()}},[n,r,t,a,e,i]),u}const JS=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function R0(){const e=ae();return T.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:a,nodesDraggable:s,onError:o,updateNodePositions:u,nodeLookup:l,nodeOrigin:c}=e.getState(),f=new Map,d=JS(s),h=i?a[0]:5,b=i?a[1]:5,m=n.direction.x*h*n.factor,v=n.direction.y*b*n.factor;for(const[,y]of l){if(!d(y))continue;let _={x:y.internals.positionAbsolute.x+m,y:y.internals.positionAbsolute.y+v};i&&(_=hr(_,a));const{position:g,positionAbsolute:x}=Xv({nodeId:y.id,nextPosition:_,nodeLookup:l,nodeExtent:r,nodeOrigin:c,onError:o});y.position=g,y.internals.positionAbsolute=x,f.set(y.id,y)}u(f)},[])}const Wu=T.createContext(null),QS=Wu.Provider;Wu.Consumer;const I0=()=>T.useContext(Wu),eE=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),tE=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:a,connection:s}=r,{fromHandle:o,toHandle:u,isValid:l}=s,c=(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n;return{connectingFrom:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:a===ft.Strict?(o==null?void 0:o.type)!==n:e!==(o==null?void 0:o.nodeId)||t!==(o==null?void 0:o.id),connectionInProcess:!!o,clickConnectionInProcess:!!i,valid:c&&l}};function nE({type:e="source",position:t=ee.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:o,children:u,className:l,onMouseDown:c,onTouchStart:f,...d},h){var q,k;const b=s||null,m=e==="target",v=ae(),y=I0(),{connectOnClick:_,noPanClassName:g,rfId:x}=ne(eE,oe),{connectingFrom:w,connectingTo:S,clickConnecting:N,isPossibleEndHandle:E,connectionInProcess:j,clickConnectionInProcess:R,valid:A}=ne(tE(y,b,e),oe);y||(k=(q=v.getState()).onError)==null||k.call(q,"010",Pe.error010());const P=M=>{const{defaultEdgeOptions:z,onConnect:L,hasDefaultEdges:B}=v.getState(),G={...z,...M};if(B){const{edges:F,setEdges:V}=v.getState();V(o0(G,F))}L==null||L(G),o==null||o(G)},O=M=>{if(!y)return;const z=r0(M.nativeEvent);if(i&&(z&&M.button===0||!z)){const L=v.getState();ku.onPointerDown(M.nativeEvent,{autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:m,handleId:b,nodeId:y,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:P,isValidConnection:n||L.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed,dragThreshold:L.connectionDragThreshold})}z?c==null||c(M):f==null||f(M)},C=M=>{const{onClickConnectStart:z,onClickConnectEnd:L,connectionClickStartHandle:B,connectionMode:G,isValidConnection:F,lib:V,rfId:I,nodeLookup:D,connection:$}=v.getState();if(!y||!B&&!i)return;if(!B){z==null||z(M.nativeEvent,{nodeId:y,handleId:b,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,id:b}});return}const H=t0(M.target),U=n||F,{connection:Y,isValid:K}=ku.isValid(M.nativeEvent,{handle:{nodeId:y,id:b,type:e},connectionMode:G,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:U,flowId:I,doc:H,lib:V,nodeLookup:D});K&&Y&&P(Y);const Q=structuredClone($);delete Q.inProgress,Q.toPosition=Q.toHandle?Q.toHandle.position:null,L==null||L(M,Q),v.setState({connectionClickStartHandle:null})};return p.jsx("div",{"data-handleid":b,"data-nodeid":y,"data-handlepos":t,"data-id":`${x}-${y}-${b}-${e}`,className:ue(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,l,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:a,clickconnecting:N,connectingfrom:w,connectingto:S,valid:A,connectionindicator:r&&(!j||E)&&(j||R?a:i)}]),onMouseDown:O,onTouchStart:O,onClick:_?C:void 0,ref:h,...d,children:u})}const It=T.memo(k0(nE));function rE({data:e,isConnectable:t,sourcePosition:n=ee.Bottom}){return p.jsxs(p.Fragment,{children:[e==null?void 0:e.label,p.jsx(It,{type:"source",position:n,isConnectable:t})]})}function iE({data:e,isConnectable:t,targetPosition:n=ee.Top,sourcePosition:r=ee.Bottom}){return p.jsxs(p.Fragment,{children:[p.jsx(It,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,p.jsx(It,{type:"source",position:r,isConnectable:t})]})}function aE(){return null}function sE({data:e,isConnectable:t,targetPosition:n=ee.Top}){return p.jsxs(p.Fragment,{children:[p.jsx(It,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const nr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},vd={input:rE,default:iE,output:sE,group:aE};function oE(e){var t,n,r,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const cE=e=>{const{width:t,height:n,x:r,y:i}=gn(e.nodeLookup,{filter:a=>!!a.selected});return{width:Ce(t)?t:null,height:Ce(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function uE({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ae(),{width:i,height:a,transformString:s,userSelectionActive:o}=ne(cE,oe),u=R0(),l=T.useRef(null);if(T.useEffect(()=>{var d;n||(d=l.current)==null||d.focus({preventScroll:!0})},[n]),A0({nodeRef:l}),o||!i||!a)return null;const c=e?d=>{const h=r.getState().nodes.filter(b=>b.selected);e(d,h)}:void 0,f=d=>{Object.prototype.hasOwnProperty.call(nr,d.key)&&(d.preventDefault(),u({direction:nr[d.key],factor:d.shiftKey?4:1}))};return p.jsx("div",{className:ue(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:p.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:a}})})}const yd=typeof window<"u"?window:void 0,lE=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function M0({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:o,deleteKeyCode:u,selectionKeyCode:l,selectionOnDrag:c,selectionMode:f,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:b,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:g,panOnScroll:x,panOnScrollSpeed:w,panOnScrollMode:S,zoomOnDoubleClick:N,panOnDrag:E,defaultViewport:j,translateExtent:R,minZoom:A,maxZoom:P,preventScrolling:O,onSelectionContextMenu:C,noWheelClassName:q,noPanClassName:k,disableKeyboardA11y:M,onViewportChange:z,isControlledViewport:L}){const{nodesSelectionActive:B,userSelectionActive:G}=ne(lE),F=an(l,{target:yd}),V=an(m,{target:yd}),I=V||E,D=V||x,$=c&&I!==!0,H=F||G||$;return GS({deleteKeyCode:u,multiSelectionKeyCode:b}),p.jsx(YS,{onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:g,panOnScroll:D,panOnScrollSpeed:w,panOnScrollMode:S,zoomOnDoubleClick:N,panOnDrag:!F&&I,defaultViewport:j,translateExtent:R,minZoom:A,maxZoom:P,zoomActivationKeyCode:v,preventScrolling:O,noWheelClassName:q,noPanClassName:k,onViewportChange:z,isControlledViewport:L,paneClickDistance:o,children:p.jsxs(ZS,{onSelectionStart:d,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:I,isSelecting:!!H,selectionMode:f,selectionKeyPressed:F,selectionOnDrag:$,children:[e,B&&p.jsx(uE,{onSelectionContextMenu:C,noPanClassName:k,disableKeyboardA11y:M})]})})}M0.displayName="FlowRenderer";const dE=T.memo(M0),fE=e=>t=>e?zu(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function hE(e){return ne(T.useCallback(fE(e),[e]),oe)}const pE=e=>e.updateNodeInternals;function gE(){const e=ne(pE),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const a=i.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:i.target,force:!0})}),e(r)}));return T.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function mE({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=ae(),a=T.useRef(null),s=T.useRef(null),o=T.useRef(e.sourcePosition),u=T.useRef(e.targetPosition),l=T.useRef(t),c=n&&!!e.internals.handleBounds;return T.useEffect(()=>{a.current&&!e.hidden&&(!c||s.current!==a.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(a.current),s.current=a.current)},[c,e.hidden]),T.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),T.useEffect(()=>{if(a.current){const f=l.current!==t,d=o.current!==e.sourcePosition,h=u.current!==e.targetPosition;(f||d||h)&&(l.current=t,o.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function vE({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:a,onDoubleClick:s,nodesDraggable:o,elementsSelectable:u,nodesConnectable:l,nodesFocusable:c,resizeObserver:f,noDragClassName:d,noPanClassName:h,disableKeyboardA11y:b,rfId:m,nodeTypes:v,nodeClickDistance:y,onError:_}){const{node:g,internals:x,isParent:w}=ne(U=>{const Y=U.nodeLookup.get(e),K=U.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:K}},oe);let S=g.type||"default",N=(v==null?void 0:v[S])||vd[S];N===void 0&&(_==null||_("003",Pe.error003(S)),S="default",N=(v==null?void 0:v.default)||vd.default);const E=!!(g.draggable||o&&typeof g.draggable>"u"),j=!!(g.selectable||u&&typeof g.selectable>"u"),R=!!(g.connectable||l&&typeof g.connectable>"u"),A=!!(g.focusable||c&&typeof g.focusable>"u"),P=ae(),O=Qv(g),C=mE({node:g,nodeType:S,hasDimensions:O,resizeObserver:f}),q=A0({nodeRef:C,disabled:g.hidden||!E,noDragClassName:d,handleSelector:g.dragHandle,nodeId:e,isSelectable:j,nodeClickDistance:y}),k=R0();if(g.hidden)return null;const M=We(g),z=oE(g),L=j||E||t||n||r||i,B=n?U=>n(U,{...x.userNode}):void 0,G=r?U=>r(U,{...x.userNode}):void 0,F=i?U=>i(U,{...x.userNode}):void 0,V=a?U=>a(U,{...x.userNode}):void 0,I=s?U=>s(U,{...x.userNode}):void 0,D=U=>{const{selectNodesOnDrag:Y,nodeDragThreshold:K}=P.getState();j&&(!Y||!E||K>0)&&ju({id:e,store:P,nodeRef:C}),t&&t(U,{...x.userNode})},$=U=>{if(!(n0(U.nativeEvent)||b)){if(Gv.includes(U.key)&&j){const Y=U.key==="Escape";ju({id:e,store:P,unselect:Y,nodeRef:C})}else if(E&&g.selected&&Object.prototype.hasOwnProperty.call(nr,U.key)){U.preventDefault();const{ariaLabelConfig:Y}=P.getState();P.setState({ariaLiveMessage:Y["node.a11yDescription.ariaLiveMessage"]({direction:U.key.replace("Arrow","").toLowerCase(),x:~~x.positionAbsolute.x,y:~~x.positionAbsolute.y})}),k({direction:nr[U.key],factor:U.shiftKey?4:1})}}},H=()=>{var X;if(b||!((X=C.current)!=null&&X.matches(":focus-visible")))return;const{transform:U,width:Y,height:K,autoPanOnNodeFocus:Q,setCenter:J}=P.getState();if(!Q)return;zu(new Map([[e,g]]),{x:0,y:0,width:Y,height:K},U,!0).length>0||J(g.position.x+M.width/2,g.position.y+M.height/2,{zoom:U[2]})};return p.jsx("div",{className:ue(["react-flow__node",`react-flow__node-${S}`,{[h]:E},g.className,{selected:g.selected,selectable:j,parent:w,draggable:E,dragging:q}]),ref:C,style:{zIndex:x.z,transform:`translate(${x.positionAbsolute.x}px,${x.positionAbsolute.y}px)`,pointerEvents:L?"all":"none",visibility:O?"visible":"hidden",...g.style,...z},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:G,onMouseLeave:F,onContextMenu:V,onClick:D,onDoubleClick:I,onKeyDown:A?$:void 0,tabIndex:A?0:void 0,onFocus:A?H:void 0,role:g.ariaRole??(A?"group":void 0),"aria-roledescription":"node","aria-describedby":b?void 0:`${_0}-${m}`,"aria-label":g.ariaLabel,...g.domAttributes,children:p.jsx(QS,{value:e,children:p.jsx(N,{id:e,data:g.data,type:S,positionAbsoluteX:x.positionAbsolute.x,positionAbsoluteY:x.positionAbsolute.y,selected:g.selected??!1,selectable:j,draggable:E,deletable:g.deletable??!0,isConnectable:R,sourcePosition:g.sourcePosition,targetPosition:g.targetPosition,dragging:q,dragHandle:g.dragHandle,zIndex:x.z,parentId:g.parentId,...M})})})}const yE=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function T0(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:a}=ne(yE,oe),s=hE(e.onlyRenderVisibleElements),o=gE();return p.jsx("div",{className:"react-flow__nodes",style:vr,children:s.map(u=>p.jsx(vE,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:o,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},u))})}T0.displayName="NodeRenderer";const xE=T.memo(T0);function bE(e){return ne(T.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const a=n.nodeLookup.get(i.source),s=n.nodeLookup.get(i.target);a&&s&&kN({sourceNode:a,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),oe)}const _E=({color:e="none",strokeWidth:t=1})=>p.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),wE=({color:e="none",strokeWidth:t=1})=>p.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),xd={[Jn.Arrow]:_E,[Jn.ArrowClosed]:wE};function NE(e){const t=ae();return T.useMemo(()=>{var i,a;return Object.prototype.hasOwnProperty.call(xd,e)?xd[e]:((a=(i=t.getState()).onError)==null||a.call(i,"009",Pe.error009(e)),null)},[e])}const SE=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:o="auto-start-reverse"})=>{const u=NE(t);return u?p.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0",children:p.jsx(u,{color:n,strokeWidth:s})}):null},q0=({defaultColor:e,rfId:t})=>{const n=ne(a=>a.edges),r=ne(a=>a.defaultEdgeOptions),i=T.useMemo(()=>qN(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?p.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:p.jsx("defs",{children:i.map(a=>p.jsx(SE,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};q0.displayName="MarkerDefinitions";var EE=T.memo(q0);function P0({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:a,labelBgPadding:s=[2,4],labelBgBorderRadius:o=2,children:u,className:l,...c}){const[f,d]=T.useState({x:1,y:0,width:0,height:0}),h=ue(["react-flow__edge-textwrapper",l]),b=T.useRef(null);return T.useEffect(()=>{if(b.current){const m=b.current.getBBox();d({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),n?p.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...c,children:[i&&p.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),p.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:b,style:r,children:n}),u]}):null}P0.displayName="EdgeText";const CE=T.memo(P0);function yr({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:o,labelBgBorderRadius:u,interactionWidth:l=20,...c}){return p.jsxs(p.Fragment,{children:[p.jsx("path",{...c,d:e,fill:"none",className:ue(["react-flow__edge-path",c.className])}),l&&p.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:l,className:"react-flow__edge-interaction"}),r&&Ce(t)&&Ce(n)?p.jsx(CE,{x:t,y:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:o,labelBgBorderRadius:u}):null]})}function bd({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===ee.Left||e===ee.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function D0({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:i,targetPosition:a=ee.Top}){const[s,o]=bd({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,l]=bd({pos:a,x1:r,y1:i,x2:e,y2:t}),[c,f,d,h]=i0({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:u,targetControlY:l});return[`M${e},${t} C${s},${o} ${u},${l} ${r},${i}`,c,f,d,h]}function L0(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:o,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:b,markerEnd:m,markerStart:v,interactionWidth:y})=>{const[_,g,x]=D0({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:o}),w=e.isInternal?void 0:t;return p.jsx(yr,{id:w,path:_,labelX:g,labelY:x,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:b,markerEnd:m,markerStart:v,interactionWidth:y})})}const kE=L0({isInternal:!1}),O0=L0({isInternal:!0});kE.displayName="SimpleBezierEdge";O0.displayName="SimpleBezierEdgeInternal";function F0(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,style:d,sourcePosition:h=ee.Bottom,targetPosition:b=ee.Top,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:_})=>{const[g,x,w]=Su({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:a,targetPosition:b,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset,stepPosition:y==null?void 0:y.stepPosition}),S=e.isInternal?void 0:t;return p.jsx(yr,{id:S,path:g,labelX:x,labelY:w,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:m,markerStart:v,interactionWidth:_})})}const $0=F0({isInternal:!1}),z0=F0({isInternal:!0});$0.displayName="SmoothStepEdge";z0.displayName="SmoothStepEdgeInternal";function B0(e){return T.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return p.jsx($0,{...n,id:r,pathOptions:T.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const jE=B0({isInternal:!1}),H0=B0({isInternal:!0});jE.displayName="StepEdge";H0.displayName="StepEdgeInternal";function G0(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:b,interactionWidth:m})=>{const[v,y,_]=c0({sourceX:n,sourceY:r,targetX:i,targetY:a}),g=e.isInternal?void 0:t;return p.jsx(yr,{id:g,path:v,labelX:y,labelY:_,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:b,interactionWidth:m})})}const AE=G0({isInternal:!1}),V0=G0({isInternal:!0});AE.displayName="StraightEdge";V0.displayName="StraightEdgeInternal";function U0(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s=ee.Bottom,targetPosition:o=ee.Top,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:b,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:_})=>{const[g,x,w]=a0({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:o,curvature:y==null?void 0:y.curvature}),S=e.isInternal?void 0:t;return p.jsx(yr,{id:S,path:g,labelX:x,labelY:w,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:b,markerEnd:m,markerStart:v,interactionWidth:_})})}const RE=U0({isInternal:!1}),Y0=U0({isInternal:!0});RE.displayName="BezierEdge";Y0.displayName="BezierEdgeInternal";const _d={default:Y0,straight:V0,step:H0,smoothstep:z0,simplebezier:O0},wd={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},IE=(e,t,n)=>n===ee.Left?e-t:n===ee.Right?e+t:e,ME=(e,t,n)=>n===ee.Top?e-t:n===ee.Bottom?e+t:e,Nd="react-flow__edgeupdater";function Sd({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:o}){return p.jsx("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:ue([Nd,`${Nd}-${o}`]),cx:IE(t,r,e),cy:ME(n,r,e),r,stroke:"transparent",fill:"transparent"})}function TE({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:a,targetY:s,sourcePosition:o,targetPosition:u,onReconnect:l,onReconnectStart:c,onReconnectEnd:f,setReconnecting:d,setUpdateHover:h}){const b=ae(),m=(x,w)=>{if(x.button!==0)return;const{autoPanOnConnect:S,domNode:N,isValidConnection:E,connectionMode:j,connectionRadius:R,lib:A,onConnectStart:P,onConnectEnd:O,cancelConnection:C,nodeLookup:q,rfId:k,panBy:M,updateConnection:z}=b.getState(),L=w.type==="target",B=(V,I)=>{d(!1),f==null||f(V,n,w.type,I)},G=V=>l==null?void 0:l(n,V),F=(V,I)=>{d(!0),c==null||c(x,n,w.type),P==null||P(V,I)};ku.onPointerDown(x.nativeEvent,{autoPanOnConnect:S,connectionMode:j,connectionRadius:R,domNode:N,handleId:w.id,nodeId:w.nodeId,nodeLookup:q,isTarget:L,edgeUpdaterType:w.type,lib:A,flowId:k,cancelConnection:C,panBy:M,isValidConnection:E,onConnect:G,onConnectStart:F,onConnectEnd:O,onReconnectEnd:B,updateConnection:z,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,dragThreshold:b.getState().connectionDragThreshold})},v=x=>m(x,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),y=x=>m(x,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),_=()=>h(!0),g=()=>h(!1);return p.jsxs(p.Fragment,{children:[(e===!0||e==="source")&&p.jsx(Sd,{position:o,centerX:r,centerY:i,radius:t,onMouseDown:v,onMouseEnter:_,onMouseOut:g,type:"source"}),(e===!0||e==="target")&&p.jsx(Sd,{position:u,centerX:a,centerY:s,radius:t,onMouseDown:y,onMouseEnter:_,onMouseOut:g,type:"target"})]})}function qE({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:a,onContextMenu:s,onMouseEnter:o,onMouseMove:u,onMouseLeave:l,reconnectRadius:c,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,rfId:b,edgeTypes:m,noPanClassName:v,onError:y,disableKeyboardA11y:_}){let g=ne(J=>J.edgeLookup.get(e));const x=ne(J=>J.defaultEdgeOptions);g=x?{...x,...g}:g;let w=g.type||"default",S=(m==null?void 0:m[w])||_d[w];S===void 0&&(y==null||y("011",Pe.error011(w)),w="default",S=(m==null?void 0:m.default)||_d.default);const N=!!(g.focusable||t&&typeof g.focusable>"u"),E=typeof f<"u"&&(g.reconnectable||n&&typeof g.reconnectable>"u"),j=!!(g.selectable||r&&typeof g.selectable>"u"),R=T.useRef(null),[A,P]=T.useState(!1),[O,C]=T.useState(!1),q=ae(),{zIndex:k,sourceX:M,sourceY:z,targetX:L,targetY:B,sourcePosition:G,targetPosition:F}=ne(T.useCallback(J=>{const Z=J.nodeLookup.get(g.source),X=J.nodeLookup.get(g.target);if(!Z||!X)return{zIndex:g.zIndex,...wd};const W=TN({id:e,sourceNode:Z,targetNode:X,sourceHandle:g.sourceHandle||null,targetHandle:g.targetHandle||null,connectionMode:J.connectionMode,onError:y});return{zIndex:CN({selected:g.selected,zIndex:g.zIndex,sourceNode:Z,targetNode:X,elevateOnSelect:J.elevateEdgesOnSelect}),...W||wd}},[g.source,g.target,g.sourceHandle,g.targetHandle,g.selected,g.zIndex]),oe),V=T.useMemo(()=>g.markerStart?`url('#${Eu(g.markerStart,b)}')`:void 0,[g.markerStart,b]),I=T.useMemo(()=>g.markerEnd?`url('#${Eu(g.markerEnd,b)}')`:void 0,[g.markerEnd,b]);if(g.hidden||M===null||z===null||L===null||B===null)return null;const D=J=>{var ie;const{addSelectedEdges:Z,unselectNodesAndEdges:X,multiSelectionActive:W}=q.getState();j&&(q.setState({nodesSelectionActive:!1}),g.selected&&W?(X({nodes:[],edges:[g]}),(ie=R.current)==null||ie.blur()):Z([e])),i&&i(J,g)},$=a?J=>{a(J,{...g})}:void 0,H=s?J=>{s(J,{...g})}:void 0,U=o?J=>{o(J,{...g})}:void 0,Y=u?J=>{u(J,{...g})}:void 0,K=l?J=>{l(J,{...g})}:void 0,Q=J=>{var Z;if(!_&&Gv.includes(J.key)&&j){const{unselectNodesAndEdges:X,addSelectedEdges:W}=q.getState();J.key==="Escape"?((Z=R.current)==null||Z.blur(),X({edges:[g]})):W([e])}};return p.jsx("svg",{style:{zIndex:k},children:p.jsxs("g",{className:ue(["react-flow__edge",`react-flow__edge-${w}`,g.className,v,{selected:g.selected,animated:g.animated,inactive:!j&&!i,updating:A,selectable:j}]),onClick:D,onDoubleClick:$,onContextMenu:H,onMouseEnter:U,onMouseMove:Y,onMouseLeave:K,onKeyDown:N?Q:void 0,tabIndex:N?0:void 0,role:g.ariaRole??(N?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":g.ariaLabel===null?void 0:g.ariaLabel||`Edge from ${g.source} to ${g.target}`,"aria-describedby":N?`${w0}-${b}`:void 0,ref:R,...g.domAttributes,children:[!O&&p.jsx(S,{id:e,source:g.source,target:g.target,type:g.type,selected:g.selected,animated:g.animated,selectable:j,deletable:g.deletable??!0,label:g.label,labelStyle:g.labelStyle,labelShowBg:g.labelShowBg,labelBgStyle:g.labelBgStyle,labelBgPadding:g.labelBgPadding,labelBgBorderRadius:g.labelBgBorderRadius,sourceX:M,sourceY:z,targetX:L,targetY:B,sourcePosition:G,targetPosition:F,data:g.data,style:g.style,sourceHandleId:g.sourceHandle,targetHandleId:g.targetHandle,markerStart:V,markerEnd:I,pathOptions:"pathOptions"in g?g.pathOptions:void 0,interactionWidth:g.interactionWidth}),E&&p.jsx(TE,{edge:g,isReconnectable:E,reconnectRadius:c,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,sourceX:M,sourceY:z,targetX:L,targetY:B,sourcePosition:G,targetPosition:F,setUpdateHover:P,setReconnecting:C})]})})}const PE=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function W0({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:o,onEdgeMouseMove:u,onEdgeMouseLeave:l,onEdgeClick:c,reconnectRadius:f,onEdgeDoubleClick:d,onReconnectStart:h,onReconnectEnd:b,disableKeyboardA11y:m}){const{edgesFocusable:v,edgesReconnectable:y,elementsSelectable:_,onError:g}=ne(PE,oe),x=bE(t);return p.jsxs("div",{className:"react-flow__edges",children:[p.jsx(EE,{defaultColor:e,rfId:n}),x.map(w=>p.jsx(qE,{id:w,edgesFocusable:v,edgesReconnectable:y,elementsSelectable:_,noPanClassName:i,onReconnect:a,onContextMenu:s,onMouseEnter:o,onMouseMove:u,onMouseLeave:l,onClick:c,reconnectRadius:f,onDoubleClick:d,onReconnectStart:h,onReconnectEnd:b,rfId:n,onError:g,edgeTypes:r,disableKeyboardA11y:m},w))]})}W0.displayName="EdgeRenderer";const DE=T.memo(W0),LE=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function OE({children:e}){const t=ne(LE);return p.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function FE(e){const t=mr(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const $E=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function zE(e){const t=ne($E),n=ae();return T.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function BE(e){return e.connection.inProgress?{...e.connection,to:mn(e.connection.to,e.transform)}:{...e.connection}}function HE(e){return BE}function GE(e){const t=HE();return ne(t,oe)}const VE=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function UE({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:a,height:s,isValid:o,inProgress:u}=ne(VE,oe);return!(a&&i&&u)?null:p.jsx("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:p.jsx("g",{className:ue(["react-flow__connection",Yv(o)]),children:p.jsx(X0,{style:t,type:n,CustomComponent:r,isValid:o})})})}const X0=({style:e,type:t=nt.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:a,fromNode:s,fromHandle:o,fromPosition:u,to:l,toNode:c,toHandle:f,toPosition:d}=GE();if(!i)return;if(n)return p.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:o,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:u,toPosition:d,connectionStatus:Yv(r),toNode:c,toHandle:f});let h="";const b={sourceX:a.x,sourceY:a.y,sourcePosition:u,targetX:l.x,targetY:l.y,targetPosition:d};switch(t){case nt.Bezier:[h]=a0(b);break;case nt.SimpleBezier:[h]=D0(b);break;case nt.Step:[h]=Su({...b,borderRadius:0});break;case nt.SmoothStep:[h]=Su(b);break;default:[h]=c0(b)}return p.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};X0.displayName="ConnectionLine";const YE={};function Ed(e=YE){T.useRef(e),ae(),T.useEffect(()=>{},[e])}function WE(){ae(),T.useRef(!1),T.useEffect(()=>{},[])}function K0({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:o,onNodeMouseMove:u,onNodeMouseLeave:l,onNodeContextMenu:c,onSelectionContextMenu:f,onSelectionStart:d,onSelectionEnd:h,connectionLineType:b,connectionLineStyle:m,connectionLineComponent:v,connectionLineContainerStyle:y,selectionKeyCode:_,selectionOnDrag:g,selectionMode:x,multiSelectionKeyCode:w,panActivationKeyCode:S,zoomActivationKeyCode:N,deleteKeyCode:E,onlyRenderVisibleElements:j,elementsSelectable:R,defaultViewport:A,translateExtent:P,minZoom:O,maxZoom:C,preventScrolling:q,defaultMarkerColor:k,zoomOnScroll:M,zoomOnPinch:z,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:G,zoomOnDoubleClick:F,panOnDrag:V,onPaneClick:I,onPaneMouseEnter:D,onPaneMouseMove:$,onPaneMouseLeave:H,onPaneScroll:U,onPaneContextMenu:Y,paneClickDistance:K,nodeClickDistance:Q,onEdgeContextMenu:J,onEdgeMouseEnter:Z,onEdgeMouseMove:X,onEdgeMouseLeave:W,reconnectRadius:ie,onReconnect:te,onReconnectStart:ve,onReconnectEnd:we,noDragClassName:yt,noWheelClassName:Oe,noPanClassName:pe,disableKeyboardA11y:ce,nodeExtent:Ze,rfId:Fe,viewport:Je,onViewportChange:Qe}){return Ed(e),Ed(t),WE(),FE(n),zE(Je),p.jsx(dE,{onPaneClick:I,onPaneMouseEnter:D,onPaneMouseMove:$,onPaneMouseLeave:H,onPaneContextMenu:Y,onPaneScroll:U,paneClickDistance:K,deleteKeyCode:E,selectionKeyCode:_,selectionOnDrag:g,selectionMode:x,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:w,panActivationKeyCode:S,zoomActivationKeyCode:N,elementsSelectable:R,zoomOnScroll:M,zoomOnPinch:z,zoomOnDoubleClick:F,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:G,panOnDrag:V,defaultViewport:A,translateExtent:P,minZoom:O,maxZoom:C,onSelectionContextMenu:f,preventScrolling:q,noDragClassName:yt,noWheelClassName:Oe,noPanClassName:pe,disableKeyboardA11y:ce,onViewportChange:Qe,isControlledViewport:!!Je,children:p.jsxs(OE,{children:[p.jsx(DE,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:te,onReconnectStart:ve,onReconnectEnd:we,onlyRenderVisibleElements:j,onEdgeContextMenu:J,onEdgeMouseEnter:Z,onEdgeMouseMove:X,onEdgeMouseLeave:W,reconnectRadius:ie,defaultMarkerColor:k,noPanClassName:pe,disableKeyboardA11y:ce,rfId:Fe}),p.jsx(UE,{style:m,type:b,component:v,containerStyle:y}),p.jsx("div",{className:"react-flow__edgelabel-renderer"}),p.jsx(xE,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:o,onNodeMouseMove:u,onNodeMouseLeave:l,onNodeContextMenu:c,nodeClickDistance:Q,onlyRenderVisibleElements:j,noPanClassName:pe,noDragClassName:yt,disableKeyboardA11y:ce,nodeExtent:Ze,rfId:Fe}),p.jsx("div",{className:"react-flow__viewport-portal"})]})})}K0.displayName="GraphView";const XE=T.memo(K0),Cd=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:u=.5,maxZoom:l=2,nodeOrigin:c,nodeExtent:f}={})=>{const d=new Map,h=new Map,b=new Map,m=new Map,v=r??t??[],y=n??e??[],_=c??[0,0],g=f??en;l0(b,m,v);const x=Cu(y,d,h,{nodeOrigin:_,nodeExtent:g,elevateNodesOnSelect:!1});let w=[0,0,1];if(s&&i&&a){const S=gn(d,{filter:R=>!!((R.width||R.initialWidth)&&(R.height||R.initialHeight))}),{x:N,y:E,zoom:j}=Bu(S,i,a,u,l,(o==null?void 0:o.padding)??.1);w=[N,E,j]}return{rfId:"1",width:0,height:0,transform:w,nodes:y,nodesInitialized:x,nodeLookup:d,parentLookup:h,edges:v,edgeLookup:m,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:l,translateExtent:en,nodeExtent:g,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ft.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:_,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:o,fitViewResolver:null,connection:{...Uv},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:bN,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Vv}},KE=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:u,maxZoom:l,nodeOrigin:c,nodeExtent:f})=>mS((d,h)=>{async function b(){const{nodeLookup:m,panZoom:v,fitViewOptions:y,fitViewResolver:_,width:g,height:x,minZoom:w,maxZoom:S}=h();v&&(await yN({nodes:m,width:g,height:x,panZoom:v,minZoom:w,maxZoom:S},y),_==null||_.resolve(!0),d({fitViewResolver:null}))}return{...Cd({nodes:e,edges:t,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:u,maxZoom:l,nodeOrigin:c,nodeExtent:f,defaultNodes:n,defaultEdges:r}),setNodes:m=>{const{nodeLookup:v,parentLookup:y,nodeOrigin:_,elevateNodesOnSelect:g,fitViewQueued:x}=h(),w=Cu(m,v,y,{nodeOrigin:_,nodeExtent:f,elevateNodesOnSelect:g,checkEquality:!0});x&&w?(b(),d({nodes:m,nodesInitialized:w,fitViewQueued:!1,fitViewOptions:void 0})):d({nodes:m,nodesInitialized:w})},setEdges:m=>{const{connectionLookup:v,edgeLookup:y}=h();l0(v,y,m),d({edges:m})},setDefaultNodesAndEdges:(m,v)=>{if(m){const{setNodes:y}=h();y(m),d({hasDefaultNodes:!0})}if(v){const{setEdges:y}=h();y(v),d({hasDefaultEdges:!0})}},updateNodeInternals:m=>{const{triggerNodeChanges:v,nodeLookup:y,parentLookup:_,domNode:g,nodeOrigin:x,nodeExtent:w,debug:S,fitViewQueued:N}=h(),{changes:E,updatedInternals:j}=FN(m,y,_,g,x,w);j&&(DN(y,_,{nodeOrigin:x,nodeExtent:w}),N?(b(),d({fitViewQueued:!1,fitViewOptions:void 0})):d({}),(E==null?void 0:E.length)>0&&(S&&console.log("React Flow: trigger node changes",E),v==null||v(E)))},updateNodePositions:(m,v=!1)=>{const y=[],_=[],{nodeLookup:g,triggerNodeChanges:x}=h();for(const[w,S]of m){const N=g.get(w),E=!!(N!=null&&N.expandParent&&(N!=null&&N.parentId)&&(S!=null&&S.position)),j={id:w,type:"position",position:E?{x:Math.max(0,S.position.x),y:Math.max(0,S.position.y)}:S.position,dragging:v};E&&N.parentId&&y.push({id:w,parentId:N.parentId,rect:{...S.internals.positionAbsolute,width:S.measured.width??0,height:S.measured.height??0}}),_.push(j)}if(y.length>0){const{parentLookup:w,nodeOrigin:S}=h(),N=Yu(y,g,w,S);_.push(...N)}x(_)},triggerNodeChanges:m=>{const{onNodesChange:v,setNodes:y,nodes:_,hasDefaultNodes:g,debug:x}=h();if(m!=null&&m.length){if(g){const w=E0(m,_);y(w)}x&&console.log("React Flow: trigger node changes",m),v==null||v(m)}},triggerEdgeChanges:m=>{const{onEdgesChange:v,setEdges:y,edges:_,hasDefaultEdges:g,debug:x}=h();if(m!=null&&m.length){if(g){const w=C0(m,_);y(w)}x&&console.log("React Flow: trigger edge changes",m),v==null||v(m)}},addSelectedNodes:m=>{const{multiSelectionActive:v,edgeLookup:y,nodeLookup:_,triggerNodeChanges:g,triggerEdgeChanges:x}=h();if(v){const w=m.map(S=>st(S,!0));g(w);return}g(wt(_,new Set([...m]),!0)),x(wt(y))},addSelectedEdges:m=>{const{multiSelectionActive:v,edgeLookup:y,nodeLookup:_,triggerNodeChanges:g,triggerEdgeChanges:x}=h();if(v){const w=m.map(S=>st(S,!0));x(w);return}x(wt(y,new Set([...m]))),g(wt(_,new Set,!0))},unselectNodesAndEdges:({nodes:m,edges:v}={})=>{const{edges:y,nodes:_,nodeLookup:g,triggerNodeChanges:x,triggerEdgeChanges:w}=h(),S=m||_,N=v||y,E=S.map(R=>{const A=g.get(R.id);return A&&(A.selected=!1),st(R.id,!1)}),j=N.map(R=>st(R.id,!1));x(E),w(j)},setMinZoom:m=>{const{panZoom:v,maxZoom:y}=h();v==null||v.setScaleExtent([m,y]),d({minZoom:m})},setMaxZoom:m=>{const{panZoom:v,minZoom:y}=h();v==null||v.setScaleExtent([y,m]),d({maxZoom:m})},setTranslateExtent:m=>{var v;(v=h().panZoom)==null||v.setTranslateExtent(m),d({translateExtent:m})},setPaneClickDistance:m=>{var v;(v=h().panZoom)==null||v.setClickDistance(m)},resetSelectedElements:()=>{const{edges:m,nodes:v,triggerNodeChanges:y,triggerEdgeChanges:_,elementsSelectable:g}=h();if(!g)return;const x=v.reduce((S,N)=>N.selected?[...S,st(N.id,!1)]:S,[]),w=m.reduce((S,N)=>N.selected?[...S,st(N.id,!1)]:S,[]);y(x),_(w)},setNodeExtent:m=>{const{nodes:v,nodeLookup:y,parentLookup:_,nodeOrigin:g,elevateNodesOnSelect:x,nodeExtent:w}=h();m[0][0]===w[0][0]&&m[0][1]===w[0][1]&&m[1][0]===w[1][0]&&m[1][1]===w[1][1]||(Cu(v,y,_,{nodeOrigin:g,nodeExtent:m,elevateNodesOnSelect:x,checkEquality:!1}),d({nodeExtent:m}))},panBy:m=>{const{transform:v,width:y,height:_,panZoom:g,translateExtent:x}=h();return $N({delta:m,panZoom:g,transform:v,translateExtent:x,width:y,height:_})},setCenter:async(m,v,y)=>{const{width:_,height:g,maxZoom:x,panZoom:w}=h();if(!w)return Promise.resolve(!1);const S=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:x;return await w.setViewport({x:_/2-m*S,y:g/2-v*S,zoom:S},{duration:y==null?void 0:y.duration,ease:y==null?void 0:y.ease,interpolate:y==null?void 0:y.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{d({connection:{...Uv}})},updateConnection:m=>{d({connection:m})},reset:()=>d({...Cd()})}},Object.is);function Z0({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:a,initialMinZoom:s,initialMaxZoom:o,initialFitViewOptions:u,fitView:l,nodeOrigin:c,nodeExtent:f,children:d}){const[h]=T.useState(()=>KE({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:l,minZoom:s,maxZoom:o,fitViewOptions:u,nodeOrigin:c,nodeExtent:f}));return p.jsx(vS,{value:h,children:p.jsx($S,{children:d})})}function ZE({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:a,height:s,fitView:o,fitViewOptions:u,minZoom:l,maxZoom:c,nodeOrigin:f,nodeExtent:d}){return T.useContext(gr)?p.jsx(p.Fragment,{children:e}):p.jsx(Z0,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:a,initialHeight:s,fitView:o,initialFitViewOptions:u,initialMinZoom:l,initialMaxZoom:c,nodeOrigin:f,nodeExtent:d,children:e})}const JE={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function QE({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a,edgeTypes:s,onNodeClick:o,onEdgeClick:u,onInit:l,onMove:c,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:b,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:_,onNodeMouseMove:g,onNodeMouseLeave:x,onNodeContextMenu:w,onNodeDoubleClick:S,onNodeDragStart:N,onNodeDrag:E,onNodeDragStop:j,onNodesDelete:R,onEdgesDelete:A,onDelete:P,onSelectionChange:O,onSelectionDragStart:C,onSelectionDrag:q,onSelectionDragStop:k,onSelectionContextMenu:M,onSelectionStart:z,onSelectionEnd:L,onBeforeDelete:B,connectionMode:G,connectionLineType:F=nt.Bezier,connectionLineStyle:V,connectionLineComponent:I,connectionLineContainerStyle:D,deleteKeyCode:$="Backspace",selectionKeyCode:H="Shift",selectionOnDrag:U=!1,selectionMode:Y=tn.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:Q=tr()?"Meta":"Control",zoomActivationKeyCode:J=tr()?"Meta":"Control",snapToGrid:Z,snapGrid:X,onlyRenderVisibleElements:W=!1,selectNodesOnDrag:ie,nodesDraggable:te,autoPanOnNodeFocus:ve,nodesConnectable:we,nodesFocusable:yt,nodeOrigin:Oe=N0,edgesFocusable:pe,edgesReconnectable:ce,elementsSelectable:Ze=!0,defaultViewport:Fe=RS,minZoom:Je=.5,maxZoom:Qe=2,translateExtent:$e=en,preventScrolling:Sn=!0,nodeExtent:xt,defaultMarkerColor:Lr="#b1b1b7",zoomOnScroll:En=!0,zoomOnPinch:Re=!0,panOnScroll:ze=!1,panOnScrollSpeed:Cx=.5,panOnScrollMode:kx=ut.Free,zoomOnDoubleClick:jx=!0,panOnDrag:Ax=!0,onPaneClick:Rx,onPaneMouseEnter:Ix,onPaneMouseMove:Mx,onPaneMouseLeave:Tx,onPaneScroll:qx,onPaneContextMenu:Px,paneClickDistance:yl=0,nodeClickDistance:Dx=0,children:Lx,onReconnect:Ox,onReconnectStart:Fx,onReconnectEnd:$x,onEdgeContextMenu:zx,onEdgeDoubleClick:Bx,onEdgeMouseEnter:Hx,onEdgeMouseMove:Gx,onEdgeMouseLeave:Vx,reconnectRadius:Ux=10,onNodesChange:Yx,onEdgesChange:Wx,noDragClassName:Xx="nodrag",noWheelClassName:Kx="nowheel",noPanClassName:xl="nopan",fitView:bl,fitViewOptions:_l,connectOnClick:Zx,attributionPosition:Jx,proOptions:Qx,defaultEdgeOptions:eb,elevateNodesOnSelect:tb,elevateEdgesOnSelect:nb,disableKeyboardA11y:wl=!1,autoPanOnConnect:rb,autoPanOnNodeDrag:ib,autoPanSpeed:ab,connectionRadius:sb,isValidConnection:ob,onError:cb,style:ub,id:Nl,nodeDragThreshold:lb,connectionDragThreshold:db,viewport:fb,onViewportChange:hb,width:pb,height:gb,colorMode:mb="light",debug:vb,onScroll:Cn,ariaLabelConfig:yb,...xb},bb){const Or=Nl||"1",_b=qS(mb),wb=T.useCallback(Sl=>{Sl.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Cn==null||Cn(Sl)},[Cn]);return p.jsx("div",{"data-testid":"rf__wrapper",...xb,onScroll:wb,style:{...ub,...JE},ref:bb,className:ue(["react-flow",i,_b]),id:Nl,role:"application",children:p.jsxs(ZE,{nodes:e,edges:t,width:pb,height:gb,fitView:bl,fitViewOptions:_l,minZoom:Je,maxZoom:Qe,nodeOrigin:Oe,nodeExtent:xt,children:[p.jsx(XE,{onInit:l,onNodeClick:o,onEdgeClick:u,onNodeMouseEnter:_,onNodeMouseMove:g,onNodeMouseLeave:x,onNodeContextMenu:w,onNodeDoubleClick:S,nodeTypes:a,edgeTypes:s,connectionLineType:F,connectionLineStyle:V,connectionLineComponent:I,connectionLineContainerStyle:D,selectionKeyCode:H,selectionOnDrag:U,selectionMode:Y,deleteKeyCode:$,multiSelectionKeyCode:Q,panActivationKeyCode:K,zoomActivationKeyCode:J,onlyRenderVisibleElements:W,defaultViewport:Fe,translateExtent:$e,minZoom:Je,maxZoom:Qe,preventScrolling:Sn,zoomOnScroll:En,zoomOnPinch:Re,zoomOnDoubleClick:jx,panOnScroll:ze,panOnScrollSpeed:Cx,panOnScrollMode:kx,panOnDrag:Ax,onPaneClick:Rx,onPaneMouseEnter:Ix,onPaneMouseMove:Mx,onPaneMouseLeave:Tx,onPaneScroll:qx,onPaneContextMenu:Px,paneClickDistance:yl,nodeClickDistance:Dx,onSelectionContextMenu:M,onSelectionStart:z,onSelectionEnd:L,onReconnect:Ox,onReconnectStart:Fx,onReconnectEnd:$x,onEdgeContextMenu:zx,onEdgeDoubleClick:Bx,onEdgeMouseEnter:Hx,onEdgeMouseMove:Gx,onEdgeMouseLeave:Vx,reconnectRadius:Ux,defaultMarkerColor:Lr,noDragClassName:Xx,noWheelClassName:Kx,noPanClassName:xl,rfId:Or,disableKeyboardA11y:wl,nodeExtent:xt,viewport:fb,onViewportChange:hb}),p.jsx(TS,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:b,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:te,autoPanOnNodeFocus:ve,nodesConnectable:we,nodesFocusable:yt,edgesFocusable:pe,edgesReconnectable:ce,elementsSelectable:Ze,elevateNodesOnSelect:tb,elevateEdgesOnSelect:nb,minZoom:Je,maxZoom:Qe,nodeExtent:xt,onNodesChange:Yx,onEdgesChange:Wx,snapToGrid:Z,snapGrid:X,connectionMode:G,translateExtent:$e,connectOnClick:Zx,defaultEdgeOptions:eb,fitView:bl,fitViewOptions:_l,onNodesDelete:R,onEdgesDelete:A,onDelete:P,onNodeDragStart:N,onNodeDrag:E,onNodeDragStop:j,onSelectionDrag:q,onSelectionDragStart:C,onSelectionDragStop:k,onMove:c,onMoveStart:f,onMoveEnd:d,noPanClassName:xl,nodeOrigin:Oe,rfId:Or,autoPanOnConnect:rb,autoPanOnNodeDrag:ib,autoPanSpeed:ab,onError:cb,connectionRadius:sb,isValidConnection:ob,selectNodesOnDrag:ie,nodeDragThreshold:lb,connectionDragThreshold:db,onBeforeDelete:B,paneClickDistance:yl,debug:vb,ariaLabelConfig:yb}),p.jsx(AS,{onSelectionChange:O}),Lx,p.jsx(SS,{proOptions:Qx,position:Jx}),p.jsx(NS,{rfId:Or,disableKeyboardA11y:wl})]})})}var e2=k0(QE);function t2(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(a=>E0(i,a)),[]);return[t,n,r]}function n2(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(a=>C0(i,a)),[]);return[t,n,r]}function r2({dimensions:e,lineWidth:t,variant:n,className:r}){return p.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ue(["react-flow__background-pattern",n,r])})}function i2({radius:e,className:t}){return p.jsx("circle",{cx:e,cy:e,r:e,className:ue(["react-flow__background-pattern","dots",t])})}var Ve;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ve||(Ve={}));const a2={[Ve.Dots]:1,[Ve.Lines]:1,[Ve.Cross]:6},s2=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function J0({id:e,variant:t=Ve.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=0,color:s,bgColor:o,style:u,className:l,patternClassName:c}){const f=T.useRef(null),{transform:d,patternId:h}=ne(s2,oe),b=r||a2[t],m=t===Ve.Dots,v=t===Ve.Cross,y=Array.isArray(n)?n:[n,n],_=[y[0]*d[2]||1,y[1]*d[2]||1],g=b*d[2],x=Array.isArray(a)?a:[a,a],w=v?[g,g]:_,S=[x[0]*d[2]||1+w[0]/2,x[1]*d[2]||1+w[1]/2],N=`${h}${e||""}`;return p.jsxs("svg",{className:ue(["react-flow__background",l]),style:{...u,...vr,"--xy-background-color-props":o,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[p.jsx("pattern",{id:N,x:d[0]%_[0],y:d[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`,children:m?p.jsx(i2,{radius:g/2,className:c}):p.jsx(r2,{dimensions:w,lineWidth:i,variant:t,className:c})}),p.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}J0.displayName="Background";const o2=T.memo(J0);function c2(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:p.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function u2(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:p.jsx("path",{d:"M0 0h32v4.2H0z"})})}function l2(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:p.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function d2(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:p.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function f2(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:p.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Dn({children:e,className:t,...n}){return p.jsx("button",{type:"button",className:ue(["react-flow__controls-button",t]),...n,children:e})}const h2=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Q0({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:o,onInteractiveChange:u,className:l,children:c,position:f="bottom-left",orientation:d="vertical","aria-label":h}){const b=ae(),{isInteractive:m,minZoomReached:v,maxZoomReached:y,ariaLabelConfig:_}=ne(h2,oe),{zoomIn:g,zoomOut:x,fitView:w}=mr(),S=()=>{g(),a==null||a()},N=()=>{x(),s==null||s()},E=()=>{w(i),o==null||o()},j=()=>{b.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),u==null||u(!m)},R=d==="horizontal"?"horizontal":"vertical";return p.jsxs(vn,{className:ue(["react-flow__controls",R,l]),position:f,style:e,"data-testid":"rf__controls","aria-label":h??_["controls.ariaLabel"],children:[t&&p.jsxs(p.Fragment,{children:[p.jsx(Dn,{onClick:S,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:y,children:p.jsx(c2,{})}),p.jsx(Dn,{onClick:N,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:v,children:p.jsx(u2,{})})]}),n&&p.jsx(Dn,{className:"react-flow__controls-fitview",onClick:E,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:p.jsx(l2,{})}),r&&p.jsx(Dn,{className:"react-flow__controls-interactive",onClick:j,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:m?p.jsx(f2,{}):p.jsx(d2,{})}),c]})}Q0.displayName="Controls";const p2=T.memo(Q0);function g2({id:e,x:t,y:n,width:r,height:i,style:a,color:s,strokeColor:o,strokeWidth:u,className:l,borderRadius:c,shapeRendering:f,selected:d,onClick:h}){const{background:b,backgroundColor:m}=a||{},v=s||b||m;return p.jsx("rect",{className:ue(["react-flow__minimap-node",{selected:d},l]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:v,stroke:o,strokeWidth:u},shapeRendering:f,onClick:h?y=>h(y,e):void 0})}const m2=T.memo(g2),v2=e=>e.nodes.map(t=>t.id),Yr=e=>e instanceof Function?e:()=>e;function y2({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=m2,onClick:s}){const o=ne(v2,oe),u=Yr(t),l=Yr(e),c=Yr(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return p.jsx(p.Fragment,{children:o.map(d=>p.jsx(b2,{id:d,nodeColorFunc:u,nodeStrokeColorFunc:l,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:f},d))})}function x2({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:o,onClick:u}){const{node:l,x:c,y:f,width:d,height:h}=ne(b=>{const{internals:m}=b.nodeLookup.get(e),v=m.userNode,{x:y,y:_}=m.positionAbsolute,{width:g,height:x}=We(v);return{node:v,x:y,y:_,width:g,height:x}},oe);return!l||l.hidden||!Qv(l)?null:p.jsx(o,{x:c,y:f,width:d,height:h,style:l.style,selected:!!l.selected,className:r(l),color:t(l),borderRadius:i,strokeColor:n(l),strokeWidth:a,shapeRendering:s,onClick:u,id:l.id})}const b2=T.memo(x2);var _2=T.memo(y2);const w2=200,N2=150,S2=e=>!e.hidden,E2=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Jv(gn(e.nodeLookup,{filter:S2}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},C2="react-flow__minimap-desc";function ey({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:o,bgColor:u,maskColor:l,maskStrokeColor:c,maskStrokeWidth:f,position:d="bottom-right",onClick:h,onNodeClick:b,pannable:m=!1,zoomable:v=!1,ariaLabel:y,inversePan:_,zoomStep:g=10,offsetScale:x=5}){const w=ae(),S=T.useRef(null),{boundingRect:N,viewBB:E,rfId:j,panZoom:R,translateExtent:A,flowWidth:P,flowHeight:O,ariaLabelConfig:C}=ne(E2,oe),q=(e==null?void 0:e.width)??w2,k=(e==null?void 0:e.height)??N2,M=N.width/q,z=N.height/k,L=Math.max(M,z),B=L*q,G=L*k,F=x*L,V=N.x-(B-N.width)/2-F,I=N.y-(G-N.height)/2-F,D=B+F*2,$=G+F*2,H=`${C2}-${j}`,U=T.useRef(0),Y=T.useRef();U.current=L,T.useEffect(()=>{if(S.current&&R)return Y.current=WN({domNode:S.current,panZoom:R,getTransform:()=>w.getState().transform,getViewScale:()=>U.current}),()=>{var Z;(Z=Y.current)==null||Z.destroy()}},[R]),T.useEffect(()=>{var Z;(Z=Y.current)==null||Z.update({translateExtent:A,width:P,height:O,inversePan:_,pannable:m,zoomStep:g,zoomable:v})},[m,v,_,g,A,P,O]);const K=h?Z=>{var ie;const[X,W]=((ie=Y.current)==null?void 0:ie.pointer(Z))||[0,0];h(Z,{x:X,y:W})}:void 0,Q=b?T.useCallback((Z,X)=>{const W=w.getState().nodeLookup.get(X).internals.userNode;b(Z,W)},[]):void 0,J=y??C["minimap.ariaLabel"];return p.jsx(vn,{position:d,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*L:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:ue(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:p.jsxs("svg",{width:q,height:k,viewBox:`${V} ${I} ${D} ${$}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":H,ref:S,onClick:K,children:[J&&p.jsx("title",{id:H,children:J}),p.jsx(_2,{onClick:Q,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:o}),p.jsx("path",{className:"react-flow__minimap-mask",d:`M${V-F},${I-F}h${D+F*2}v${$+F*2}h${-D-F*2}z
        M${E.x},${E.y}h${E.width}v${E.height}h${-E.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ey.displayName="MiniMap";const k2=T.memo(ey),j2=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,A2={[Rt.Line]:"right",[Rt.Handle]:"bottom-right"};function R2({nodeId:e,position:t,variant:n=Rt.Handle,className:r,style:i=void 0,children:a,color:s,minWidth:o=10,minHeight:u=10,maxWidth:l=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:d,autoScale:h=!0,shouldResize:b,onResizeStart:m,onResize:v,onResizeEnd:y}){const _=I0(),g=typeof e=="string"?e:_,x=ae(),w=T.useRef(null),S=n===Rt.Handle,N=ne(T.useCallback(j2(S&&h),[S,h]),oe),E=T.useRef(null),j=t??A2[n];T.useEffect(()=>{if(!(!w.current||!g))return E.current||(E.current=lS({domNode:w.current,nodeId:g,getStoreItems:()=>{const{nodeLookup:A,transform:P,snapGrid:O,snapToGrid:C,nodeOrigin:q,domNode:k}=x.getState();return{nodeLookup:A,transform:P,snapGrid:O,snapToGrid:C,nodeOrigin:q,paneDomNode:k}},onChange:(A,P)=>{const{triggerNodeChanges:O,nodeLookup:C,parentLookup:q,nodeOrigin:k}=x.getState(),M=[],z={x:A.x,y:A.y},L=C.get(g);if(L&&L.expandParent&&L.parentId){const B=L.origin??k,G=A.width??L.measured.width??0,F=A.height??L.measured.height??0,V={id:L.id,parentId:L.parentId,rect:{width:G,height:F,...e0({x:A.x??L.position.x,y:A.y??L.position.y},{width:G,height:F},L.parentId,C,B)}},I=Yu([V],C,q,k);M.push(...I),z.x=A.x?Math.max(B[0]*G,A.x):void 0,z.y=A.y?Math.max(B[1]*F,A.y):void 0}if(z.x!==void 0&&z.y!==void 0){const B={id:g,type:"position",position:{...z}};M.push(B)}if(A.width!==void 0&&A.height!==void 0){const G={id:g,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:A.width,height:A.height}};M.push(G)}for(const B of P){const G={...B,type:"position"};M.push(G)}O(M)},onEnd:({width:A,height:P})=>{const O={id:g,type:"dimensions",resizing:!1,dimensions:{width:A,height:P}};x.getState().triggerNodeChanges([O])}})),E.current.update({controlPosition:j,boundaries:{minWidth:o,minHeight:u,maxWidth:l,maxHeight:c},keepAspectRatio:f,resizeDirection:d,onResizeStart:m,onResize:v,onResizeEnd:y,shouldResize:b}),()=>{var A;(A=E.current)==null||A.destroy()}},[j,o,u,l,c,f,m,v,y,b]);const R=j.split("-");return p.jsx("div",{className:ue(["react-flow__resize-control","nodrag",...R,n,r]),ref:w,style:{...i,scale:N,...s&&{[S?"backgroundColor":"borderColor"]:s}},children:a})}T.memo(R2);const kd={foundation:"bg-primary text-primary-foreground border-primary",technique:"bg-chart-2 text-white border-chart-2",combination:"bg-chart-1 text-white border-chart-1",application:"bg-accent text-accent-foreground border-accent",usecase:"bg-chart-5 text-white border-chart-5",product:"bg-destructive text-destructive-foreground border-destructive",default:"bg-muted text-muted-foreground border-muted"},I2={Finance:"bg-blue-500",Medical:"bg-green-500",Legal:"bg-purple-500",Education:"bg-yellow-500",Retail:"bg-orange-500",Gaming:"bg-pink-500",Technology:"bg-cyan-500",Banking:"bg-indigo-500",Insurance:"bg-red-500",Government:"bg-gray-500",Pharma:"bg-emerald-500",Automotive:"bg-teal-500",Energy:"bg-amber-500",Manufacturing:"bg-slate-500",Transportation:"bg-violet-500",Logistics:"bg-lime-500",Entertainment:"bg-rose-500",Media:"bg-fuchsia-500",Marketing:"bg-sky-500",Fashion:"bg-pink-400",Software:"bg-blue-400","Customer Service":"bg-indigo-400",Art:"bg-purple-400",Blockchain:"bg-orange-400",Training:"bg-yellow-400"},M2=e=>kd[e]||kd.default,T2=e=>I2[e]||"bg-gray-400",jd={background:"transparent",border:"none",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1,height:1},q2=({data:e,selected:t})=>{const n=e,r=n.nodeType||n.category||"default",i=n.childCount||0,a=T.useMemo(()=>M2(r),[r]),s=T.useMemo(()=>`px-3 py-2 rounded-md border shadow-sm transition-all min-w-[140px] relative ${a} ${t?"ring-2 ring-ring ring-offset-1":""}`,[a,t]);return p.jsxs(p.Fragment,{children:[p.jsx(It,{type:"source",position:ee.Top,id:"source",className:"!opacity-0 !pointer-events-none",style:jd}),p.jsx(It,{type:"target",position:ee.Bottom,id:"target",className:"!opacity-0 !pointer-events-none",style:jd}),p.jsx("div",{className:s,children:p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"font-medium text-xs",children:[n.label,i>0&&p.jsxs("span",{className:"ml-1 text-xs opacity-60",children:["(",i,")"]})]}),r!=="product"&&r!=="application"&&r!=="default"&&p.jsx("div",{className:"text-xs opacity-70 mt-0.5",children:r.charAt(0).toUpperCase()+r.slice(1)}),(r==="product"||r==="application")&&n.domains&&n.domains.length>0&&p.jsxs("div",{className:"flex justify-center gap-0.5 mt-1",children:[n.domains.slice(0,3).map(o=>p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${T2(o)}`,title:o},o)),n.domains.length>3&&p.jsxs("div",{className:"text-xs opacity-50",children:["+",n.domains.length-3]})]})]})})]})},P2=T.memo(q2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],L2=re("calendar",D2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ty=re("check",O2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ny=re("circle-check-big",F2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],z2=re("circle",$2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],H2=re("code",B2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Ad=re("cpu",G2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],rr=re("file-json",V2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Y2=re("git-branch",U2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ln=re("grid-3x3",W2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],K2=re("grip-vertical",X2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],J2=re("layers",Z2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],eC=re("lightbulb",Q2);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Rd=re("maximize-2",tC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]],rC=re("merge",nC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Id=re("minimize-2",iC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],sC=re("package",aC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],cC=re("pause",oC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],lC=re("play",uC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fC=re("plus",dC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],pC=re("rotate-cw",hC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],mC=re("scale",gC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],yC=re("settings-2",vC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],bC=re("shuffle",xC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Md=re("tag",_C);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],NC=re("target",wC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],EC=re("tree-pine",SC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],kC=re("trending-up",CC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ry=re("triangle-alert",jC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],RC=re("trophy",AC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ir=re("upload",IC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],TC=re("zap",MC),iy=T.createContext(void 0),Xu=()=>{const e=T.useContext(iy);if(!e)throw new Error("useData must be used within a DataProvider");return e},qC=[{id:"sample1",type:"custom",position:{x:250,y:100},data:{label:"AI Foundation",nodeType:"foundation",category:"core",domains:["Technology"]}},{id:"sample2",type:"custom",position:{x:100,y:200},data:{label:"Machine Learning",nodeType:"technique",category:"algorithm",domains:["Technology","Finance"]}},{id:"sample3",type:"custom",position:{x:400,y:200},data:{label:"Deep Learning",nodeType:"technique",category:"algorithm",domains:["Technology","Medical"]}},{id:"sample4",type:"custom",position:{x:250,y:300},data:{label:"Neural Networks",nodeType:"combination",category:"hybrid",domains:["Technology"]}},{id:"sample5",type:"custom",position:{x:250,y:400},data:{label:"AI Assistant",nodeType:"product",category:"solution",domains:["Technology","Retail","Education"]}}],ay=[{id:"e1-2",source:"sample1",target:"sample2",type:"simplebezier",data:{edgeType:"dependency"}},{id:"e1-3",source:"sample1",target:"sample3",type:"simplebezier",data:{edgeType:"dependency"}},{id:"e2-4",source:"sample2",target:"sample4",type:"simplebezier",data:{edgeType:"evolution"}},{id:"e3-4",source:"sample3",target:"sample4",type:"simplebezier",data:{edgeType:"evolution"}},{id:"e4-5",source:"sample4",target:"sample5",type:"simplebezier",data:{edgeType:"implementation"}}],PC={sample1:{description:"The foundational concepts and theories that underpin artificial intelligence",capabilities:["Pattern Recognition","Data Processing","Automated Decision Making"],limitations:["Requires Large Datasets","Computational Resources"],useCases:["Automation","Prediction","Optimization"],technicalDetails:"Core algorithms and mathematical frameworks for AI systems"},sample2:{description:"Algorithms that enable computers to learn from and make predictions based on data",capabilities:["Supervised Learning","Unsupervised Learning","Feature Extraction"],limitations:["Data Quality Dependency","Overfitting Risk"],useCases:["Classification","Regression","Clustering"],technicalDetails:"Statistical methods and optimization techniques for model training"},sample3:{description:"Advanced machine learning using artificial neural networks with multiple layers",capabilities:["Complex Pattern Recognition","Feature Learning","High-dimensional Data Processing"],limitations:["Requires Massive Data","Black Box Nature","High Computational Cost"],useCases:["Image Recognition","Natural Language Processing","Speech Recognition"],technicalDetails:"Multi-layer neural networks with backpropagation and gradient descent"},sample4:{description:"Computational models inspired by biological neural networks",capabilities:["Non-linear Modeling","Parallel Processing","Adaptive Learning"],limitations:["Training Complexity","Interpretability"],useCases:["Pattern Recognition","Function Approximation","Time Series Prediction"],technicalDetails:"Interconnected nodes with weights, biases, and activation functions"},sample5:{description:"AI-powered virtual assistant providing automated help and support",capabilities:["Natural Language Understanding","Task Automation","Contextual Responses"],limitations:["Limited to Training Data","May Produce Errors"],useCases:["Customer Service","Personal Assistance","Information Retrieval"],technicalDetails:"Combines NLP, machine learning, and dialogue management systems"}},DC=(e,t)=>{const n={};return e.forEach(r=>{n[r.id]=0}),t.forEach(r=>{n[r.source]!==void 0&&n[r.source]++}),e.map(r=>({...r,data:{...r.data,childCount:n[r.id]||0}}))},LC=DC(qC,ay),OC=({children:e})=>{const[t,n]=T.useState(LC),[r,i]=T.useState(ay),[a,s]=T.useState(PC),[o,u]=T.useState([]);T.useEffect(()=>{const b=localStorage.getItem("ai-capability-map-loaded-files");if(b)try{const v=JSON.parse(b).map(y=>({...y,loadedAt:new Date(y.loadedAt)}));u(v)}catch(m){console.error("Failed to load saved files:",m)}},[]),T.useEffect(()=>{o.length>0?localStorage.setItem("ai-capability-map-loaded-files",JSON.stringify(o)):localStorage.removeItem("ai-capability-map-loaded-files")},[o]);const l=b=>{const m={};b.nodes.forEach(y=>{m[y.id]=0}),b.edges.forEach(y=>{m[y.source]!==void 0&&m[y.source]++});const v=b.nodes.map(y=>({...y,data:{...y.data,childCount:m[y.id]||0}}));n(v),i(b.edges),s(b.descriptions)},c=b=>{u(m=>[...m,b])},f=b=>{u(m=>m.filter(v=>v.id!==b))},d=()=>{u([]),localStorage.removeItem("ai-capability-map-loaded-files")},h=t.length>0;return p.jsx(iy.Provider,{value:{nodes:t,edges:r,descriptions:a,setData:l,hasData:h,loadedFiles:o,setLoadedFiles:u,addLoadedFile:c,removeLoadedFile:f,clearLoadedFiles:d},children:e})},FC=e=>({Finance:"bg-blue-500",Medical:"bg-green-500",Legal:"bg-purple-500",Education:"bg-yellow-500",Retail:"bg-orange-500",Gaming:"bg-pink-500",Technology:"bg-cyan-500",Banking:"bg-indigo-500",Insurance:"bg-red-500",Government:"bg-gray-500",Pharma:"bg-emerald-500",Automotive:"bg-teal-500",Energy:"bg-amber-500",Manufacturing:"bg-slate-500",Transportation:"bg-violet-500",Logistics:"bg-lime-500",Entertainment:"bg-rose-500",Media:"bg-fuchsia-500",Marketing:"bg-sky-500",Fashion:"bg-pink-400",Software:"bg-blue-400","Customer Service":"bg-indigo-400",Art:"bg-purple-400",Blockchain:"bg-orange-400",Training:"bg-yellow-400"})[e]||"bg-gray-400",$C=({node:e,onClose:t,connectedNodes:n,onNodeClick:r})=>{const{descriptions:i}=Xu();if(!e)return null;const a=i[e.id];return a?p.jsxs("div",{className:"fixed right-0 top-0 h-full w-96 bg-background border-l shadow-xl z-50 overflow-hidden flex flex-col",children:[p.jsx("div",{className:"p-6 border-b bg-muted/30",children:p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:a.title||e.data.label}),p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(e.data.nodeType||e.data.category||"NODE").toUpperCase()})]}),p.jsx("button",{onClick:t,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:p.jsx(Ru,{className:"w-5 h-5"})})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(a.description||a.shortDescription||a.fullDescription)&&p.jsx("div",{children:p.jsx("p",{className:"text-muted-foreground leading-relaxed",children:a.description||a.shortDescription||a.fullDescription})}),e.data.domains&&e.data.domains.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[p.jsx(Md,{className:"w-4 h-4"}),"Industries & Domains"]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:e.data.domains.map(s=>p.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-muted text-muted-foreground text-xs font-medium border",children:[p.jsx("div",{className:`w-2 h-2 rounded-full ${FC(s)}`}),s]},s))})]}),a.capabilities&&a.capabilities.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(ny,{className:"w-4 h-4 text-green-500"}),"Capabilities"]}),p.jsx("ul",{className:"space-y-2",children:a.capabilities.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-green-500 mr-2 mt-0.5",children:""}),p.jsx("span",{children:s})]},o))})]}),a.keyFeatures&&a.keyFeatures.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Key Features"}),p.jsx("ul",{className:"space-y-2",children:a.keyFeatures.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-primary mr-2",children:""}),p.jsx("span",{children:s})]},o))})]}),a.limitations&&a.limitations.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(ry,{className:"w-4 h-4 text-yellow-500"}),"Limitations"]}),p.jsx("ul",{className:"space-y-2",children:a.limitations.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-yellow-500 mr-2 mt-0.5",children:""}),p.jsx("span",{children:s})]},o))})]}),a.useCases&&a.useCases.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(eC,{className:"w-4 h-4 text-blue-500"}),"Use Cases"]}),p.jsx("ul",{className:"space-y-2",children:a.useCases.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-blue-500 mr-2",children:""}),p.jsx("span",{children:s})]},o))})]}),a.technicalDetails&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(H2,{className:"w-4 h-4 text-purple-500"}),"Technical Details"]}),p.jsx("div",{className:"text-sm text-muted-foreground bg-muted/30 p-4 rounded-lg border border-border/50",children:p.jsx("p",{className:"leading-relaxed font-mono text-xs",children:a.technicalDetails})})]}),a.features&&a.features.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(sC,{className:"w-4 h-4 text-indigo-500"}),"Product Features"]}),p.jsx("ul",{className:"space-y-2",children:a.features.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-indigo-500 mr-2 mt-0.5",children:""}),p.jsx("span",{children:s})]},o))})]}),a.achievements&&a.achievements.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(RC,{className:"w-4 h-4 text-yellow-500"}),"Key Achievements"]}),p.jsx("div",{className:"space-y-3",children:a.achievements.map((s,o)=>p.jsx("div",{className:"bg-gradient-to-r from-yellow-500/10 to-transparent p-3 rounded-lg border-l-2 border-yellow-500",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:s.title}),s.description&&p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]}),s.year&&p.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:s.year})]})},o))})]}),a.timeline&&a.timeline.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(Ib,{className:"w-4 h-4 text-teal-500"}),"Product Timeline"]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute left-2 top-3 bottom-3 w-0.5 bg-border"}),p.jsx("div",{className:"space-y-4",children:a.timeline.map((s,o)=>p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"relative",children:p.jsx("div",{className:"w-4 h-4 rounded-full bg-teal-500 border-2 border-background"})}),p.jsxs("div",{className:"flex-1 -mt-1",children:[p.jsx("div",{className:"flex items-center gap-2 mb-1",children:p.jsx("span",{className:"text-xs font-medium text-teal-600 dark:text-teal-400",children:s.date})}),p.jsx("p",{className:"text-sm font-medium text-foreground",children:s.event}),s.description&&p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]})]},o))})]})]}),(a.yearIntroduced||a.marketSize)&&p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.yearIntroduced&&p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx(L2,{className:"w-4 h-4 text-muted-foreground"}),p.jsxs("span",{className:"text-muted-foreground",children:["Introduced: ",a.yearIntroduced]})]}),a.marketSize&&p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx(kC,{className:"w-4 h-4 text-muted-foreground"}),p.jsx("span",{className:"text-muted-foreground",children:a.marketSize})]})]}),a.tags&&a.tags.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(s=>p.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium",children:[p.jsx(Md,{className:"w-3 h-3"}),s]},s))}),n&&p.jsxs("div",{className:"space-y-4",children:[n.source.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[p.jsx(Ad,{className:"w-4 h-4"}),"Enabled By"]}),p.jsx("div",{className:"space-y-1",children:n.source.map(s=>p.jsx("div",{className:"text-sm text-muted-foreground bg-muted/30 p-2 rounded cursor-pointer hover:bg-muted/50 hover:text-foreground transition-colors group",onClick:()=>r==null?void 0:r(s.id),children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[s.data.label,p.jsxs("span",{className:"text-xs ml-2 opacity-60",children:["(",s.data.nodeType,")"]})]}),p.jsx("span",{className:"text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""})]})},s.id))})]}),n.target.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[p.jsx(Ad,{className:"w-4 h-4"}),"Enables"]}),p.jsx("div",{className:"space-y-1",children:n.target.map(s=>p.jsx("div",{className:"text-sm text-muted-foreground bg-muted/30 p-2 rounded cursor-pointer hover:bg-muted/50 hover:text-foreground transition-colors group",onClick:()=>r==null?void 0:r(s.id),children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[s.data.label,p.jsxs("span",{className:"text-xs ml-2 opacity-60",children:["(",s.data.nodeType,")"]})]}),p.jsx("span",{className:"text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""})]})},s.id))})]})]}),a.relatedLinks&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Learn More"}),p.jsx("div",{className:"space-y-2",children:a.relatedLinks.map((s,o)=>p.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[p.jsx(Tb,{className:"w-4 h-4"}),s.title]},o))})]})]})]}):null},zC={hierarchical:["dagreNodeSep","dagreRankSep","dagreEdgeSep","alignment","ranker","animate"],tree:["dagreNodeSep","dagreRankSep","alignment","animate"],longestPath:["dagreNodeSep","dagreRankSep","animate"],compact:["dagreNodeSep","dagreRankSep","dagreEdgeSep","animate"],wide:["dagreNodeSep","dagreRankSep","dagreEdgeSep","animate"],balanced:["dagreNodeSep","dagreRankSep","alignment","animate"],radial:["radialSpacing","startAngle","endAngle","animate"],force:["forceStrength","forceDistance","chargeStrength","collisionRadius","iterations","animate"],forceHierarchy:["forceDistance","chargeStrength","collisionRadius","iterations","animate"],forceRadial:["forceDistance","chargeStrength","collisionRadius","animate"],TB:["dagreNodeSep","dagreRankSep","animate"],LR:["dagreNodeSep","dagreRankSep","animate"],BT:["dagreNodeSep","dagreRankSep","animate"],RL:["dagreNodeSep","dagreRankSep","animate"],manual:["animate"]},BC=({config:e,onConfigChange:t,onLayoutSelect:n,selectedLayout:r,onSimulationStart:i,onSimulationStop:a,onSimulationReheat:s,isSimulationRunning:o=!1})=>{const[u,l]=Ie.useState(!1),c=Ie.useMemo(()=>({...e,radialSpacing:e.radialSpacing??200,startAngle:e.startAngle??0,endAngle:e.endAngle??360,forceStrength:e.forceStrength??-1e3,forceDistance:e.forceDistance??150,chargeStrength:e.chargeStrength??-1e3,collisionRadius:e.collisionRadius??50,iterations:e.iterations??300,dagreNodeWidth:e.dagreNodeWidth??200,dagreNodeHeight:e.dagreNodeHeight??100,dagreNodeSep:e.dagreNodeSep??100,dagreRankSep:e.dagreRankSep??150,dagreEdgeSep:e.dagreEdgeSep??50,dagreMarginX:e.dagreMarginX??50,dagreMarginY:e.dagreMarginY??50}),[e]),f=[{id:"hierarchical",name:"Hierarchical",icon:Y2},{id:"tree",name:"Tree",icon:EC},{id:"longestPath",name:"Longest Path",icon:bC},{id:"compact",name:"Compact",icon:Id},{id:"wide",name:"Wide",icon:Rd},{id:"balanced",name:"Balanced",icon:mC},{id:"radial",name:"Radial",icon:z2},{id:"force",name:"Force",icon:TC},{id:"forceHierarchy",name:"Force Hierarchy",icon:qb},{id:"forceRadial",name:"Force Radial",icon:NC},{id:"TB",name:"Top-Bottom",icon:Ln},{id:"LR",name:"Left-Right",icon:Ln},{id:"BT",name:"Bottom-Top",icon:Ln},{id:"RL",name:"Right-Left",icon:Ln}],d=zC[r]||[],h=d.length>0,b=r.includes("force")||r.includes("Force");return p.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[p.jsx(yC,{className:"w-4 h-4"}),"Layout Options"]}),h&&p.jsx("button",{onClick:()=>l(!u),className:"p-1 hover:bg-muted rounded transition-colors",title:u?"Collapse settings":"Expand settings",children:u?p.jsx(Id,{className:"w-4 h-4"}):p.jsx(Rd,{className:"w-4 h-4"})})]}),p.jsx("div",{className:"grid grid-cols-3 lg:grid-cols-4 gap-2",children:f.map(m=>{const v=m.icon;return p.jsxs("button",{onClick:()=>n(m.id),className:`px-3 py-2 text-xs font-medium rounded-md transition-colors flex items-center justify-center gap-1 ${r===m.id?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,title:m.name,children:[p.jsx(v,{className:"w-3 h-3"}),p.jsx("span",{className:"hidden sm:inline",children:m.name})]},m.id)})}),b&&p.jsxs("div",{className:"flex gap-2 p-3 bg-muted/50 rounded-md",children:[p.jsx("button",{onClick:o?a:i,className:`px-3 py-2 text-xs font-medium rounded-md transition-colors flex items-center gap-1 ${o?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary text-primary-foreground hover:bg-primary/90"}`,title:o?"Stop Simulation":"Start Simulation",children:o?p.jsxs(p.Fragment,{children:[p.jsx(cC,{className:"w-3 h-3"}),p.jsx("span",{children:"Stop"})]}):p.jsxs(p.Fragment,{children:[p.jsx(lC,{className:"w-3 h-3"}),p.jsx("span",{children:"Start"})]})}),p.jsxs("button",{onClick:s,disabled:!o,className:`px-3 py-2 text-xs font-medium rounded-md transition-colors flex items-center gap-1 ${o?"bg-secondary text-secondary-foreground hover:bg-secondary/80":"bg-muted text-muted-foreground cursor-not-allowed opacity-50"}`,title:"Reheat Simulation",children:[p.jsx(pC,{className:"w-3 h-3"}),p.jsx("span",{children:"Reheat"})]}),o&&p.jsxs("div",{className:"flex items-center px-3 text-xs text-muted-foreground",children:[p.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2"}),p.jsx("span",{children:"Simulating..."})]})]}),u&&h&&p.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[d.includes("nodeSpacingX")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Horizontal Spacing"}),p.jsxs("span",{children:[c.nodeSpacingX,"px"]})]}),p.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:c.nodeSpacingX,onChange:m=>t({...c,nodeSpacingX:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("nodeSpacingY")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Vertical Spacing"}),p.jsxs("span",{children:[c.nodeSpacingY,"px"]})]}),p.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:c.nodeSpacingY,onChange:m=>t({...c,nodeSpacingY:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("rankSpacing")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Layer Distance"}),p.jsxs("span",{children:[c.rankSpacing,"px"]})]}),p.jsx("input",{type:"range",min:"100",max:"400",step:"10",value:c.rankSpacing,onChange:m=>t({...c,rankSpacing:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("radialSpacing")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Radial Distance"}),p.jsxs("span",{children:[c.radialSpacing,"px"]})]}),p.jsx("input",{type:"range",min:"100",max:"500",step:"20",value:c.radialSpacing,onChange:m=>t({...c,radialSpacing:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("startAngle")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Start Angle"}),p.jsxs("span",{children:[c.startAngle,""]})]}),p.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:c.startAngle,onChange:m=>t({...c,startAngle:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("endAngle")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"End Angle"}),p.jsxs("span",{children:[c.endAngle,""]})]}),p.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:c.endAngle,onChange:m=>t({...c,endAngle:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("forceDistance")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Link Distance"}),p.jsxs("span",{children:[c.forceDistance,"px"]})]}),p.jsx("input",{type:"range",min:"50",max:"800",step:"25",value:c.forceDistance,onChange:m=>t({...c,forceDistance:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("chargeStrength")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Repulsion Force"}),p.jsx("span",{children:c.chargeStrength})]}),p.jsx("input",{type:"range",min:"-3000",max:"-100",step:"100",value:c.chargeStrength,onChange:m=>t({...c,chargeStrength:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("collisionRadius")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Collision Radius"}),p.jsxs("span",{children:[c.collisionRadius,"px"]})]}),p.jsx("input",{type:"range",min:"10",max:"200",step:"10",value:c.collisionRadius,onChange:m=>t({...c,collisionRadius:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("iterations")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Simulation Steps"}),p.jsx("span",{children:c.iterations})]}),p.jsx("input",{type:"range",min:"100",max:"500",step:"50",value:c.iterations,onChange:m=>t({...c,iterations:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("dagreNodeSep")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Node Separation"}),p.jsxs("span",{children:[c.dagreNodeSep,"px"]})]}),p.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:c.dagreNodeSep,onChange:m=>t({...c,dagreNodeSep:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("dagreRankSep")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Rank Separation"}),p.jsxs("span",{children:[c.dagreRankSep,"px"]})]}),p.jsx("input",{type:"range",min:"50",max:"400",step:"10",value:c.dagreRankSep,onChange:m=>t({...c,dagreRankSep:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("dagreEdgeSep")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Edge Separation"}),p.jsxs("span",{children:[c.dagreEdgeSep,"px"]})]}),p.jsx("input",{type:"range",min:"10",max:"150",step:"10",value:c.dagreEdgeSep,onChange:m=>t({...c,dagreEdgeSep:parseInt(m.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),d.includes("alignment")&&p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Node Alignment"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"UL",label:"Up-Left"},{value:"UR",label:"Up-Right"},{value:"DL",label:"Down-Left"},{value:"DR",label:"Down-Right"}].map(m=>p.jsx("button",{onClick:()=>t({...c,alignment:m.value}),className:`px-2 py-1 text-xs rounded transition-colors ${c.alignment===m.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:m.label},m.value))})]}),d.includes("ranker")&&p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Layout Algorithm"}),p.jsxs("select",{value:c.ranker,onChange:m=>t({...c,ranker:m.target.value}),className:"w-full px-2 py-1 text-xs bg-muted text-foreground rounded border border-border",children:[p.jsx("option",{value:"network-simplex",children:"Network Simplex (Balanced)"}),p.jsx("option",{value:"tight-tree",children:"Tight Tree (Compact)"}),p.jsx("option",{value:"longest-path",children:"Longest Path (Hierarchical)"})]})]}),d.includes("animate")&&p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Animate Transitions"}),p.jsx("button",{onClick:()=>t({...c,animate:!c.animate}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${c.animate?"bg-primary":"bg-muted"}`,children:p.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${c.animate?"translate-x-5":"translate-x-1"}`})})]}),p.jsx("button",{onClick:()=>{t({nodeSpacingX:100,nodeSpacingY:100,rankSpacing:150,alignment:"UL",ranker:"network-simplex",animate:!0,radialSpacing:200,startAngle:0,endAngle:360})},className:"w-full px-3 py-1.5 text-xs bg-secondary text-secondary-foreground hover:bg-secondary/80 rounded-md transition-colors",children:"Reset to Defaults"})]}),u&&!h&&p.jsx("div",{className:"pt-3 border-t",children:p.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"No configuration options for manual layout"})})]})};function Td({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:ln("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function HC(e){const t=e+"CollectionProvider",[n,r]=Iu(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:v,children:y}=m,_=Ie.useRef(null),g=Ie.useRef(new Map).current;return p.jsx(i,{scope:v,itemMap:g,collectionRef:_,children:y})};s.displayName=t;const o=e+"CollectionSlot",u=El(o),l=Ie.forwardRef((m,v)=>{const{scope:y,children:_}=m,g=a(o,y),x=pu(v,g.collectionRef);return p.jsx(u,{ref:x,children:_})});l.displayName=o;const c=e+"CollectionItemSlot",f="data-radix-collection-item",d=El(c),h=Ie.forwardRef((m,v)=>{const{scope:y,children:_,...g}=m,x=Ie.useRef(null),w=pu(v,x),S=a(c,y);return Ie.useEffect(()=>(S.itemMap.set(x,{ref:x,...g}),()=>void S.itemMap.delete(x))),p.jsx(d,{[f]:"",ref:w,children:_})});h.displayName=c;function b(m){const v=a(e+"CollectionConsumer",m);return Ie.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const g=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((S,N)=>g.indexOf(S.ref.current)-g.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:s,Slot:l,ItemSlot:h},b,r]}var GC=T.createContext(void 0);function sy(e){const t=T.useContext(GC);return e||t||"ltr"}var Wr="rovingFocusGroup.onEntryFocus",VC={bubbles:!1,cancelable:!0},yn="RovingFocusGroup",[Au,oy,UC]=HC(yn),[YC,cy]=Iu(yn,[UC]),[WC,XC]=YC(yn),uy=T.forwardRef((e,t)=>p.jsx(Au.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Au.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(KC,{...e,ref:t})})}));uy.displayName=yn;var KC=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:u,onEntryFocus:l,preventScrollOnEntryFocus:c=!1,...f}=e,d=T.useRef(null),h=pu(t,d),b=sy(a),[m,v]=cv({prop:s,defaultProp:o??null,onChange:u,caller:yn}),[y,_]=T.useState(!1),g=kb(l),x=oy(n),w=T.useRef(!1),[S,N]=T.useState(0);return T.useEffect(()=>{const E=d.current;if(E)return E.addEventListener(Wr,g),()=>E.removeEventListener(Wr,g)},[g]),p.jsx(WC,{scope:n,orientation:r,dir:b,loop:i,currentTabStopId:m,onItemFocus:T.useCallback(E=>v(E),[v]),onItemShiftTab:T.useCallback(()=>_(!0),[]),onFocusableItemAdd:T.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:T.useCallback(()=>N(E=>E-1),[]),children:p.jsx(Mt.div,{tabIndex:y||S===0?-1:0,"data-orientation":r,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:Ge(e.onMouseDown,()=>{w.current=!0}),onFocus:Ge(e.onFocus,E=>{const j=!w.current;if(E.target===E.currentTarget&&j&&!y){const R=new CustomEvent(Wr,VC);if(E.currentTarget.dispatchEvent(R),!R.defaultPrevented){const A=x().filter(k=>k.focusable),P=A.find(k=>k.active),O=A.find(k=>k.id===m),q=[P,O,...A].filter(Boolean).map(k=>k.ref.current);fy(q,c)}}w.current=!1}),onBlur:Ge(e.onBlur,()=>_(!1))})})}),ly="RovingFocusGroupItem",dy=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:s,...o}=e,u=ov(),l=a||u,c=XC(ly,n),f=c.currentTabStopId===l,d=oy(n),{onFocusableItemAdd:h,onFocusableItemRemove:b,currentTabStopId:m}=c;return T.useEffect(()=>{if(r)return h(),()=>b()},[r,h,b]),p.jsx(Au.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:p.jsx(Mt.span,{tabIndex:f?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:Ge(e.onMouseDown,v=>{r?c.onItemFocus(l):v.preventDefault()}),onFocus:Ge(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ge(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=QC(v,c.orientation,c.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let g=d().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")g.reverse();else if(y==="prev"||y==="next"){y==="prev"&&g.reverse();const x=g.indexOf(v.currentTarget);g=c.loop?ek(g,x+1):g.slice(x+1)}setTimeout(()=>fy(g))}}),children:typeof s=="function"?s({isCurrentTabStop:f,hasTabStop:m!=null}):s})})});dy.displayName=ly;var ZC={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function JC(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function QC(e,t,n){const r=JC(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ZC[r]}function fy(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function ek(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var tk=uy,nk=dy,xr="Tabs",[rk,AI]=Iu(xr,[cy]),hy=cy(),[ik,Ku]=rk(xr),py=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:o,activationMode:u="automatic",...l}=e,c=sy(o),[f,d]=cv({prop:r,onChange:i,defaultProp:a??"",caller:xr});return p.jsx(ik,{scope:n,baseId:ov(),value:f,onValueChange:d,orientation:s,dir:c,activationMode:u,children:p.jsx(Mt.div,{dir:c,"data-orientation":s,...l,ref:t})})});py.displayName=xr;var gy="TabsList",my=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=Ku(gy,n),s=hy(n);return p.jsx(tk,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:r,children:p.jsx(Mt.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});my.displayName=gy;var vy="TabsTrigger",yy=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,s=Ku(vy,n),o=hy(n),u=_y(s.baseId,r),l=wy(s.baseId,r),c=r===s.value;return p.jsx(nk,{asChild:!0,...o,focusable:!i,active:c,children:p.jsx(Mt.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":l,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:t,onMouseDown:Ge(e.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?s.onValueChange(r):f.preventDefault()}),onKeyDown:Ge(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&s.onValueChange(r)}),onFocus:Ge(e.onFocus,()=>{const f=s.activationMode!=="manual";!c&&!i&&f&&s.onValueChange(r)})})})});yy.displayName=vy;var xy="TabsContent",by=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...s}=e,o=Ku(xy,n),u=_y(o.baseId,r),l=wy(o.baseId,r),c=r===o.value,f=T.useRef(c);return T.useEffect(()=>{const d=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(d)},[]),p.jsx(jb,{present:i||c,children:({present:d})=>p.jsx(Mt.div,{"data-state":c?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":u,hidden:!d,id:l,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:d&&a})})});by.displayName=xy;function _y(e,t){return`${e}-trigger-${t}`}function wy(e,t){return`${e}-content-${t}`}var ak=py,sk=my,ok=yy,ck=by;function uk({className:e,...t}){return p.jsx(ak,{"data-slot":"tabs",className:ln("flex flex-col gap-2",e),...t})}function lk({className:e,...t}){return p.jsx(sk,{"data-slot":"tabs-list",className:ln("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function qd({className:e,...t}){return p.jsx(ok,{"data-slot":"tabs-trigger",className:ln("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Pd({className:e,...t}){return p.jsx(ck,{"data-slot":"tabs-content",className:ln("flex-1 outline-none",e),...t})}const dk=({onDataMerged:e})=>{const{loadedFiles:t,setLoadedFiles:n,addLoadedFile:r,removeLoadedFile:i,clearLoadedFiles:a}=Xu(),[s,o]=T.useState([]),[u,l]=T.useState(!1),[c,f]=T.useState(""),[d,h]=T.useState(""),[b,m]=T.useState(!1),[v,y]=T.useState(null),_=T.useCallback(k=>{k.preventDefault(),k.stopPropagation(),k.type==="dragenter"||k.type==="dragover"?m(!0):k.type==="dragleave"&&m(!1)},[]),g=T.useCallback(k=>{k.preventDefault(),k.stopPropagation(),m(!1),Array.from(k.dataTransfer.files).forEach(z=>x(z))},[]),x=T.useCallback(k=>{if(!k.name.endsWith(".json")){f("Please upload JSON files only");return}const M=new FileReader;M.onload=z=>{var L,B,G;try{const F=JSON.parse((L=z.target)==null?void 0:L.result),V=`${k.name}-${Date.now()}`;let I,D=0,$=0,H=0;if(F.nodes&&F.edges)I="graph",D=((B=F.nodes)==null?void 0:B.length)||0,$=((G=F.edges)==null?void 0:G.length)||0;else if(F.descriptions||typeof F=="object"&&!Array.isArray(F)){I="descriptions";const Y=F.descriptions||F;H=Object.keys(Y).length}else throw new Error("Unknown JSON format. Expected graph data (nodes/edges) or descriptions.");const U={id:V,name:k.name,type:I,data:F,nodeCount:D,edgeCount:$,descriptionCount:H,loadedAt:new Date};r(U),h(`Successfully loaded ${k.name} (${I} data)`),f("")}catch(F){f(`Error parsing ${k.name}: ${F instanceof Error?F.message:"Unknown error"}`)}},M.readAsText(k)},[]),w=T.useCallback(k=>{Array.from(k.target.files||[]).forEach(z=>x(z))},[x]),S=T.useCallback(k=>{if(k<=0)return;const M=[...t];[M[k-1],M[k]]=[M[k],M[k-1]],n(M)},[t,n]),N=T.useCallback(k=>{if(k>=t.length-1)return;const M=[...t];[M[k],M[k+1]]=[M[k+1],M[k]],n(M)},[t,n]),E=T.useCallback((k,M)=>{y(M),k.dataTransfer.effectAllowed="move"},[]),j=T.useCallback(k=>{k.preventDefault(),k.dataTransfer.dropEffect="move"},[]),R=T.useCallback((k,M)=>{if(k.preventDefault(),!v||v===M)return;const z=t.findIndex(F=>F.id===v),L=t.findIndex(F=>F.id===M);if(z===-1||L===-1)return;const B=[...t],[G]=B.splice(z,1);B.splice(L,0,G),n(B),y(null)},[v,t,n]),A=T.useCallback(k=>{const M=new Map,z=new Map,L=[];return k.forEach((B,G)=>{var V,I;const F=B.data;(V=F.nodes)==null||V.forEach(D=>{if(M.has(D.id)){const $=M.get(D.id+"_source");L.push({key:D.id,source1:$||`File ${G}`,source2:B.name,value1:M.get(D.id),value2:D,resolved:"keep2"})}M.set(D.id,D),M.set(D.id+"_source",B.name)}),(I=F.edges)==null||I.forEach(D=>{if(z.has(D.id)){const $=z.get(D.id+"_source");L.push({key:D.id,source1:$||`File ${G}`,source2:B.name,value1:z.get(D.id),value2:D,resolved:"keep2"})}z.set(D.id,D),z.set(D.id+"_source",B.name)})}),Array.from(M.keys()).filter(B=>B.endsWith("_source")).forEach(B=>M.delete(B)),Array.from(z.keys()).filter(B=>B.endsWith("_source")).forEach(B=>z.delete(B)),{nodes:Array.from(M.values()),edges:Array.from(z.values()),conflicts:L}},[]),P=T.useCallback(k=>{const M=new Map,z=[];return k.forEach((L,B)=>{const G=L.data.descriptions||L.data;Object.entries(G).forEach(([F,V])=>{if(M.has(F)){const I=M.get(F+"_source");z.push({key:F,source1:I||`File ${B}`,source2:L.name,value1:M.get(F),value2:V,resolved:"keep2"})}M.set(F,V),M.set(F+"_source",L.name)})}),Array.from(M.keys()).filter(L=>L.endsWith("_source")).forEach(L=>M.delete(L)),{descriptions:Object.fromEntries(M),conflicts:z}},[]),O=T.useCallback(()=>{l(!0),f(""),h("");try{const k=t.filter(F=>F.type==="graph"),M=t.filter(F=>F.type==="descriptions");let z=[],L=[],B={},G=[];if(k.length>0){const F=A(k);z=F.nodes,L=F.edges,G.push(...F.conflicts)}if(M.length>0){const F=P(M);B=F.descriptions,G.push(...F.conflicts)}o(G),G.length>0?h(`Merged data with ${G.length} conflicts resolved automatically`):h("Data merged successfully without conflicts"),e(z,L,B)}catch(k){f(`Merge failed: ${k instanceof Error?k.message:"Unknown error"}`)}finally{l(!1)}},[t,A,P,e]),q=T.useCallback(()=>{const k=t.filter(G=>G.type==="graph"),M=t.filter(G=>G.type==="descriptions"),z=k.reduce((G,F)=>G+(F.nodeCount||0),0),L=k.reduce((G,F)=>G+(F.edgeCount||0),0),B=M.reduce((G,F)=>G+(F.descriptionCount||0),0);return{totalNodes:z,totalEdges:L,totalDescs:B,graphFiles:k.length,descFiles:M.length}},[t])();return p.jsxs(dv,{className:"w-full",children:[p.jsx(fv,{children:p.jsxs(hv,{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(rr,{className:"h-5 w-5"}),"Multi-File JSON Loader"]}),t.length>0&&p.jsxs("div",{className:"text-sm font-normal text-muted-foreground",children:[t.length," file",t.length!==1?"s":""," loaded"]})]})}),p.jsxs(pv,{className:"space-y-4",children:[p.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${b?"border-primary bg-primary/5":"border-border"}`,onDragEnter:_,onDragLeave:_,onDragOver:_,onDrop:g,children:[p.jsx(ir,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop JSON files here, or click to browse"}),p.jsx("input",{type:"file",multiple:!0,accept:".json",onChange:w,className:"hidden",id:"multi-file-input"}),p.jsx("label",{htmlFor:"multi-file-input",children:p.jsx(Se,{variant:"outline",size:"sm",asChild:!0,children:p.jsxs("span",{className:"cursor-pointer",children:[p.jsx(fC,{className:"h-4 w-4 mr-2"}),"Add JSON Files"]})})})]}),t.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-sm font-medium",children:"Loaded Files (Order: First  Last):"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Drag to reorder or use arrows"})]}),p.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map((k,M)=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors cursor-move",draggable:!0,onDragStart:z=>E(z,k.id),onDragOver:j,onDrop:z=>R(z,k.id),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[p.jsx(K2,{className:"h-4 w-4 text-muted-foreground"}),p.jsx("span",{className:"text-xs font-bold text-muted-foreground",children:M+1}),p.jsx(rr,{className:"h-4 w-4 text-muted-foreground"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium",children:k.name}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Type: ",k.type," |",k.type==="graph"?` ${k.nodeCount} nodes, ${k.edgeCount} edges`:` ${k.descriptionCount} descriptions`]})]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>S(M),disabled:M===0,className:"h-8 w-8 p-0",children:p.jsx(uv,{className:"h-4 w-4"})}),p.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>N(M),disabled:M===t.length-1,className:"h-8 w-8 p-0",children:p.jsx(lv,{className:"h-4 w-4"})}),p.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>i(k.id),className:"text-destructive hover:text-destructive h-8 w-8 p-0",children:p.jsx(Ru,{className:"h-4 w-4"})})]})]},k.id))})]}),t.length>1&&p.jsxs("div",{className:"grid grid-cols-2 gap-2 p-3 bg-muted/30 rounded-lg",children:[p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Graph files:"}),p.jsx("span",{className:"ml-2 font-medium",children:q.graphFiles})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Description files:"}),p.jsx("span",{className:"ml-2 font-medium",children:q.descFiles})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Total nodes:"}),p.jsx("span",{className:"ml-2 font-medium",children:q.totalNodes})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Total edges:"}),p.jsx("span",{className:"ml-2 font-medium",children:q.totalEdges})]})]}),t.length>0&&p.jsxs(Se,{onClick:O,disabled:u,className:"w-full",children:[p.jsx(rC,{className:"h-4 w-4 mr-2"}),u?"Merging...":"Merge and Load Data"]}),s.length>0&&p.jsxs(Ut,{children:[p.jsx(Gn,{className:"h-4 w-4"}),p.jsxs(Yt,{children:[p.jsx("p",{className:"font-medium mb-2",children:"Merge Results:"}),p.jsxs("p",{className:"text-sm",children:[s.length," duplicate ",s.length===1?"key was":"keys were"," found and replaced."]}),p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Files lower in the list override data from files higher in the list."}),s.length<=5&&p.jsxs("div",{className:"mt-2 text-xs",children:[p.jsx("p",{className:"font-medium",children:"Replacements:"}),s.map(k=>p.jsxs("p",{className:"text-muted-foreground",children:[" ",k.key,": ",k.source1,"  ",k.source2]},k.key))]})]})]}),c&&p.jsxs(Ut,{variant:"destructive",children:[p.jsx(Gn,{className:"h-4 w-4"}),p.jsx(Yt,{children:c})]}),d&&p.jsxs(Ut,{className:"border-green-500 bg-green-50 dark:bg-green-950/20",children:[p.jsx(ty,{className:"h-4 w-4 text-green-500"}),p.jsx(Yt,{className:"text-green-700 dark:text-green-400",children:d})]}),t.length>0&&p.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{a(),o([]),h("All files cleared from memory")},className:"w-full text-destructive hover:text-destructive",children:[p.jsx(Ab,{className:"h-4 w-4 mr-2"}),"Clear All Files"]})]})]})},fk=({onDataLoaded:e})=>{const[t,n]=T.useState(""),[r,i]=T.useState(""),[a,s]=T.useState(null),[o,u]=T.useState(!1),[l,c]=T.useState(!1),[f,d]=T.useState(!1),h=T.useCallback(()=>{s(null),u(!1);try{if(!t.trim())throw new Error("Graph data is required");const N=JSON.parse(t);if(!N.nodes||!Array.isArray(N.nodes))throw new Error('Graph data must contain a "nodes" array');if(!N.edges||!Array.isArray(N.edges))throw new Error('Graph data must contain an "edges" array');N.nodes.forEach((j,R)=>{if(!j.id)throw new Error(`Node at index ${R} is missing "id"`);if(!j.type)throw new Error(`Node at index ${R} is missing "type"`);if(!j.position||typeof j.position.x!="number"||typeof j.position.y!="number")throw new Error(`Node at index ${R} has invalid position`);if(!j.data||!j.data.label)throw new Error(`Node at index ${R} is missing data.label`)}),N.edges.forEach((j,R)=>{if(!j.id)throw new Error(`Edge at index ${R} is missing "id"`);if(!j.source)throw new Error(`Edge at index ${R} is missing "source"`);if(!j.target)throw new Error(`Edge at index ${R} is missing "target"`)});let E={};if(r.trim()){const j=JSON.parse(r);if(j.descriptions&&typeof j.descriptions=="object")E=j.descriptions;else if(typeof j=="object")E=j;else throw new Error('Descriptions must be an object or contain a "descriptions" object')}e({nodes:N.nodes,edges:N.edges,descriptions:E}),u(!0),setTimeout(()=>u(!1),3e3)}catch(N){s(N instanceof Error?N.message:"Invalid JSON data")}},[t,r,e]);T.useCallback((N,E)=>{var R;const j=(R=N.target.files)==null?void 0:R[0];j&&b(j,E)},[]);const b=T.useCallback((N,E)=>{if(!N.name.endsWith(".json")){s("Please upload a JSON file");return}const j=new FileReader;j.onload=R=>{var P;const A=(P=R.target)==null?void 0:P.result;try{JSON.parse(A),E==="graph"?(n(A),s(null)):(i(A),s(null))}catch{s(`Invalid JSON in ${N.name}`)}},j.onerror=()=>{s(`Failed to read ${N.name}`)},j.readAsText(N)},[]),m=T.useCallback(N=>{N.preventDefault(),N.stopPropagation()},[]),v=T.useCallback((N,E)=>{N.preventDefault(),N.stopPropagation(),E==="graph"?c(!0):d(!0)},[]),y=T.useCallback((N,E)=>{N.preventDefault(),N.stopPropagation(),E==="graph"?c(!1):d(!1)},[]),_=T.useCallback((N,E)=>{N.preventDefault(),N.stopPropagation(),E==="graph"?c(!1):d(!1);const R=Array.from(N.dataTransfer.files).find(A=>A.name.endsWith(".json"));R?b(R,E):s("Please drop a JSON file")},[b]),g=`{
  "nodes": [
    {
      "id": "node1",
      "type": "custom",
      "position": { "x": 0, "y": 0 },
      "data": {
        "label": "Sample Node",
        "nodeType": "foundation",
        "category": "core",
        "domains": ["Technology"]
      }
    }
  ],
  "edges": [
    {
      "id": "edge1",
      "source": "node1",
      "target": "node2",
      "type": "smoothstep",
      "data": { "edgeType": "dependency" }
    }
  ]
}`,x=`{
  "descriptions": {
    "node1": {
      "description": "This is a sample node description",
      "capabilities": ["Capability 1", "Capability 2"],
      "limitations": ["Limitation 1"],
      "useCases": ["Use case 1"],
      "technicalDetails": "Technical implementation details"
    }
  }
}`,[w,S]=T.useState("paste");return p.jsxs(dv,{className:"w-full max-w-4xl mx-auto",children:[p.jsxs(fv,{children:[p.jsx(hv,{children:"Load JSON Data"}),p.jsx(Rb,{children:"Upload or paste your graph data and node descriptions in JSON format"})]}),p.jsxs(pv,{children:[p.jsxs(uk,{defaultValue:"paste",value:w,onValueChange:S,className:"w-full",children:[p.jsxs(lk,{className:"grid w-full grid-cols-2",children:[p.jsx(qd,{value:"paste",children:"Paste JSON"}),p.jsxs(qd,{value:"upload",children:[p.jsx(J2,{className:"w-4 h-4 mr-1"}),"Upload Files"]})]}),p.jsxs(Pd,{value:"paste",className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-sm font-medium",children:["Graph Data (Required) ",p.jsx(rr,{className:"inline w-4 h-4 ml-1"})]}),p.jsxs("div",{onDragOver:m,onDragEnter:N=>v(N,"graph"),onDragLeave:N=>y(N,"graph"),onDrop:N=>_(N,"graph"),className:`relative transition-all duration-200 ${l?"ring-2 ring-primary ring-offset-2 bg-primary/5":""}`,children:[p.jsx(Td,{placeholder:g,value:t,onChange:N=>n(N.target.value),className:"font-mono text-xs h-64"}),l&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-md pointer-events-none",children:p.jsxs("div",{className:"text-center",children:[p.jsx(ir,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),p.jsx("p",{className:"text-sm font-medium",children:"Drop JSON file here"})]})})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-sm font-medium",children:["Node Descriptions (Optional) ",p.jsx(rr,{className:"inline w-4 h-4 ml-1"})]}),p.jsxs("div",{onDragOver:m,onDragEnter:N=>v(N,"descriptions"),onDragLeave:N=>y(N,"descriptions"),onDrop:N=>_(N,"descriptions"),className:`relative transition-all duration-200 ${f?"ring-2 ring-primary ring-offset-2 bg-primary/5":""}`,children:[p.jsx(Td,{placeholder:x,value:r,onChange:N=>i(N.target.value),className:"font-mono text-xs h-64"}),f&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-md pointer-events-none",children:p.jsxs("div",{className:"text-center",children:[p.jsx(ir,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),p.jsx("p",{className:"text-sm font-medium",children:"Drop JSON file here"})]})})]})]})]}),p.jsx(Pd,{value:"upload",className:"space-y-4",children:p.jsx(dk,{onDataMerged:(N,E,j)=>{e({nodes:N,edges:E,descriptions:j}),u(!0),setTimeout(()=>u(!1),3e3)}})})]}),a&&p.jsxs(Ut,{variant:"destructive",className:"mt-4",children:[p.jsx(Gn,{className:"h-4 w-4"}),p.jsx(Yt,{children:a})]}),o&&p.jsx(Ut,{className:"mt-4 border-green-500 text-green-600",children:p.jsx(Yt,{children:"Data loaded successfully!"})}),w==="paste"&&p.jsx("div",{className:"flex justify-end mt-6",children:p.jsx(Se,{onClick:h,disabled:!t,children:"Load Data"})})]})]})};function hk(e,t,n){const r=[],i=new Map(e.map(c=>[c.id,c])),a=new Map,s=new Map;t.forEach(c=>{a.has(c.source)||a.set(c.source,[]),a.get(c.source).push(c),s.has(c.target)||s.set(c.target,[]),s.get(c.target).push(c)});const o={product:0,application:0,technique:0,foundation:0,combination:0,domain:0,other:0};let u=0;const l=new Set;return e.forEach(c=>{var b,m,v,y,_,g;if(!c||!c.data){r.push({type:"error",category:"invalid_hierarchy",nodeId:(c==null?void 0:c.id)||"unknown",message:`Node ${(c==null?void 0:c.id)||"unknown"} has invalid or missing data`,details:"Node data is null or undefined"});return}const f=((b=c.data)==null?void 0:b.nodeType)||((m=c.data)==null?void 0:m.category)||"other";o[f]=(o[f]||0)+1,n[c.id]?u++:r.push({type:"warning",category:"missing_description",nodeId:c.id,message:`Node "${((v=c.data)==null?void 0:v.label)||c.id}" is missing a description`,details:`Node type: ${f}`}),f==="product"&&((s.get(c.id)||[]).some(S=>{var j,R;const N=i.get(S.source);return(((j=N==null?void 0:N.data)==null?void 0:j.nodeType)||((R=N==null?void 0:N.data)==null?void 0:R.category))==="application"})||r.push({type:"error",category:"invalid_hierarchy",nodeId:c.id,message:`Product node "${((y=c.data)==null?void 0:y.label)||c.id}" is not connected from any application node`,details:"All product nodes must be connected from at least one application node"})),f==="application"&&((s.get(c.id)||[]).some(S=>{var j,R;const N=i.get(S.source),E=((j=N==null?void 0:N.data)==null?void 0:j.nodeType)||((R=N==null?void 0:N.data)==null?void 0:R.category);return E==="technique"||E==="foundation"||E==="combination"})||r.push({type:"error",category:"invalid_hierarchy",nodeId:c.id,message:`Application node "${((_=c.data)==null?void 0:_.label)||c.id}" has no technique or technology connections`,details:"Application nodes must have at least one connection from a technique, foundation, or combination node"}));const d=s.has(c.id),h=a.has(c.id);!d&&!h&&(l.add(c.id),r.push({type:"warning",category:"orphaned_node",nodeId:c.id,message:`Node "${((g=c.data)==null?void 0:g.label)||c.id}" has no connections`,details:"This node is not connected to any other nodes in the graph"}))}),t.forEach(c=>{i.has(c.source)||r.push({type:"error",category:"missing_connection",message:`Edge "${c.id}" references non-existent source node "${c.source}"`}),i.has(c.target)||r.push({type:"error",category:"missing_connection",message:`Edge "${c.id}" references non-existent target node "${c.target}"`})}),r.sort((c,f)=>c.type!==f.type?c.type==="error"?-1:1:c.category.localeCompare(f.category)),{isValid:r.filter(c=>c.type==="error").length===0,issues:r,stats:{totalNodes:e.length,totalEdges:t.length,nodesWithDescriptions:u,productNodes:o.product,applicationNodes:o.application,techniqueNodes:o.technique,foundationNodes:o.foundation,orphanedNodes:l.size}}}function pk(e){return e==="error"?"text-red-500":"text-yellow-500"}function On(e){switch(e){case"missing_connection":return"";case"missing_description":return"";case"invalid_hierarchy":return"";case"orphaned_node":return"";default:return""}}const gk=({nodes:e,edges:t,descriptions:n,onNodeClick:r})=>{const[i,a]=T.useState(!1),[s,o]=T.useState("all"),[u,l]=T.useState(!1),c=T.useMemo(()=>hk(e,t,n),[e,t,n]),f=T.useMemo(()=>s==="all"?c.issues:c.issues.filter(g=>g.category===s),[c.issues,s]),d=c.issues.filter(g=>g.type==="error").length,h=c.issues.filter(g=>g.type==="warning").length,b=T.useMemo(()=>{const g={};return c.issues.forEach(x=>{g[x.category]=(g[x.category]||0)+1}),g},[c.issues]),m=()=>d>0?"border-red-500 bg-red-50 dark:bg-red-950/20":h>0?"border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20":"border-green-500 bg-green-50 dark:bg-green-950/20",v=()=>d>0?p.jsx(Gn,{className:"w-4 h-4 text-red-500"}):h>0?p.jsx(ry,{className:"w-4 h-4 text-yellow-500"}):p.jsx(ny,{className:"w-4 h-4 text-green-500"}),y=()=>{const g=[];if(g.push("=== AI CAPABILITY MAP VALIDATION REPORT ==="),g.push(`Generated: ${new Date().toLocaleString()}`),g.push(""),g.push("SUMMARY"),g.push("-------"),g.push(`Total Nodes: ${c.stats.totalNodes}`),g.push(`Total Edges: ${c.stats.totalEdges}`),g.push(`Nodes with Descriptions: ${c.stats.nodesWithDescriptions}/${c.stats.totalNodes}`),g.push(`Orphaned Nodes: ${c.stats.orphanedNodes}`),g.push(""),g.push(`Errors: ${d}`),g.push(`Warnings: ${h}`),g.push(""),c.issues.reduce((x,w)=>(x[w.category]||(x[w.category]=[]),x[w.category].push(w),x),{}),c.issues.length>0){g.push("ISSUES"),g.push("------");const x=c.issues.filter(S=>S.type==="error");x.length>0&&(g.push(""),g.push("### ERRORS ###"),x.forEach((S,N)=>{g.push(`${N+1}. [${On(S.category)}] ${S.message}`),S.details&&g.push(`   Details: ${S.details}`),S.nodeId&&g.push(`   Node ID: ${S.nodeId}`)}));const w=c.issues.filter(S=>S.type==="warning");w.length>0&&(g.push(""),g.push("### WARNINGS ###"),w.forEach((S,N)=>{g.push(`${N+1}. [${On(S.category)}] ${S.message}`),S.details&&g.push(`   Details: ${S.details}`),S.nodeId&&g.push(`   Node ID: ${S.nodeId}`)}))}else g.push(" All validation checks passed!");return g.push(""),g.push("=== END OF REPORT ==="),g.join(`
`)},_=async()=>{try{const g=y();await navigator.clipboard.writeText(g),l(!0),setTimeout(()=>l(!1),2e3)}catch(g){console.error("Failed to copy:",g)}};return p.jsxs("div",{className:`fixed top-4 right-4 max-w-md bg-card border-2 rounded-lg shadow-xl z-40 ${m()}`,children:[p.jsx("div",{className:"p-4",children:p.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 transition-colors rounded p-2 -m-2",onClick:()=>a(!i),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[v(),p.jsx("span",{className:"font-semibold whitespace-nowrap",children:"Data Validation"}),(d>0||h>0)&&p.jsxs("div",{className:"flex gap-1",children:[d>0&&p.jsxs("span",{className:"text-xs px-2 py-0.5 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 rounded-full whitespace-nowrap",children:[d," error",d!==1?"s":""]}),h>0&&p.jsxs("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 rounded-full whitespace-nowrap",children:[h," warning",h!==1?"s":""]})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Se,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:g=>{g.stopPropagation(),_()},title:"Copy validation report to clipboard",children:u?p.jsxs(p.Fragment,{children:[p.jsx(ty,{className:"w-3 h-3 mr-1"}),p.jsx("span",{className:"text-xs",children:"Copied!"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Mb,{className:"w-3 h-3 mr-1"}),p.jsx("span",{className:"text-xs",children:"Copy Report"})]})}),i?p.jsx(lv,{className:"w-4 h-4"}):p.jsx(uv,{className:"w-4 h-4"})]})]})}),i&&p.jsxs("div",{className:"border-t border-border",children:[p.jsx("div",{className:"p-4 bg-muted/30",children:p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[p.jsxs("div",{children:["Total Nodes: ",p.jsx("span",{className:"font-semibold",children:c.stats.totalNodes})]}),p.jsxs("div",{children:["Total Edges: ",p.jsx("span",{className:"font-semibold",children:c.stats.totalEdges})]}),p.jsxs("div",{children:["With Descriptions: ",p.jsxs("span",{className:"font-semibold",children:[c.stats.nodesWithDescriptions,"/",c.stats.totalNodes]})]}),p.jsxs("div",{children:["Orphaned Nodes: ",p.jsx("span",{className:"font-semibold",children:c.stats.orphanedNodes})]}),p.jsxs("div",{children:["Product Nodes: ",p.jsx("span",{className:"font-semibold",children:c.stats.productNodes})]}),p.jsxs("div",{children:["Application Nodes: ",p.jsx("span",{className:"font-semibold",children:c.stats.applicationNodes})]})]})}),c.issues.length>0&&p.jsx("div",{className:"p-4 border-t border-border",children:p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-1 text-xs rounded transition-colors ${s==="all"?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:["All (",c.issues.length,")"]}),Object.entries(b).map(([g,x])=>p.jsxs("button",{onClick:()=>o(g),className:`px-3 py-1 text-xs rounded transition-colors ${s===g?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:[On(g)," ",g.replace("_"," ")," (",x,")"]},g))]})}),p.jsx("div",{className:"max-h-96 overflow-y-auto",children:f.length===0?p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:c.issues.length===0?" All validation checks passed!":"No issues in this category"}):p.jsx("div",{className:"p-4 space-y-2",children:f.map((g,x)=>p.jsx("div",{className:"p-3 bg-background rounded-lg border text-sm space-y-1",children:p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[p.jsx("span",{className:"mt-0.5",children:On(g.category)}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:`font-medium ${pk(g.type)}`,children:g.message}),g.details&&p.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:g.details})]})]}),g.nodeId&&r&&p.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>r(g.nodeId),children:"Go to node"})]})},x))})})]})]})};function Zu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xr,Dd;function mk(){if(Dd)return Xr;Dd=1;function e(){this.__data__=[],this.size=0}return Xr=e,Xr}var Kr,Ld;function Tt(){if(Ld)return Kr;Ld=1;function e(t,n){return t===n||t!==t&&n!==n}return Kr=e,Kr}var Zr,Od;function br(){if(Od)return Zr;Od=1;var e=Tt();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Zr=t,Zr}var Jr,Fd;function vk(){if(Fd)return Jr;Fd=1;var e=br(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return Jr=r,Jr}var Qr,$d;function yk(){if($d)return Qr;$d=1;var e=br();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Qr=t,Qr}var ei,zd;function xk(){if(zd)return ei;zd=1;var e=br();function t(n){return e(this.__data__,n)>-1}return ei=t,ei}var ti,Bd;function bk(){if(Bd)return ti;Bd=1;var e=br();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return ti=t,ti}var ni,Hd;function _r(){if(Hd)return ni;Hd=1;var e=mk(),t=vk(),n=yk(),r=xk(),i=bk();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ni=a,ni}var ri,Gd;function _k(){if(Gd)return ri;Gd=1;var e=_r();function t(){this.__data__=new e,this.size=0}return ri=t,ri}var ii,Vd;function wk(){if(Vd)return ii;Vd=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return ii=e,ii}var ai,Ud;function Nk(){if(Ud)return ai;Ud=1;function e(t){return this.__data__.get(t)}return ai=e,ai}var si,Yd;function Sk(){if(Yd)return si;Yd=1;function e(t){return this.__data__.has(t)}return si=e,si}var oi,Wd;function Ny(){if(Wd)return oi;Wd=1;var e=typeof kn=="object"&&kn&&kn.Object===Object&&kn;return oi=e,oi}var ci,Xd;function Ae(){if(Xd)return ci;Xd=1;var e=Ny(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ci=n,ci}var ui,Kd;function qt(){if(Kd)return ui;Kd=1;var e=Ae(),t=e.Symbol;return ui=t,ui}var li,Zd;function Ek(){if(Zd)return li;Zd=1;var e=qt(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),u=s[i];try{s[i]=void 0;var l=!0}catch{}var c=r.call(s);return l&&(o?s[i]=u:delete s[i]),c}return li=a,li}var di,Jd;function Ck(){if(Jd)return di;Jd=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return di=n,di}var fi,Qd;function pt(){if(Qd)return fi;Qd=1;var e=qt(),t=Ek(),n=Ck(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return fi=s,fi}var hi,ef;function be(){if(ef)return hi;ef=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return hi=e,hi}var pi,tf;function xn(){if(tf)return pi;tf=1;var e=pt(),t=be(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var u=e(o);return u==r||u==i||u==n||u==a}return pi=s,pi}var gi,nf;function kk(){if(nf)return gi;nf=1;var e=Ae(),t=e["__core-js_shared__"];return gi=t,gi}var mi,rf;function jk(){if(rf)return mi;rf=1;var e=kk(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return mi=n,mi}var vi,af;function Sy(){if(af)return vi;af=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return vi=n,vi}var yi,sf;function Ak(){if(sf)return yi;sf=1;var e=xn(),t=jk(),n=be(),r=Sy(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!n(d)||t(d))return!1;var h=e(d)?c:a;return h.test(r(d))}return yi=f,yi}var xi,of;function Rk(){if(of)return xi;of=1;function e(t,n){return t==null?void 0:t[n]}return xi=e,xi}var bi,cf;function gt(){if(cf)return bi;cf=1;var e=Ak(),t=Rk();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return bi=n,bi}var _i,uf;function Ju(){if(uf)return _i;uf=1;var e=gt(),t=Ae(),n=e(t,"Map");return _i=n,_i}var wi,lf;function wr(){if(lf)return wi;lf=1;var e=gt(),t=e(Object,"create");return wi=t,wi}var Ni,df;function Ik(){if(df)return Ni;df=1;var e=wr();function t(){this.__data__=e?e(null):{},this.size=0}return Ni=t,Ni}var Si,ff;function Mk(){if(ff)return Si;ff=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Si=e,Si}var Ei,hf;function Tk(){if(hf)return Ei;hf=1;var e=wr(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return Ei=i,Ei}var Ci,pf;function qk(){if(pf)return Ci;pf=1;var e=wr(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return Ci=r,Ci}var ki,gf;function Pk(){if(gf)return ki;gf=1;var e=wr(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return ki=n,ki}var ji,mf;function Dk(){if(mf)return ji;mf=1;var e=Ik(),t=Mk(),n=Tk(),r=qk(),i=Pk();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ji=a,ji}var Ai,vf;function Lk(){if(vf)return Ai;vf=1;var e=Dk(),t=_r(),n=Ju();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Ai=r,Ai}var Ri,yf;function Ok(){if(yf)return Ri;yf=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Ri=e,Ri}var Ii,xf;function Nr(){if(xf)return Ii;xf=1;var e=Ok();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Ii=t,Ii}var Mi,bf;function Fk(){if(bf)return Mi;bf=1;var e=Nr();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Mi=t,Mi}var Ti,_f;function $k(){if(_f)return Ti;_f=1;var e=Nr();function t(n){return e(this,n).get(n)}return Ti=t,Ti}var qi,wf;function zk(){if(wf)return qi;wf=1;var e=Nr();function t(n){return e(this,n).has(n)}return qi=t,qi}var Pi,Nf;function Bk(){if(Nf)return Pi;Nf=1;var e=Nr();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Pi=t,Pi}var Di,Sf;function Qu(){if(Sf)return Di;Sf=1;var e=Lk(),t=Fk(),n=$k(),r=zk(),i=Bk();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Di=a,Di}var Li,Ef;function Hk(){if(Ef)return Li;Ef=1;var e=_r(),t=Ju(),n=Qu(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var u=o.__data__;if(!t||u.length<r-1)return u.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(u)}return o.set(a,s),this.size=o.size,this}return Li=i,Li}var Oi,Cf;function Sr(){if(Cf)return Oi;Cf=1;var e=_r(),t=_k(),n=wk(),r=Nk(),i=Sk(),a=Hk();function s(o){var u=this.__data__=new e(o);this.size=u.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Oi=s,Oi}var Fi,kf;function el(){if(kf)return Fi;kf=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Fi=e,Fi}var $i,jf;function Ey(){if(jf)return $i;jf=1;var e=gt(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return $i=t,$i}var zi,Af;function Er(){if(Af)return zi;Af=1;var e=Ey();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return zi=t,zi}var Bi,Rf;function Cr(){if(Rf)return Bi;Rf=1;var e=Er(),t=Tt(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var u=a[s];(!(r.call(a,s)&&t(u,o))||o===void 0&&!(s in a))&&e(a,s,o)}return Bi=i,Bi}var Hi,If;function bn(){if(If)return Hi;If=1;var e=Cr(),t=Er();function n(r,i,a,s){var o=!a;a||(a={});for(var u=-1,l=i.length;++u<l;){var c=i[u],f=s?s(a[c],r[c],c,a,r):void 0;f===void 0&&(f=r[c]),o?t(a,c,f):e(a,c,f)}return a}return Hi=n,Hi}var Gi,Mf;function Gk(){if(Mf)return Gi;Mf=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Gi=e,Gi}var Vi,Tf;function Le(){if(Tf)return Vi;Tf=1;function e(t){return t!=null&&typeof t=="object"}return Vi=e,Vi}var Ui,qf;function Vk(){if(qf)return Ui;qf=1;var e=pt(),t=Le(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Ui=r,Ui}var Yi,Pf;function _n(){if(Pf)return Yi;Pf=1;var e=Vk(),t=Le(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return Yi=a,Yi}var Wi,Df;function le(){if(Df)return Wi;Df=1;var e=Array.isArray;return Wi=e,Wi}var Ht={exports:{}},Xi,Lf;function Uk(){if(Lf)return Xi;Lf=1;function e(){return!1}return Xi=e,Xi}Ht.exports;var Of;function Pt(){return Of||(Of=1,function(e,t){var n=Ae(),r=Uk(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||r;e.exports=l}(Ht,Ht.exports)),Ht.exports}var Ki,Ff;function kr(){if(Ff)return Ki;Ff=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Ki=n,Ki}var Zi,$f;function tl(){if($f)return Zi;$f=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Zi=t,Zi}var Ji,zf;function Yk(){if(zf)return Ji;zf=1;var e=pt(),t=tl(),n=Le(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",f="[object Object]",d="[object RegExp]",h="[object Set]",b="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",_="[object Float32Array]",g="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",S="[object Int32Array]",N="[object Uint8Array]",E="[object Uint8ClampedArray]",j="[object Uint16Array]",R="[object Uint32Array]",A={};A[_]=A[g]=A[x]=A[w]=A[S]=A[N]=A[E]=A[j]=A[R]=!0,A[r]=A[i]=A[v]=A[a]=A[y]=A[s]=A[o]=A[u]=A[l]=A[c]=A[f]=A[d]=A[h]=A[b]=A[m]=!1;function P(O){return n(O)&&t(O.length)&&!!A[e(O)]}return Ji=P,Ji}var Qi,Bf;function jr(){if(Bf)return Qi;Bf=1;function e(t){return function(n){return t(n)}}return Qi=e,Qi}var Gt={exports:{}};Gt.exports;var Hf;function nl(){return Hf||(Hf=1,function(e,t){var n=Ny(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Gt,Gt.exports)),Gt.exports}var ea,Gf;function wn(){if(Gf)return ea;Gf=1;var e=Yk(),t=jr(),n=nl(),r=n&&n.isTypedArray,i=r?t(r):e;return ea=i,ea}var ta,Vf;function Cy(){if(Vf)return ta;Vf=1;var e=Gk(),t=_n(),n=le(),r=Pt(),i=kr(),a=wn(),s=Object.prototype,o=s.hasOwnProperty;function u(l,c){var f=n(l),d=!f&&t(l),h=!f&&!d&&r(l),b=!f&&!d&&!h&&a(l),m=f||d||h||b,v=m?e(l.length,String):[],y=v.length;for(var _ in l)(c||o.call(l,_))&&!(m&&(_=="length"||h&&(_=="offset"||_=="parent")||b&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,y)))&&v.push(_);return v}return ta=u,ta}var na,Uf;function Ar(){if(Uf)return na;Uf=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return na=t,na}var ra,Yf;function ky(){if(Yf)return ra;Yf=1;function e(t,n){return function(r){return t(n(r))}}return ra=e,ra}var ia,Wf;function Wk(){if(Wf)return ia;Wf=1;var e=ky(),t=e(Object.keys,Object);return ia=t,ia}var aa,Xf;function rl(){if(Xf)return aa;Xf=1;var e=Ar(),t=Wk(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return aa=i,aa}var sa,Kf;function Xe(){if(Kf)return sa;Kf=1;var e=xn(),t=tl();function n(r){return r!=null&&t(r.length)&&!e(r)}return sa=n,sa}var oa,Zf;function it(){if(Zf)return oa;Zf=1;var e=Cy(),t=rl(),n=Xe();function r(i){return n(i)?e(i):t(i)}return oa=r,oa}var ca,Jf;function Xk(){if(Jf)return ca;Jf=1;var e=bn(),t=it();function n(r,i){return r&&e(i,t(i),r)}return ca=n,ca}var ua,Qf;function Kk(){if(Qf)return ua;Qf=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return ua=e,ua}var la,eh;function Zk(){if(eh)return la;eh=1;var e=be(),t=Ar(),n=Kk(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),u=[];for(var l in s)l=="constructor"&&(o||!i.call(s,l))||u.push(l);return u}return la=a,la}var da,th;function mt(){if(th)return da;th=1;var e=Cy(),t=Zk(),n=Xe();function r(i){return n(i)?e(i,!0):t(i)}return da=r,da}var fa,nh;function Jk(){if(nh)return fa;nh=1;var e=bn(),t=mt();function n(r,i){return r&&e(i,t(i),r)}return fa=n,fa}var Vt={exports:{}};Vt.exports;var rh;function jy(){return rh||(rh=1,function(e,t){var n=Ae(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,d=o?o(f):new l.constructor(f);return l.copy(d),d}e.exports=u}(Vt,Vt.exports)),Vt.exports}var ha,ih;function Ay(){if(ih)return ha;ih=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return ha=e,ha}var pa,ah;function Ry(){if(ah)return pa;ah=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return pa=e,pa}var ga,sh;function Iy(){if(sh)return ga;sh=1;function e(){return[]}return ga=e,ga}var ma,oh;function il(){if(oh)return ma;oh=1;var e=Ry(),t=Iy(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return ma=a,ma}var va,ch;function Qk(){if(ch)return va;ch=1;var e=bn(),t=il();function n(r,i){return e(r,t(r),i)}return va=n,va}var ya,uh;function al(){if(uh)return ya;uh=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return ya=e,ya}var xa,lh;function Rr(){if(lh)return xa;lh=1;var e=ky(),t=e(Object.getPrototypeOf,Object);return xa=t,xa}var ba,dh;function My(){if(dh)return ba;dh=1;var e=al(),t=Rr(),n=il(),r=Iy(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return ba=a,ba}var _a,fh;function ej(){if(fh)return _a;fh=1;var e=bn(),t=My();function n(r,i){return e(r,t(r),i)}return _a=n,_a}var wa,hh;function Ty(){if(hh)return wa;hh=1;var e=al(),t=le();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return wa=n,wa}var Na,ph;function qy(){if(ph)return Na;ph=1;var e=Ty(),t=il(),n=it();function r(i){return e(i,n,t)}return Na=r,Na}var Sa,gh;function tj(){if(gh)return Sa;gh=1;var e=Ty(),t=My(),n=mt();function r(i){return e(i,n,t)}return Sa=r,Sa}var Ea,mh;function nj(){if(mh)return Ea;mh=1;var e=gt(),t=Ae(),n=e(t,"DataView");return Ea=n,Ea}var Ca,vh;function rj(){if(vh)return Ca;vh=1;var e=gt(),t=Ae(),n=e(t,"Promise");return Ca=n,Ca}var ka,yh;function Py(){if(yh)return ka;yh=1;var e=gt(),t=Ae(),n=e(t,"Set");return ka=n,ka}var ja,xh;function ij(){if(xh)return ja;xh=1;var e=gt(),t=Ae(),n=e(t,"WeakMap");return ja=n,ja}var Aa,bh;function Dt(){if(bh)return Aa;bh=1;var e=nj(),t=Ju(),n=rj(),r=Py(),i=ij(),a=pt(),s=Sy(),o="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",f="[object WeakMap]",d="[object DataView]",h=s(e),b=s(t),m=s(n),v=s(r),y=s(i),_=a;return(e&&_(new e(new ArrayBuffer(1)))!=d||t&&_(new t)!=o||n&&_(n.resolve())!=l||r&&_(new r)!=c||i&&_(new i)!=f)&&(_=function(g){var x=a(g),w=x==u?g.constructor:void 0,S=w?s(w):"";if(S)switch(S){case h:return d;case b:return o;case m:return l;case v:return c;case y:return f}return x}),Aa=_,Aa}var Ra,_h;function aj(){if(_h)return Ra;_h=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Ra=n,Ra}var Ia,wh;function Dy(){if(wh)return Ia;wh=1;var e=Ae(),t=e.Uint8Array;return Ia=t,Ia}var Ma,Nh;function sl(){if(Nh)return Ma;Nh=1;var e=Dy();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Ma=t,Ma}var Ta,Sh;function sj(){if(Sh)return Ta;Sh=1;var e=sl();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Ta=t,Ta}var qa,Eh;function oj(){if(Eh)return qa;Eh=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return qa=t,qa}var Pa,Ch;function cj(){if(Ch)return Pa;Ch=1;var e=qt(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Pa=r,Pa}var Da,kh;function Ly(){if(kh)return Da;kh=1;var e=sl();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Da=t,Da}var La,jh;function uj(){if(jh)return La;jh=1;var e=sl(),t=sj(),n=oj(),r=cj(),i=Ly(),a="[object Boolean]",s="[object Date]",o="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",f="[object String]",d="[object Symbol]",h="[object ArrayBuffer]",b="[object DataView]",m="[object Float32Array]",v="[object Float64Array]",y="[object Int8Array]",_="[object Int16Array]",g="[object Int32Array]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",S="[object Uint16Array]",N="[object Uint32Array]";function E(j,R,A){var P=j.constructor;switch(R){case h:return e(j);case a:case s:return new P(+j);case b:return t(j,A);case m:case v:case y:case _:case g:case x:case w:case S:case N:return i(j,A);case o:return new P;case u:case f:return new P(j);case l:return n(j);case c:return new P;case d:return r(j)}}return La=E,La}var Oa,Ah;function Oy(){if(Ah)return Oa;Ah=1;var e=be(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return Oa=n,Oa}var Fa,Rh;function Fy(){if(Rh)return Fa;Rh=1;var e=Oy(),t=Rr(),n=Ar();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Fa=r,Fa}var $a,Ih;function lj(){if(Ih)return $a;Ih=1;var e=Dt(),t=Le(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return $a=r,$a}var za,Mh;function dj(){if(Mh)return za;Mh=1;var e=lj(),t=jr(),n=nl(),r=n&&n.isMap,i=r?t(r):e;return za=i,za}var Ba,Th;function fj(){if(Th)return Ba;Th=1;var e=Dt(),t=Le(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Ba=r,Ba}var Ha,qh;function hj(){if(qh)return Ha;qh=1;var e=fj(),t=jr(),n=nl(),r=n&&n.isSet,i=r?t(r):e;return Ha=i,Ha}var Ga,Ph;function $y(){if(Ph)return Ga;Ph=1;var e=Sr(),t=el(),n=Cr(),r=Xk(),i=Jk(),a=jy(),s=Ay(),o=Qk(),u=ej(),l=qy(),c=tj(),f=Dt(),d=aj(),h=uj(),b=Fy(),m=le(),v=Pt(),y=dj(),_=be(),g=hj(),x=it(),w=mt(),S=1,N=2,E=4,j="[object Arguments]",R="[object Array]",A="[object Boolean]",P="[object Date]",O="[object Error]",C="[object Function]",q="[object GeneratorFunction]",k="[object Map]",M="[object Number]",z="[object Object]",L="[object RegExp]",B="[object Set]",G="[object String]",F="[object Symbol]",V="[object WeakMap]",I="[object ArrayBuffer]",D="[object DataView]",$="[object Float32Array]",H="[object Float64Array]",U="[object Int8Array]",Y="[object Int16Array]",K="[object Int32Array]",Q="[object Uint8Array]",J="[object Uint8ClampedArray]",Z="[object Uint16Array]",X="[object Uint32Array]",W={};W[j]=W[R]=W[I]=W[D]=W[A]=W[P]=W[$]=W[H]=W[U]=W[Y]=W[K]=W[k]=W[M]=W[z]=W[L]=W[B]=W[G]=W[F]=W[Q]=W[J]=W[Z]=W[X]=!0,W[O]=W[C]=W[V]=!1;function ie(te,ve,we,yt,Oe,pe){var ce,Ze=ve&S,Fe=ve&N,Je=ve&E;if(we&&(ce=Oe?we(te,yt,Oe,pe):we(te)),ce!==void 0)return ce;if(!_(te))return te;var Qe=m(te);if(Qe){if(ce=d(te),!Ze)return s(te,ce)}else{var $e=f(te),Sn=$e==C||$e==q;if(v(te))return a(te,Ze);if($e==z||$e==j||Sn&&!Oe){if(ce=Fe||Sn?{}:b(te),!Ze)return Fe?u(te,i(ce,te)):o(te,r(ce,te))}else{if(!W[$e])return Oe?te:{};ce=h(te,$e,Ze)}}pe||(pe=new e);var xt=pe.get(te);if(xt)return xt;pe.set(te,ce),g(te)?te.forEach(function(Re){ce.add(ie(Re,ve,we,Re,te,pe))}):y(te)&&te.forEach(function(Re,ze){ce.set(ze,ie(Re,ve,we,ze,te,pe))});var Lr=Je?Fe?c:l:Fe?w:x,En=Qe?void 0:Lr(te);return t(En||te,function(Re,ze){En&&(ze=Re,Re=te[ze]),n(ce,ze,ie(Re,ve,we,ze,te,pe))}),ce}return Ga=ie,Ga}var Va,Dh;function pj(){if(Dh)return Va;Dh=1;var e=$y(),t=4;function n(r){return e(r,t)}return Va=n,Va}var Ua,Lh;function ol(){if(Lh)return Ua;Lh=1;function e(t){return function(){return t}}return Ua=e,Ua}var Ya,Oh;function gj(){if(Oh)return Ya;Oh=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),u=o.length;u--;){var l=o[t?u:++a];if(r(s[l],l,s)===!1)break}return n}}return Ya=e,Ya}var Wa,Fh;function cl(){if(Fh)return Wa;Fh=1;var e=gj(),t=e();return Wa=t,Wa}var Xa,$h;function ul(){if($h)return Xa;$h=1;var e=cl(),t=it();function n(r,i){return r&&e(r,i,t)}return Xa=n,Xa}var Ka,zh;function mj(){if(zh)return Ka;zh=1;var e=Xe();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,u=Object(i);(r?o--:++o<s)&&a(u[o],o,u)!==!1;);return i}}return Ka=t,Ka}var Za,Bh;function Ir(){if(Bh)return Za;Bh=1;var e=ul(),t=mj(),n=t(e);return Za=n,Za}var Ja,Hh;function vt(){if(Hh)return Ja;Hh=1;function e(t){return t}return Ja=e,Ja}var Qa,Gh;function zy(){if(Gh)return Qa;Gh=1;var e=vt();function t(n){return typeof n=="function"?n:e}return Qa=t,Qa}var es,Vh;function By(){if(Vh)return es;Vh=1;var e=el(),t=Ir(),n=zy(),r=le();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return es=i,es}var ts,Uh;function Hy(){return Uh||(Uh=1,ts=By()),ts}var ns,Yh;function vj(){if(Yh)return ns;Yh=1;var e=Ir();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return ns=t,ns}var rs,Wh;function yj(){if(Wh)return rs;Wh=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return rs=t,rs}var is,Xh;function xj(){if(Xh)return is;Xh=1;function e(t){return this.__data__.has(t)}return is=e,is}var as,Kh;function Gy(){if(Kh)return as;Kh=1;var e=Qu(),t=yj(),n=xj();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,as=r,as}var ss,Zh;function bj(){if(Zh)return ss;Zh=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return ss=e,ss}var os,Jh;function Vy(){if(Jh)return os;Jh=1;function e(t,n){return t.has(n)}return os=e,os}var cs,Qh;function Uy(){if(Qh)return cs;Qh=1;var e=Gy(),t=bj(),n=Vy(),r=1,i=2;function a(s,o,u,l,c,f){var d=u&r,h=s.length,b=o.length;if(h!=b&&!(d&&b>h))return!1;var m=f.get(s),v=f.get(o);if(m&&v)return m==o&&v==s;var y=-1,_=!0,g=u&i?new e:void 0;for(f.set(s,o),f.set(o,s);++y<h;){var x=s[y],w=o[y];if(l)var S=d?l(w,x,y,o,s,f):l(x,w,y,s,o,f);if(S!==void 0){if(S)continue;_=!1;break}if(g){if(!t(o,function(N,E){if(!n(g,E)&&(x===N||c(x,N,u,l,f)))return g.push(E)})){_=!1;break}}else if(!(x===w||c(x,w,u,l,f))){_=!1;break}}return f.delete(s),f.delete(o),_}return cs=a,cs}var us,ep;function _j(){if(ep)return us;ep=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return us=e,us}var ls,tp;function ll(){if(tp)return ls;tp=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return ls=e,ls}var ds,np;function wj(){if(np)return ds;np=1;var e=qt(),t=Dy(),n=Tt(),r=Uy(),i=_j(),a=ll(),s=1,o=2,u="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Map]",d="[object Number]",h="[object RegExp]",b="[object Set]",m="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",_="[object DataView]",g=e?e.prototype:void 0,x=g?g.valueOf:void 0;function w(S,N,E,j,R,A,P){switch(E){case _:if(S.byteLength!=N.byteLength||S.byteOffset!=N.byteOffset)return!1;S=S.buffer,N=N.buffer;case y:return!(S.byteLength!=N.byteLength||!A(new t(S),new t(N)));case u:case l:case d:return n(+S,+N);case c:return S.name==N.name&&S.message==N.message;case h:case m:return S==N+"";case f:var O=i;case b:var C=j&s;if(O||(O=a),S.size!=N.size&&!C)return!1;var q=P.get(S);if(q)return q==N;j|=o,P.set(S,N);var k=r(O(S),O(N),j,R,A,P);return P.delete(S),k;case v:if(x)return x.call(S)==x.call(N)}return!1}return ds=w,ds}var fs,rp;function Nj(){if(rp)return fs;rp=1;var e=qy(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,u,l,c){var f=o&t,d=e(a),h=d.length,b=e(s),m=b.length;if(h!=m&&!f)return!1;for(var v=h;v--;){var y=d[v];if(!(f?y in s:r.call(s,y)))return!1}var _=c.get(a),g=c.get(s);if(_&&g)return _==s&&g==a;var x=!0;c.set(a,s),c.set(s,a);for(var w=f;++v<h;){y=d[v];var S=a[y],N=s[y];if(u)var E=f?u(N,S,y,s,a,c):u(S,N,y,a,s,c);if(!(E===void 0?S===N||l(S,N,o,u,c):E)){x=!1;break}w||(w=y=="constructor")}if(x&&!w){var j=a.constructor,R=s.constructor;j!=R&&"constructor"in a&&"constructor"in s&&!(typeof j=="function"&&j instanceof j&&typeof R=="function"&&R instanceof R)&&(x=!1)}return c.delete(a),c.delete(s),x}return fs=i,fs}var hs,ip;function Sj(){if(ip)return hs;ip=1;var e=Sr(),t=Uy(),n=wj(),r=Nj(),i=Dt(),a=le(),s=Pt(),o=wn(),u=1,l="[object Arguments]",c="[object Array]",f="[object Object]",d=Object.prototype,h=d.hasOwnProperty;function b(m,v,y,_,g,x){var w=a(m),S=a(v),N=w?c:i(m),E=S?c:i(v);N=N==l?f:N,E=E==l?f:E;var j=N==f,R=E==f,A=N==E;if(A&&s(m)){if(!s(v))return!1;w=!0,j=!1}if(A&&!j)return x||(x=new e),w||o(m)?t(m,v,y,_,g,x):n(m,v,N,y,_,g,x);if(!(y&u)){var P=j&&h.call(m,"__wrapped__"),O=R&&h.call(v,"__wrapped__");if(P||O){var C=P?m.value():m,q=O?v.value():v;return x||(x=new e),g(C,q,y,_,x)}}return A?(x||(x=new e),r(m,v,y,_,g,x)):!1}return hs=b,hs}var ps,ap;function Yy(){if(ap)return ps;ap=1;var e=Sj(),t=Le();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return ps=n,ps}var gs,sp;function Ej(){if(sp)return gs;sp=1;var e=Sr(),t=Yy(),n=1,r=2;function i(a,s,o,u){var l=o.length,c=l,f=!u;if(a==null)return!c;for(a=Object(a);l--;){var d=o[l];if(f&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++l<c;){d=o[l];var h=d[0],b=a[h],m=d[1];if(f&&d[2]){if(b===void 0&&!(h in a))return!1}else{var v=new e;if(u)var y=u(b,m,h,a,s,v);if(!(y===void 0?t(m,b,n|r,u,v):y))return!1}}return!0}return gs=i,gs}var ms,op;function Wy(){if(op)return ms;op=1;var e=be();function t(n){return n===n&&!e(n)}return ms=t,ms}var vs,cp;function Cj(){if(cp)return vs;cp=1;var e=Wy(),t=it();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return vs=n,vs}var ys,up;function Xy(){if(up)return ys;up=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return ys=e,ys}var xs,lp;function kj(){if(lp)return xs;lp=1;var e=Ej(),t=Cj(),n=Xy();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return xs=r,xs}var bs,dp;function Lt(){if(dp)return bs;dp=1;var e=pt(),t=Le(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return bs=r,bs}var _s,fp;function dl(){if(fp)return _s;fp=1;var e=le(),t=Lt(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return _s=i,_s}var ws,hp;function jj(){if(hp)return ws;hp=1;var e=Qu(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],u=a.cache;if(u.has(o))return u.get(o);var l=r.apply(this,s);return a.cache=u.set(o,l)||u,l};return a.cache=new(n.Cache||e),a}return n.Cache=e,ws=n,ws}var Ns,pp;function Aj(){if(pp)return Ns;pp=1;var e=jj(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Ns=n,Ns}var Ss,gp;function Rj(){if(gp)return Ss;gp=1;var e=Aj(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,u,l){a.push(u?l.replace(n,"$1"):o||s)}),a});return Ss=r,Ss}var Es,mp;function Mr(){if(mp)return Es;mp=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return Es=e,Es}var Cs,vp;function Ij(){if(vp)return Cs;vp=1;var e=qt(),t=Mr(),n=le(),r=Lt(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return Cs=s,Cs}var ks,yp;function Ky(){if(yp)return ks;yp=1;var e=Ij();function t(n){return n==null?"":e(n)}return ks=t,ks}var js,xp;function Tr(){if(xp)return js;xp=1;var e=le(),t=dl(),n=Rj(),r=Ky();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return js=i,js}var As,bp;function Nn(){if(bp)return As;bp=1;var e=Lt();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return As=t,As}var Rs,_p;function qr(){if(_p)return Rs;_p=1;var e=Tr(),t=Nn();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return Rs=n,Rs}var Is,wp;function Mj(){if(wp)return Is;wp=1;var e=qr();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return Is=t,Is}var Ms,Np;function Tj(){if(Np)return Ms;Np=1;function e(t,n){return t!=null&&n in Object(t)}return Ms=e,Ms}var Ts,Sp;function Zy(){if(Sp)return Ts;Sp=1;var e=Tr(),t=_n(),n=le(),r=kr(),i=tl(),a=Nn();function s(o,u,l){u=e(u,o);for(var c=-1,f=u.length,d=!1;++c<f;){var h=a(u[c]);if(!(d=o!=null&&l(o,h)))break;o=o[h]}return d||++c!=f?d:(f=o==null?0:o.length,!!f&&i(f)&&r(h,f)&&(n(o)||t(o)))}return Ts=s,Ts}var qs,Ep;function Jy(){if(Ep)return qs;Ep=1;var e=Tj(),t=Zy();function n(r,i){return r!=null&&t(r,i,e)}return qs=n,qs}var Ps,Cp;function qj(){if(Cp)return Ps;Cp=1;var e=Yy(),t=Mj(),n=Jy(),r=dl(),i=Wy(),a=Xy(),s=Nn(),o=1,u=2;function l(c,f){return r(c)&&i(f)?a(s(c),f):function(d){var h=t(d,c);return h===void 0&&h===f?n(d,c):e(f,h,o|u)}}return Ps=l,Ps}var Ds,kp;function Qy(){if(kp)return Ds;kp=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Ds=e,Ds}var Ls,jp;function Pj(){if(jp)return Ls;jp=1;var e=qr();function t(n){return function(r){return e(r,n)}}return Ls=t,Ls}var Os,Ap;function Dj(){if(Ap)return Os;Ap=1;var e=Qy(),t=Pj(),n=dl(),r=Nn();function i(a){return n(a)?e(r(a)):t(a)}return Os=i,Os}var Fs,Rp;function Ke(){if(Rp)return Fs;Rp=1;var e=kj(),t=qj(),n=vt(),r=le(),i=Dj();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return Fs=a,Fs}var $s,Ip;function ex(){if(Ip)return $s;Ip=1;var e=Ry(),t=vj(),n=Ke(),r=le();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return $s=i,$s}var zs,Mp;function Lj(){if(Mp)return zs;Mp=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return zs=n,zs}var Bs,Tp;function tx(){if(Tp)return Bs;Tp=1;var e=Lj(),t=Zy();function n(r,i){return r!=null&&t(r,i,e)}return Bs=n,Bs}var Hs,qp;function Oj(){if(qp)return Hs;qp=1;var e=rl(),t=Dt(),n=_n(),r=le(),i=Xe(),a=Pt(),s=Ar(),o=wn(),u="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function d(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||o(h)||n(h)))return!h.length;var b=t(h);if(b==u||b==l)return!h.size;if(s(h))return!e(h).length;for(var m in h)if(f.call(h,m))return!1;return!0}return Hs=d,Hs}var Gs,Pp;function nx(){if(Pp)return Gs;Pp=1;function e(t){return t===void 0}return Gs=e,Gs}var Vs,Dp;function rx(){if(Dp)return Vs;Dp=1;var e=Ir(),t=Xe();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,u,l){s[++a]=i(o,u,l)}),s}return Vs=n,Vs}var Us,Lp;function ix(){if(Lp)return Us;Lp=1;var e=Mr(),t=Ke(),n=rx(),r=le();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return Us=i,Us}var Ys,Op;function Fj(){if(Op)return Ys;Op=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return Ys=e,Ys}var Ws,Fp;function $j(){if(Fp)return Ws;Fp=1;function e(t,n,r,i,a){return a(t,function(s,o,u){r=i?(i=!1,s):n(r,s,o,u)}),r}return Ws=e,Ws}var Xs,$p;function ax(){if($p)return Xs;$p=1;var e=Fj(),t=Ir(),n=Ke(),r=$j(),i=le();function a(s,o,u){var l=i(s)?e:r,c=arguments.length<3;return l(s,n(o,4),u,c,t)}return Xs=a,Xs}var Ks,zp;function zj(){if(zp)return Ks;zp=1;var e=pt(),t=le(),n=Le(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return Ks=i,Ks}var Zs,Bp;function Bj(){if(Bp)return Zs;Bp=1;var e=Qy(),t=e("length");return Zs=t,Zs}var Js,Hp;function Hj(){if(Hp)return Js;Hp=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function u(l){return o.test(l)}return Js=u,Js}var Qs,Gp;function Gj(){if(Gp)return Qs;Gp=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+u+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",b=l+"?",m="["+a+"]?",v="(?:"+h+"(?:"+[c,f,d].join("|")+")"+m+b+")*",y=m+b+v,_="(?:"+[c+o+"?",o,f,d,s].join("|")+")",g=RegExp(u+"(?="+u+")|"+_+y,"g");function x(w){for(var S=g.lastIndex=0;g.test(w);)++S;return S}return Qs=x,Qs}var eo,Vp;function Vj(){if(Vp)return eo;Vp=1;var e=Bj(),t=Hj(),n=Gj();function r(i){return t(i)?n(i):e(i)}return eo=r,eo}var to,Up;function Uj(){if(Up)return to;Up=1;var e=rl(),t=Dt(),n=Xe(),r=zj(),i=Vj(),a="[object Map]",s="[object Set]";function o(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var l=t(u);return l==a||l==s?u.size:e(u).length}return to=o,to}var no,Yp;function Yj(){if(Yp)return no;Yp=1;var e=el(),t=Oy(),n=ul(),r=Ke(),i=Rr(),a=le(),s=Pt(),o=xn(),u=be(),l=wn();function c(f,d,h){var b=a(f),m=b||s(f)||l(f);if(d=r(d,4),h==null){var v=f&&f.constructor;m?h=b?new v:[]:u(f)?h=o(v)?t(i(f)):{}:h={}}return(m?e:n)(f,function(y,_,g){return d(h,y,_,g)}),h}return no=c,no}var ro,Wp;function Wj(){if(Wp)return ro;Wp=1;var e=qt(),t=_n(),n=le(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return ro=i,ro}var io,Xp;function fl(){if(Xp)return io;Xp=1;var e=al(),t=Wj();function n(r,i,a,s,o){var u=-1,l=r.length;for(a||(a=t),o||(o=[]);++u<l;){var c=r[u];i>0&&a(c)?i>1?n(c,i-1,a,s,o):e(o,c):s||(o[o.length]=c)}return o}return io=n,io}var ao,Kp;function Xj(){if(Kp)return ao;Kp=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return ao=e,ao}var so,Zp;function sx(){if(Zp)return so;Zp=1;var e=Xj(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,u=t(s.length-i,0),l=Array(u);++o<u;)l[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(l),e(r,this,c)}}return so=n,so}var oo,Jp;function Kj(){if(Jp)return oo;Jp=1;var e=ol(),t=Ey(),n=vt(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return oo=r,oo}var co,Qp;function Zj(){if(Qp)return co;Qp=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),u=t-(o-s);if(s=o,u>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return co=r,co}var uo,eg;function ox(){if(eg)return uo;eg=1;var e=Kj(),t=Zj(),n=t(e);return uo=n,uo}var lo,tg;function Pr(){if(tg)return lo;tg=1;var e=vt(),t=sx(),n=ox();function r(i,a){return n(t(i,a,e),i+"")}return lo=r,lo}var fo,ng;function cx(){if(ng)return fo;ng=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return fo=e,fo}var ho,rg;function Jj(){if(rg)return ho;rg=1;function e(t){return t!==t}return ho=e,ho}var po,ig;function Qj(){if(ig)return po;ig=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return po=e,po}var go,ag;function eA(){if(ag)return go;ag=1;var e=cx(),t=Jj(),n=Qj();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return go=r,go}var mo,sg;function tA(){if(sg)return mo;sg=1;var e=eA();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return mo=t,mo}var vo,og;function nA(){if(og)return vo;og=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return vo=e,vo}var yo,cg;function rA(){if(cg)return yo;cg=1;function e(){}return yo=e,yo}var xo,ug;function iA(){if(ug)return xo;ug=1;var e=Py(),t=rA(),n=ll(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return xo=i,xo}var bo,lg;function aA(){if(lg)return bo;lg=1;var e=Gy(),t=tA(),n=nA(),r=Vy(),i=iA(),a=ll(),s=200;function o(u,l,c){var f=-1,d=t,h=u.length,b=!0,m=[],v=m;if(c)b=!1,d=n;else if(h>=s){var y=l?null:i(u);if(y)return a(y);b=!1,d=r,v=new e}else v=l?[]:m;e:for(;++f<h;){var _=u[f],g=l?l(_):_;if(_=c||_!==0?_:0,b&&g===g){for(var x=v.length;x--;)if(v[x]===g)continue e;l&&v.push(g),m.push(_)}else d(v,g,c)||(v!==m&&v.push(g),m.push(_))}return m}return bo=o,bo}var _o,dg;function ux(){if(dg)return _o;dg=1;var e=Xe(),t=Le();function n(r){return t(r)&&e(r)}return _o=n,_o}var wo,fg;function sA(){if(fg)return wo;fg=1;var e=fl(),t=Pr(),n=aA(),r=ux(),i=t(function(a){return n(e(a,1,r,!0))});return wo=i,wo}var No,hg;function oA(){if(hg)return No;hg=1;var e=Mr();function t(n,r){return e(r,function(i){return n[i]})}return No=t,No}var So,pg;function lx(){if(pg)return So;pg=1;var e=oA(),t=it();function n(r){return r==null?[]:e(r,t(r))}return So=n,So}var Eo,gg;function _e(){if(gg)return Eo;gg=1;var e;if(typeof Zu=="function")try{e={clone:pj(),constant:ol(),each:Hy(),filter:ex(),has:tx(),isArray:le(),isEmpty:Oj(),isFunction:xn(),isUndefined:nx(),keys:it(),map:ix(),reduce:ax(),size:Uj(),transform:Yj(),union:sA(),values:lx()}}catch{}return e||(e=window._),Eo=e,Eo}var Co,mg;function hl(){if(mg)return Co;mg=1;var e=_e();Co=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},i.prototype.setNodes=function(c,f){var d=arguments,h=this;return e.each(c,function(b){d.length>1?h.setNode(b,f):h.setNode(b)}),this},i.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var d=function(h){f.removeEdge(f._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){f.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var d=f;!e.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},i.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},i.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},i.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},i.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var d=this;e.each(this._nodes,function(m,v){c(v)&&f.setNode(v,m)}),e.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,d.edge(m))});var h={};function b(m){var v=d.parent(m);return v===void 0||f.hasNode(v)?(h[m]=v,v):v in h?h[v]:b(v)}return this._isCompound&&e.each(f.nodes(),function(m){f.setParent(m,b(m))}),f},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,f){var d=this,h=arguments;return e.reduce(c,function(b,m){return h.length>1?d.setEdge(b,m,f):d.setEdge(b,m),m}),this},i.prototype.setEdge=function(){var c,f,d,h,b=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,f=m.w,d=m.name,arguments.length===2&&(h=arguments[1],b=!0)):(c=m,f=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],b=!0)),c=""+c,f=""+f,e.isUndefined(d)||(d=""+d);var v=o(this._isDirected,c,f,d);if(e.has(this._edgeLabels,v))return b&&(this._edgeLabels[v]=h),this;if(!e.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[v]=b?h:this._defaultEdgeLabelFn(c,f,d);var y=u(this._isDirected,c,f,d);return c=y.v,f=y.w,Object.freeze(y),this._edgeObjs[v]=y,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][v]=y,this._out[c][v]=y,this._edgeCount++,this},i.prototype.edge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,f,d);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,f,d);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,f,d),b=this._edgeObjs[h];return b&&(c=b.v,f=b.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[f],c),s(this._sucs[c],f),delete this._in[f][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,f){var d=this._in[c];if(d){var h=e.values(d);return f?e.filter(h,function(b){return b.v===f}):h}},i.prototype.outEdges=function(c,f){var d=this._out[c];if(d){var h=e.values(d);return f?e.filter(h,function(b){return b.w===f}):h}},i.prototype.nodeEdges=function(c,f){var d=this.inEdges(c,f);if(d)return d.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function s(c,f){--c[f]||delete c[f]}function o(c,f,d,h){var b=""+f,m=""+d;if(!c&&b>m){var v=b;b=m,m=v}return b+r+m+r+(e.isUndefined(h)?t:h)}function u(c,f,d,h){var b=""+f,m=""+d;if(!c&&b>m){var v=b;b=m,m=v}var y={v:b,w:m};return h&&(y.name=h),y}function l(c,f){return o(c,f.v,f.w,f.name)}return Co}var ko,vg;function cA(){return vg||(vg=1,ko="2.1.8"),ko}var jo,yg;function uA(){return yg||(yg=1,jo={Graph:hl(),version:cA()}),jo}var Ao,xg;function lA(){if(xg)return Ao;xg=1;var e=_e(),t=hl();Ao={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var u=s.node(o),l=s.parent(o),c={v:o};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function i(s){return e.map(s.edges(),function(o){var u=s.edge(o),l={v:o.v,w:o.w};return e.isUndefined(o.name)||(l.name=o.name),e.isUndefined(u)||(l.value=u),l})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(u){o.setNode(u.v,u.value),u.parent&&o.setParent(u.v,u.parent)}),e.each(s.edges,function(u){o.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),o}return Ao}var Ro,bg;function dA(){if(bg)return Ro;bg=1;var e=_e();Ro=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return Ro}var Io,_g;function dx(){if(_g)return Io;_g=1;var e=_e();Io=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},Io}var Mo,wg;function fx(){if(wg)return Mo;wg=1;var e=_e(),t=dx();Mo=r;var n=e.constant(1);function r(a,s,o,u){return i(a,String(s),o||n,u||function(l){return a.outEdges(l)})}function i(a,s,o,u){var l={},c=new t,f,d,h=function(b){var m=b.v!==f?b.v:b.w,v=l[m],y=o(b),_=d.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+y);_<v.distance&&(v.distance=_,v.predecessor=f,c.decrease(m,_))};for(a.nodes().forEach(function(b){var m=b===s?0:Number.POSITIVE_INFINITY;l[b]={distance:m},c.add(b,m)});c.size()>0&&(f=c.removeMin(),d=l[f],d.distance!==Number.POSITIVE_INFINITY);)u(f).forEach(h);return l}return Mo}var To,Ng;function fA(){if(Ng)return To;Ng=1;var e=fx(),t=_e();To=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return To}var qo,Sg;function hx(){if(Sg)return qo;Sg=1;var e=_e();qo=t;function t(n){var r=0,i=[],a={},s=[];function o(u){var l=a[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(d){e.has(a,d)?a[d].onStack&&(l.lowlink=Math.min(l.lowlink,a[d].index)):(o(d),l.lowlink=Math.min(l.lowlink,a[d].lowlink))}),l.lowlink===l.index){var c=[],f;do f=i.pop(),a[f].onStack=!1,c.push(f);while(u!==f);s.push(c)}}return n.nodes().forEach(function(u){e.has(a,u)||o(u)}),s}return qo}var Po,Eg;function hA(){if(Eg)return Po;Eg=1;var e=_e(),t=hx();Po=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Po}var Do,Cg;function pA(){if(Cg)return Do;Cg=1;var e=_e();Do=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},u=i.nodes();return u.forEach(function(l){o[l]={},o[l][l]={distance:0},u.forEach(function(c){l!==c&&(o[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var f=c.v===l?c.w:c.v,d=a(c);o[l][f]={distance:d,predecessor:l}})}),u.forEach(function(l){var c=o[l];u.forEach(function(f){var d=o[f];u.forEach(function(h){var b=d[l],m=c[h],v=d[h],y=b.distance+m.distance;y<v.distance&&(v.distance=y,v.predecessor=m.predecessor)})})}),o}return Do}var Lo,kg;function px(){if(kg)return Lo;kg=1;var e=_e();Lo=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(u){if(e.has(a,u))throw new n;e.has(i,u)||(a[u]=!0,i[u]=!0,e.each(r.predecessors(u),o),delete a[u],s.push(u))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,Lo}var Oo,jg;function gA(){if(jg)return Oo;jg=1;var e=px();Oo=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Oo}var Fo,Ag;function gx(){if(Ag)return Fo;Ag=1;var e=_e();Fo=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],u={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,a==="post",u,s,o)}),o}function n(r,i,a,s,o,u){e.has(s,i)||(s[i]=!0,a||u.push(i),e.each(o(i),function(l){n(r,l,a,s,o,u)}),a&&u.push(i))}return Fo}var $o,Rg;function mA(){if(Rg)return $o;Rg=1;var e=gx();$o=t;function t(n,r){return e(n,r,"post")}return $o}var zo,Ig;function vA(){if(Ig)return zo;Ig=1;var e=gx();zo=t;function t(n,r){return e(n,r,"pre")}return zo}var Bo,Mg;function yA(){if(Mg)return Bo;Mg=1;var e=_e(),t=hl(),n=dx();Bo=r;function r(i,a){var s=new t,o={},u=new n,l;function c(d){var h=d.v===l?d.w:d.v,b=u.priority(h);if(b!==void 0){var m=a(d);m<b&&(o[h]=l,u.decrease(h,m))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(d){u.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),u.decrease(i.nodes()[0],0);for(var f=!1;u.size()>0;){if(l=u.removeMin(),e.has(o,l))s.setEdge(l,o[l]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(l).forEach(c)}return s}return Bo}var Ho,Tg;function xA(){return Tg||(Tg=1,Ho={components:dA(),dijkstra:fx(),dijkstraAll:fA(),findCycles:hA(),floydWarshall:pA(),isAcyclic:gA(),postorder:mA(),preorder:vA(),prim:yA(),tarjan:hx(),topsort:px()}),Ho}var Go,qg;function bA(){if(qg)return Go;qg=1;var e=uA();return Go={Graph:e.Graph,json:lA(),alg:xA(),version:e.version},Go}var Vo,Pg;function ke(){if(Pg)return Vo;Pg=1;var e;if(typeof Zu=="function")try{e=bA()}catch{}return e||(e=window.graphlib),Vo=e,Vo}var Uo,Dg;function _A(){if(Dg)return Uo;Dg=1;var e=$y(),t=1,n=4;function r(i){return e(i,t|n)}return Uo=r,Uo}var Yo,Lg;function Dr(){if(Lg)return Yo;Lg=1;var e=Tt(),t=Xe(),n=kr(),r=be();function i(a,s,o){if(!r(o))return!1;var u=typeof s;return(u=="number"?t(o)&&n(s,o.length):u=="string"&&s in o)?e(o[s],a):!1}return Yo=i,Yo}var Wo,Og;function wA(){if(Og)return Wo;Og=1;var e=Pr(),t=Tt(),n=Dr(),r=mt(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,u){o=Object(o);var l=-1,c=u.length,f=c>2?u[2]:void 0;for(f&&n(u[0],u[1],f)&&(c=1);++l<c;)for(var d=u[l],h=r(d),b=-1,m=h.length;++b<m;){var v=h[b],y=o[v];(y===void 0||t(y,i[v])&&!a.call(o,v))&&(o[v]=d[v])}return o});return Wo=s,Wo}var Xo,Fg;function NA(){if(Fg)return Xo;Fg=1;var e=Ke(),t=Xe(),n=it();function r(i){return function(a,s,o){var u=Object(a);if(!t(a)){var l=e(s,3);a=n(a),s=function(f){return l(u[f],f,u)}}var c=i(a,s,o);return c>-1?u[l?a[c]:c]:void 0}}return Xo=r,Xo}var Ko,$g;function SA(){if($g)return Ko;$g=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Ko=t,Ko}var Zo,zg;function EA(){if(zg)return Zo;zg=1;var e=SA(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Zo=n,Zo}var Jo,Bg;function CA(){if(Bg)return Jo;Bg=1;var e=EA(),t=be(),n=Lt(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var f=a.test(l);return f||s.test(l)?o(l.slice(2),f?2:8):i.test(l)?r:+l}return Jo=u,Jo}var Qo,Hg;function mx(){if(Hg)return Qo;Hg=1;var e=CA(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return Qo=r,Qo}var ec,Gg;function kA(){if(Gg)return ec;Gg=1;var e=mx();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return ec=t,ec}var tc,Vg;function jA(){if(Vg)return tc;Vg=1;var e=cx(),t=Ke(),n=kA(),r=Math.max;function i(a,s,o){var u=a==null?0:a.length;if(!u)return-1;var l=o==null?0:n(o);return l<0&&(l=r(u+l,0)),e(a,t(s,3),l)}return tc=i,tc}var nc,Ug;function AA(){if(Ug)return nc;Ug=1;var e=NA(),t=jA(),n=e(t);return nc=n,nc}var rc,Yg;function vx(){if(Yg)return rc;Yg=1;var e=fl();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return rc=t,rc}var ic,Wg;function RA(){if(Wg)return ic;Wg=1;var e=cl(),t=zy(),n=mt();function r(i,a){return i==null?i:e(i,t(a),n)}return ic=r,ic}var ac,Xg;function IA(){if(Xg)return ac;Xg=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ac=e,ac}var sc,Kg;function MA(){if(Kg)return sc;Kg=1;var e=Er(),t=ul(),n=Ke();function r(i,a){var s={};return a=n(a,3),t(i,function(o,u,l){e(s,u,a(o,u,l))}),s}return sc=r,sc}var oc,Zg;function pl(){if(Zg)return oc;Zg=1;var e=Lt();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],u=r(o);if(u!=null&&(l===void 0?u===u&&!e(u):i(u,l)))var l=u,c=o}return c}return oc=t,oc}var cc,Jg;function TA(){if(Jg)return cc;Jg=1;function e(t,n){return t>n}return cc=e,cc}var uc,Qg;function qA(){if(Qg)return uc;Qg=1;var e=pl(),t=TA(),n=vt();function r(i){return i&&i.length?e(i,n,t):void 0}return uc=r,uc}var lc,em;function yx(){if(em)return lc;em=1;var e=Er(),t=Tt();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return lc=n,lc}var dc,tm;function PA(){if(tm)return dc;tm=1;var e=pt(),t=Rr(),n=Le(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,u=s.call(Object);function l(c){if(!n(c)||e(c)!=r)return!1;var f=t(c);if(f===null)return!0;var d=o.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&s.call(d)==u}return dc=l,dc}var fc,nm;function xx(){if(nm)return fc;nm=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return fc=e,fc}var hc,rm;function DA(){if(rm)return hc;rm=1;var e=bn(),t=mt();function n(r){return e(r,t(r))}return hc=n,hc}var pc,im;function LA(){if(im)return pc;im=1;var e=yx(),t=jy(),n=Ly(),r=Ay(),i=Fy(),a=_n(),s=le(),o=ux(),u=Pt(),l=xn(),c=be(),f=PA(),d=wn(),h=xx(),b=DA();function m(v,y,_,g,x,w,S){var N=h(v,_),E=h(y,_),j=S.get(E);if(j){e(v,_,j);return}var R=w?w(N,E,_+"",v,y,S):void 0,A=R===void 0;if(A){var P=s(E),O=!P&&u(E),C=!P&&!O&&d(E);R=E,P||O||C?s(N)?R=N:o(N)?R=r(N):O?(A=!1,R=t(E,!0)):C?(A=!1,R=n(E,!0)):R=[]:f(E)||a(E)?(R=N,a(N)?R=b(N):(!c(N)||l(N))&&(R=i(E))):A=!1}A&&(S.set(E,R),x(R,E,g,w,S),S.delete(E)),e(v,_,R)}return pc=m,pc}var gc,am;function OA(){if(am)return gc;am=1;var e=Sr(),t=yx(),n=cl(),r=LA(),i=be(),a=mt(),s=xx();function o(u,l,c,f,d){u!==l&&n(l,function(h,b){if(d||(d=new e),i(h))r(u,l,b,c,o,f,d);else{var m=f?f(s(u,b),h,b+"",u,l,d):void 0;m===void 0&&(m=h),t(u,b,m)}},a)}return gc=o,gc}var mc,sm;function FA(){if(sm)return mc;sm=1;var e=Pr(),t=Dr();function n(r){return e(function(i,a){var s=-1,o=a.length,u=o>1?a[o-1]:void 0,l=o>2?a[2]:void 0;for(u=r.length>3&&typeof u=="function"?(o--,u):void 0,l&&t(a[0],a[1],l)&&(u=o<3?void 0:u,o=1),i=Object(i);++s<o;){var c=a[s];c&&r(i,c,s,u)}return i})}return mc=n,mc}var vc,om;function $A(){if(om)return vc;om=1;var e=OA(),t=FA(),n=t(function(r,i,a){e(r,i,a)});return vc=n,vc}var yc,cm;function bx(){if(cm)return yc;cm=1;function e(t,n){return t<n}return yc=e,yc}var xc,um;function zA(){if(um)return xc;um=1;var e=pl(),t=bx(),n=vt();function r(i){return i&&i.length?e(i,n,t):void 0}return xc=r,xc}var bc,lm;function BA(){if(lm)return bc;lm=1;var e=pl(),t=Ke(),n=bx();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return bc=r,bc}var _c,dm;function HA(){if(dm)return _c;dm=1;var e=Ae(),t=function(){return e.Date.now()};return _c=t,_c}var wc,fm;function GA(){if(fm)return wc;fm=1;var e=Cr(),t=Tr(),n=kr(),r=be(),i=Nn();function a(s,o,u,l){if(!r(s))return s;o=t(o,s);for(var c=-1,f=o.length,d=f-1,h=s;h!=null&&++c<f;){var b=i(o[c]),m=u;if(b==="__proto__"||b==="constructor"||b==="prototype")return s;if(c!=d){var v=h[b];m=l?l(v,b,h):void 0,m===void 0&&(m=r(v)?v:n(o[c+1])?[]:{})}e(h,b,m),h=h[b]}return s}return wc=a,wc}var Nc,hm;function VA(){if(hm)return Nc;hm=1;var e=qr(),t=GA(),n=Tr();function r(i,a,s){for(var o=-1,u=a.length,l={};++o<u;){var c=a[o],f=e(i,c);s(f,c)&&t(l,n(c,i),f)}return l}return Nc=r,Nc}var Sc,pm;function UA(){if(pm)return Sc;pm=1;var e=VA(),t=Jy();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return Sc=n,Sc}var Ec,gm;function YA(){if(gm)return Ec;gm=1;var e=vx(),t=sx(),n=ox();function r(i){return n(t(i,void 0,e),i+"")}return Ec=r,Ec}var Cc,mm;function WA(){if(mm)return Cc;mm=1;var e=UA(),t=YA(),n=t(function(r,i){return r==null?{}:e(r,i)});return Cc=n,Cc}var kc,vm;function XA(){if(vm)return kc;vm=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,u=t(e((i-r)/(a||1)),0),l=Array(u);u--;)l[s?u:++o]=r,r+=a;return l}return kc=n,kc}var jc,ym;function KA(){if(ym)return jc;ym=1;var e=XA(),t=Dr(),n=mx();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return jc=r,jc}var Ac,xm;function ZA(){if(xm)return Ac;xm=1;var e=KA(),t=e();return Ac=t,Ac}var Rc,bm;function JA(){if(bm)return Rc;bm=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Rc=e,Rc}var Ic,_m;function QA(){if(_m)return Ic;_m=1;var e=Lt();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),u=r!==void 0,l=r===null,c=r===r,f=e(r);if(!l&&!f&&!o&&n>r||o&&u&&c&&!l&&!f||a&&u&&c||!i&&c||!s)return 1;if(!a&&!o&&!f&&n<r||f&&i&&s&&!a&&!o||l&&i&&s||!u&&s||!c)return-1}return 0}return Ic=t,Ic}var Mc,wm;function eR(){if(wm)return Mc;wm=1;var e=QA();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,u=s.length,l=i.length;++a<u;){var c=e(s[a],o[a]);if(c){if(a>=l)return c;var f=i[a];return c*(f=="desc"?-1:1)}}return n.index-r.index}return Mc=t,Mc}var Tc,Nm;function tR(){if(Nm)return Tc;Nm=1;var e=Mr(),t=qr(),n=Ke(),r=rx(),i=JA(),a=jr(),s=eR(),o=vt(),u=le();function l(c,f,d){f.length?f=e(f,function(m){return u(m)?function(v){return t(v,m.length===1?m[0]:m)}:m}):f=[o];var h=-1;f=e(f,a(n));var b=r(c,function(m,v,y){var _=e(f,function(g){return g(m)});return{criteria:_,index:++h,value:m}});return i(b,function(m,v){return s(m,v,d)})}return Tc=l,Tc}var qc,Sm;function nR(){if(Sm)return qc;Sm=1;var e=fl(),t=tR(),n=Pr(),r=Dr(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return qc=i,qc}var Pc,Em;function rR(){if(Em)return Pc;Em=1;var e=Ky(),t=0;function n(r){var i=++t;return e(r)+i}return Pc=n,Pc}var Dc,Cm;function iR(){if(Cm)return Dc;Cm=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var u=i<s?n[i]:void 0;r(o,t[i],u)}return o}return Dc=e,Dc}var Lc,km;function aR(){if(km)return Lc;km=1;var e=Cr(),t=iR();function n(r,i){return t(r||[],i||[],e)}return Lc=n,Lc}var Oc,jm;function se(){if(jm)return Oc;jm=1;var e;if(typeof Zu=="function")try{e={cloneDeep:_A(),constant:ol(),defaults:wA(),each:Hy(),filter:ex(),find:AA(),flatten:vx(),forEach:By(),forIn:RA(),has:tx(),isUndefined:nx(),last:IA(),map:ix(),mapValues:MA(),max:qA(),merge:$A(),min:zA(),minBy:BA(),now:HA(),pick:WA(),range:ZA(),reduce:ax(),sortBy:nR(),uniqueId:rR(),values:lx(),zipObject:aR()}}catch{}return e||(e=window._),Oc=e,Oc}var Fc,Am;function sR(){if(Am)return Fc;Am=1,Fc=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,a=i._prev;a!==i;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Fc}var $c,Rm;function oR(){if(Rm)return $c;Rm=1;var e=se(),t=ke().Graph,n=sR();$c=i;var r=e.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var f=o(l,c||r),d=a(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(d,function(h){return l.outEdges(h.v,h.w)}),!0)}function a(l,c,f){for(var d=[],h=c[c.length-1],b=c[0],m;l.nodeCount();){for(;m=b.dequeue();)s(l,c,f,m);for(;m=h.dequeue();)s(l,c,f,m);if(l.nodeCount()){for(var v=c.length-2;v>0;--v)if(m=c[v].dequeue(),m){d=d.concat(s(l,c,f,m,!0));break}}}return d}function s(l,c,f,d,h){var b=h?[]:void 0;return e.forEach(l.inEdges(d.v),function(m){var v=l.edge(m),y=l.node(m.v);h&&b.push({v:m.v,w:m.w}),y.out-=v,u(c,f,y)}),e.forEach(l.outEdges(d.v),function(m){var v=l.edge(m),y=m.w,_=l.node(y);_.in-=v,u(c,f,_)}),l.removeNode(d.v),b}function o(l,c){var f=new t,d=0,h=0;e.forEach(l.nodes(),function(v){f.setNode(v,{v,in:0,out:0})}),e.forEach(l.edges(),function(v){var y=f.edge(v.v,v.w)||0,_=c(v),g=y+_;f.setEdge(v.v,v.w,g),h=Math.max(h,f.node(v.v).out+=_),d=Math.max(d,f.node(v.w).in+=_)});var b=e.range(h+d+3).map(function(){return new n}),m=d+1;return e.forEach(f.nodes(),function(v){u(b,m,f.node(v))}),{graph:f,buckets:b,zeroIdx:m}}function u(l,c,f){f.out?f.in?l[f.out-f.in+c].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return $c}var zc,Im;function cR(){if(Im)return zc;Im=1;var e=se(),t=oR();zc={run:n,undo:i};function n(a){var s=a.graph().acyclicer==="greedy"?t(a,o(a)):r(a);e.forEach(s,function(u){var l=a.edge(u);a.removeEdge(u),l.forwardName=u.name,l.reversed=!0,a.setEdge(u.w,u.v,l,e.uniqueId("rev"))});function o(u){return function(l){return u.edge(l).weight}}}function r(a){var s=[],o={},u={};function l(c){e.has(u,c)||(u[c]=!0,o[c]=!0,e.forEach(a.outEdges(c),function(f){e.has(o,f.w)?s.push(f):l(f.w)}),delete o[c])}return e.forEach(a.nodes(),l),s}function i(a){e.forEach(a.edges(),function(s){var o=a.edge(s);if(o.reversed){a.removeEdge(s);var u=o.forwardName;delete o.reversed,delete o.forwardName,a.setEdge(s.w,s.v,o,u)}})}return zc}var Bc,Mm;function me(){if(Mm)return Bc;Mm=1;var e=se(),t=ke().Graph;Bc={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:s,intersectRect:o,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:f,maxRank:d,partition:h,time:b,notime:m};function n(v,y,_,g){var x;do x=e.uniqueId(g);while(v.hasNode(x));return _.dummy=y,v.setNode(x,_),x}function r(v){var y=new t().setGraph(v.graph());return e.forEach(v.nodes(),function(_){y.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){var g=y.edge(_.v,_.w)||{weight:0,minlen:1},x=v.edge(_);y.setEdge(_.v,_.w,{weight:g.weight+x.weight,minlen:Math.max(g.minlen,x.minlen)})}),y}function i(v){var y=new t({multigraph:v.isMultigraph()}).setGraph(v.graph());return e.forEach(v.nodes(),function(_){v.children(_).length||y.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){y.setEdge(_,v.edge(_))}),y}function a(v){var y=e.map(v.nodes(),function(_){var g={};return e.forEach(v.outEdges(_),function(x){g[x.w]=(g[x.w]||0)+v.edge(x).weight}),g});return e.zipObject(v.nodes(),y)}function s(v){var y=e.map(v.nodes(),function(_){var g={};return e.forEach(v.inEdges(_),function(x){g[x.v]=(g[x.v]||0)+v.edge(x).weight}),g});return e.zipObject(v.nodes(),y)}function o(v,y){var _=v.x,g=v.y,x=y.x-_,w=y.y-g,S=v.width/2,N=v.height/2;if(!x&&!w)throw new Error("Not possible to find intersection inside of the rectangle");var E,j;return Math.abs(w)*S>Math.abs(x)*N?(w<0&&(N=-N),E=N*x/w,j=N):(x<0&&(S=-S),E=S,j=S*w/x),{x:_+E,y:g+j}}function u(v){var y=e.map(e.range(d(v)+1),function(){return[]});return e.forEach(v.nodes(),function(_){var g=v.node(_),x=g.rank;e.isUndefined(x)||(y[x][g.order]=_)}),y}function l(v){var y=e.min(e.map(v.nodes(),function(_){return v.node(_).rank}));e.forEach(v.nodes(),function(_){var g=v.node(_);e.has(g,"rank")&&(g.rank-=y)})}function c(v){var y=e.min(e.map(v.nodes(),function(w){return v.node(w).rank})),_=[];e.forEach(v.nodes(),function(w){var S=v.node(w).rank-y;_[S]||(_[S]=[]),_[S].push(w)});var g=0,x=v.graph().nodeRankFactor;e.forEach(_,function(w,S){e.isUndefined(w)&&S%x!==0?--g:g&&e.forEach(w,function(N){v.node(N).rank+=g})})}function f(v,y,_,g){var x={width:0,height:0};return arguments.length>=4&&(x.rank=_,x.order=g),n(v,"border",x,y)}function d(v){return e.max(e.map(v.nodes(),function(y){var _=v.node(y).rank;if(!e.isUndefined(_))return _}))}function h(v,y){var _={lhs:[],rhs:[]};return e.forEach(v,function(g){y(g)?_.lhs.push(g):_.rhs.push(g)}),_}function b(v,y){var _=e.now();try{return y()}finally{console.log(v+" time: "+(e.now()-_)+"ms")}}function m(v,y){return y()}return Bc}var Hc,Tm;function uR(){if(Tm)return Hc;Tm=1;var e=se(),t=me();Hc={run:n,undo:i};function n(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(s){r(a,s)})}function r(a,s){var o=s.v,u=a.node(o).rank,l=s.w,c=a.node(l).rank,f=s.name,d=a.edge(s),h=d.labelRank;if(c!==u+1){a.removeEdge(s);var b,m,v;for(v=0,++u;u<c;++v,++u)d.points=[],m={width:0,height:0,edgeLabel:d,edgeObj:s,rank:u},b=t.addDummyNode(a,"edge",m,"_d"),u===h&&(m.width=d.width,m.height=d.height,m.dummy="edge-label",m.labelpos=d.labelpos),a.setEdge(o,b,{weight:d.weight},f),v===0&&a.graph().dummyChains.push(b),o=b;a.setEdge(o,l,{weight:d.weight},f)}}function i(a){e.forEach(a.graph().dummyChains,function(s){var o=a.node(s),u=o.edgeLabel,l;for(a.setEdge(o.edgeObj,u);o.dummy;)l=a.successors(s)[0],a.removeNode(s),u.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(u.x=o.x,u.y=o.y,u.width=o.width,u.height=o.height),s=l,o=a.node(s)})}return Hc}var Gc,qm;function ar(){if(qm)return Gc;qm=1;var e=se();Gc={longestPath:t,slack:n};function t(r){var i={};function a(s){var o=r.node(s);if(e.has(i,s))return o.rank;i[s]=!0;var u=e.min(e.map(r.outEdges(s),function(l){return a(l.w)-r.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),o.rank=u}e.forEach(r.sources(),a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return Gc}var Vc,Pm;function _x(){if(Pm)return Vc;Pm=1;var e=se(),t=ke().Graph,n=ar().slack;Vc=r;function r(o){var u=new t({directed:!1}),l=o.nodes()[0],c=o.nodeCount();u.setNode(l,{});for(var f,d;i(u,o)<c;)f=a(u,o),d=u.hasNode(f.v)?n(o,f):-n(o,f),s(u,o,d);return u}function i(o,u){function l(c){e.forEach(u.nodeEdges(c),function(f){var d=f.v,h=c===d?f.w:d;!o.hasNode(h)&&!n(u,f)&&(o.setNode(h,{}),o.setEdge(c,h,{}),l(h))})}return e.forEach(o.nodes(),l),o.nodeCount()}function a(o,u){return e.minBy(u.edges(),function(l){if(o.hasNode(l.v)!==o.hasNode(l.w))return n(u,l)})}function s(o,u,l){e.forEach(o.nodes(),function(c){u.node(c).rank+=l})}return Vc}var Uc,Dm;function lR(){if(Dm)return Uc;Dm=1;var e=se(),t=_x(),n=ar().slack,r=ar().longestPath,i=ke().alg.preorder,a=ke().alg.postorder,s=me().simplify;Uc=o,o.initLowLimValues=f,o.initCutValues=u,o.calcCutValue=c,o.leaveEdge=h,o.enterEdge=b,o.exchangeEdges=m;function o(g){g=s(g),r(g);var x=t(g);f(x),u(x,g);for(var w,S;w=h(x);)S=b(x,g,w),m(x,g,w,S)}function u(g,x){var w=a(g,g.nodes());w=w.slice(0,w.length-1),e.forEach(w,function(S){l(g,x,S)})}function l(g,x,w){var S=g.node(w),N=S.parent;g.edge(w,N).cutvalue=c(g,x,w)}function c(g,x,w){var S=g.node(w),N=S.parent,E=!0,j=x.edge(w,N),R=0;return j||(E=!1,j=x.edge(N,w)),R=j.weight,e.forEach(x.nodeEdges(w),function(A){var P=A.v===w,O=P?A.w:A.v;if(O!==N){var C=P===E,q=x.edge(A).weight;if(R+=C?q:-q,y(g,w,O)){var k=g.edge(w,O).cutvalue;R+=C?-k:k}}}),R}function f(g,x){arguments.length<2&&(x=g.nodes()[0]),d(g,{},1,x)}function d(g,x,w,S,N){var E=w,j=g.node(S);return x[S]=!0,e.forEach(g.neighbors(S),function(R){e.has(x,R)||(w=d(g,x,w,R,S))}),j.low=E,j.lim=w++,N?j.parent=N:delete j.parent,w}function h(g){return e.find(g.edges(),function(x){return g.edge(x).cutvalue<0})}function b(g,x,w){var S=w.v,N=w.w;x.hasEdge(S,N)||(S=w.w,N=w.v);var E=g.node(S),j=g.node(N),R=E,A=!1;E.lim>j.lim&&(R=j,A=!0);var P=e.filter(x.edges(),function(O){return A===_(g,g.node(O.v),R)&&A!==_(g,g.node(O.w),R)});return e.minBy(P,function(O){return n(x,O)})}function m(g,x,w,S){var N=w.v,E=w.w;g.removeEdge(N,E),g.setEdge(S.v,S.w,{}),f(g),u(g,x),v(g,x)}function v(g,x){var w=e.find(g.nodes(),function(N){return!x.node(N).parent}),S=i(g,w);S=S.slice(1),e.forEach(S,function(N){var E=g.node(N).parent,j=x.edge(N,E),R=!1;j||(j=x.edge(E,N),R=!0),x.node(N).rank=x.node(E).rank+(R?j.minlen:-j.minlen)})}function y(g,x,w){return g.hasEdge(x,w)}function _(g,x,w){return w.low<=x.lim&&x.lim<=w.lim}return Uc}var Yc,Lm;function dR(){if(Lm)return Yc;Lm=1;var e=ar(),t=e.longestPath,n=_x(),r=lR();Yc=i;function i(u){switch(u.graph().ranker){case"network-simplex":o(u);break;case"tight-tree":s(u);break;case"longest-path":a(u);break;default:o(u)}}var a=t;function s(u){t(u),n(u)}function o(u){r(u)}return Yc}var Wc,Om;function fR(){if(Om)return Wc;Om=1;var e=se();Wc=t;function t(i){var a=r(i);e.forEach(i.graph().dummyChains,function(s){for(var o=i.node(s),u=o.edgeObj,l=n(i,a,u.v,u.w),c=l.path,f=l.lca,d=0,h=c[d],b=!0;s!==u.w;){if(o=i.node(s),b){for(;(h=c[d])!==f&&i.node(h).maxRank<o.rank;)d++;h===f&&(b=!1)}if(!b){for(;d<c.length-1&&i.node(h=c[d+1]).minRank<=o.rank;)d++;h=c[d]}i.setParent(s,h),s=i.successors(s)[0]}})}function n(i,a,s,o){var u=[],l=[],c=Math.min(a[s].low,a[o].low),f=Math.max(a[s].lim,a[o].lim),d,h;d=s;do d=i.parent(d),u.push(d);while(d&&(a[d].low>c||f>a[d].lim));for(h=d,d=o;(d=i.parent(d))!==h;)l.push(d);return{path:u.concat(l.reverse()),lca:h}}function r(i){var a={},s=0;function o(u){var l=s;e.forEach(i.children(u),o),a[u]={low:l,lim:s++}}return e.forEach(i.children(),o),a}return Wc}var Xc,Fm;function hR(){if(Fm)return Xc;Fm=1;var e=se(),t=me();Xc={run:n,cleanup:s};function n(o){var u=t.addDummyNode(o,"root",{},"_root"),l=i(o),c=e.max(e.values(l))-1,f=2*c+1;o.graph().nestingRoot=u,e.forEach(o.edges(),function(h){o.edge(h).minlen*=f});var d=a(o)+1;e.forEach(o.children(),function(h){r(o,u,f,d,c,l,h)}),o.graph().nodeRankFactor=f}function r(o,u,l,c,f,d,h){var b=o.children(h);if(!b.length){h!==u&&o.setEdge(u,h,{weight:0,minlen:l});return}var m=t.addBorderNode(o,"_bt"),v=t.addBorderNode(o,"_bb"),y=o.node(h);o.setParent(m,h),y.borderTop=m,o.setParent(v,h),y.borderBottom=v,e.forEach(b,function(_){r(o,u,l,c,f,d,_);var g=o.node(_),x=g.borderTop?g.borderTop:_,w=g.borderBottom?g.borderBottom:_,S=g.borderTop?c:2*c,N=x!==w?1:f-d[h]+1;o.setEdge(m,x,{weight:S,minlen:N,nestingEdge:!0}),o.setEdge(w,v,{weight:S,minlen:N,nestingEdge:!0})}),o.parent(h)||o.setEdge(u,m,{weight:0,minlen:f+d[h]})}function i(o){var u={};function l(c,f){var d=o.children(c);d&&d.length&&e.forEach(d,function(h){l(h,f+1)}),u[c]=f}return e.forEach(o.children(),function(c){l(c,1)}),u}function a(o){return e.reduce(o.edges(),function(u,l){return u+o.edge(l).weight},0)}function s(o){var u=o.graph();o.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(o.edges(),function(l){var c=o.edge(l);c.nestingEdge&&o.removeEdge(l)})}return Xc}var Kc,$m;function pR(){if($m)return Kc;$m=1;var e=se(),t=me();Kc=n;function n(i){function a(s){var o=i.children(s),u=i.node(s);if(o.length&&e.forEach(o,a),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)r(i,"borderLeft","_bl",s,u,l),r(i,"borderRight","_br",s,u,l)}}e.forEach(i.children(),a)}function r(i,a,s,o,u,l){var c={width:0,height:0,rank:l,borderType:a},f=u[a][l-1],d=t.addDummyNode(i,"border",c,s);u[a][l]=d,i.setParent(d,o),f&&i.setEdge(f,d,{weight:1})}return Kc}var Zc,zm;function gR(){if(zm)return Zc;zm=1;var e=se();Zc={adjust:t,undo:n};function t(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&r(l)}function n(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&a(l),(c==="lr"||c==="rl")&&(o(l),r(l))}function r(l){e.forEach(l.nodes(),function(c){i(l.node(c))}),e.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function a(l){e.forEach(l.nodes(),function(c){s(l.node(c))}),e.forEach(l.edges(),function(c){var f=l.edge(c);e.forEach(f.points,s),e.has(f,"y")&&s(f)})}function s(l){l.y=-l.y}function o(l){e.forEach(l.nodes(),function(c){u(l.node(c))}),e.forEach(l.edges(),function(c){var f=l.edge(c);e.forEach(f.points,u),e.has(f,"x")&&u(f)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return Zc}var Jc,Bm;function mR(){if(Bm)return Jc;Bm=1;var e=se();Jc=t;function t(n){var r={},i=e.filter(n.nodes(),function(l){return!n.children(l).length}),a=e.max(e.map(i,function(l){return n.node(l).rank})),s=e.map(e.range(a+1),function(){return[]});function o(l){if(!e.has(r,l)){r[l]=!0;var c=n.node(l);s[c.rank].push(l),e.forEach(n.successors(l),o)}}var u=e.sortBy(i,function(l){return n.node(l).rank});return e.forEach(u,o),s}return Jc}var Qc,Hm;function vR(){if(Hm)return Qc;Hm=1;var e=se();Qc=t;function t(r,i){for(var a=0,s=1;s<i.length;++s)a+=n(r,i[s-1],i[s]);return a}function n(r,i,a){for(var s=e.zipObject(a,e.map(a,function(d,h){return h})),o=e.flatten(e.map(i,function(d){return e.sortBy(e.map(r.outEdges(d),function(h){return{pos:s[h.w],weight:r.edge(h).weight}}),"pos")}),!0),u=1;u<a.length;)u<<=1;var l=2*u-1;u-=1;var c=e.map(new Array(l),function(){return 0}),f=0;return e.forEach(o.forEach(function(d){var h=d.pos+u;c[h]+=d.weight;for(var b=0;h>0;)h%2&&(b+=c[h+1]),h=h-1>>1,c[h]+=d.weight;f+=d.weight*b})),f}return Qc}var eu,Gm;function yR(){if(Gm)return eu;Gm=1;var e=se();eu=t;function t(n,r){return e.map(r,function(i){var a=n.inEdges(i);if(a.length){var s=e.reduce(a,function(o,u){var l=n.edge(u),c=n.node(u.v);return{sum:o.sum+l.weight*c.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return eu}var tu,Vm;function xR(){if(Vm)return tu;Vm=1;var e=se();tu=t;function t(i,a){var s={};e.forEach(i,function(u,l){var c=s[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};e.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),e.forEach(a.edges(),function(u){var l=s[u.v],c=s[u.w];!e.isUndefined(l)&&!e.isUndefined(c)&&(c.indegree++,l.out.push(s[u.w]))});var o=e.filter(s,function(u){return!u.indegree});return n(o)}function n(i){var a=[];function s(l){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&r(l,c)}}function o(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();a.push(u),e.forEach(u.in.reverse(),s(u)),e.forEach(u.out,o(u))}return e.map(e.filter(a,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function r(i,a){var s=0,o=0;i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=s/o,i.weight=o,i.i=Math.min(a.i,i.i),a.merged=!0}return tu}var nu,Um;function bR(){if(Um)return nu;Um=1;var e=se(),t=me();nu=n;function n(a,s){var o=t.partition(a,function(m){return e.has(m,"barycenter")}),u=o.lhs,l=e.sortBy(o.rhs,function(m){return-m.i}),c=[],f=0,d=0,h=0;u.sort(i(!!s)),h=r(c,l,h),e.forEach(u,function(m){h+=m.vs.length,c.push(m.vs),f+=m.barycenter*m.weight,d+=m.weight,h=r(c,l,h)});var b={vs:e.flatten(c,!0)};return d&&(b.barycenter=f/d,b.weight=d),b}function r(a,s,o){for(var u;s.length&&(u=e.last(s)).i<=o;)s.pop(),a.push(u.vs),o++;return o}function i(a){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:a?o.i-s.i:s.i-o.i}}return nu}var ru,Ym;function _R(){if(Ym)return ru;Ym=1;var e=se(),t=yR(),n=xR(),r=bR();ru=i;function i(o,u,l,c){var f=o.children(u),d=o.node(u),h=d?d.borderLeft:void 0,b=d?d.borderRight:void 0,m={};h&&(f=e.filter(f,function(w){return w!==h&&w!==b}));var v=t(o,f);e.forEach(v,function(w){if(o.children(w.v).length){var S=i(o,w.v,l,c);m[w.v]=S,e.has(S,"barycenter")&&s(w,S)}});var y=n(v,l);a(y,m);var _=r(y,c);if(h&&(_.vs=e.flatten([h,_.vs,b],!0),o.predecessors(h).length)){var g=o.node(o.predecessors(h)[0]),x=o.node(o.predecessors(b)[0]);e.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+g.order+x.order)/(_.weight+2),_.weight+=2}return _}function a(o,u){e.forEach(o,function(l){l.vs=e.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function s(o,u){e.isUndefined(o.barycenter)?(o.barycenter=u.barycenter,o.weight=u.weight):(o.barycenter=(o.barycenter*o.weight+u.barycenter*u.weight)/(o.weight+u.weight),o.weight+=u.weight)}return ru}var iu,Wm;function wR(){if(Wm)return iu;Wm=1;var e=se(),t=ke().Graph;iu=n;function n(i,a,s){var o=r(i),u=new t({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(l){return i.node(l)});return e.forEach(i.nodes(),function(l){var c=i.node(l),f=i.parent(l);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(u.setNode(l),u.setParent(l,f||o),e.forEach(i[s](l),function(d){var h=d.v===l?d.w:d.v,b=u.edge(h,l),m=e.isUndefined(b)?0:b.weight;u.setEdge(h,l,{weight:i.edge(d).weight+m})}),e.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),u}function r(i){for(var a;i.hasNode(a=e.uniqueId("_root")););return a}return iu}var au,Xm;function NR(){if(Xm)return au;Xm=1;var e=se();au=t;function t(n,r,i){var a={},s;e.forEach(i,function(o){for(var u=n.parent(o),l,c;u;){if(l=n.parent(u),l?(c=a[l],a[l]=u):(c=s,s=u),c&&c!==u){r.setEdge(c,u);return}u=l}})}return au}var su,Km;function SR(){if(Km)return su;Km=1;var e=se(),t=mR(),n=vR(),r=_R(),i=wR(),a=NR(),s=ke().Graph,o=me();su=u;function u(d){var h=o.maxRank(d),b=l(d,e.range(1,h+1),"inEdges"),m=l(d,e.range(h-1,-1,-1),"outEdges"),v=t(d);f(d,v);for(var y=Number.POSITIVE_INFINITY,_,g=0,x=0;x<4;++g,++x){c(g%2?b:m,g%4>=2),v=o.buildLayerMatrix(d);var w=n(d,v);w<y&&(x=0,_=e.cloneDeep(v),y=w)}f(d,_)}function l(d,h,b){return e.map(h,function(m){return i(d,m,b)})}function c(d,h){var b=new s;e.forEach(d,function(m){var v=m.graph().root,y=r(m,v,b,h);e.forEach(y.vs,function(_,g){m.node(_).order=g}),a(m,b,y.vs)})}function f(d,h){e.forEach(h,function(b){e.forEach(b,function(m,v){d.node(m).order=v})})}return su}var ou,Zm;function ER(){if(Zm)return ou;Zm=1;var e=se(),t=ke().Graph,n=me();ou={positionX:b,findType1Conflicts:r,findType2Conflicts:i,addConflict:s,hasConflict:o,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:f,balance:h};function r(y,_){var g={};function x(w,S){var N=0,E=0,j=w.length,R=e.last(S);return e.forEach(S,function(A,P){var O=a(y,A),C=O?y.node(O).order:j;(O||A===R)&&(e.forEach(S.slice(E,P+1),function(q){e.forEach(y.predecessors(q),function(k){var M=y.node(k),z=M.order;(z<N||C<z)&&!(M.dummy&&y.node(q).dummy)&&s(g,k,q)})}),E=P+1,N=C)}),S}return e.reduce(_,x),g}function i(y,_){var g={};function x(S,N,E,j,R){var A;e.forEach(e.range(N,E),function(P){A=S[P],y.node(A).dummy&&e.forEach(y.predecessors(A),function(O){var C=y.node(O);C.dummy&&(C.order<j||C.order>R)&&s(g,O,A)})})}function w(S,N){var E=-1,j,R=0;return e.forEach(N,function(A,P){if(y.node(A).dummy==="border"){var O=y.predecessors(A);O.length&&(j=y.node(O[0]).order,x(N,R,P,E,j),R=P,E=j)}x(N,R,N.length,j,S.length)}),N}return e.reduce(_,w),g}function a(y,_){if(y.node(_).dummy)return e.find(y.predecessors(_),function(g){return y.node(g).dummy})}function s(y,_,g){if(_>g){var x=_;_=g,g=x}var w=y[_];w||(y[_]=w={}),w[g]=!0}function o(y,_,g){if(_>g){var x=_;_=g,g=x}return e.has(y[_],g)}function u(y,_,g,x){var w={},S={},N={};return e.forEach(_,function(E){e.forEach(E,function(j,R){w[j]=j,S[j]=j,N[j]=R})}),e.forEach(_,function(E){var j=-1;e.forEach(E,function(R){var A=x(R);if(A.length){A=e.sortBy(A,function(k){return N[k]});for(var P=(A.length-1)/2,O=Math.floor(P),C=Math.ceil(P);O<=C;++O){var q=A[O];S[R]===R&&j<N[q]&&!o(g,R,q)&&(S[q]=R,S[R]=w[R]=w[q],j=N[q])}}})}),{root:w,align:S}}function l(y,_,g,x,w){var S={},N=c(y,_,g,w),E=w?"borderLeft":"borderRight";function j(P,O){for(var C=N.nodes(),q=C.pop(),k={};q;)k[q]?P(q):(k[q]=!0,C.push(q),C=C.concat(O(q))),q=C.pop()}function R(P){S[P]=N.inEdges(P).reduce(function(O,C){return Math.max(O,S[C.v]+N.edge(C))},0)}function A(P){var O=N.outEdges(P).reduce(function(q,k){return Math.min(q,S[k.w]-N.edge(k))},Number.POSITIVE_INFINITY),C=y.node(P);O!==Number.POSITIVE_INFINITY&&C.borderType!==E&&(S[P]=Math.max(S[P],O))}return j(R,N.predecessors.bind(N)),j(A,N.successors.bind(N)),e.forEach(x,function(P){S[P]=S[g[P]]}),S}function c(y,_,g,x){var w=new t,S=y.graph(),N=m(S.nodesep,S.edgesep,x);return e.forEach(_,function(E){var j;e.forEach(E,function(R){var A=g[R];if(w.setNode(A),j){var P=g[j],O=w.edge(P,A);w.setEdge(P,A,Math.max(N(y,R,j),O||0))}j=R})}),w}function f(y,_){return e.minBy(e.values(_),function(g){var x=Number.NEGATIVE_INFINITY,w=Number.POSITIVE_INFINITY;return e.forIn(g,function(S,N){var E=v(y,N)/2;x=Math.max(S+E,x),w=Math.min(S-E,w)}),x-w})}function d(y,_){var g=e.values(_),x=e.min(g),w=e.max(g);e.forEach(["u","d"],function(S){e.forEach(["l","r"],function(N){var E=S+N,j=y[E],R;if(j!==_){var A=e.values(j);R=N==="l"?x-e.min(A):w-e.max(A),R&&(y[E]=e.mapValues(j,function(P){return P+R}))}})})}function h(y,_){return e.mapValues(y.ul,function(g,x){if(_)return y[_.toLowerCase()][x];var w=e.sortBy(e.map(y,x));return(w[1]+w[2])/2})}function b(y){var _=n.buildLayerMatrix(y),g=e.merge(r(y,_),i(y,_)),x={},w;e.forEach(["u","d"],function(N){w=N==="u"?_:e.values(_).reverse(),e.forEach(["l","r"],function(E){E==="r"&&(w=e.map(w,function(P){return e.values(P).reverse()}));var j=(N==="u"?y.predecessors:y.successors).bind(y),R=u(y,w,g,j),A=l(y,w,R.root,R.align,E==="r");E==="r"&&(A=e.mapValues(A,function(P){return-P})),x[N+E]=A})});var S=f(y,x);return d(x,S),h(x,y.graph().align)}function m(y,_,g){return function(x,w,S){var N=x.node(w),E=x.node(S),j=0,R;if(j+=N.width/2,e.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":R=-N.width/2;break;case"r":R=N.width/2;break}if(R&&(j+=g?R:-R),R=0,j+=(N.dummy?_:y)/2,j+=(E.dummy?_:y)/2,j+=E.width/2,e.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":R=E.width/2;break;case"r":R=-E.width/2;break}return R&&(j+=g?R:-R),R=0,j}}function v(y,_){return y.node(_).width}return ou}var cu,Jm;function CR(){if(Jm)return cu;Jm=1;var e=se(),t=me(),n=ER().positionX;cu=r;function r(a){a=t.asNonCompoundGraph(a),i(a),e.forEach(n(a),function(s,o){a.node(o).x=s})}function i(a){var s=t.buildLayerMatrix(a),o=a.graph().ranksep,u=0;e.forEach(s,function(l){var c=e.max(e.map(l,function(f){return a.node(f).height}));e.forEach(l,function(f){a.node(f).y=u+c/2}),u+=c+o})}return cu}var uu,Qm;function kR(){if(Qm)return uu;Qm=1;var e=se(),t=cR(),n=uR(),r=dR(),i=me().normalizeRanks,a=fR(),s=me().removeEmptyRanks,o=hR(),u=pR(),l=gR(),c=SR(),f=CR(),d=me(),h=ke().Graph;uu=b;function b(I,D){var $=D&&D.debugTiming?d.time:d.notime;$("layout",function(){var H=$("  buildLayoutGraph",function(){return j(I)});$("  runLayout",function(){m(H,$)}),$("  updateInputGraph",function(){v(I,H)})})}function m(I,D){D("    makeSpaceForEdgeLabels",function(){R(I)}),D("    removeSelfEdges",function(){L(I)}),D("    acyclic",function(){t.run(I)}),D("    nestingGraph.run",function(){o.run(I)}),D("    rank",function(){r(d.asNonCompoundGraph(I))}),D("    injectEdgeLabelProxies",function(){A(I)}),D("    removeEmptyRanks",function(){s(I)}),D("    nestingGraph.cleanup",function(){o.cleanup(I)}),D("    normalizeRanks",function(){i(I)}),D("    assignRankMinMax",function(){P(I)}),D("    removeEdgeLabelProxies",function(){O(I)}),D("    normalize.run",function(){n.run(I)}),D("    parentDummyChains",function(){a(I)}),D("    addBorderSegments",function(){u(I)}),D("    order",function(){c(I)}),D("    insertSelfEdges",function(){B(I)}),D("    adjustCoordinateSystem",function(){l.adjust(I)}),D("    position",function(){f(I)}),D("    positionSelfEdges",function(){G(I)}),D("    removeBorderNodes",function(){z(I)}),D("    normalize.undo",function(){n.undo(I)}),D("    fixupEdgeLabelCoords",function(){k(I)}),D("    undoCoordinateSystem",function(){l.undo(I)}),D("    translateGraph",function(){C(I)}),D("    assignNodeIntersects",function(){q(I)}),D("    reversePoints",function(){M(I)}),D("    acyclic.undo",function(){t.undo(I)})}function v(I,D){e.forEach(I.nodes(),function($){var H=I.node($),U=D.node($);H&&(H.x=U.x,H.y=U.y,D.children($).length&&(H.width=U.width,H.height=U.height))}),e.forEach(I.edges(),function($){var H=I.edge($),U=D.edge($);H.points=U.points,e.has(U,"x")&&(H.x=U.x,H.y=U.y)}),I.graph().width=D.graph().width,I.graph().height=D.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],N={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function j(I){var D=new h({multigraph:!0,compound:!0}),$=V(I.graph());return D.setGraph(e.merge({},_,F($,y),e.pick($,g))),e.forEach(I.nodes(),function(H){var U=V(I.node(H));D.setNode(H,e.defaults(F(U,x),w)),D.setParent(H,I.parent(H))}),e.forEach(I.edges(),function(H){var U=V(I.edge(H));D.setEdge(H,e.merge({},N,F(U,S),e.pick(U,E)))}),D}function R(I){var D=I.graph();D.ranksep/=2,e.forEach(I.edges(),function($){var H=I.edge($);H.minlen*=2,H.labelpos.toLowerCase()!=="c"&&(D.rankdir==="TB"||D.rankdir==="BT"?H.width+=H.labeloffset:H.height+=H.labeloffset)})}function A(I){e.forEach(I.edges(),function(D){var $=I.edge(D);if($.width&&$.height){var H=I.node(D.v),U=I.node(D.w),Y={rank:(U.rank-H.rank)/2+H.rank,e:D};d.addDummyNode(I,"edge-proxy",Y,"_ep")}})}function P(I){var D=0;e.forEach(I.nodes(),function($){var H=I.node($);H.borderTop&&(H.minRank=I.node(H.borderTop).rank,H.maxRank=I.node(H.borderBottom).rank,D=e.max(D,H.maxRank))}),I.graph().maxRank=D}function O(I){e.forEach(I.nodes(),function(D){var $=I.node(D);$.dummy==="edge-proxy"&&(I.edge($.e).labelRank=$.rank,I.removeNode(D))})}function C(I){var D=Number.POSITIVE_INFINITY,$=0,H=Number.POSITIVE_INFINITY,U=0,Y=I.graph(),K=Y.marginx||0,Q=Y.marginy||0;function J(Z){var X=Z.x,W=Z.y,ie=Z.width,te=Z.height;D=Math.min(D,X-ie/2),$=Math.max($,X+ie/2),H=Math.min(H,W-te/2),U=Math.max(U,W+te/2)}e.forEach(I.nodes(),function(Z){J(I.node(Z))}),e.forEach(I.edges(),function(Z){var X=I.edge(Z);e.has(X,"x")&&J(X)}),D-=K,H-=Q,e.forEach(I.nodes(),function(Z){var X=I.node(Z);X.x-=D,X.y-=H}),e.forEach(I.edges(),function(Z){var X=I.edge(Z);e.forEach(X.points,function(W){W.x-=D,W.y-=H}),e.has(X,"x")&&(X.x-=D),e.has(X,"y")&&(X.y-=H)}),Y.width=$-D+K,Y.height=U-H+Q}function q(I){e.forEach(I.edges(),function(D){var $=I.edge(D),H=I.node(D.v),U=I.node(D.w),Y,K;$.points?(Y=$.points[0],K=$.points[$.points.length-1]):($.points=[],Y=U,K=H),$.points.unshift(d.intersectRect(H,Y)),$.points.push(d.intersectRect(U,K))})}function k(I){e.forEach(I.edges(),function(D){var $=I.edge(D);if(e.has($,"x"))switch(($.labelpos==="l"||$.labelpos==="r")&&($.width-=$.labeloffset),$.labelpos){case"l":$.x-=$.width/2+$.labeloffset;break;case"r":$.x+=$.width/2+$.labeloffset;break}})}function M(I){e.forEach(I.edges(),function(D){var $=I.edge(D);$.reversed&&$.points.reverse()})}function z(I){e.forEach(I.nodes(),function(D){if(I.children(D).length){var $=I.node(D),H=I.node($.borderTop),U=I.node($.borderBottom),Y=I.node(e.last($.borderLeft)),K=I.node(e.last($.borderRight));$.width=Math.abs(K.x-Y.x),$.height=Math.abs(U.y-H.y),$.x=Y.x+$.width/2,$.y=H.y+$.height/2}}),e.forEach(I.nodes(),function(D){I.node(D).dummy==="border"&&I.removeNode(D)})}function L(I){e.forEach(I.edges(),function(D){if(D.v===D.w){var $=I.node(D.v);$.selfEdges||($.selfEdges=[]),$.selfEdges.push({e:D,label:I.edge(D)}),I.removeEdge(D)}})}function B(I){var D=d.buildLayerMatrix(I);e.forEach(D,function($){var H=0;e.forEach($,function(U,Y){var K=I.node(U);K.order=Y+H,e.forEach(K.selfEdges,function(Q){d.addDummyNode(I,"selfedge",{width:Q.label.width,height:Q.label.height,rank:K.rank,order:Y+ ++H,e:Q.e,label:Q.label},"_se")}),delete K.selfEdges})})}function G(I){e.forEach(I.nodes(),function(D){var $=I.node(D);if($.dummy==="selfedge"){var H=I.node($.e.v),U=H.x+H.width/2,Y=H.y,K=$.x-U,Q=H.height/2;I.setEdge($.e,$.label),I.removeNode(D),$.label.points=[{x:U+2*K/3,y:Y-Q},{x:U+5*K/6,y:Y-Q},{x:U+K,y:Y},{x:U+5*K/6,y:Y+Q},{x:U+2*K/3,y:Y+Q}],$.label.x=$.x,$.label.y=$.y}})}function F(I,D){return e.mapValues(e.pick(I,D),Number)}function V(I){var D={};return e.forEach(I,function($,H){D[H.toLowerCase()]=$}),D}return uu}var lu,ev;function jR(){if(ev)return lu;ev=1;var e=se(),t=me(),n=ke().Graph;lu={debugOrdering:r};function r(i){var a=t.buildLayerMatrix(i),s=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+i.node(o).rank)}),e.forEach(i.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),e.forEach(a,function(o,u){var l="layer"+u;s.setNode(l,{rank:"same"}),e.reduce(o,function(c,f){return s.setEdge(c,f,{style:"invis"}),f})}),s}return lu}var du,tv;function AR(){return tv||(tv=1,du="0.8.5"),du}var fu,nv;function RR(){return nv||(nv=1,fu={graphlib:ke(),layout:kR(),debug:jR(),util:{time:me().time,notime:me().notime},version:AR()}),fu}var IR=RR();const sr=Cb(IR);function wx(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var a,s=n.length,o,u=0,l=0;for(a=0;a<s;++a)o=n[a],u+=o.x,l+=o.y;for(u=(u/s-e)*r,l=(l/s-t)*r,a=0;a<s;++a)o=n[a],o.x-=u,o.y-=l}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(e=+a,i):e},i.y=function(a){return arguments.length?(t=+a,i):t},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function MR(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Nx(this.cover(t,n),t,n,e)}function Nx(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a=e._root,s={data:r},o=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,b,m,v,y,_;if(!a)return e._root=s,e;for(;a.length;)if((m=t>=(f=(o+l)/2))?o=f:l=f,(v=n>=(d=(u+c)/2))?u=d:c=d,i=a,!(a=a[y=v<<1|m]))return i[y]=s,e;if(h=+e._x.call(null,a.data),b=+e._y.call(null,a.data),t===h&&n===b)return s.next=a,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(o+l)/2))?o=f:l=f,(v=n>=(d=(u+c)/2))?u=d:c=d;while((y=v<<1|m)===(_=(b>=d)<<1|h>=f));return i[_]=a,i[y]=s,e}function TR(e){var t,n,r=e.length,i,a,s=new Array(r),o=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=i,o[n]=a,i<u&&(u=i),i>c&&(c=i),a<l&&(l=a),a>f&&(f=a));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Nx(this,s[n],o[n],e[n]);return this}function qR(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var s=i-n||1,o=this._root,u,l;n>e||e>=i||r>t||t>=a;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=o,o=u,s*=2,l){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function PR(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function DR(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function de(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function LR(e,t,n){var r,i=this._x0,a=this._y0,s,o,u,l,c=this._x1,f=this._y1,d=[],h=this._root,b,m;for(h&&d.push(new de(h,i,a,c,f)),n==null?n=1/0:(i=e-n,a=t-n,c=e+n,f=t+n,n*=n);b=d.pop();)if(!(!(h=b.node)||(s=b.x0)>c||(o=b.y0)>f||(u=b.x1)<i||(l=b.y1)<a))if(h.length){var v=(s+u)/2,y=(o+l)/2;d.push(new de(h[3],v,y,u,l),new de(h[2],s,y,v,l),new de(h[1],v,o,u,y),new de(h[0],s,o,v,y)),(m=(t>=y)<<1|e>=v)&&(b=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=b)}else{var _=e-+this._x.call(null,h.data),g=t-+this._y.call(null,h.data),x=_*_+g*g;if(x<n){var w=Math.sqrt(n=x);i=e-w,a=t-w,c=e+w,f=t+w,r=h.data}}return r}function OR(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,a,s=this._x0,o=this._y0,u=this._x1,l=this._y1,c,f,d,h,b,m,v,y;if(!n)return this;if(n.length)for(;;){if((b=c>=(d=(s+u)/2))?s=d:u=d,(m=f>=(h=(o+l)/2))?o=h:l=h,t=n,!(n=n[v=m<<1|b]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(r=t,y=v)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[v]=a:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=a,this)}function FR(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function $R(){return this._root}function zR(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function BR(e){var t=[],n,r=this._root,i,a,s,o,u;for(r&&t.push(new de(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,a=n.x0,s=n.y0,o=n.x1,u=n.y1)&&r.length){var l=(a+o)/2,c=(s+u)/2;(i=r[3])&&t.push(new de(i,l,c,o,u)),(i=r[2])&&t.push(new de(i,a,c,l,u)),(i=r[1])&&t.push(new de(i,l,s,o,c)),(i=r[0])&&t.push(new de(i,a,s,l,c))}return this}function HR(e){var t=[],n=[],r;for(this._root&&t.push(new de(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,f=(o+l)/2;(a=i[0])&&t.push(new de(a,s,o,c,f)),(a=i[1])&&t.push(new de(a,c,o,u,f)),(a=i[2])&&t.push(new de(a,s,f,c,l)),(a=i[3])&&t.push(new de(a,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function GR(e){return e[0]}function VR(e){return arguments.length?(this._x=e,this):this._x}function UR(e){return e[1]}function YR(e){return arguments.length?(this._y=e,this):this._y}function gl(e,t,n){var r=new ml(t??GR,n??UR,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function ml(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function rv(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var he=gl.prototype=ml.prototype;he.copy=function(){var e=new ml(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=rv(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=rv(r));return e};he.add=MR;he.addAll=TR;he.cover=qR;he.data=PR;he.extent=DR;he.find=LR;he.remove=OR;he.removeAll=FR;he.root=$R;he.size=zR;he.visit=BR;he.visitAfter=HR;he.x=VR;he.y=YR;function fe(e){return function(){return e}}function rt(e){return(e()-.5)*1e-6}function WR(e){return e.x+e.vx}function XR(e){return e.y+e.vy}function sn(e){var t,n,r,i=1,a=1;typeof e!="function"&&(e=fe(e==null?1:+e));function s(){for(var l,c=t.length,f,d,h,b,m,v,y=0;y<a;++y)for(f=gl(t,WR,XR).visitAfter(o),l=0;l<c;++l)d=t[l],m=n[d.index],v=m*m,h=d.x+d.vx,b=d.y+d.vy,f.visit(_);function _(g,x,w,S,N){var E=g.data,j=g.r,R=m+j;if(E){if(E.index>d.index){var A=h-E.x-E.vx,P=b-E.y-E.vy,O=A*A+P*P;O<R*R&&(A===0&&(A=rt(r),O+=A*A),P===0&&(P=rt(r),O+=P*P),O=(R-(O=Math.sqrt(O)))/O*i,d.vx+=(A*=O)*(R=(j*=j)/(v+j)),d.vy+=(P*=O)*R,E.vx-=A*(R=1-R),E.vy-=P*R)}return}return x>h+R||S<h-R||w>b+R||N<b-R}}function o(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return s.initialize=function(l,c){t=l,r=c,u()},s.iterations=function(l){return arguments.length?(a=+l,s):a},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:fe(+l),u(),s):e},s}function KR(e){return e.index}function iv(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function on(e){var t=KR,n=f,r,i=fe(30),a,s,o,u,l,c=1;e==null&&(e=[]);function f(v){return 1/Math.min(o[v.source.index],o[v.target.index])}function d(v){for(var y=0,_=e.length;y<c;++y)for(var g=0,x,w,S,N,E,j,R;g<_;++g)x=e[g],w=x.source,S=x.target,N=S.x+S.vx-w.x-w.vx||rt(l),E=S.y+S.vy-w.y-w.vy||rt(l),j=Math.sqrt(N*N+E*E),j=(j-a[g])/j*v*r[g],N*=j,E*=j,S.vx-=N*(R=u[g]),S.vy-=E*R,w.vx+=N*(R=1-R),w.vy+=E*R}function h(){if(s){var v,y=s.length,_=e.length,g=new Map(s.map((w,S)=>[t(w,S,s),w])),x;for(v=0,o=new Array(y);v<_;++v)x=e[v],x.index=v,typeof x.source!="object"&&(x.source=iv(g,x.source)),typeof x.target!="object"&&(x.target=iv(g,x.target)),o[x.source.index]=(o[x.source.index]||0)+1,o[x.target.index]=(o[x.target.index]||0)+1;for(v=0,u=new Array(_);v<_;++v)x=e[v],u[v]=o[x.source.index]/(o[x.source.index]+o[x.target.index]);r=new Array(_),b(),a=new Array(_),m()}}function b(){if(s)for(var v=0,y=e.length;v<y;++v)r[v]=+n(e[v],v,e)}function m(){if(s)for(var v=0,y=e.length;v<y;++v)a[v]=+i(e[v],v,e)}return d.initialize=function(v,y){s=v,l=y,h()},d.links=function(v){return arguments.length?(e=v,h(),d):e},d.id=function(v){return arguments.length?(t=v,d):t},d.iterations=function(v){return arguments.length?(c=+v,d):c},d.strength=function(v){return arguments.length?(n=typeof v=="function"?v:fe(+v),b(),d):n},d.distance=function(v){return arguments.length?(i=typeof v=="function"?v:fe(+v),m(),d):i},d}const ZR=1664525,JR=1013904223,av=4294967296;function QR(){let e=1;return()=>(e=(ZR*e+JR)%av)/av}function eI(e){return e.x}function tI(e){return e.y}var nI=10,rI=Math.PI*(3-Math.sqrt(5));function cn(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,o=new Map,u=Lu(f),l=dn("tick","end"),c=QR();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var v,y=e.length,_;m===void 0&&(m=1);for(var g=0;g<m;++g)for(n+=(a-n)*i,o.forEach(function(x){x(n)}),v=0;v<y;++v)_=e[v],_.fx==null?_.x+=_.vx*=s:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=s:(_.y=_.fy,_.vy=0);return t}function h(){for(var m=0,v=e.length,y;m<v;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var _=nI*Math.sqrt(.5+m),g=m*rI;y.x=_*Math.cos(g),y.y=_*Math.sin(g)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function b(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),o.forEach(b),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(a=+m,t):a},velocityDecay:function(m){return arguments.length?(s=1-m,t):1-s},randomSource:function(m){return arguments.length?(c=m,o.forEach(b),t):c},force:function(m,v){return arguments.length>1?(v==null?o.delete(m):o.set(m,b(v)),t):o.get(m)},find:function(m,v,y){var _=0,g=e.length,x,w,S,N,E;for(y==null?y=1/0:y*=y,_=0;_<g;++_)N=e[_],x=m-N.x,w=v-N.y,S=x*x+w*w,S<y&&(E=N,y=S);return E},on:function(m,v){return arguments.length>1?(l.on(m,v),t):l.on(m)}}}function un(){var e,t,n,r,i=fe(-30),a,s=1,o=1/0,u=.81;function l(h){var b,m=e.length,v=gl(e,eI,tI).visitAfter(f);for(r=h,b=0;b<m;++b)t=e[b],v.visit(d)}function c(){if(e){var h,b=e.length,m;for(a=new Array(b),h=0;h<b;++h)m=e[h],a[m.index]=+i(m,h,e)}}function f(h){var b=0,m,v,y=0,_,g,x;if(h.length){for(_=g=x=0;x<4;++x)(m=h[x])&&(v=Math.abs(m.value))&&(b+=m.value,y+=v,_+=v*m.x,g+=v*m.y);h.x=_/y,h.y=g/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do b+=a[m.data.index];while(m=m.next)}h.value=b}function d(h,b,m,v){if(!h.value)return!0;var y=h.x-t.x,_=h.y-t.y,g=v-b,x=y*y+_*_;if(g*g/u<x)return x<o&&(y===0&&(y=rt(n),x+=y*y),_===0&&(_=rt(n),x+=_*_),x<s&&(x=Math.sqrt(s*x)),t.vx+=y*h.value*r/x,t.vy+=_*h.value*r/x),!0;if(h.length||x>=o)return;(h.data!==t||h.next)&&(y===0&&(y=rt(n),x+=y*y),_===0&&(_=rt(n),x+=_*_),x<s&&(x=Math.sqrt(s*x)));do h.data!==t&&(g=a[h.data.index]*r/x,t.vx+=y*g,t.vy+=_*g);while(h=h.next)}return l.initialize=function(h,b){e=h,n=b,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:fe(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Sx(e){var t=fe(.1),n,r,i;typeof e!="function"&&(e=fe(e==null?0:+e));function a(o){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*o}function s(){if(n){var o,u=n.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:fe(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:fe(+o),s(),a):e},a}function Ex(e){var t=fe(.1),n,r,i;typeof e!="function"&&(e=fe(e==null?0:+e));function a(o){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*o}function s(){if(n){var o,u=n.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:fe(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:fe(+o),s(),a):e},a}const vl={strength:-300,distance:150,iterations:300,centerX:400,centerY:300,chargeStrength:-1e3,chargeDistance:500,collisionRadius:50,alphaDecay:.02,alphaMin:.001,velocityDecay:.4},iI=(e,t,n={})=>{const r={...vl,...n},i=e.map(u=>{var l,c;return{id:u.id,x:((l=u.position)==null?void 0:l.x)||Math.random()*800,y:((c=u.position)==null?void 0:c.y)||Math.random()*600,data:u.data,type:u.type}}),a=t.map(u=>({source:u.source,target:u.target,id:u.id,data:u.data})),s=cn(i).force("link",on(a).id(u=>u.id).distance(r.distance).strength(.5)).force("charge",un().strength(r.chargeStrength).distanceMax(r.chargeDistance)).force("center",wx(r.centerX,r.centerY)).force("collision",sn().radius(r.collisionRadius).strength(.7)).alphaDecay(r.alphaDecay).alphaMin(r.alphaMin).velocityDecay(r.velocityDecay);s.stop();for(let u=0;u<r.iterations;u++)s.tick();return{nodes:i.map((u,l)=>({...e[l],position:{x:u.x||0,y:u.y||0}})),edges:t}},aI=(e,t,n={})=>{const r={...vl,...n},i={};e.forEach(c=>{const f=c.data.nodeType||"default";i[f]||(i[f]=[]),i[f].push(c)});const a={foundation:100,technique:300,combination:500,application:700,usecase:900,product:1100,default:600},s=e.map(c=>{var h,b;const f=c.data.nodeType||"default",d=a[f]||600;return{id:c.id,x:((h=c.position)==null?void 0:h.x)||Math.random()*1600,y:((b=c.position)==null?void 0:b.y)||d+(Math.random()-.5)*100,fx:null,fy:null,nodeType:f,targetY:d,data:c.data,type:c.type}}),o=t.map(c=>({source:c.source,target:c.target,id:c.id,data:c.data})),u=cn(s).force("link",on(o).id(c=>c.id).distance(r.distance).strength(.3)).force("charge",un().strength(c=>{const f=r.chargeStrength||-1e3;return c.nodeType==="foundation"?f*2:c.nodeType==="product"?f*.5:f}).distanceMax(r.chargeDistance)).force("x",Sx(r.centerX).strength(.05)).force("y",Ex(c=>c.targetY).strength(.8)).force("collision",sn().radius(c=>c.nodeType==="foundation"?80:c.nodeType==="technique"?60:c.nodeType==="application"?50:c.nodeType==="product"?30:40).strength(.8)).alphaDecay(r.alphaDecay).alphaMin(r.alphaMin).velocityDecay(r.velocityDecay);u.stop();for(let c=0;c<r.iterations;c++)u.tick();return{nodes:s.map((c,f)=>({...e[f],position:{x:c.x||0,y:c.y||0}})),edges:t}},sI=(e,t,n={})=>{const r={...vl,...n},i=new Map;e.forEach(d=>i.set(d.id,0)),t.forEach(d=>{i.set(d.source,(i.get(d.source)||0)+1),i.set(d.target,(i.get(d.target)||0)+1)});const a=[...e].sort((d,h)=>(i.get(h.id)||0)-(i.get(d.id)||0)),s=[],o=Math.ceil(e.length/5);for(let d=0;d<e.length;d+=o)s.push(a.slice(d,d+o));const u=e.map(d=>{let h=0,b=0;for(let y=0;y<s.length;y++){const _=s[y].findIndex(g=>g.id===d.id);if(_!==-1){h=y,b=_;break}}const m=200+h*150,v=b/s[h].length*Math.PI*2;return{id:d.id,x:r.centerX+Math.cos(v)*m,y:r.centerY+Math.sin(v)*m,data:d.data,type:d.type}}),l=t.map(d=>({source:d.source,target:d.target,id:d.id,data:d.data})),c=cn(u).force("link",on(l).id(d=>d.id).distance(r.distance).strength(.2)).force("charge",un().strength(r.chargeStrength*.5).distanceMax(r.chargeDistance)).force("collision",sn().radius(r.collisionRadius).strength(.5)).alphaDecay(.05).alphaMin(.001).velocityDecay(.6);c.stop();for(let d=0;d<100;d++)c.tick();return{nodes:u.map((d,h)=>({...e[h],position:{x:d.x||0,y:d.y||0}})),edges:t}},Ye={direction:"TB",align:"None",nodeSpacing:100,rankSpacing:150,ranker:"network-simplex",acyclicer:void 0,edgeSep:50,rankSep:150,nodeSep:100,marginX:50,marginY:50,nodeWidth:200,nodeHeight:100},sv=(e,t)=>({width:Math.max(e||Ye.nodeWidth||200,50),height:Math.max(t||Ye.nodeHeight||100,50)}),Ot=(e,t,n={})=>{if(!e||e.length===0)return console.warn("getDagreLayout: No nodes provided"),{nodes:[],edges:t||[]};const r={...Ye,...n},i=new sr.graphlib.Graph;i.setDefaultEdgeLabel(()=>({})),i.setGraph({rankdir:r.direction,align:r.align==="None"?void 0:r.align,nodesep:r.nodeSep,edgesep:r.edgeSep,ranksep:r.rankSep,marginx:r.marginX,marginy:r.marginY,ranker:r.ranker,acyclicer:r.acyclicer}),e.forEach(s=>{const o=sv(r.nodeWidth,r.nodeHeight);i.setNode(s.id,o)}),t.forEach(s=>{i.hasNode(s.source)&&i.hasNode(s.target)?i.setEdge(s.source,s.target):console.warn(`Skipping edge ${s.id}: source or target node not found`)});try{sr.layout(i)}catch(s){return console.error("Dagre layout error:",s),{nodes:e.map((o,u)=>({...o,position:{x:u%5*250,y:Math.floor(u/5)*150}})),edges:t}}return{nodes:e.map(s=>{const o=i.node(s.id),u=sv(r.nodeWidth,r.nodeHeight);return!o||typeof o.x!="number"||typeof o.y!="number"?(console.warn(`Invalid position for node ${s.id}, using default position`),{...s,position:{x:0,y:0}}):{...s,position:{x:o.x-u.width/2,y:o.y-u.height/2}}}),edges:t}},hu=(e,t,n={})=>{const r={...Ye,direction:"TB",ranker:"network-simplex",rankSep:200,nodeSep:120,...n};return Ot(e,t,r)},oI=(e,t,n={})=>{const r={...Ye,direction:"TB",ranker:"tight-tree",rankSep:180,nodeSep:100,align:"DL",...n};return Ot(e,t,r)},cI=(e,t,n={})=>{const r={...Ye,direction:"LR",ranker:"longest-path",rankSep:200,nodeSep:80,...n};return Ot(e,t,r)},uI=(e,t,n={})=>{const r={...Ye,ranker:"tight-tree",rankSep:80,nodeSep:50,edgeSep:20,marginX:20,marginY:20,...n};return Ot(e,t,r)},lI=(e,t,n={})=>{const r={...Ye,direction:"LR",ranker:"network-simplex",rankSep:250,nodeSep:150,edgeSep:80,...n};return Ot(e,t,r)},dI=(e,t,n={})=>{const r={...Ye,direction:"TB",ranker:"network-simplex",rankSep:150,nodeSep:100,edgeSep:50,align:"UL",...n};return Ot(e,t,r)},fI=(e,t,n="TB",r)=>{const i=new sr.graphlib.Graph;i.setDefaultEdgeLabel(()=>({}));const a=180,s=100,o={nodeSpacingX:(r==null?void 0:r.nodeSpacingX)||100,nodeSpacingY:(r==null?void 0:r.nodeSpacingY)||100,rankSpacing:(r==null?void 0:r.rankSpacing)||150,alignment:(r==null?void 0:r.alignment)||"UL",ranker:(r==null?void 0:r.ranker)||"network-simplex"};return i.setGraph({rankdir:n,nodesep:n==="LR"||n==="RL"?o.nodeSpacingY:o.nodeSpacingX,ranksep:o.rankSpacing,marginx:50,marginy:50,align:o.alignment,ranker:o.ranker}),e.forEach(l=>{i.setNode(l.id,{width:a,height:s})}),t.forEach(l=>{i.setEdge(l.source,l.target)}),sr.layout(i),{nodes:e.map(l=>{const c=i.node(l.id);return{...l,position:{x:c.x-a/2,y:c.y-s/2}}}),edges:t}},hI=(e,t,n,r)=>{var b;const i={x:0,y:0},a=(n==null?void 0:n.radialSpacing)||300,s=((n==null?void 0:n.startAngle)||0)*Math.PI/180,o=((n==null?void 0:n.endAngle)||360)*Math.PI/180,u=new Map,l=new Set,c=new Map;t.forEach(m=>{c.has(m.source)||c.set(m.source,[]),c.has(m.target)||c.set(m.target,[]),c.get(m.source).push(m.target),c.get(m.target).push(m.source)});const f=(b=e[0])==null?void 0:b.id;if(f){const m=[f];for(u.set(f,0),l.add(f);m.length>0;){const v=m.shift(),y=u.get(v);(c.get(v)||[]).forEach(g=>{l.has(g)||(l.add(g),u.set(g,y+1),m.push(g))})}}const d=new Map;return e.forEach(m=>{const v=u.get(m.id)||0;d.has(v)||d.set(v,[]),d.get(v).push(m)}),{nodes:e.map(m=>{const v=u.get(m.id)||0,y=d.get(v)||[],_=y.indexOf(m),g=o-s,x=g/Math.max(y.length-(g>=2*Math.PI?0:1),1),w=s+_*x,S=a*(v+1);return{...m,position:{x:i.x+Math.cos(w)*S,y:i.y+Math.sin(w)*S}}}),edges:t}};class pI{constructor(t,n,r={}){at(this,"simulation",null);at(this,"nodes",[]);at(this,"edges",[]);at(this,"onTick");at(this,"onEnd");at(this,"config");this.onTick=t,this.onEnd=n,this.config={strength:-300,distance:150,chargeStrength:-1e3,chargeDistance:500,collisionRadius:50,alphaDecay:.02,alphaMin:.001,velocityDecay:.4,centerX:800,centerY:600,...r}}start(t,n){this.stop(),this.nodes=t.map(r=>{var i,a;return{id:r.id,x:((i=r.position)==null?void 0:i.x)||Math.random()*1600,y:((a=r.position)==null?void 0:a.y)||Math.random()*1200,data:r.data,type:r.type,originalNode:r}}),this.edges=n.map(r=>({source:r.source,target:r.target,id:r.id,data:r.data})),this.simulation=cn(this.nodes).force("link",on(this.edges).id(r=>r.id).distance(this.config.distance).strength(.5)).force("charge",un().strength(this.config.chargeStrength).distanceMax(this.config.chargeDistance)).force("center",wx(this.config.centerX,this.config.centerY)).force("collision",sn().radius(this.config.collisionRadius).strength(.7)).alphaDecay(this.config.alphaDecay).alphaMin(this.config.alphaMin).velocityDecay(this.config.velocityDecay),this.simulation.on("tick",()=>{const r=this.nodes.map((i,a)=>({...t[a],position:{x:i.x,y:i.y}}));this.onTick(r)}),this.onEnd&&this.simulation.on("end",this.onEnd)}startWithHierarchy(t,n){this.stop();const r={foundation:100,technique:300,combination:500,application:700,usecase:900,product:1100,default:600};this.nodes=t.map(i=>{var o,u;const a=i.data.nodeType||"default",s=r[a]||600;return{id:i.id,x:((o=i.position)==null?void 0:o.x)||Math.random()*1600,y:((u=i.position)==null?void 0:u.y)||s+(Math.random()-.5)*100,targetY:s,nodeType:a,data:i.data,type:i.type,originalNode:i}}),this.edges=n.map(i=>({source:i.source,target:i.target,id:i.id,data:i.data})),this.simulation=cn(this.nodes).force("link",on(this.edges).id(i=>i.id).distance(this.config.distance).strength(.3)).force("charge",un().strength(i=>{const a=this.config.chargeStrength||-1e3;return i.nodeType==="foundation"?a*2:i.nodeType==="product"?a*.5:a}).distanceMax(this.config.chargeDistance)).force("x",Sx(this.config.centerX).strength(.05)).force("y",Ex(i=>i.targetY).strength(.8)).force("collision",sn().radius(i=>i.nodeType==="foundation"?80:i.nodeType==="technique"?60:i.nodeType==="application"?50:i.nodeType==="product"?30:40).strength(.8)).alphaDecay(this.config.alphaDecay).alphaMin(this.config.alphaMin).velocityDecay(this.config.velocityDecay),this.simulation.on("tick",()=>{const i=this.nodes.map((a,s)=>({...t[s],position:{x:a.x,y:a.y}}));this.onTick(i)}),this.onEnd&&this.simulation.on("end",this.onEnd)}updateConfig(t){var n,r,i;this.config={...this.config,...t},this.simulation&&(t.distance!==void 0&&((n=this.simulation.force("link"))==null||n.distance(t.distance)),t.chargeStrength!==void 0&&((r=this.simulation.force("charge"))==null||r.strength(t.chargeStrength)),t.collisionRadius!==void 0&&((i=this.simulation.force("collision"))==null||i.radius(t.collisionRadius)),t.alphaDecay!==void 0&&this.simulation.alphaDecay(t.alphaDecay),this.reheat())}reheat(t=.3){this.simulation&&this.simulation.alpha(t).restart()}stop(){this.simulation&&(this.simulation.stop(),this.simulation=null)}isRunning(){return this.simulation!==null&&this.simulation.alpha()>this.simulation.alphaMin()}getAlpha(){var t;return((t=this.simulation)==null?void 0:t.alpha())||0}}const gI=T.memo(P2),mI={custom:gI},vI={},yI=()=>{const{nodes:e,edges:t,descriptions:n,setData:r}=Xu(),[i,a]=T.useState(!1),s=mr(),[o,u]=T.useState({nodeSpacingX:100,nodeSpacingY:100,rankSpacing:150,alignment:"UL",ranker:"network-simplex",animate:!0,forceStrength:-1e3,forceDistance:150,chargeStrength:-1e3,collisionRadius:50,iterations:300,dagreNodeWidth:200,dagreNodeHeight:100,dagreNodeSep:100,dagreRankSep:150,dagreEdgeSep:50,dagreMarginX:50,dagreMarginY:50}),[l,c]=T.useState("simplebezier"),[f,d]=T.useState(null),[h,b]=T.useState(!1),m=T.useMemo(()=>{if(!e||e.length===0)return{nodes:[],edges:[]};const F=t.map(I=>({id:I.id,source:I.source,target:I.target,type:l,animated:!1,data:I.data,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));return hu(e,F,{nodeSep:o.dagreNodeSep||100,rankSep:o.dagreRankSep||150,edgeSep:o.dagreEdgeSep||50,align:o.alignment,ranker:o.ranker,nodeWidth:o.dagreNodeWidth||200,nodeHeight:o.dagreNodeHeight||100})},[e,t,l,o]),[v,y,_]=t2(m.nodes),[g,x,w]=n2(m.edges);T.useEffect(()=>{const F=hu(e,t,{nodeSep:o.dagreNodeSep,rankSep:o.dagreRankSep,edgeSep:o.dagreEdgeSep,align:o.alignment,ranker:o.ranker,nodeWidth:o.dagreNodeWidth,nodeHeight:o.dagreNodeHeight}),V=F.edges.map(I=>({...I,type:l,animated:!1,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));y(F.nodes),x(V)},[e,t,y,x,l,o]),T.useEffect(()=>{x(F=>F.map(V=>({...V,type:l})))},[l,x]);const[S,N]=T.useState("hierarchical"),[E,j]=T.useState(null),R=T.useCallback(F=>{const V=v.find(I=>I.id===F);V&&(j(V),s&&s.setCenter(V.position.x,V.position.y,{duration:800,zoom:1.5}),x(I=>{const D=new Set;return I.forEach($=>{($.source===F||$.target===F)&&D.add($.id)}),I.map($=>{const H=D.has($.id);return{...$,animated:!1,style:{stroke:H?"#3b82f6":"#94a3b8",strokeWidth:H?2:1,opacity:H?.8:.2}}})}))},[v,j,s,x]),A=T.useCallback((F,V)=>{const I=V;j(I),x(D=>{const $=new Set;return D.forEach(H=>{(H.source===I.id||H.target===I.id)&&$.add(H.id)}),D.map(H=>{var Y;const U=$.has(H.id);return!U&&((Y=H.style)==null?void 0:Y.opacity)===.2?H:{...H,animated:!1,style:{stroke:U?"#3b82f6":"#94a3b8",strokeWidth:U?2:1,opacity:U?.8:.2}}})})},[x]),P=T.useCallback(()=>{j(null),x(F=>F.map(V=>({...V,animated:!1,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}})))},[x]),O=T.useMemo(()=>{if(!E)return{source:[],target:[]};const F=g.filter(I=>I.target===E.id).map(I=>v.find(D=>D.id===I.source)).filter(Boolean),V=g.filter(I=>I.source===E.id).map(I=>v.find(D=>D.id===I.target)).filter(Boolean);return{source:F,target:V}},[E,v,g]),C=T.useCallback(F=>x(V=>o0({...F,type:l,animated:!1,style:{strokeWidth:1,stroke:"#6b7280",opacity:.5}},V)),[x,l]),q=T.useCallback(F=>{let V;switch(F){case"hierarchical":V=hu(v,g,{nodeSep:o.dagreNodeSep,rankSep:o.dagreRankSep,edgeSep:o.dagreEdgeSep,align:o.alignment,ranker:o.ranker,nodeWidth:o.dagreNodeWidth,nodeHeight:o.dagreNodeHeight});break;case"radial":V=hI(v,g,{radialSpacing:o.radialSpacing,startAngle:o.startAngle,endAngle:o.endAngle});break;case"force":V=iI(v,g,{strength:o.forceStrength,distance:o.forceDistance,chargeStrength:o.chargeStrength,collisionRadius:o.collisionRadius,iterations:o.iterations,centerX:800,centerY:600});break;case"forceHierarchy":V=aI(v,g,{distance:o.forceDistance,chargeStrength:o.chargeStrength,collisionRadius:o.collisionRadius,iterations:o.iterations,centerX:800,centerY:600});break;case"forceRadial":V=sI(v,g,{distance:o.forceDistance,chargeStrength:o.chargeStrength,collisionRadius:o.collisionRadius,centerX:800,centerY:600});break;case"tree":V=oI(v,g,{nodeSep:o.dagreNodeSep,rankSep:o.dagreRankSep,align:o.alignment,nodeWidth:o.dagreNodeWidth,nodeHeight:o.dagreNodeHeight});break;case"longestPath":V=cI(v,g,{nodeSep:o.dagreNodeSep,rankSep:o.dagreRankSep,nodeWidth:o.dagreNodeWidth,nodeHeight:o.dagreNodeHeight});break;case"compact":V=uI(v,g,{nodeSep:o.dagreNodeSep,rankSep:o.dagreRankSep,edgeSep:o.dagreEdgeSep,nodeWidth:o.dagreNodeWidth,nodeHeight:o.dagreNodeHeight});break;case"wide":V=lI(v,g,{nodeSep:o.dagreNodeSep,rankSep:o.dagreRankSep,edgeSep:o.dagreEdgeSep,nodeWidth:o.dagreNodeWidth,nodeHeight:o.dagreNodeHeight});break;case"balanced":V=dI(v,g,{nodeSep:o.dagreNodeSep,rankSep:o.dagreRankSep,edgeSep:o.dagreEdgeSep,align:o.alignment,nodeWidth:o.dagreNodeWidth,nodeHeight:o.dagreNodeHeight});break;case"TB":case"LR":case"BT":case"RL":V=fI(v,g,F,o);break;default:return}const I=V.edges.map(D=>({...D,type:l,animated:!1,data:D.data,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));if(o.animate){const $=v.map(K=>({...K.position})),H=V.nodes.map(K=>K.position),U=Date.now(),Y=()=>{const K=Date.now()-U,Q=Math.min(K/500,1),J=1-Math.pow(1-Q,3),Z=v.map((X,W)=>({...V.nodes[W],position:{x:$[W].x+(H[W].x-$[W].x)*J,y:$[W].y+(H[W].y-$[W].y)*J}}));y(Z),Q<1?requestAnimationFrame(Y):x(I)};Y()}else y(V.nodes),x(I);N(F)},[v,g,y,x,o,l]),k=T.useCallback(()=>{f&&f.stop();const F=new pI(V=>{y(V)},()=>{b(!1)},{strength:o.forceStrength,distance:o.forceDistance,chargeStrength:o.chargeStrength,collisionRadius:o.collisionRadius,centerX:800,centerY:600});S==="forceHierarchy"?F.startWithHierarchy(v,g):F.start(v,g),d(F),b(!0)},[v,g,y,o,S,f]),M=T.useCallback(()=>{f&&(f.stop(),b(!1))},[f]),z=T.useCallback(()=>{f&&f.reheat(.5)},[f]);T.useEffect(()=>{f&&h&&f.updateConfig({distance:o.forceDistance,chargeStrength:o.chargeStrength,collisionRadius:o.collisionRadius})},[o.forceDistance,o.chargeStrength,o.collisionRadius,f,h]),T.useEffect(()=>()=>{f&&f.stop()},[f]);const L=T.useCallback(F=>{r(F),a(!1)},[r]),B=F=>{var V;switch((V=F.data)==null?void 0:V.nodeType){case"foundation":return"hsl(var(--primary))";case"technique":return"hsl(var(--chart-2))";case"combination":return"hsl(var(--chart-1))";case"application":return"hsl(var(--accent))";case"product":return"hsl(var(--destructive))";case"domain":return"hsl(var(--secondary))";default:return"hsl(var(--muted))"}},G=T.useMemo(()=>({type:l,animated:!1,style:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1,opacity:.5}}),[l]);return i?p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-background p-8",children:p.jsxs("div",{className:"relative",children:[p.jsx(Se,{onClick:()=>a(!1),variant:"ghost",size:"icon",className:"absolute -top-12 right-0",children:p.jsx(Ru,{className:"h-4 w-4"})}),p.jsx(fk,{onDataLoaded:L})]})}):p.jsxs("div",{className:"w-full h-full",children:[p.jsxs(e2,{nodes:v,edges:g,onNodesChange:_,onEdgesChange:w,onConnect:C,onNodeClick:A,onPaneClick:P,nodeTypes:mI,edgeTypes:vI,defaultEdgeOptions:G,fitView:!0,fitViewOptions:{padding:.2,maxZoom:1},className:"bg-background",minZoom:.1,maxZoom:2,connectionMode:ft.Loose,elevateNodesOnSelect:!1,elevateEdgesOnSelect:!1,selectNodesOnDrag:!1,proOptions:{hideAttribution:!0},children:[p.jsx(o2,{variant:Ve.Dots,gap:20,size:1,color:"hsl(var(--muted-foreground) / 0.2)"}),p.jsx(p2,{className:"bg-card border shadow-lg"}),p.jsx(k2,{nodeColor:B,className:"!bg-card !border !shadow-lg",maskColor:"hsl(var(--background) / 0.6)"}),p.jsxs(vn,{position:"top-left",className:"space-y-2 max-w-sm",children:[p.jsxs(Se,{onClick:()=>a(!0),className:"w-full mb-2",variant:"outline",children:[p.jsx(ir,{className:"mr-2 h-4 w-4"}),"Load JSON Data"]}),p.jsx(BC,{config:o,onConfigChange:F=>{u(F),S!=="manual"&&q(S)},onLayoutSelect:F=>q(F),selectedLayout:S,onSimulationStart:k,onSimulationStop:M,onSimulationReheat:z,isSimulationRunning:h}),p.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[p.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Edge Type"}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx("button",{onClick:()=>c("straight"),className:`px-3 py-1 text-xs rounded transition-colors ${l==="straight"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Fastest performance",children:"Straight"}),p.jsx("button",{onClick:()=>c("smoothstep"),className:`px-3 py-1 text-xs rounded transition-colors ${l==="smoothstep"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Balanced performance and aesthetics",children:"Smooth Step"}),p.jsx("button",{onClick:()=>c("simplebezier"),className:`px-3 py-1 text-xs rounded transition-colors ${l==="simplebezier"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Simple curves",children:"Simple Bezier"}),p.jsx("button",{onClick:()=>c("bezier"),className:`px-3 py-1 text-xs rounded transition-colors ${l==="bezier"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Complex curves",children:"Bezier"})]}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[l==="straight"&&" Fastest rendering",l==="smoothstep"&&" Good balance",l==="simplebezier"&&" Simple curves",l==="bezier"&&" Best aesthetics"]})]}),p.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[p.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Node Types"}),p.jsxs("div",{className:"space-y-1 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-primary"}),p.jsx("span",{className:"text-muted-foreground",children:"Foundation"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-chart-2"}),p.jsx("span",{className:"text-muted-foreground",children:"Technique"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-chart-1"}),p.jsx("span",{className:"text-muted-foreground",children:"Combination"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-accent"}),p.jsx("span",{className:"text-muted-foreground",children:"Application"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-destructive"}),p.jsx("span",{className:"text-muted-foreground",children:"Product"})]})]})]}),p.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[p.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Domain Tags"}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Finance"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Medical"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Legal"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Education"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Retail"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-pink-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Gaming"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Technology"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-teal-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Automotive"})]})]})]})]})]}),p.jsx($C,{node:E,onClose:()=>j(null),connectedNodes:O,onNodeClick:R}),p.jsx(gk,{nodes:v,edges:g,descriptions:n,onNodeClick:R})]})},xI=()=>p.jsx(Z0,{children:p.jsx(yI,{})}),bI=()=>p.jsx(OC,{children:p.jsx(xI,{})}),_I=()=>p.jsx("div",{className:"w-full h-screen bg-background",children:p.jsx(bI,{})}),RI=_I;export{RI as component};
