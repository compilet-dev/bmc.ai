import{u as Wx,R as Ie,r as T,j as v,a as $m,c as hr,g as Xx}from"./index-D8XXHidX.js";import{c as le,a as Zt,u as kr,b as ul,C as Kx,d as Zx,e as Jx,f as Qx,g as eb,B as Bt}from"./card-BCeDPPxb.js";import{E as tb,c as yc,P as St,A as cl,C as Bm,a as ll,b as rb}from"./index-BBXJ2EBR.js";function ue(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=ue(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var nb={value:()=>{}};function Wr(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Ir(r)}function Ir(e){this._=e}function ib(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Ir.prototype=Wr.prototype={constructor:Ir,on:function(e,t){var r=this._,n=ib(e+"",r),i,a=-1,s=n.length;if(arguments.length<2){for(;++a<s;)if((i=(e=n[a]).type)&&(i=ab(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=n[a]).type)r[i]=dl(r[i],e.name,t);else if(t==null)for(i in r)r[i]=dl(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Ir(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)}};function ab(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function dl(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=nb,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var rc="http://www.w3.org/1999/xhtml";const fl={svg:"http://www.w3.org/2000/svg",xhtml:rc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xr(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),fl.hasOwnProperty(t)?{space:fl[t],local:e}:e}function sb(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===rc&&t.documentElement.namespaceURI===rc?t.createElement(e):t.createElementNS(r,e)}}function ob(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function zm(e){var t=Xr(e);return(t.local?ob:sb)(t)}function ub(){}function xc(e){return e==null?ub:function(){return this.querySelector(e)}}function cb(e){typeof e!="function"&&(e=xc(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=new Array(s),c,l,u=0;u<s;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),o[u]=l);return new me(n,this._parents)}function lb(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function db(){return[]}function Hm(e){return e==null?db:function(){return this.querySelectorAll(e)}}function fb(e){return function(){return lb(e.apply(this,arguments))}}function hb(e){typeof e=="function"?e=fb(e):e=Hm(e);for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a)for(var s=t[a],o=s.length,c,l=0;l<o;++l)(c=s[l])&&(n.push(e.call(c,c.__data__,l,s)),i.push(c));return new me(n,i)}function Gm(e){return function(){return this.matches(e)}}function Vm(e){return function(t){return t.matches(e)}}var pb=Array.prototype.find;function gb(e){return function(){return pb.call(this.children,e)}}function mb(){return this.firstElementChild}function vb(e){return this.select(e==null?mb:gb(typeof e=="function"?e:Vm(e)))}var yb=Array.prototype.filter;function xb(){return Array.from(this.children)}function bb(e){return function(){return yb.call(this.children,e)}}function _b(e){return this.selectAll(e==null?xb:bb(typeof e=="function"?e:Vm(e)))}function wb(e){typeof e!="function"&&(e=Gm(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=[],c,l=0;l<s;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&o.push(c);return new me(n,this._parents)}function Um(e){return new Array(e.length)}function Nb(){return new me(this._enter||this._groups.map(Um),this._parents)}function Mr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mr.prototype={constructor:Mr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Eb(e){return function(){return e}}function Sb(e,t,r,n,i,a){for(var s=0,o,c=t.length,l=a.length;s<l;++s)(o=t[s])?(o.__data__=a[s],n[s]=o):r[s]=new Mr(e,a[s]);for(;s<c;++s)(o=t[s])&&(i[s]=o)}function Cb(e,t,r,n,i,a,s){var o,c,l=new Map,u=t.length,d=a.length,f=new Array(u),h;for(o=0;o<u;++o)(c=t[o])&&(f[o]=h=s.call(c,c.__data__,o,t)+"",l.has(h)?i[o]=c:l.set(h,c));for(o=0;o<d;++o)h=s.call(e,a[o],o,a)+"",(c=l.get(h))?(n[o]=c,c.__data__=a[o],l.delete(h)):r[o]=new Mr(e,a[o]);for(o=0;o<u;++o)(c=t[o])&&l.get(f[o])===c&&(i[o]=c)}function Ib(e){return e.__data__}function Ab(e,t){if(!arguments.length)return Array.from(this,Ib);var r=t?Cb:Sb,n=this._parents,i=this._groups;typeof e!="function"&&(e=Eb(e));for(var a=i.length,s=new Array(a),o=new Array(a),c=new Array(a),l=0;l<a;++l){var u=n[l],d=i[l],f=d.length,h=Rb(e.call(u,u&&u.__data__,l,n)),x=h.length,g=o[l]=new Array(x),m=s[l]=new Array(x),y=c[l]=new Array(f);r(u,d,g,m,y,h,t);for(var _=0,p=0,b,N;_<x;++_)if(b=g[_]){for(_>=p&&(p=_+1);!(N=m[p])&&++p<x;);b._next=N||null}}return s=new me(s,n),s._enter=o,s._exit=c,s}function Rb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qb(){return new me(this._exit||this._groups.map(Um),this._parents)}function Tb(e,t,r){var n=this.enter(),i=this,a=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?a.remove():r(a),n&&i?n.merge(i).order():i}function kb(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,a=n.length,s=Math.min(i,a),o=new Array(i),c=0;c<s;++c)for(var l=r[c],u=n[c],d=l.length,f=o[c]=new Array(d),h,x=0;x<d;++x)(h=l[x]||u[x])&&(f[x]=h);for(;c<i;++c)o[c]=r[c];return new me(o,this._parents)}function Mb(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,a=n[i],s;--i>=0;)(s=n[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function jb(e){e||(e=Pb);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var s=r[a],o=s.length,c=i[a]=new Array(o),l,u=0;u<o;++u)(l=s[u])&&(c[u]=l);c.sort(t)}return new me(i,this._parents).order()}function Pb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Lb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ob(){return Array.from(this)}function Db(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length;i<a;++i){var s=n[i];if(s)return s}return null}function Fb(){let e=0;for(const t of this)++e;return e}function $b(){return!this.node()}function Bb(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,s=i.length,o;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function zb(e){return function(){this.removeAttribute(e)}}function Hb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gb(e,t){return function(){this.setAttribute(e,t)}}function Vb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ub(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Yb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Wb(e,t){var r=Xr(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Hb:zb:typeof t=="function"?r.local?Yb:Ub:r.local?Vb:Gb)(r,t))}function Ym(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xb(e){return function(){this.style.removeProperty(e)}}function Kb(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Zb(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Jb(e,t,r){return arguments.length>1?this.each((t==null?Xb:typeof t=="function"?Zb:Kb)(e,t,r??"")):yt(this.node(),e)}function yt(e,t){return e.style.getPropertyValue(t)||Ym(e).getComputedStyle(e,null).getPropertyValue(t)}function Qb(e){return function(){delete this[e]}}function e_(e,t){return function(){this[e]=t}}function t_(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function r_(e,t){return arguments.length>1?this.each((t==null?Qb:typeof t=="function"?t_:e_)(e,t)):this.node()[e]}function Wm(e){return e.trim().split(/^|\s+/)}function bc(e){return e.classList||new Xm(e)}function Xm(e){this._node=e,this._names=Wm(e.getAttribute("class")||"")}Xm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Km(e,t){for(var r=bc(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function Zm(e,t){for(var r=bc(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function n_(e){return function(){Km(this,e)}}function i_(e){return function(){Zm(this,e)}}function a_(e,t){return function(){(t.apply(this,arguments)?Km:Zm)(this,e)}}function s_(e,t){var r=Wm(e+"");if(arguments.length<2){for(var n=bc(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?a_:t?n_:i_)(r,t))}function o_(){this.textContent=""}function u_(e){return function(){this.textContent=e}}function c_(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function l_(e){return arguments.length?this.each(e==null?o_:(typeof e=="function"?c_:u_)(e)):this.node().textContent}function d_(){this.innerHTML=""}function f_(e){return function(){this.innerHTML=e}}function h_(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function p_(e){return arguments.length?this.each(e==null?d_:(typeof e=="function"?h_:f_)(e)):this.node().innerHTML}function g_(){this.nextSibling&&this.parentNode.appendChild(this)}function m_(){return this.each(g_)}function v_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function y_(){return this.each(v_)}function x_(e){var t=typeof e=="function"?e:zm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function b_(){return null}function __(e,t){var r=typeof e=="function"?e:zm(e),n=t==null?b_:typeof t=="function"?t:xc(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function w_(){var e=this.parentNode;e&&e.removeChild(this)}function N_(){return this.each(w_)}function E_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function S_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function C_(e){return this.select(e?S_:E_)}function I_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function A_(e){return function(t){e.call(this,t,this.__data__)}}function R_(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function q_(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,a;r<i;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++n]=a;++n?t.length=n:delete this.__on}}}function T_(e,t,r){return function(){var n=this.__on,i,a=A_(t);if(n){for(var s=0,o=n.length;s<o;++s)if((i=n[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=t;return}}this.addEventListener(e.type,a,r),i={type:e.type,name:e.name,value:t,listener:a,options:r},n?n.push(i):this.__on=[i]}}function k_(e,t,r){var n=R_(e+""),i,a=n.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,l=o.length,u;c<l;++c)for(i=0,u=o[c];i<a;++i)if((s=n[i]).type===u.type&&s.name===u.name)return u.value}return}for(o=t?T_:q_,i=0;i<a;++i)this.each(o(n[i],t,r));return this}function Jm(e,t,r){var n=Ym(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function M_(e,t){return function(){return Jm(this,e,t)}}function j_(e,t){return function(){return Jm(this,e,t.apply(this,arguments))}}function P_(e,t){return this.each((typeof t=="function"?j_:M_)(e,t))}function*L_(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length,s;i<a;++i)(s=n[i])&&(yield s)}var Qm=[null];function me(e,t){this._groups=e,this._parents=t}function Jt(){return new me([[document.documentElement]],Qm)}function O_(){return this}me.prototype=Jt.prototype={constructor:me,select:cb,selectAll:hb,selectChild:vb,selectChildren:_b,filter:wb,data:Ab,enter:Nb,exit:qb,join:Tb,merge:kb,selection:O_,order:Mb,sort:jb,call:Lb,nodes:Ob,node:Db,size:Fb,empty:$b,each:Bb,attr:Wb,style:Jb,property:r_,classed:s_,text:l_,html:p_,raise:m_,lower:y_,append:x_,insert:__,remove:N_,clone:C_,datum:I_,on:k_,dispatch:P_,[Symbol.iterator]:L_};function ge(e){return typeof e=="string"?new me([[document.querySelector(e)]],[document.documentElement]):new me([[e]],Qm)}function D_(e){let t;for(;t=e.sourceEvent;)e=t;return e}function be(e,t){if(e=D_(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const F_={passive:!1},zt={capture:!0,passive:!1};function In(e){e.stopImmediatePropagation()}function mt(e){e.preventDefault(),e.stopImmediatePropagation()}function ev(e){var t=e.document.documentElement,r=ge(e).on("dragstart.drag",mt,zt);"onselectstart"in t?r.on("selectstart.drag",mt,zt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function tv(e,t){var r=e.document.documentElement,n=ge(e).on("dragstart.drag",null);t&&(n.on("click.drag",mt,zt),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const pr=e=>()=>e;function nc(e,{sourceEvent:t,subject:r,target:n,identifier:i,active:a,x:s,y:o,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}nc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function $_(e){return!e.ctrlKey&&!e.button}function B_(){return this.parentNode}function z_(e,t){return t??{x:e.x,y:e.y}}function H_(){return navigator.maxTouchPoints||"ontouchstart"in this}function rv(){var e=$_,t=B_,r=z_,n=H_,i={},a=Wr("start","drag","end"),s=0,o,c,l,u,d=0;function f(b){b.on("mousedown.drag",h).filter(n).on("touchstart.drag",m).on("touchmove.drag",y,F_).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(b,N){if(!(u||!e.call(this,b,N))){var w=p(this,t.call(this,b,N),b,N,"mouse");w&&(ge(b.view).on("mousemove.drag",x,zt).on("mouseup.drag",g,zt),ev(b.view),In(b),l=!1,o=b.clientX,c=b.clientY,w("start",b))}}function x(b){if(mt(b),!l){var N=b.clientX-o,w=b.clientY-c;l=N*N+w*w>d}i.mouse("drag",b)}function g(b){ge(b.view).on("mousemove.drag mouseup.drag",null),tv(b.view,l),mt(b),i.mouse("end",b)}function m(b,N){if(e.call(this,b,N)){var w=b.changedTouches,E=t.call(this,b,N),C=w.length,I,M;for(I=0;I<C;++I)(M=p(this,E,b,N,w[I].identifier,w[I]))&&(In(b),M("start",b,w[I]))}}function y(b){var N=b.changedTouches,w=N.length,E,C;for(E=0;E<w;++E)(C=i[N[E].identifier])&&(mt(b),C("drag",b,N[E]))}function _(b){var N=b.changedTouches,w=N.length,E,C;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),E=0;E<w;++E)(C=i[N[E].identifier])&&(In(b),C("end",b,N[E]))}function p(b,N,w,E,C,I){var M=a.copy(),q=be(I||w,N),j,O,S;if((S=r.call(b,new nc("beforestart",{sourceEvent:w,target:f,identifier:C,active:s,x:q[0],y:q[1],dx:0,dy:0,dispatch:M}),E))!=null)return j=S.x-q[0]||0,O=S.y-q[1]||0,function R(A,P,$){var L=q,B;switch(A){case"start":i[C]=R,B=s++;break;case"end":delete i[C],--s;case"drag":q=be($||P,N),B=s;break}M.call(A,b,new nc(A,{sourceEvent:P,subject:S,target:f,identifier:C,active:B,x:q[0]+j,y:q[1]+O,dx:q[0]-L[0],dy:q[1]-L[1],dispatch:M}),E)}}return f.filter=function(b){return arguments.length?(e=typeof b=="function"?b:pr(!!b),f):e},f.container=function(b){return arguments.length?(t=typeof b=="function"?b:pr(b),f):t},f.subject=function(b){return arguments.length?(r=typeof b=="function"?b:pr(b),f):r},f.touchable=function(b){return arguments.length?(n=typeof b=="function"?b:pr(!!b),f):n},f.on=function(){var b=a.on.apply(a,arguments);return b===a?f:b},f.clickDistance=function(b){return arguments.length?(d=(b=+b)*b,f):Math.sqrt(d)},f}function _c(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function nv(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Qt(){}var Ht=.7,jr=1/Ht,vt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G_=/^#([0-9a-f]{3,8})$/,V_=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),U_=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),Y_=new RegExp(`^rgba\\(${vt},${vt},${vt},${Gt}\\)$`),W_=new RegExp(`^rgba\\(${qe},${qe},${qe},${Gt}\\)$`),X_=new RegExp(`^hsl\\(${Gt},${qe},${qe}\\)$`),K_=new RegExp(`^hsla\\(${Gt},${qe},${qe},${Gt}\\)$`),hl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_c(Qt,nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:pl,formatHex:pl,formatHex8:Z_,formatHsl:J_,formatRgb:gl,toString:gl});function pl(){return this.rgb().formatHex()}function Z_(){return this.rgb().formatHex8()}function J_(){return iv(this).formatHsl()}function gl(){return this.rgb().formatRgb()}function nt(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=G_.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?ml(t):r===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?gr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?gr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=V_.exec(e))?new fe(t[1],t[2],t[3],1):(t=U_.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Y_.exec(e))?gr(t[1],t[2],t[3],t[4]):(t=W_.exec(e))?gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=X_.exec(e))?xl(t[1],t[2]/100,t[3]/100,1):(t=K_.exec(e))?xl(t[1],t[2]/100,t[3]/100,t[4]):hl.hasOwnProperty(e)?ml(hl[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function ml(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function gr(e,t,r,n){return n<=0&&(e=t=r=NaN),new fe(e,t,r,n)}function Q_(e){return e instanceof Qt||(e=nt(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function ic(e,t,r,n){return arguments.length===1?Q_(e):new fe(e,t,r,n??1)}function fe(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}_c(fe,ic,nv(Qt,{brighter(e){return e=e==null?jr:Math.pow(jr,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(tt(this.r),tt(this.g),tt(this.b),Pr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vl,formatHex:vl,formatHex8:ew,formatRgb:yl,toString:yl}));function vl(){return`#${et(this.r)}${et(this.g)}${et(this.b)}`}function ew(){return`#${et(this.r)}${et(this.g)}${et(this.b)}${et((isNaN(this.opacity)?1:this.opacity)*255)}`}function yl(){const e=Pr(this.opacity);return`${e===1?"rgb(":"rgba("}${tt(this.r)}, ${tt(this.g)}, ${tt(this.b)}${e===1?")":`, ${e})`}`}function Pr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function et(e){return e=tt(e),(e<16?"0":"")+e.toString(16)}function xl(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new _e(e,t,r,n)}function iv(e){if(e instanceof _e)return new _e(e.h,e.s,e.l,e.opacity);if(e instanceof Qt||(e=nt(e)),!e)return new _e;if(e instanceof _e)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,c=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new _e(s,o,c,e.opacity)}function tw(e,t,r,n){return arguments.length===1?iv(e):new _e(e,t,r,n??1)}function _e(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}_c(_e,tw,nv(Qt,{brighter(e){return e=e==null?jr:Math.pow(jr,e),new _e(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new _e(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new fe(An(e>=240?e-240:e+120,i,n),An(e,i,n),An(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new _e(bl(this.h),mr(this.s),mr(this.l),Pr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pr(this.opacity);return`${e===1?"hsl(":"hsla("}${bl(this.h)}, ${mr(this.s)*100}%, ${mr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bl(e){return e=(e||0)%360,e<0?e+360:e}function mr(e){return Math.max(0,Math.min(1,e||0))}function An(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const wc=e=>()=>e;function rw(e,t){return function(r){return e+r*t}}function nw(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function iw(e){return(e=+e)==1?av:function(t,r){return r-t?nw(t,r,e):wc(isNaN(t)?r:t)}}function av(e,t){var r=t-e;return r?rw(e,r):wc(isNaN(e)?t:e)}const Lr=function e(t){var r=iw(t);function n(i,a){var s=r((i=ic(i)).r,(a=ic(a)).r),o=r(i.g,a.g),c=r(i.b,a.b),l=av(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=o(u),i.b=c(u),i.opacity=l(u),i+""}}return n.gamma=e,n}(1);function aw(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function sw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ow(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Ft(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function uw(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ae(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function cw(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Ft(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var ac=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rn=new RegExp(ac.source,"g");function lw(e){return function(){return e}}function dw(e){return function(t){return e(t)+""}}function sv(e,t){var r=ac.lastIndex=Rn.lastIndex=0,n,i,a,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=ac.exec(e))&&(i=Rn.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Ae(n,i)})),r=Rn.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?dw(c[0].x):lw(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)o[(d=c[u]).i]=d.x(l);return o.join("")})}function Ft(e,t){var r=typeof t,n;return t==null||r==="boolean"?wc(t):(r==="number"?Ae:r==="string"?(n=nt(t))?(t=n,Lr):sv:t instanceof nt?Lr:t instanceof Date?uw:sw(t)?aw:Array.isArray(t)?ow:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cw:Ae)(e,t)}var _l=180/Math.PI,sc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ov(e,t,r,n,i,a){var s,o,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),e*n<t*r&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*_l,skewX:Math.atan(c)*_l,scaleX:s,scaleY:o}}var vr;function fw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?sc:ov(t.a,t.b,t.c,t.d,t.e,t.f)}function hw(e){return e==null||(vr||(vr=document.createElementNS("http://www.w3.org/2000/svg","g")),vr.setAttribute("transform",e),!(e=vr.transform.baseVal.consolidate()))?sc:(e=e.matrix,ov(e.a,e.b,e.c,e.d,e.e,e.f))}function uv(e,t,r,n){function i(l){return l.length?l.pop()+" ":""}function a(l,u,d,f,h,x){if(l!==d||u!==f){var g=h.push("translate(",null,t,null,r);x.push({i:g-4,x:Ae(l,d)},{i:g-2,x:Ae(u,f)})}else(d||f)&&h.push("translate("+d+t+f+r)}function s(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,n)-2,x:Ae(l,u)})):u&&d.push(i(d)+"rotate("+u+n)}function o(l,u,d,f){l!==u?f.push({i:d.push(i(d)+"skewX(",null,n)-2,x:Ae(l,u)}):u&&d.push(i(d)+"skewX("+u+n)}function c(l,u,d,f,h,x){if(l!==d||u!==f){var g=h.push(i(h)+"scale(",null,",",null,")");x.push({i:g-4,x:Ae(l,d)},{i:g-2,x:Ae(u,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),a(l.translateX,l.translateY,u.translateX,u.translateY,d,f),s(l.rotate,u.rotate,d,f),o(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(h){for(var x=-1,g=f.length,m;++x<g;)d[(m=f[x]).i]=m.x(h);return d.join("")}}}var pw=uv(fw,"px, ","px)","deg)"),gw=uv(hw,", ",")",")"),mw=1e-12;function wl(e){return((e=Math.exp(e))+1/e)/2}function vw(e){return((e=Math.exp(e))-1/e)/2}function yw(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ar=function e(t,r,n){function i(a,s){var o=a[0],c=a[1],l=a[2],u=s[0],d=s[1],f=s[2],h=u-o,x=d-c,g=h*h+x*x,m,y;if(g<mw)y=Math.log(f/l)/t,m=function(E){return[o+E*h,c+E*x,l*Math.exp(t*E*y)]};else{var _=Math.sqrt(g),p=(f*f-l*l+n*g)/(2*l*r*_),b=(f*f-l*l-n*g)/(2*f*r*_),N=Math.log(Math.sqrt(p*p+1)-p),w=Math.log(Math.sqrt(b*b+1)-b);y=(w-N)/t,m=function(E){var C=E*y,I=wl(N),M=l/(r*_)*(I*yw(t*C+N)-vw(N));return[o+M*h,c+M*x,l*I/wl(t*C+N)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,c=o*o;return e(s,o,c)},i}(Math.SQRT2,2,4);var xt=0,Mt=0,Tt=0,cv=1e3,Or,jt,Dr=0,it=0,Kr=0,Vt=typeof performance=="object"&&performance.now?performance:Date,lv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Nc(){return it||(lv(xw),it=Vt.now()+Kr)}function xw(){it=0}function Fr(){this._call=this._time=this._next=null}Fr.prototype=dv.prototype={constructor:Fr,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Nc():+r)+(t==null?0:+t),!this._next&&jt!==this&&(jt?jt._next=this:Or=this,jt=this),this._call=e,this._time=r,oc()},stop:function(){this._call&&(this._call=null,this._time=1/0,oc())}};function dv(e,t,r){var n=new Fr;return n.restart(e,t,r),n}function bw(){Nc(),++xt;for(var e=Or,t;e;)(t=it-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xt}function Nl(){it=(Dr=Vt.now())+Kr,xt=Mt=0;try{bw()}finally{xt=0,ww(),it=0}}function _w(){var e=Vt.now(),t=e-Dr;t>cv&&(Kr-=t,Dr=e)}function ww(){for(var e,t=Or,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Or=r);jt=e,oc(n)}function oc(e){if(!xt){Mt&&(Mt=clearTimeout(Mt));var t=e-it;t>24?(e<1/0&&(Mt=setTimeout(Nl,e-Vt.now()-Kr)),Tt&&(Tt=clearInterval(Tt))):(Tt||(Dr=Vt.now(),Tt=setInterval(_w,cv)),xt=1,lv(Nl))}}function El(e,t,r){var n=new Fr;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var Nw=Wr("start","end","cancel","interrupt"),Ew=[],fv=0,Sl=1,uc=2,Rr=3,Cl=4,cc=5,qr=6;function Zr(e,t,r,n,i,a){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;Sw(e,r,{name:t,index:n,group:i,on:Nw,tween:Ew,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:fv})}function Ec(e,t){var r=Ee(e,t);if(r.state>fv)throw new Error("too late; already scheduled");return r}function ke(e,t){var r=Ee(e,t);if(r.state>Rr)throw new Error("too late; already running");return r}function Ee(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Sw(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=dv(a,0,r.time);function a(l){r.state=Sl,r.timer.restart(s,r.delay,r.time),r.delay<=l&&s(l-r.delay)}function s(l){var u,d,f,h;if(r.state!==Sl)return c();for(u in n)if(h=n[u],h.name===r.name){if(h.state===Rr)return El(s);h.state===Cl?(h.state=qr,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[u]):+u<t&&(h.state=qr,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[u])}if(El(function(){r.state===Rr&&(r.state=Cl,r.timer.restart(o,r.delay,r.time),o(l))}),r.state=uc,r.on.call("start",e,e.__data__,r.index,r.group),r.state===uc){for(r.state=Rr,i=new Array(f=r.tween.length),u=0,d=-1;u<f;++u)(h=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(i[++d]=h);i.length=d+1}}function o(l){for(var u=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(c),r.state=cc,1),d=-1,f=i.length;++d<f;)i[d].call(e,u);r.state===cc&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=qr,r.timer.stop(),delete n[t];for(var l in n)return;delete e.__transition}}function Tr(e,t){var r=e.__transition,n,i,a=!0,s;if(r){t=t==null?null:t+"";for(s in r){if((n=r[s]).name!==t){a=!1;continue}i=n.state>uc&&n.state<cc,n.state=qr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[s]}a&&delete e.__transition}}function Cw(e){return this.each(function(){Tr(this,e)})}function Iw(e,t){var r,n;return function(){var i=ke(this,e),a=i.tween;if(a!==r){n=r=a;for(var s=0,o=n.length;s<o;++s)if(n[s].name===t){n=n.slice(),n.splice(s,1);break}}i.tween=n}}function Aw(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var a=ke(this,e),s=a.tween;if(s!==n){i=(n=s).slice();for(var o={name:t,value:r},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=o;break}c===l&&i.push(o)}a.tween=i}}function Rw(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Ee(this.node(),r).tween,i=0,a=n.length,s;i<a;++i)if((s=n[i]).name===e)return s.value;return null}return this.each((t==null?Iw:Aw)(r,e,t))}function Sc(e,t,r){var n=e._id;return e.each(function(){var i=ke(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return Ee(i,n).value[t]}}function hv(e,t){var r;return(typeof t=="number"?Ae:t instanceof nt?Lr:(r=nt(t))?(t=r,Lr):sv)(e,t)}function qw(e){return function(){this.removeAttribute(e)}}function Tw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kw(e,t,r){var n,i=r+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===n?a:a=t(n=s,r)}}function Mw(e,t,r){var n,i=r+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===n?a:a=t(n=s,r)}}function jw(e,t,r){var n,i,a;return function(){var s,o=r(this),c;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=o+"",s===c?null:s===n&&c===i?a:(i=c,a=t(n=s,o)))}}function Pw(e,t,r){var n,i,a;return function(){var s,o=r(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=o+"",s===c?null:s===n&&c===i?a:(i=c,a=t(n=s,o)))}}function Lw(e,t){var r=Xr(e),n=r==="transform"?gw:hv;return this.attrTween(e,typeof t=="function"?(r.local?Pw:jw)(r,n,Sc(this,"attr."+e,t)):t==null?(r.local?Tw:qw)(r):(r.local?Mw:kw)(r,n,t))}function Ow(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Dw(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Fw(e,t){var r,n;function i(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&Dw(e,a)),r}return i._value=t,i}function $w(e,t){var r,n;function i(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&Ow(e,a)),r}return i._value=t,i}function Bw(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Xr(e);return this.tween(r,(n.local?Fw:$w)(n,t))}function zw(e,t){return function(){Ec(this,e).delay=+t.apply(this,arguments)}}function Hw(e,t){return t=+t,function(){Ec(this,e).delay=t}}function Gw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zw:Hw)(t,e)):Ee(this.node(),t).delay}function Vw(e,t){return function(){ke(this,e).duration=+t.apply(this,arguments)}}function Uw(e,t){return t=+t,function(){ke(this,e).duration=t}}function Yw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Vw:Uw)(t,e)):Ee(this.node(),t).duration}function Ww(e,t){if(typeof t!="function")throw new Error;return function(){ke(this,e).ease=t}}function Xw(e){var t=this._id;return arguments.length?this.each(Ww(t,e)):Ee(this.node(),t).ease}function Kw(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;ke(this,e).ease=r}}function Zw(e){if(typeof e!="function")throw new Error;return this.each(Kw(this._id,e))}function Jw(e){typeof e!="function"&&(e=Gm(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=[],c,l=0;l<s;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&o.push(c);return new ze(n,this._parents,this._name,this._id)}function Qw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),s=new Array(n),o=0;o<a;++o)for(var c=t[o],l=r[o],u=c.length,d=s[o]=new Array(u),f,h=0;h<u;++h)(f=c[h]||l[h])&&(d[h]=f);for(;o<n;++o)s[o]=t[o];return new ze(s,this._parents,this._name,this._id)}function e1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function t1(e,t,r){var n,i,a=e1(t)?Ec:ke;return function(){var s=a(this,e),o=s.on;o!==n&&(i=(n=o).copy()).on(t,r),s.on=i}}function r1(e,t){var r=this._id;return arguments.length<2?Ee(this.node(),r).on.on(e):this.each(t1(r,e,t))}function n1(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function i1(){return this.on("end.remove",n1(this._id))}function a1(e){var t=this._name,r=this._id;typeof e!="function"&&(e=xc(e));for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s)for(var o=n[s],c=o.length,l=a[s]=new Array(c),u,d,f=0;f<c;++f)(u=o[f])&&(d=e.call(u,u.__data__,f,o))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,Zr(l[f],t,r,f,l,Ee(u,r)));return new ze(a,this._parents,t,r)}function s1(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Hm(e));for(var n=this._groups,i=n.length,a=[],s=[],o=0;o<i;++o)for(var c=n[o],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),h,x=Ee(u,r),g=0,m=f.length;g<m;++g)(h=f[g])&&Zr(h,t,r,g,f,x);a.push(f),s.push(u)}return new ze(a,s,t,r)}var o1=Jt.prototype.constructor;function u1(){return new o1(this._groups,this._parents)}function c1(e,t){var r,n,i;return function(){var a=yt(this,e),s=(this.style.removeProperty(e),yt(this,e));return a===s?null:a===r&&s===n?i:i=t(r=a,n=s)}}function pv(e){return function(){this.style.removeProperty(e)}}function l1(e,t,r){var n,i=r+"",a;return function(){var s=yt(this,e);return s===i?null:s===n?a:a=t(n=s,r)}}function d1(e,t,r){var n,i,a;return function(){var s=yt(this,e),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),yt(this,e))),s===c?null:s===n&&c===i?a:(i=c,a=t(n=s,o))}}function f1(e,t){var r,n,i,a="style."+t,s="end."+a,o;return function(){var c=ke(this,e),l=c.on,u=c.value[a]==null?o||(o=pv(t)):void 0;(l!==r||i!==u)&&(n=(r=l).copy()).on(s,i=u),c.on=n}}function h1(e,t,r){var n=(e+="")=="transform"?pw:hv;return t==null?this.styleTween(e,c1(e,n)).on("end.style."+e,pv(e)):typeof t=="function"?this.styleTween(e,d1(e,n,Sc(this,"style."+e,t))).each(f1(this._id,e)):this.styleTween(e,l1(e,n,t),r).on("end.style."+e,null)}function p1(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function g1(e,t,r){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&p1(e,s,r)),n}return a._value=t,a}function m1(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,g1(e,t,r??""))}function v1(e){return function(){this.textContent=e}}function y1(e){return function(){var t=e(this);this.textContent=t??""}}function x1(e){return this.tween("text",typeof e=="function"?y1(Sc(this,"text",e)):v1(e==null?"":e+""))}function b1(e){return function(t){this.textContent=e.call(this,t)}}function _1(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&b1(i)),t}return n._value=e,n}function w1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_1(e))}function N1(){for(var e=this._name,t=this._id,r=gv(),n=this._groups,i=n.length,a=0;a<i;++a)for(var s=n[a],o=s.length,c,l=0;l<o;++l)if(c=s[l]){var u=Ee(c,t);Zr(c,e,r,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ze(n,this._parents,e,r)}function E1(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(a,s){var o={value:s},c={value:function(){--i===0&&a()}};r.each(function(){var l=ke(this,n),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),l.on=t}),i===0&&a()})}var S1=0;function ze(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function gv(){return++S1}var De=Jt.prototype;ze.prototype={constructor:ze,select:a1,selectAll:s1,selectChild:De.selectChild,selectChildren:De.selectChildren,filter:Jw,merge:Qw,selection:u1,transition:N1,call:De.call,nodes:De.nodes,node:De.node,size:De.size,empty:De.empty,each:De.each,on:r1,attr:Lw,attrTween:Bw,style:h1,styleTween:m1,text:x1,textTween:w1,remove:i1,tween:Rw,delay:Gw,duration:Yw,ease:Xw,easeVarying:Zw,end:E1,[Symbol.iterator]:De[Symbol.iterator]};function C1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var I1={time:null,delay:0,duration:250,ease:C1};function A1(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function R1(e){var t,r;e instanceof ze?(t=e._id,e=e._name):(t=gv(),(r=I1).time=Nc(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var s=n[a],o=s.length,c,l=0;l<o;++l)(c=s[l])&&Zr(c,e,t,l,s,r||A1(c,t));return new ze(n,this._parents,e,t)}Jt.prototype.interrupt=Cw;Jt.prototype.transition=R1;const yr=e=>()=>e;function q1(e,{sourceEvent:t,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}function Fe(e,t,r){this.k=e,this.x=t,this.y=r}Fe.prototype={constructor:Fe,scale:function(e){return e===1?this:new Fe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Fe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Jr=new Fe(1,0,0);mv.prototype=Fe.prototype;function mv(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Jr;return e.__zoom}function qn(e){e.stopImmediatePropagation()}function kt(e){e.preventDefault(),e.stopImmediatePropagation()}function T1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function k1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Il(){return this.__zoom||Jr}function M1(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function j1(){return navigator.maxTouchPoints||"ontouchstart"in this}function P1(e,t,r){var n=e.invertX(t[0][0])-r[0][0],i=e.invertX(t[1][0])-r[1][0],a=e.invertY(t[0][1])-r[0][1],s=e.invertY(t[1][1])-r[1][1];return e.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function vv(){var e=T1,t=k1,r=P1,n=M1,i=j1,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,c=Ar,l=Wr("start","zoom","end"),u,d,f,h=500,x=150,g=0,m=10;function y(S){S.property("__zoom",Il).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",q).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(S,R,A,P){var $=S.selection?S.selection():S;$.property("__zoom",Il),S!==$?N(S,R,A,P):$.interrupt().each(function(){w(this,arguments).event(P).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},y.scaleBy=function(S,R,A,P){y.scaleTo(S,function(){var $=this.__zoom.k,L=typeof R=="function"?R.apply(this,arguments):R;return $*L},A,P)},y.scaleTo=function(S,R,A,P){y.transform(S,function(){var $=t.apply(this,arguments),L=this.__zoom,B=A==null?b($):typeof A=="function"?A.apply(this,arguments):A,H=L.invert(B),V=typeof R=="function"?R.apply(this,arguments):R;return r(p(_(L,V),B,H),$,s)},A,P)},y.translateBy=function(S,R,A,P){y.transform(S,function(){return r(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),s)},null,P)},y.translateTo=function(S,R,A,P,$){y.transform(S,function(){var L=t.apply(this,arguments),B=this.__zoom,H=P==null?b(L):typeof P=="function"?P.apply(this,arguments):P;return r(Jr.translate(H[0],H[1]).scale(B.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof A=="function"?-A.apply(this,arguments):-A),L,s)},P,$)};function _(S,R){return R=Math.max(a[0],Math.min(a[1],R)),R===S.k?S:new Fe(R,S.x,S.y)}function p(S,R,A){var P=R[0]-A[0]*S.k,$=R[1]-A[1]*S.k;return P===S.x&&$===S.y?S:new Fe(S.k,P,$)}function b(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function N(S,R,A,P){S.on("start.zoom",function(){w(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(P).end()}).tween("zoom",function(){var $=this,L=arguments,B=w($,L).event(P),H=t.apply($,L),V=A==null?b(H):typeof A=="function"?A.apply($,L):A,Y=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),k=$.__zoom,D=typeof R=="function"?R.apply($,L):R,F=c(k.invert(V).concat(Y/k.k),D.invert(V).concat(Y/D.k));return function(z){if(z===1)z=D;else{var G=F(z),U=Y/G[2];z=new Fe(U,V[0]-G[0]*U,V[1]-G[1]*U)}B.zoom(null,z)}})}function w(S,R,A){return!A&&S.__zooming||new E(S,R)}function E(S,R){this.that=S,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,R),this.taps=0}E.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,R){return this.mouse&&S!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var R=ge(this.that).datum();l.call(S,this.that,new q1(S,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:l}),R)}};function C(S,...R){if(!e.apply(this,arguments))return;var A=w(this,R).event(S),P=this.__zoom,$=Math.max(a[0],Math.min(a[1],P.k*Math.pow(2,n.apply(this,arguments)))),L=be(S);if(A.wheel)(A.mouse[0][0]!==L[0]||A.mouse[0][1]!==L[1])&&(A.mouse[1]=P.invert(A.mouse[0]=L)),clearTimeout(A.wheel);else{if(P.k===$)return;A.mouse=[L,P.invert(L)],Tr(this),A.start()}kt(S),A.wheel=setTimeout(B,x),A.zoom("mouse",r(p(_(P,$),A.mouse[0],A.mouse[1]),A.extent,s));function B(){A.wheel=null,A.end()}}function I(S,...R){if(f||!e.apply(this,arguments))return;var A=S.currentTarget,P=w(this,R,!0).event(S),$=ge(S.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",Y,!0),L=be(S,A),B=S.clientX,H=S.clientY;ev(S.view),qn(S),P.mouse=[L,this.__zoom.invert(L)],Tr(this),P.start();function V(k){if(kt(k),!P.moved){var D=k.clientX-B,F=k.clientY-H;P.moved=D*D+F*F>g}P.event(k).zoom("mouse",r(p(P.that.__zoom,P.mouse[0]=be(k,A),P.mouse[1]),P.extent,s))}function Y(k){$.on("mousemove.zoom mouseup.zoom",null),tv(k.view,P.moved),kt(k),P.event(k).end()}}function M(S,...R){if(e.apply(this,arguments)){var A=this.__zoom,P=be(S.changedTouches?S.changedTouches[0]:S,this),$=A.invert(P),L=A.k*(S.shiftKey?.5:2),B=r(p(_(A,L),P,$),t.apply(this,R),s);kt(S),o>0?ge(this).transition().duration(o).call(N,B,P,S):ge(this).call(y.transform,B,P,S)}}function q(S,...R){if(e.apply(this,arguments)){var A=S.touches,P=A.length,$=w(this,R,S.changedTouches.length===P).event(S),L,B,H,V;for(qn(S),B=0;B<P;++B)H=A[B],V=be(H,this),V=[V,this.__zoom.invert(V),H.identifier],$.touch0?!$.touch1&&$.touch0[2]!==V[2]&&($.touch1=V,$.taps=0):($.touch0=V,L=!0,$.taps=1+!!u);u&&(u=clearTimeout(u)),L&&($.taps<2&&(d=V[0],u=setTimeout(function(){u=null},h)),Tr(this),$.start())}}function j(S,...R){if(this.__zooming){var A=w(this,R).event(S),P=S.changedTouches,$=P.length,L,B,H,V;for(kt(S),L=0;L<$;++L)B=P[L],H=be(B,this),A.touch0&&A.touch0[2]===B.identifier?A.touch0[0]=H:A.touch1&&A.touch1[2]===B.identifier&&(A.touch1[0]=H);if(B=A.that.__zoom,A.touch1){var Y=A.touch0[0],k=A.touch0[1],D=A.touch1[0],F=A.touch1[1],z=(z=D[0]-Y[0])*z+(z=D[1]-Y[1])*z,G=(G=F[0]-k[0])*G+(G=F[1]-k[1])*G;B=_(B,Math.sqrt(z/G)),H=[(Y[0]+D[0])/2,(Y[1]+D[1])/2],V=[(k[0]+F[0])/2,(k[1]+F[1])/2]}else if(A.touch0)H=A.touch0[0],V=A.touch0[1];else return;A.zoom("touch",r(p(B,H,V),A.extent,s))}}function O(S,...R){if(this.__zooming){var A=w(this,R).event(S),P=S.changedTouches,$=P.length,L,B;for(qn(S),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),L=0;L<$;++L)B=P[L],A.touch0&&A.touch0[2]===B.identifier?delete A.touch0:A.touch1&&A.touch1[2]===B.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(B=be(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<m)){var H=ge(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return y.wheelDelta=function(S){return arguments.length?(n=typeof S=="function"?S:yr(+S),y):n},y.filter=function(S){return arguments.length?(e=typeof S=="function"?S:yr(!!S),y):e},y.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:yr(!!S),y):i},y.extent=function(S){return arguments.length?(t=typeof S=="function"?S:yr([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),y):t},y.scaleExtent=function(S){return arguments.length?(a[0]=+S[0],a[1]=+S[1],y):[a[0],a[1]]},y.translateExtent=function(S){return arguments.length?(s[0][0]=+S[0][0],s[1][0]=+S[1][0],s[0][1]=+S[0][1],s[1][1]=+S[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(S){return arguments.length?(r=S,y):r},y.duration=function(S){return arguments.length?(o=+S,y):o},y.interpolate=function(S){return arguments.length?(c=S,y):c},y.on=function(){var S=l.on.apply(l,arguments);return S===l?y:S},y.clickDistance=function(S){return arguments.length?(g=(S=+S)*S,y):Math.sqrt(g)},y.tapDistance=function(S){return arguments.length?(m=+S,y):m},y}const Te={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:r,targetHandle:n})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:n}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ut=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],yv=["Enter"," ","Escape"],xv={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:r})=>`Moved selected node ${e}. New position, x: ${t}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var at;(function(e){e.Strict="strict",e.Loose="loose"})(at||(at={}));var rt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(rt||(rt={}));var Yt;(function(e){e.Partial="partial",e.Full="full"})(Yt||(Yt={}));const bv={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ze;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ze||(Ze={}));var $r;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})($r||($r={}));var J;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(J||(J={}));const Al={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top};function _v(e){return e===null?null:e?"valid":"invalid"}const wv=e=>"id"in e&&"source"in e&&"target"in e,L1=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Cc=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),er=(e,t=[0,0])=>{const{width:r,height:n}=He(e),i=e.origin??t,a=r*i[0],s=n*i[1];return{x:e.position.x-a,y:e.position.y-s}},O1=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,i)=>{const a=typeof i=="string";let s=!t.nodeLookup&&!a?i:void 0;t.nodeLookup&&(s=a?t.nodeLookup.get(i):Cc(i)?i:t.nodeLookup.get(i.id));const o=s?Br(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Qr(n,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return en(r)},tr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(n=>{if(t.filter===void 0||t.filter(n)){const i=Br(n);r=Qr(r,i)}}),en(r)},Ic=(e,t,[r,n,i]=[0,0,1],a=!1,s=!1)=>{const o={...rr(t,[r,n,i]),width:t.width/i,height:t.height/i},c=[];for(const l of e.values()){const{measured:u,selectable:d=!0,hidden:f=!1}=l;if(s&&!d||f)continue;const h=u.width??l.width??l.initialWidth??null,x=u.height??l.height??l.initialHeight??null,g=Wt(o,_t(l)),m=(h??0)*(x??0),y=a&&g>0;(!l.internals.handleBounds||y||g>=m||l.dragging)&&c.push(l)}return c},D1=(e,t)=>{const r=new Set;return e.forEach(n=>{r.add(n.id)}),t.filter(n=>r.has(n.source)||r.has(n.target))};function F1(e,t){const r=new Map,n=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!n||n.has(i.id))&&r.set(i.id,i)}),r}async function $1({nodes:e,width:t,height:r,panZoom:n,minZoom:i,maxZoom:a},s){if(e.size===0)return Promise.resolve(!0);const o=F1(e,s),c=tr(o),l=Ac(c,t,r,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??a,(s==null?void 0:s.padding)??.1);return await n.setViewport(l,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function Nv({nodeId:e,nextPosition:t,nodeLookup:r,nodeOrigin:n=[0,0],nodeExtent:i,onError:a}){const s=r.get(e),o=s.parentId?r.get(s.parentId):void 0,{x:c,y:l}=o?o.internals.positionAbsolute:{x:0,y:0},u=s.origin??n;let d=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!o)a==null||a("005",Te.error005());else{const h=o.measured.width,x=o.measured.height;h&&x&&(d=[[c,l],[c+h,l+x]])}else o&&wt(s.extent)&&(d=[[s.extent[0][0]+c,s.extent[0][1]+l],[s.extent[1][0]+c,s.extent[1][1]+l]]);const f=wt(d)?st(t,d,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(a==null||a("015",Te.error015())),{position:{x:f.x-c+(s.measured.width??0)*u[0],y:f.y-l+(s.measured.height??0)*u[1]},positionAbsolute:f}}async function B1({nodesToRemove:e=[],edgesToRemove:t=[],nodes:r,edges:n,onBeforeDelete:i}){const a=new Set(e.map(f=>f.id)),s=[];for(const f of r){if(f.deletable===!1)continue;const h=a.has(f.id),x=!h&&f.parentId&&s.find(g=>g.id===f.parentId);(h||x)&&s.push(f)}const o=new Set(t.map(f=>f.id)),c=n.filter(f=>f.deletable!==!1),u=D1(s,c);for(const f of c)o.has(f.id)&&!u.find(x=>x.id===f.id)&&u.push(f);if(!i)return{edges:u,nodes:s};const d=await i({nodes:s,edges:u});return typeof d=="boolean"?d?{edges:u,nodes:s}:{edges:[],nodes:[]}:d}const bt=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),st=(e={x:0,y:0},t,r)=>({x:bt(e.x,t[0][0],t[1][0]-((r==null?void 0:r.width)??0)),y:bt(e.y,t[0][1],t[1][1]-((r==null?void 0:r.height)??0))});function Ev(e,t,r){const{width:n,height:i}=He(r),{x:a,y:s}=r.internals.positionAbsolute;return st(e,[[a,s],[a+n,s+i]],t)}const Rl=(e,t,r)=>e<t?bt(Math.abs(e-t),1,t)/t:e>r?-bt(Math.abs(e-r),1,t)/t:0,Sv=(e,t,r=15,n=40)=>{const i=Rl(e.x,n,t.width-n)*r,a=Rl(e.y,n,t.height-n)*r;return[i,a]},Qr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),lc=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),en=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),_t=(e,t=[0,0])=>{var i,a;const{x:r,y:n}=Cc(e)?e.internals.positionAbsolute:er(e,t);return{x:r,y:n,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},Br=(e,t=[0,0])=>{var i,a;const{x:r,y:n}=Cc(e)?e.internals.positionAbsolute:er(e,t);return{x:r,y:n,x2:r+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:n+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},Cv=(e,t)=>en(Qr(lc(e),lc(t))),Wt=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},ql=e=>we(e.width)&&we(e.height)&&we(e.x)&&we(e.y),we=e=>!isNaN(e)&&isFinite(e),z1=(e,t)=>{},tn=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),rr=({x:e,y:t},[r,n,i],a=!1,s=[1,1])=>{const o={x:(e-r)/i,y:(t-n)/i};return a?tn(o,s):o},zr=({x:e,y:t},[r,n,i])=>({x:e*i+r,y:t*i+n});function ht(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(t*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function H1(e,t,r){if(typeof e=="string"||typeof e=="number"){const n=ht(e,r),i=ht(e,t);return{top:n,right:i,bottom:n,left:i,x:i*2,y:n*2}}if(typeof e=="object"){const n=ht(e.top??e.y??0,r),i=ht(e.bottom??e.y??0,r),a=ht(e.left??e.x??0,t),s=ht(e.right??e.x??0,t);return{top:n,right:s,bottom:i,left:a,x:a+s,y:n+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function G1(e,t,r,n,i,a){const{x:s,y:o}=zr(e,[t,r,n]),{x:c,y:l}=zr({x:e.x+e.width,y:e.y+e.height},[t,r,n]),u=i-c,d=a-l;return{left:Math.floor(s),top:Math.floor(o),right:Math.floor(u),bottom:Math.floor(d)}}const Ac=(e,t,r,n,i,a)=>{const s=H1(a,t,r),o=(t-s.x)/e.width,c=(r-s.y)/e.height,l=Math.min(o,c),u=bt(l,n,i),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,x=r/2-f*u,g=G1(e,h,x,u,t,r),m={left:Math.min(g.left-s.left,0),top:Math.min(g.top-s.top,0),right:Math.min(g.right-s.right,0),bottom:Math.min(g.bottom-s.bottom,0)};return{x:h-m.left+m.right,y:x-m.top+m.bottom,zoom:u}},Hr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function wt(e){return e!==void 0&&e!=="parent"}function He(e){var t,r;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0}}function Iv(e){var t,r;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight)!==void 0}function Av(e,t={width:0,height:0},r,n,i){const a={...e},s=n.get(r);if(s){const o=s.origin||i;a.x+=s.internals.positionAbsolute.x-(t.width??0)*o[0],a.y+=s.internals.positionAbsolute.y-(t.height??0)*o[1]}return a}function Tl(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function V1(){let e,t;return{promise:new Promise((n,i)=>{e=n,t=i}),resolve:e,reject:t}}function U1(e){return{...xv,...e||{}}}function $t(e,{snapGrid:t=[0,0],snapToGrid:r=!1,transform:n,containerBounds:i}){const{x:a,y:s}=Re(e),o=rr({x:a-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},n),{x:c,y:l}=r?tn(o,t):o;return{xSnapped:c,ySnapped:l,...o}}const Rc=e=>({width:e.offsetWidth,height:e.offsetHeight}),Rv=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Y1=["INPUT","SELECT","TEXTAREA"];function qv(e){var n,i;const t=((i=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Y1.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Tv=e=>"clientX"in e,Re=(e,t)=>{var a,s;const r=Tv(e),n=r?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=r?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},kl=(e,t,r,n,i)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(s=>{const o=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(o.left-r.left)/n,y:(o.top-r.top)/n,...Rc(s)}})};function kv({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:o}){const c=e*.125+i*.375+s*.375+r*.125,l=t*.125+a*.375+o*.375+n*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function xr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ml({pos:e,x1:t,y1:r,x2:n,y2:i,c:a}){switch(e){case J.Left:return[t-xr(t-n,a),r];case J.Right:return[t+xr(n-t,a),r];case J.Top:return[t,r-xr(r-i,a)];case J.Bottom:return[t,r+xr(i-r,a)]}}function Mv({sourceX:e,sourceY:t,sourcePosition:r=J.Bottom,targetX:n,targetY:i,targetPosition:a=J.Top,curvature:s=.25}){const[o,c]=Ml({pos:r,x1:e,y1:t,x2:n,y2:i,c:s}),[l,u]=Ml({pos:a,x1:n,y1:i,x2:e,y2:t,c:s}),[d,f,h,x]=kv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${o},${c} ${l},${u} ${n},${i}`,d,f,h,x]}function jv({sourceX:e,sourceY:t,targetX:r,targetY:n}){const i=Math.abs(r-e)/2,a=r<e?r+i:r-i,s=Math.abs(n-t)/2,o=n<t?n+s:n-s;return[a,o,i,s]}function W1({sourceNode:e,targetNode:t,selected:r=!1,zIndex:n,elevateOnSelect:i=!1}){if(n!==void 0)return n;const a=i&&r?1e3:0,s=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return a+s}function X1({sourceNode:e,targetNode:t,width:r,height:n,transform:i}){const a=Qr(Br(e),Br(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:r/i[2],height:n/i[2]};return Wt(s,en(a))>0}const K1=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`xy-edge__${e}${t||""}-${r}${n||""}`,Z1=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Pv=(e,t)=>{if(!e.source||!e.target)return t;let r;return wv(e)?r={...e}:r={...e,id:K1(e)},Z1(r,t)?t:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,t.concat(r))};function Lv({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[i,a,s,o]=jv({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,i,a,s,o]}const jl={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}},J1=({source:e,sourcePosition:t=J.Bottom,target:r})=>t===J.Left||t===J.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Pl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Q1({source:e,sourcePosition:t=J.Bottom,target:r,targetPosition:n=J.Top,center:i,offset:a,stepPosition:s}){const o=jl[t],c=jl[n],l={x:e.x+o.x*a,y:e.y+o.y*a},u={x:r.x+c.x*a,y:r.y+c.y*a},d=J1({source:l,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let x=[],g,m;const y={x:0,y:0},_={x:0,y:0},[,,p,b]=jv({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*c[f]===-1){f==="x"?(g=i.x??l.x+(u.x-l.x)*s,m=i.y??(l.y+u.y)/2):(g=i.x??(l.x+u.x)/2,m=i.y??l.y+(u.y-l.y)*s);const w=[{x:g,y:l.y},{x:g,y:u.y}],E=[{x:l.x,y:m},{x:u.x,y:m}];o[f]===h?x=f==="x"?w:E:x=f==="x"?E:w}else{const w=[{x:l.x,y:u.y}],E=[{x:u.x,y:l.y}];if(f==="x"?x=o.x===h?E:w:x=o.y===h?w:E,t===n){const j=Math.abs(e[f]-r[f]);if(j<=a){const O=Math.min(a-1,a-j);o[f]===h?y[f]=(l[f]>e[f]?-1:1)*O:_[f]=(u[f]>r[f]?-1:1)*O}}if(t!==n){const j=f==="x"?"y":"x",O=o[f]===c[j],S=l[j]>u[j],R=l[j]<u[j];(o[f]===1&&(!O&&S||O&&R)||o[f]!==1&&(!O&&R||O&&S))&&(x=f==="x"?w:E)}const C={x:l.x+y.x,y:l.y+y.y},I={x:u.x+_.x,y:u.y+_.y},M=Math.max(Math.abs(C.x-x[0].x),Math.abs(I.x-x[0].x)),q=Math.max(Math.abs(C.y-x[0].y),Math.abs(I.y-x[0].y));M>=q?(g=(C.x+I.x)/2,m=x[0].y):(g=x[0].x,m=(C.y+I.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...x,{x:u.x+_.x,y:u.y+_.y},r],g,m,p,b]}function eN(e,t,r,n){const i=Math.min(Pl(e,t)/2,Pl(t,r)/2,n),{x:a,y:s}=t;if(e.x===a&&a===r.x||e.y===s&&s===r.y)return`L${a} ${s}`;if(e.y===s){const l=e.x<r.x?-1:1,u=e.y<r.y?1:-1;return`L ${a+i*l},${s}Q ${a},${s} ${a},${s+i*u}`}const o=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${a},${s+i*c}Q ${a},${s} ${a+i*o},${s}`}function dc({sourceX:e,sourceY:t,sourcePosition:r=J.Bottom,targetX:n,targetY:i,targetPosition:a=J.Top,borderRadius:s=5,centerX:o,centerY:c,offset:l=20,stepPosition:u=.5}){const[d,f,h,x,g]=Q1({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:i},targetPosition:a,center:{x:o,y:c},offset:l,stepPosition:u});return[d.reduce((y,_,p)=>{let b="";return p>0&&p<d.length-1?b=eN(d[p-1],_,d[p+1],s):b=`${p===0?"M":"L"}${_.x} ${_.y}`,y+=b,y},""),f,h,x,g]}function Ll(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function tN(e){var d;const{sourceNode:t,targetNode:r}=e;if(!Ll(t)||!Ll(r))return null;const n=t.internals.handleBounds||Ol(t.handles),i=r.internals.handleBounds||Ol(r.handles),a=Dl((n==null?void 0:n.source)??[],e.sourceHandle),s=Dl(e.connectionMode===at.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!a||!s)return(d=e.onError)==null||d.call(e,"008",Te.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const o=(a==null?void 0:a.position)||J.Bottom,c=(s==null?void 0:s.position)||J.Top,l=Xt(t,a,o),u=Xt(r,s,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:o,targetPosition:c}}function Ol(e){if(!e)return null;const t=[],r=[];for(const n of e)n.width=n.width??1,n.height=n.height??1,n.type==="source"?t.push(n):n.type==="target"&&r.push(n);return{source:t,target:r}}function Xt(e,t,r=J.Left,n=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:o}=t??He(e);if(n)return{x:i+s/2,y:a+o/2};switch((t==null?void 0:t.position)??r){case J.Top:return{x:i+s/2,y:a};case J.Right:return{x:i+s,y:a+o/2};case J.Bottom:return{x:i+s/2,y:a+o};case J.Left:return{x:i,y:a+o/2}}}function Dl(e,t){return e&&(t?e.find(r=>r.id===t):e[0])||null}function fc(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function rN(e,{id:t,defaultColor:r,defaultMarkerStart:n,defaultMarkerEnd:i}){const a=new Set;return e.reduce((s,o)=>([o.markerStart||n,o.markerEnd||i].forEach(c=>{if(c&&typeof c=="object"){const l=fc(c,t);a.has(l)||(s.push({id:l,color:c.color||r,...c}),a.add(l))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))}const qc={nodeOrigin:[0,0],nodeExtent:Ut,elevateNodesOnSelect:!0,defaults:{}},nN={...qc,checkEquality:!0};function Tc(e,t){const r={...e};for(const n in t)t[n]!==void 0&&(r[n]=t[n]);return r}function iN(e,t,r){const n=Tc(qc,r);for(const i of e.values())if(i.parentId)kc(i,e,t,n);else{const a=er(i,n.nodeOrigin),s=wt(i.extent)?i.extent:n.nodeExtent,o=st(a,s,He(i));i.internals.positionAbsolute=o}}function hc(e,t,r,n){var c,l;const i=Tc(nN,n);let a=e.length>0;const s=new Map(t),o=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),r.clear();for(const u of e){let d=s.get(u.id);if(i.checkEquality&&u===(d==null?void 0:d.internals.userNode))t.set(u.id,d);else{const f=er(u,i.nodeOrigin),h=wt(u.extent)?u.extent:i.nodeExtent,x=st(f,h,He(u));d={...i.defaults,...u,measured:{width:(c=u.measured)==null?void 0:c.width,height:(l=u.measured)==null?void 0:l.height},internals:{positionAbsolute:x,handleBounds:u.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Ov(u,o),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(a=!1),u.parentId&&kc(d,t,r,n)}return a}function aN(e,t){if(!e.parentId)return;const r=t.get(e.parentId);r?r.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function kc(e,t,r,n){const{elevateNodesOnSelect:i,nodeOrigin:a,nodeExtent:s}=Tc(qc,n),o=e.parentId,c=t.get(o);if(!c){console.warn(`Parent node ${o} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}aN(e,r);const l=i?1e3:0,{x:u,y:d,z:f}=sN(e,c,a,s,l),{positionAbsolute:h}=e.internals,x=u!==h.x||d!==h.y;(x||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:u,y:d}:h,z:f}})}function Ov(e,t){return(we(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function sN(e,t,r,n,i){const{x:a,y:s}=t.internals.positionAbsolute,o=He(e),c=er(e,r),l=wt(e.extent)?st(c,e.extent,o):c;let u=st({x:a+l.x,y:s+l.y},n,o);e.extent==="parent"&&(u=Ev(u,o,t));const d=Ov(e,i),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>=d?f+1:d}}function Mc(e,t,r,n=[0,0]){var s;const i=[],a=new Map;for(const o of e){const c=t.get(o.parentId);if(!c)continue;const l=((s=a.get(o.parentId))==null?void 0:s.expandedRect)??_t(c),u=Cv(l,o.rect);a.set(o.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:o,parent:c},l)=>{var p;const u=c.internals.positionAbsolute,d=He(c),f=c.origin??n,h=o.x<u.x?Math.round(Math.abs(u.x-o.x)):0,x=o.y<u.y?Math.round(Math.abs(u.y-o.y)):0,g=Math.max(d.width,Math.round(o.width)),m=Math.max(d.height,Math.round(o.height)),y=(g-d.width)*f[0],_=(m-d.height)*f[1];(h>0||x>0||y||_)&&(i.push({id:l,type:"position",position:{x:c.position.x-h+y,y:c.position.y-x+_}}),(p=r.get(l))==null||p.forEach(b=>{e.some(N=>N.id===b.id)||i.push({id:b.id,type:"position",position:{x:b.position.x+h,y:b.position.y+x}})})),(d.width<o.width||d.height<o.height||h||x)&&i.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:g+(h?f[0]*h-y:0),height:m+(x?f[1]*x-_:0)}})}),i}function oN(e,t,r,n,i,a){const s=n==null?void 0:n.querySelector(".xyflow__viewport");let o=!1;if(!s)return{changes:[],updatedInternals:o};const c=[],l=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const h=t.get(f.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),o=!0;continue}const x=Rc(f.nodeElement),g=h.measured.width!==x.width||h.measured.height!==x.height;if(!!(x.width&&x.height&&(g||!h.internals.handleBounds||f.force))){const y=f.nodeElement.getBoundingClientRect(),_=wt(h.extent)?h.extent:a;let{positionAbsolute:p}=h.internals;h.parentId&&h.extent==="parent"?p=Ev(p,x,t.get(h.parentId)):_&&(p=st(p,_,x));const b={...h,measured:x,internals:{...h.internals,positionAbsolute:p,handleBounds:{source:kl("source",f.nodeElement,y,u,h.id),target:kl("target",f.nodeElement,y,u,h.id)}}};t.set(h.id,b),h.parentId&&kc(b,t,r,{nodeOrigin:i}),o=!0,g&&(c.push({id:h.id,type:"dimensions",dimensions:x}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:_t(b,i)}))}}if(d.length>0){const f=Mc(d,t,r,i);c.push(...f)}return{changes:c,updatedInternals:o}}async function uN({delta:e,panZoom:t,transform:r,translateExtent:n,width:i,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[i,a]],n),o=!!s&&(s.x!==r[0]||s.y!==r[1]||s.k!==r[2]);return Promise.resolve(o)}function Fl(e,t,r,n,i,a){let s=i;const o=n.get(s)||new Map;n.set(s,o.set(r,t)),s=`${i}-${e}`;const c=n.get(s)||new Map;if(n.set(s,c.set(r,t)),a){s=`${i}-${e}-${a}`;const l=n.get(s)||new Map;n.set(s,l.set(r,t))}}function Dv(e,t,r){e.clear(),t.clear();for(const n of r){const{source:i,target:a,sourceHandle:s=null,targetHandle:o=null}=n,c={edgeId:n.id,source:i,target:a,sourceHandle:s,targetHandle:o},l=`${i}-${s}--${a}-${o}`,u=`${a}-${o}--${i}-${s}`;Fl("source",c,u,e,i,s),Fl("target",c,l,e,a,o),t.set(n.id,n)}}function Fv(e,t){if(!e.parentId)return!1;const r=t.get(e.parentId);return r?r.selected?!0:Fv(r,t):!1}function $l(e,t,r){var i;let n=e;do{if((i=n==null?void 0:n.matches)!=null&&i.call(n,t))return!0;if(n===r)return!1;n=n==null?void 0:n.parentElement}while(n);return!1}function cN(e,t,r,n){const i=new Map;for(const[a,s]of e)if((s.selected||s.id===n)&&(!s.parentId||!Fv(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const o=e.get(a);o&&i.set(a,{id:a,position:o.position||{x:0,y:0},distance:{x:r.x-o.internals.positionAbsolute.x,y:r.y-o.internals.positionAbsolute.y},extent:o.extent,parentId:o.parentId,origin:o.origin,expandParent:o.expandParent,internals:{positionAbsolute:o.internals.positionAbsolute||{x:0,y:0}},measured:{width:o.measured.width??0,height:o.measured.height??0}})}return i}function Tn({nodeId:e,dragItems:t,nodeLookup:r,dragging:n=!0}){var s,o,c;const i=[];for(const[l,u]of t){const d=(s=r.get(l))==null?void 0:s.internals.userNode;d&&i.push({...d,position:u.position,dragging:n})}if(!e)return[i[0],i];const a=(o=r.get(e))==null?void 0:o.internals.userNode;return[a?{...a,position:((c=t.get(e))==null?void 0:c.position)||a.position,dragging:n}:i[0],i]}function lN({onNodeMouseDown:e,getStoreItems:t,onDragStart:r,onDrag:n,onDragStop:i}){let a={x:null,y:null},s=0,o=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,h=!1,x=!1;function g({noDragClassName:y,handleSelector:_,domNode:p,isSelectable:b,nodeId:N,nodeClickDistance:w=0}){f=ge(p);function E({x:q,y:j},O){const{nodeLookup:S,nodeExtent:R,snapGrid:A,snapToGrid:P,nodeOrigin:$,onNodeDrag:L,onSelectionDrag:B,onError:H,updateNodePositions:V}=t();a={x:q,y:j};let Y=!1,k={x:0,y:0,x2:0,y2:0};if(o.size>1&&R){const D=tr(o);k=lc(D)}for(const[D,F]of o){if(!S.has(D))continue;let z={x:q-F.distance.x,y:j-F.distance.y};P&&(z=tn(z,A));let G=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];if(o.size>1&&R&&!F.extent){const{positionAbsolute:ee}=F.internals,Q=ee.x-k.x+R[0][0],K=ee.x+F.measured.width-k.x2+R[1][0],W=ee.y-k.y+R[0][1],X=ee.y+F.measured.height-k.y2+R[1][1];G=[[Q,W],[K,X]]}const{position:U,positionAbsolute:Z}=Nv({nodeId:D,nextPosition:z,nodeLookup:S,nodeExtent:G,nodeOrigin:$,onError:H});Y=Y||F.position.x!==U.x||F.position.y!==U.y,F.position=U,F.internals.positionAbsolute=Z}if(x=x||Y,!!Y&&(V(o,!0),O&&(n||L||!N&&B))){const[D,F]=Tn({nodeId:N,dragItems:o,nodeLookup:S});n==null||n(O,o,D,F),L==null||L(O,D,F),N||B==null||B(O,F)}}async function C(){if(!u)return;const{transform:q,panBy:j,autoPanSpeed:O,autoPanOnNodeDrag:S}=t();if(!S){c=!1,cancelAnimationFrame(s);return}const[R,A]=Sv(l,u,O);(R!==0||A!==0)&&(a.x=(a.x??0)-R/q[2],a.y=(a.y??0)-A/q[2],await j({x:R,y:A})&&E(a,null)),s=requestAnimationFrame(C)}function I(q){var Y;const{nodeLookup:j,multiSelectionActive:O,nodesDraggable:S,transform:R,snapGrid:A,snapToGrid:P,selectNodesOnDrag:$,onNodeDragStart:L,onSelectionDragStart:B,unselectNodesAndEdges:H}=t();d=!0,(!$||!b)&&!O&&N&&((Y=j.get(N))!=null&&Y.selected||H()),b&&$&&N&&(e==null||e(N));const V=$t(q.sourceEvent,{transform:R,snapGrid:A,snapToGrid:P,containerBounds:u});if(a=V,o=cN(j,S,V,N),o.size>0&&(r||L||!N&&B)){const[k,D]=Tn({nodeId:N,dragItems:o,nodeLookup:j});r==null||r(q.sourceEvent,o,k,D),L==null||L(q.sourceEvent,k,D),N||B==null||B(q.sourceEvent,D)}}const M=rv().clickDistance(w).on("start",q=>{const{domNode:j,nodeDragThreshold:O,transform:S,snapGrid:R,snapToGrid:A}=t();u=(j==null?void 0:j.getBoundingClientRect())||null,h=!1,x=!1,O===0&&I(q),a=$t(q.sourceEvent,{transform:S,snapGrid:R,snapToGrid:A,containerBounds:u}),l=Re(q.sourceEvent,u)}).on("drag",q=>{const{autoPanOnNodeDrag:j,transform:O,snapGrid:S,snapToGrid:R,nodeDragThreshold:A,nodeLookup:P}=t(),$=$t(q.sourceEvent,{transform:O,snapGrid:S,snapToGrid:R,containerBounds:u});if((q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||N&&!P.has(N))&&(h=!0),!h){if(!c&&j&&d&&(c=!0,C()),!d){const L=$.xSnapped-(a.x??0),B=$.ySnapped-(a.y??0);Math.sqrt(L*L+B*B)>A&&I(q)}(a.x!==$.xSnapped||a.y!==$.ySnapped)&&o&&d&&(l=Re(q.sourceEvent,u),E($,q.sourceEvent))}}).on("end",q=>{if(!(!d||h)&&(c=!1,d=!1,cancelAnimationFrame(s),o.size>0)){const{nodeLookup:j,updateNodePositions:O,onNodeDragStop:S,onSelectionDragStop:R}=t();if(x&&(O(o,!1),x=!1),i||S||!N&&R){const[A,P]=Tn({nodeId:N,dragItems:o,nodeLookup:j,dragging:!1});i==null||i(q.sourceEvent,o,A,P),S==null||S(q.sourceEvent,A,P),N||R==null||R(q.sourceEvent,P)}}}).filter(q=>{const j=q.target;return!q.button&&(!y||!$l(j,`.${y}`,p))&&(!_||$l(j,_,p))});f.call(M)}function m(){f==null||f.on(".drag",null)}return{update:g,destroy:m}}function dN(e,t,r){const n=[],i={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const a of t.values())Wt(i,_t(a))>0&&n.push(a);return n}const fN=250;function hN(e,t,r,n){var o,c;let i=[],a=1/0;const s=dN(e,r,t+fN);for(const l of s){const u=[...((o=l.internals.handleBounds)==null?void 0:o.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const d of u){if(n.nodeId===d.nodeId&&n.type===d.type&&n.id===d.id)continue;const{x:f,y:h}=Xt(l,d,d.position,!0),x=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(h-e.y,2));x>t||(x<a?(i=[{...d,x:f,y:h}],a=x):x===a&&i.push({...d,x:f,y:h}))}}if(!i.length)return null;if(i.length>1){const l=n.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function $v(e,t,r,n,i,a=!1){var l,u,d;const s=n.get(e);if(!s)return null;const o=i==="strict"?(l=s.internals.handleBounds)==null?void 0:l[t]:[...((u=s.internals.handleBounds)==null?void 0:u.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],c=(r?o==null?void 0:o.find(f=>f.id===r):o==null?void 0:o[0])??null;return c&&a?{...c,...Xt(s,c,c.position,!0)}:c}function Bv(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function pN(e,t){let r=null;return t?r=!0:e&&!t&&(r=!1),r}const zv=()=>!0;function gN(e,{connectionMode:t,connectionRadius:r,handleId:n,nodeId:i,edgeUpdaterType:a,isTarget:s,domNode:o,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:h,onConnectStart:x,onConnect:g,onConnectEnd:m,isValidConnection:y=zv,onReconnectEnd:_,updateConnection:p,getTransform:b,getFromHandle:N,autoPanSpeed:w,dragThreshold:E=1}){const C=Rv(e.target);let I=0,M;const{x:q,y:j}=Re(e),O=C==null?void 0:C.elementFromPoint(q,j),S=Bv(a,O),R=o==null?void 0:o.getBoundingClientRect();let A=!1;if(!R||!S)return;const P=$v(i,S,n,c,t);if(!P)return;let $=Re(e,R),L=!1,B=null,H=!1,V=null;function Y(){if(!u||!R)return;const[ee,Q]=Sv($,R,w);f({x:ee,y:Q}),I=requestAnimationFrame(Y)}const k={...P,nodeId:i,type:S,position:P.position},D=c.get(i);let z={inProgress:!0,isValid:null,from:Xt(D,k,J.Left,!0),fromHandle:k,fromPosition:k.position,fromNode:D,to:$,toHandle:null,toPosition:Al[k.position],toNode:null};function G(){A=!0,p(z),x==null||x(e,{nodeId:i,handleId:n,handleType:S})}E===0&&G();function U(ee){if(!A){const{x:X,y:ne}=Re(ee),te=X-q,pe=ne-j;if(!(te*te+pe*pe>E*E))return;G()}if(!N()||!k){Z(ee);return}const Q=b();$=Re(ee,R),M=hN(rr($,Q,!1,[1,1]),r,c,k),L||(Y(),L=!0);const K=Hv(ee,{handle:M,connectionMode:t,fromNodeId:i,fromHandleId:n,fromType:s?"target":"source",isValidConnection:y,doc:C,lib:l,flowId:d,nodeLookup:c});V=K.handleDomNode,B=K.connection,H=pN(!!M,K.isValid);const W={...z,isValid:H,to:K.toHandle&&H?zr({x:K.toHandle.x,y:K.toHandle.y},Q):$,toHandle:K.toHandle,toPosition:H&&K.toHandle?K.toHandle.position:Al[k.position],toNode:K.toHandle?c.get(K.toHandle.nodeId):null};H&&M&&z.toHandle&&W.toHandle&&z.toHandle.type===W.toHandle.type&&z.toHandle.nodeId===W.toHandle.nodeId&&z.toHandle.id===W.toHandle.id&&z.to.x===W.to.x&&z.to.y===W.to.y||(p(W),z=W)}function Z(ee){if(A){(M||V)&&B&&H&&(g==null||g(B));const{inProgress:Q,...K}=z,W={...K,toPosition:z.toHandle?z.toPosition:null};m==null||m(ee,W),a&&(_==null||_(ee,W))}h(),cancelAnimationFrame(I),L=!1,H=!1,B=null,V=null,C.removeEventListener("mousemove",U),C.removeEventListener("mouseup",Z),C.removeEventListener("touchmove",U),C.removeEventListener("touchend",Z)}C.addEventListener("mousemove",U),C.addEventListener("mouseup",Z),C.addEventListener("touchmove",U),C.addEventListener("touchend",Z)}function Hv(e,{handle:t,connectionMode:r,fromNodeId:n,fromHandleId:i,fromType:a,doc:s,lib:o,flowId:c,isValidConnection:l=zv,nodeLookup:u}){const d=a==="target",f=t?s.querySelector(`.${o}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:x}=Re(e),g=s.elementFromPoint(h,x),m=g!=null&&g.classList.contains(`${o}-flow__handle`)?g:f,y={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const _=Bv(void 0,m),p=m.getAttribute("data-nodeid"),b=m.getAttribute("data-handleid"),N=m.classList.contains("connectable"),w=m.classList.contains("connectableend");if(!p||!_)return y;const E={source:d?p:n,sourceHandle:d?b:i,target:d?n:p,targetHandle:d?i:b};y.connection=E;const I=N&&w&&(r===at.Strict?d&&_==="source"||!d&&_==="target":p!==n||b!==i);y.isValid=I&&l(E),y.toHandle=$v(p,_,b,u,r,!0)}return y}const pc={onPointerDown:gN,isValid:Hv};function mN({domNode:e,panZoom:t,getTransform:r,getViewScale:n}){const i=ge(e);function a({translateExtent:o,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:f=!0,inversePan:h=!1}){const x=p=>{const b=r();if(p.sourceEvent.type!=="wheel"||!t)return;const N=-p.sourceEvent.deltaY*(p.sourceEvent.deltaMode===1?.05:p.sourceEvent.deltaMode?1:.002)*u,w=b[2]*Math.pow(2,N);t.scaleTo(w)};let g=[0,0];const m=p=>{(p.sourceEvent.type==="mousedown"||p.sourceEvent.type==="touchstart")&&(g=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY])},y=p=>{const b=r();if(p.sourceEvent.type!=="mousemove"&&p.sourceEvent.type!=="touchmove"||!t)return;const N=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY],w=[N[0]-g[0],N[1]-g[1]];g=N;const E=n()*Math.max(b[2],Math.log(b[2]))*(h?-1:1),C={x:b[0]-w[0]*E,y:b[1]-w[1]*E},I=[[0,0],[c,l]];t.setViewportConstrained({x:C.x,y:C.y,zoom:b[2]},I,o)},_=vv().on("start",m).on("zoom",d?y:null).on("zoom.wheel",f?x:null);i.call(_,{})}function s(){i.on("zoom",null)}return{update:a,destroy:s,pointer:be}}const vN=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,rn=e=>({x:e.x,y:e.y,zoom:e.k}),kn=({x:e,y:t,zoom:r})=>Jr.translate(e,t).scale(r),pt=(e,t)=>e.target.closest(`.${t}`),Gv=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),yN=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Mn=(e,t=0,r=yN,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).ease(r).on("end",n):e},Vv=e=>{const t=e.ctrlKey&&Hr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function xN({zoomPanValues:e,noWheelClassName:t,d3Selection:r,d3Zoom:n,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:o,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(pt(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=r.property("__zoom").k||1;if(u.ctrlKey&&s){const m=be(u),y=Vv(u),_=d*Math.pow(2,y);n.scaleTo(r,_,m,u);return}const f=u.deltaMode===1?20:1;let h=i===rt.Vertical?0:u.deltaX*f,x=i===rt.Horizontal?0:u.deltaY*f;!Hr()&&u.shiftKey&&i!==rt.Vertical&&(h=u.deltaY*f,x=0),n.translateBy(r,-(h/d)*a,-(x/d)*a,{internal:!0});const g=rn(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,o==null||o(u,g)),e.isPanScrolling&&(c==null||c(u,g),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,g),e.isPanScrolling=!1},150))}}function bN({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:r}){return function(n,i){const a=n.type==="wheel",s=!t&&a&&!n.ctrlKey,o=pt(n,e);if(n.ctrlKey&&a&&o&&n.preventDefault(),s||o)return null;n.preventDefault(),r.call(this,n,i)}}function _N({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:r}){return n=>{var a,s,o;if((a=n.sourceEvent)!=null&&a.internal)return;const i=rn(n.transform);e.mouseButton=((s=n.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((o=n.sourceEvent)==null?void 0:o.type)==="mousedown"&&t(!0),r&&(r==null||r(n.sourceEvent,i))}}function wN({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:r,onTransformChange:n,onPanZoom:i}){return a=>{var s,o;e.usedRightMouseButton=!!(r&&Gv(t,e.mouseButton??0)),(s=a.sourceEvent)!=null&&s.sync||n([a.transform.x,a.transform.y,a.transform.k]),i&&!((o=a.sourceEvent)!=null&&o.internal)&&(i==null||i(a.sourceEvent,rn(a.transform)))}}function NN({zoomPanValues:e,panOnDrag:t,panOnScroll:r,onDraggingChange:n,onPanZoomEnd:i,onPaneContextMenu:a}){return s=>{var o;if(!((o=s.sourceEvent)!=null&&o.internal)&&(e.isZoomingOrPanning=!1,a&&Gv(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),e.usedRightMouseButton=!1,n(!1),i&&vN(e.prevViewport,s.transform))){const c=rn(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,c)},r?150:0)}}}function EN({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:r,panOnDrag:n,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:o,noPanClassName:c,lib:l}){return u=>{var x;const d=e||t,f=r&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(pt(u,`${l}-flow__node`)||pt(u,`${l}-flow__edge`)))return!0;if(!n&&!d&&!i&&!a&&!r||s||pt(u,o)&&u.type==="wheel"||pt(u,c)&&(u.type!=="wheel"||i&&u.type==="wheel"&&!e)||!r&&u.ctrlKey&&u.type==="wheel")return!1;if(!r&&u.type==="touchstart"&&((x=u.touches)==null?void 0:x.length)>1)return u.preventDefault(),!1;if(!d&&!i&&!f&&u.type==="wheel"||!n&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(n)&&!n.includes(u.button)&&u.type==="mousedown")return!1;const h=Array.isArray(n)&&n.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&h}}function SN({domNode:e,minZoom:t,maxZoom:r,paneClickDistance:n,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=vv().clickDistance(!we(n)||n<0?0:n).scaleExtent([t,r]).translateExtent(i),h=ge(e).call(f);p({x:a.x,y:a.y,zoom:bt(a.zoom,t,r)},[[0,0],[d.width,d.height]],i);const x=h.on("wheel.zoom"),g=h.on("dblclick.zoom");f.wheelDelta(Vv);function m(j,O){return h?new Promise(S=>{f==null||f.interpolate((O==null?void 0:O.interpolate)==="linear"?Ft:Ar).transform(Mn(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>S(!0)),j)}):Promise.resolve(!1)}function y({noWheelClassName:j,noPanClassName:O,onPaneContextMenu:S,userSelectionActive:R,panOnScroll:A,panOnDrag:P,panOnScrollMode:$,panOnScrollSpeed:L,preventScrolling:B,zoomOnPinch:H,zoomOnScroll:V,zoomOnDoubleClick:Y,zoomActivationKeyPressed:k,lib:D,onTransformChange:F}){R&&!u.isZoomingOrPanning&&_();const G=A&&!k&&!R?xN({zoomPanValues:u,noWheelClassName:j,d3Selection:h,d3Zoom:f,panOnScrollMode:$,panOnScrollSpeed:L,zoomOnPinch:H,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:c}):bN({noWheelClassName:j,preventScrolling:B,d3ZoomHandler:x});if(h.on("wheel.zoom",G,{passive:!1}),!R){const Z=_N({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:o});f.on("start",Z);const ee=wN({zoomPanValues:u,panOnDrag:P,onPaneContextMenu:!!S,onPanZoom:s,onTransformChange:F});f.on("zoom",ee);const Q=NN({zoomPanValues:u,panOnDrag:P,panOnScroll:A,onPaneContextMenu:S,onPanZoomEnd:c,onDraggingChange:l});f.on("end",Q)}const U=EN({zoomActivationKeyPressed:k,panOnDrag:P,zoomOnScroll:V,panOnScroll:A,zoomOnDoubleClick:Y,zoomOnPinch:H,userSelectionActive:R,noPanClassName:O,noWheelClassName:j,lib:D});f.filter(U),Y?h.on("dblclick.zoom",g):h.on("dblclick.zoom",null)}function _(){f.on("zoom",null)}async function p(j,O,S){const R=kn(j),A=f==null?void 0:f.constrain()(R,O,S);return A&&await m(A),new Promise(P=>P(A))}async function b(j,O){const S=kn(j);return await m(S,O),new Promise(R=>R(S))}function N(j){if(h){const O=kn(j),S=h.property("__zoom");(S.k!==j.zoom||S.x!==j.x||S.y!==j.y)&&(f==null||f.transform(h,O,null,{sync:!0}))}}function w(){const j=h?mv(h.node()):{x:0,y:0,k:1};return{x:j.x,y:j.y,zoom:j.k}}function E(j,O){return h?new Promise(S=>{f==null||f.interpolate((O==null?void 0:O.interpolate)==="linear"?Ft:Ar).scaleTo(Mn(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>S(!0)),j)}):Promise.resolve(!1)}function C(j,O){return h?new Promise(S=>{f==null||f.interpolate((O==null?void 0:O.interpolate)==="linear"?Ft:Ar).scaleBy(Mn(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>S(!0)),j)}):Promise.resolve(!1)}function I(j){f==null||f.scaleExtent(j)}function M(j){f==null||f.translateExtent(j)}function q(j){const O=!we(j)||j<0?0:j;f==null||f.clickDistance(O)}return{update:y,destroy:_,setViewport:b,setViewportConstrained:p,getViewport:w,scaleTo:E,scaleBy:C,setScaleExtent:I,setTranslateExtent:M,syncViewport:N,setClickDistance:q}}var Nt;(function(e){e.Line="line",e.Handle="handle"})(Nt||(Nt={}));function CN({width:e,prevWidth:t,height:r,prevHeight:n,affectsX:i,affectsY:a}){const s=e-t,o=r-n,c=[s>0?1:s<0?-1:0,o>0?1:o<0?-1:0];return s&&i&&(c[0]=c[0]*-1),o&&a&&(c[1]=c[1]*-1),c}function IN(e){const t=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),n=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:r,affectsX:n,affectsY:i}}function Xe(e,t){return Math.max(0,t-e)}function Ke(e,t){return Math.max(0,e-t)}function br(e,t,r){return Math.max(0,t-e,e-r)}function Bl(e,t){return e?!t:t}function AN(e,t,r,n,i,a,s,o){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:h,ySnapped:x}=r,{minWidth:g,maxWidth:m,minHeight:y,maxHeight:_}=n,{x:p,y:b,width:N,height:w,aspectRatio:E}=e;let C=Math.floor(u?h-e.pointerX:0),I=Math.floor(d?x-e.pointerY:0);const M=N+(c?-C:C),q=w+(l?-I:I),j=-a[0]*N,O=-a[1]*w;let S=br(M,g,m),R=br(q,y,_);if(s){let $=0,L=0;c&&C<0?$=Xe(p+C+j,s[0][0]):!c&&C>0&&($=Ke(p+M+j,s[1][0])),l&&I<0?L=Xe(b+I+O,s[0][1]):!l&&I>0&&(L=Ke(b+q+O,s[1][1])),S=Math.max(S,$),R=Math.max(R,L)}if(o){let $=0,L=0;c&&C>0?$=Ke(p+C,o[0][0]):!c&&C<0&&($=Xe(p+M,o[1][0])),l&&I>0?L=Ke(b+I,o[0][1]):!l&&I<0&&(L=Xe(b+q,o[1][1])),S=Math.max(S,$),R=Math.max(R,L)}if(i){if(u){const $=br(M/E,y,_)*E;if(S=Math.max(S,$),s){let L=0;!c&&!l||c&&!l&&f?L=Ke(b+O+M/E,s[1][1])*E:L=Xe(b+O+(c?C:-C)/E,s[0][1])*E,S=Math.max(S,L)}if(o){let L=0;!c&&!l||c&&!l&&f?L=Xe(b+M/E,o[1][1])*E:L=Ke(b+(c?C:-C)/E,o[0][1])*E,S=Math.max(S,L)}}if(d){const $=br(q*E,g,m)/E;if(R=Math.max(R,$),s){let L=0;!c&&!l||l&&!c&&f?L=Ke(p+q*E+j,s[1][0])/E:L=Xe(p+(l?I:-I)*E+j,s[0][0])/E,R=Math.max(R,L)}if(o){let L=0;!c&&!l||l&&!c&&f?L=Xe(p+q*E,o[1][0])/E:L=Ke(p+(l?I:-I)*E,o[0][0])/E,R=Math.max(R,L)}}}I=I+(I<0?R:-R),C=C+(C<0?S:-S),i&&(f?M>q*E?I=(Bl(c,l)?-C:C)/E:C=(Bl(c,l)?-I:I)*E:u?(I=C/E,l=c):(C=I*E,c=l));const A=c?p+C:p,P=l?b+I:b;return{width:N+(c?-C:C),height:w+(l?-I:I),x:a[0]*C*(c?-1:1)+A,y:a[1]*I*(l?-1:1)+P}}const Uv={width:0,height:0,x:0,y:0},RN={...Uv,pointerX:0,pointerY:0,aspectRatio:1};function qN(e){return[[0,0],[e.measured.width,e.measured.height]]}function TN(e,t,r){const n=t.position.x+e.position.x,i=t.position.y+e.position.y,a=e.measured.width??0,s=e.measured.height??0,o=r[0]*a,c=r[1]*s;return[[n-o,i-c],[n+a-o,i+s-c]]}function kN({domNode:e,nodeId:t,getStoreItems:r,onChange:n,onEnd:i}){const a=ge(e);function s({controlPosition:c,boundaries:l,keepAspectRatio:u,resizeDirection:d,onResizeStart:f,onResize:h,onResizeEnd:x,shouldResize:g}){let m={...Uv},y={...RN};const _=IN(c);let p,b=null,N=[],w,E,C;const I=rv().on("start",M=>{const{nodeLookup:q,transform:j,snapGrid:O,snapToGrid:S,nodeOrigin:R,paneDomNode:A}=r();if(p=q.get(t),!p)return;b=(A==null?void 0:A.getBoundingClientRect())??null;const{xSnapped:P,ySnapped:$}=$t(M.sourceEvent,{transform:j,snapGrid:O,snapToGrid:S,containerBounds:b});m={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},y={...m,pointerX:P,pointerY:$,aspectRatio:m.width/m.height},w=void 0,p.parentId&&(p.extent==="parent"||p.expandParent)&&(w=q.get(p.parentId),E=w&&p.extent==="parent"?qN(w):void 0),N=[],C=void 0;for(const[L,B]of q)if(B.parentId===t&&(N.push({id:L,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const H=TN(B,p,B.origin??R);C?C=[[Math.min(H[0][0],C[0][0]),Math.min(H[0][1],C[0][1])],[Math.max(H[1][0],C[1][0]),Math.max(H[1][1],C[1][1])]]:C=H}f==null||f(M,{...m})}).on("drag",M=>{const{transform:q,snapGrid:j,snapToGrid:O,nodeOrigin:S}=r(),R=$t(M.sourceEvent,{transform:q,snapGrid:j,snapToGrid:O,containerBounds:b}),A=[];if(!p)return;const{x:P,y:$,width:L,height:B}=m,H={},V=p.origin??S,{width:Y,height:k,x:D,y:F}=AN(y,_,R,l,u,V,E,C),z=Y!==L,G=k!==B,U=D!==P&&z,Z=F!==$&&G;if(!U&&!Z&&!z&&!G)return;if((U||Z||V[0]===1||V[1]===1)&&(H.x=U?D:m.x,H.y=Z?F:m.y,m.x=H.x,m.y=H.y,N.length>0)){const W=D-P,X=F-$;for(const ne of N)ne.position={x:ne.position.x-W+V[0]*(Y-L),y:ne.position.y-X+V[1]*(k-B)},A.push(ne)}if((z||G)&&(H.width=z&&(!d||d==="horizontal")?Y:m.width,H.height=G&&(!d||d==="vertical")?k:m.height,m.width=H.width,m.height=H.height),w&&p.expandParent){const W=V[0]*(H.width??0);H.x&&H.x<W&&(m.x=W,y.x=y.x-(H.x-W));const X=V[1]*(H.height??0);H.y&&H.y<X&&(m.y=X,y.y=y.y-(H.y-X))}const ee=CN({width:m.width,prevWidth:L,height:m.height,prevHeight:B,affectsX:_.affectsX,affectsY:_.affectsY}),Q={...m,direction:ee};(g==null?void 0:g(M,Q))!==!1&&(h==null||h(M,Q),n(H,A))}).on("end",M=>{x==null||x(M,{...m}),i==null||i({...m})});a.call(I)}function o(){a.on(".drag",null)}return{update:s,destroy:o}}const MN={},zl=e=>{let t;const r=new Set,n=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(x=>x(t,h))}},i=()=>t,c={setState:n,getState:i,getInitialState:()=>l,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(MN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(n,i,c);return c},jN=e=>e?zl(e):zl,{useDebugValue:PN}=Ie,{useSyncExternalStoreWithSelector:LN}=Wx,ON=e=>e;function Yv(e,t=ON,r){const n=LN(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return PN(n),n}const Hl=(e,t)=>{const r=jN(e),n=(i,a=t)=>Yv(r,i,a);return Object.assign(n,r),n},DN=(e,t)=>e?Hl(e,t):Hl;function se(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}const nn=T.createContext(null),FN=nn.Provider,Wv=Te.error001();function re(e,t){const r=T.useContext(nn);if(r===null)throw new Error(Wv);return Yv(r,e,t)}function ie(){const e=T.useContext(nn);if(e===null)throw new Error(Wv);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Gl={display:"none"},$N={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Xv="react-flow__node-desc",Kv="react-flow__edge-desc",BN="react-flow__aria-live",zN=e=>e.ariaLiveMessage,HN=e=>e.ariaLabelConfig;function GN({rfId:e}){const t=re(zN);return v.jsx("div",{id:`${BN}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:$N,children:t})}function VN({rfId:e,disableKeyboardA11y:t}){const r=re(HN);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${Xv}-${e}`,style:Gl,children:t?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${Kv}-${e}`,style:Gl,children:r["edge.a11yDescription.default"]}),!t&&v.jsx(GN,{rfId:e})]})}const nr=T.forwardRef(({position:e="top-left",children:t,className:r,style:n,...i},a)=>{const s=`${e}`.split("-");return v.jsx("div",{className:ue(["react-flow__panel",r,...s]),style:n,ref:a,...i,children:t})});nr.displayName="Panel";function UN({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:v.jsx(nr,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const YN=e=>{const t=[],r=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,n]of e.edgeLookup)n.selected&&r.push(n);return{selectedNodes:t,selectedEdges:r}},_r=e=>e.id;function WN(e,t){return se(e.selectedNodes.map(_r),t.selectedNodes.map(_r))&&se(e.selectedEdges.map(_r),t.selectedEdges.map(_r))}function XN({onSelectionChange:e}){const t=ie(),{selectedNodes:r,selectedEdges:n}=re(YN,WN);return T.useEffect(()=>{const i={nodes:r,edges:n};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(a=>a(i))},[r,n,e]),null}const KN=e=>!!e.onSelectionChangeHandlers;function ZN({onSelectionChange:e}){const t=re(KN);return e||t?v.jsx(XN,{onSelectionChange:e}):null}const Zv=[0,0],JN={x:0,y:0,zoom:1},QN=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],Vl=[...QN,"rfId"],eE=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Ul={translateExtent:Ut,nodeOrigin:Zv,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function tE(e){const{setNodes:t,setEdges:r,setMinZoom:n,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:o,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=re(eE,se),u=ie();T.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=Ul,o()}),[]);const d=T.useRef(Ul);return T.useEffect(()=>{for(const f of Vl){const h=e[f],x=d.current[f];h!==x&&(typeof e[f]>"u"||(f==="nodes"?t(h):f==="edges"?r(h):f==="minZoom"?n(h):f==="maxZoom"?i(h):f==="translateExtent"?a(h):f==="nodeExtent"?s(h):f==="paneClickDistance"?l(h):f==="ariaLabelConfig"?u.setState({ariaLabelConfig:U1(h)}):f==="fitView"?u.setState({fitViewQueued:h}):f==="fitViewOptions"?u.setState({fitViewOptions:h}):u.setState({[f]:h})))}d.current=e},Vl.map(f=>e[f])),null}function Yl(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function rE(e){var n;const[t,r]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){r(e);return}const i=Yl(),a=()=>r(i!=null&&i.matches?"dark":"light");return a(),i==null||i.addEventListener("change",a),()=>{i==null||i.removeEventListener("change",a)}},[e]),t!==null?t:(n=Yl())!=null&&n.matches?"dark":"light"}const Wl=typeof document<"u"?document:null;function Kt(e=null,t={target:Wl,actInsideInputWithModifier:!0}){const[r,n]=T.useState(!1),i=T.useRef(!1),a=T.useRef(new Set([])),[s,o]=T.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=l.reduce((d,f)=>d.concat(...f),[]);return[l,u]}return[[],[]]},[e]);return T.useEffect(()=>{const c=(t==null?void 0:t.target)??Wl,l=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const u=h=>{var m,y;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!l)&&qv(h))return!1;const g=Kl(h.code,o);if(a.current.add(h[g]),Xl(s,a.current,!1)){const _=((y=(m=h.composedPath)==null?void 0:m.call(h))==null?void 0:y[0])||h.target,p=(_==null?void 0:_.nodeName)==="BUTTON"||(_==null?void 0:_.nodeName)==="A";t.preventDefault!==!1&&(i.current||!p)&&h.preventDefault(),n(!0)}},d=h=>{const x=Kl(h.code,o);Xl(s,a.current,!0)?(n(!1),a.current.clear()):a.current.delete(h[x]),h.key==="Meta"&&a.current.clear(),i.current=!1},f=()=>{a.current.clear(),n(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,n]),r}function Xl(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(i=>t.has(i)))}function Kl(e,t){return t.includes(e)?"code":"key"}const nE=()=>{const e=ie();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,r)=>{const{panZoom:n}=e.getState();return n?n.scaleTo(t,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,r)=>{const{transform:[n,i,a],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??n,y:t.y??i,zoom:t.zoom??a},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,r,n]=e.getState().transform;return{x:t,y:r,zoom:n}},setCenter:async(t,r,n)=>e.getState().setCenter(t,r,n),fitBounds:async(t,r)=>{const{width:n,height:i,minZoom:a,maxZoom:s,panZoom:o}=e.getState(),c=Ac(t,n,i,a,s,(r==null?void 0:r.padding)??.1);return o?(await o.setViewport(c,{duration:r==null?void 0:r.duration,ease:r==null?void 0:r.ease,interpolate:r==null?void 0:r.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,r={})=>{const{transform:n,snapGrid:i,snapToGrid:a,domNode:s}=e.getState();if(!s)return t;const{x:o,y:c}=s.getBoundingClientRect(),l={x:t.x-o,y:t.y-c},u=r.snapGrid??i,d=r.snapToGrid??a;return rr(l,n,d,u)},flowToScreenPosition:t=>{const{transform:r,domNode:n}=e.getState();if(!n)return t;const{x:i,y:a}=n.getBoundingClientRect(),s=zr(t,r);return{x:s.x+i,y:s.y+a}}}),[])};function Jv(e,t){const r=[],n=new Map,i=[];for(const a of e)if(a.type==="add"){i.push(a);continue}else if(a.type==="remove"||a.type==="replace")n.set(a.id,[a]);else{const s=n.get(a.id);s?s.push(a):n.set(a.id,[a])}for(const a of t){const s=n.get(a.id);if(!s){r.push(a);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){r.push({...s[0].item});continue}const o={...a};for(const c of s)iE(c,o);r.push(o)}return i.length&&i.forEach(a=>{a.index!==void 0?r.splice(a.index,0,{...a.item}):r.push({...a.item})}),r}function iE(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Qv(e,t){return Jv(e,t)}function ey(e,t){return Jv(e,t)}function Qe(e,t){return{id:e,type:"select",selected:t}}function gt(e,t=new Set,r=!1){const n=[];for(const[i,a]of e){const s=t.has(i);!(a.selected===void 0&&!s)&&a.selected!==s&&(r&&(a.selected=s),n.push(Qe(a.id,s)))}return n}function Zl({items:e=[],lookup:t}){var i;const r=[],n=new Map(e.map(a=>[a.id,a]));for(const[a,s]of e.entries()){const o=t.get(s.id),c=((i=o==null?void 0:o.internals)==null?void 0:i.userNode)??o;c!==void 0&&c!==s&&r.push({id:s.id,item:s,type:"replace"}),c===void 0&&r.push({item:s,type:"add",index:a})}for(const[a]of t)n.get(a)===void 0&&r.push({id:a,type:"remove"});return r}function Jl(e){return{id:e.id,type:"remove"}}const Ql=e=>L1(e),aE=e=>wv(e);function ty(e){return T.forwardRef(e)}const sE=typeof window<"u"?T.useLayoutEffect:T.useEffect;function ed(e){const[t,r]=T.useState(BigInt(0)),[n]=T.useState(()=>oE(()=>r(i=>i+BigInt(1))));return sE(()=>{const i=n.get();i.length&&(e(i),n.reset())},[t]),n}function oE(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:r=>{t.push(r),e()}}}const ry=T.createContext(null);function uE({children:e}){const t=ie(),r=T.useCallback(o=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:d,nodeLookup:f,fitViewQueued:h}=t.getState();let x=c;for(const m of o)x=typeof m=="function"?m(x):m;const g=Zl({items:x,lookup:f});u&&l(x),g.length>0?d==null||d(g):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:m,nodes:y,setNodes:_}=t.getState();m&&_(y)})},[]),n=ed(r),i=T.useCallback(o=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:d,edgeLookup:f}=t.getState();let h=c;for(const x of o)h=typeof x=="function"?x(h):x;u?l(h):d&&d(Zl({items:h,lookup:f}))},[]),a=ed(i),s=T.useMemo(()=>({nodeQueue:n,edgeQueue:a}),[]);return v.jsx(ry.Provider,{value:s,children:e})}function cE(){const e=T.useContext(ry);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const lE=e=>!!e.panZoom;function jc(){const e=nE(),t=ie(),r=cE(),n=re(lE),i=T.useMemo(()=>{const a=d=>t.getState().nodeLookup.get(d),s=d=>{r.nodeQueue.push(d)},o=d=>{r.edgeQueue.push(d)},c=d=>{var y,_;const{nodeLookup:f,nodeOrigin:h}=t.getState(),x=Ql(d)?d:f.get(d.id),g=x.parentId?Av(x.position,x.measured,x.parentId,f,h):x.position,m={...x,position:g,width:((y=x.measured)==null?void 0:y.width)??x.width,height:((_=x.measured)==null?void 0:_.height)??x.height};return _t(m)},l=(d,f,h={replace:!1})=>{s(x=>x.map(g=>{if(g.id===d){const m=typeof f=="function"?f(g):f;return h.replace&&Ql(m)?m:{...g,...m}}return g}))},u=(d,f,h={replace:!1})=>{o(x=>x.map(g=>{if(g.id===d){const m=typeof f=="function"?f(g):f;return h.replace&&aE(m)?m:{...g,...m}}return g}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=a(d))==null?void 0:f.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:s,setEdges:o,addNodes:d=>{const f=Array.isArray(d)?d:[d];r.nodeQueue.push(h=>[...h,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];r.edgeQueue.push(h=>[...h,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:h}=t.getState(),[x,g,m]=h;return{nodes:d.map(y=>({...y})),edges:f.map(y=>({...y})),viewport:{x,y:g,zoom:m}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:h,edges:x,onNodesDelete:g,onEdgesDelete:m,triggerNodeChanges:y,triggerEdgeChanges:_,onDelete:p,onBeforeDelete:b}=t.getState(),{nodes:N,edges:w}=await B1({nodesToRemove:d,edgesToRemove:f,nodes:h,edges:x,onBeforeDelete:b}),E=w.length>0,C=N.length>0;if(E){const I=w.map(Jl);m==null||m(w),_(I)}if(C){const I=N.map(Jl);g==null||g(N),y(I)}return(C||E)&&(p==null||p({nodes:N,edges:w})),{deletedNodes:N,deletedEdges:w}},getIntersectingNodes:(d,f=!0,h)=>{const x=ql(d),g=x?d:c(d),m=h!==void 0;return g?(h||t.getState().nodes).filter(y=>{const _=t.getState().nodeLookup.get(y.id);if(_&&!x&&(y.id===d.id||!_.internals.positionAbsolute))return!1;const p=_t(m?y:_),b=Wt(p,g);return f&&b>0||b>=p.width*p.height||b>=g.width*g.height}):[]},isNodeIntersecting:(d,f,h=!0)=>{const g=ql(d)?d:c(d);if(!g)return!1;const m=Wt(g,f);return h&&m>0||m>=g.width*g.height},updateNode:l,updateNodeData:(d,f,h={replace:!1})=>{l(d,x=>{const g=typeof f=="function"?f(x):f;return h.replace?{...x,data:g}:{...x,data:{...x.data,...g}}},h)},updateEdge:u,updateEdgeData:(d,f,h={replace:!1})=>{u(d,x=>{const g=typeof f=="function"?f(x):f;return h.replace?{...x,data:g}:{...x,data:{...x.data,...g}}},h)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:h}=t.getState();return O1(d,{nodeLookup:f,nodeOrigin:h})},getHandleConnections:({type:d,id:f,nodeId:h})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${h}-${d}${f?`-${f}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:d,handleId:f,nodeId:h})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${h}${d?f?`-${d}-${f}`:`-${d}`:""}`))==null?void 0:x.values())??[])},fitView:async d=>{const f=t.getState().fitViewResolver??V1();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:f}),r.nodeQueue.push(h=>[...h]),f.promise}}},[]);return T.useMemo(()=>({...i,...e,viewportInitialized:n}),[n])}const td=e=>e.selected,dE=typeof window<"u"?window:void 0;function fE({deleteKeyCode:e,multiSelectionKeyCode:t}){const r=ie(),{deleteElements:n}=jc(),i=Kt(e,{actInsideInputWithModifier:!1}),a=Kt(t,{target:dE});T.useEffect(()=>{if(i){const{edges:s,nodes:o}=r.getState();n({nodes:o.filter(td),edges:s.filter(td)}),r.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])}function hE(e){const t=ie();T.useEffect(()=>{const r=()=>{var i,a;if(!e.current)return!1;const n=Rc(e.current);(n.height===0||n.width===0)&&((a=(i=t.getState()).onError)==null||a.call(i,"004",Te.error004())),t.setState({width:n.width||500,height:n.height||500})};if(e.current){r(),window.addEventListener("resize",r);const n=new ResizeObserver(()=>r());return n.observe(e.current),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}}},[])}const an={position:"absolute",width:"100%",height:"100%",top:0,left:0},pE=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function gE({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:r=!0,panOnScroll:n=!1,panOnScrollSpeed:i=.5,panOnScrollMode:a=rt.Free,zoomOnDoubleClick:s=!0,panOnDrag:o=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:h=!0,children:x,noWheelClassName:g,noPanClassName:m,onViewportChange:y,isControlledViewport:_,paneClickDistance:p}){const b=ie(),N=T.useRef(null),{userSelectionActive:w,lib:E}=re(pE,se),C=Kt(f),I=T.useRef();hE(N);const M=T.useCallback(q=>{y==null||y({x:q[0],y:q[1],zoom:q[2]}),_||b.setState({transform:q})},[y,_]);return T.useEffect(()=>{if(N.current){I.current=SN({domNode:N.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,paneClickDistance:p,onDraggingChange:S=>b.setState({paneDragging:S}),onPanZoomStart:(S,R)=>{const{onViewportChangeStart:A,onMoveStart:P}=b.getState();P==null||P(S,R),A==null||A(R)},onPanZoom:(S,R)=>{const{onViewportChange:A,onMove:P}=b.getState();P==null||P(S,R),A==null||A(R)},onPanZoomEnd:(S,R)=>{const{onViewportChangeEnd:A,onMoveEnd:P}=b.getState();P==null||P(S,R),A==null||A(R)}});const{x:q,y:j,zoom:O}=I.current.getViewport();return b.setState({panZoom:I.current,transform:[q,j,O],domNode:N.current.closest(".react-flow")}),()=>{var S;(S=I.current)==null||S.destroy()}}},[]),T.useEffect(()=>{var q;(q=I.current)==null||q.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:r,panOnScroll:n,panOnScrollSpeed:i,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:o,zoomActivationKeyPressed:C,preventScrolling:h,noPanClassName:m,userSelectionActive:w,noWheelClassName:g,lib:E,onTransformChange:M})},[e,t,r,n,i,a,s,o,C,h,m,w,g,E,M]),v.jsx("div",{className:"react-flow__renderer",ref:N,style:an,children:x})}const mE=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function vE(){const{userSelectionActive:e,userSelectionRect:t}=re(mE,se);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const jn=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},yE=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function xE({isSelecting:e,selectionKeyPressed:t,selectionMode:r=Yt.Full,panOnDrag:n,selectionOnDrag:i,onSelectionStart:a,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:h}){const x=ie(),{userSelectionActive:g,elementsSelectable:m,dragging:y,connectionInProgress:_}=re(yE,se),p=m&&(e||g),b=T.useRef(null),N=T.useRef(),w=T.useRef(new Set),E=T.useRef(new Set),C=T.useRef(!1),I=T.useRef(!1),M=P=>{if(C.current||_){C.current=!1;return}o==null||o(P),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},q=P=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){P.preventDefault();return}c==null||c(P)},j=l?P=>l(P):void 0,O=P=>{var V,Y;const{resetSelectedElements:$,domNode:L}=x.getState();if(N.current=L==null?void 0:L.getBoundingClientRect(),!m||!e||P.button!==0||P.target!==b.current||!N.current)return;(Y=(V=P.target)==null?void 0:V.setPointerCapture)==null||Y.call(V,P.pointerId),I.current=!0,C.current=!1;const{x:B,y:H}=Re(P.nativeEvent,N.current);$(),x.setState({userSelectionRect:{width:0,height:0,startX:B,startY:H,x:B,y:H}}),a==null||a(P)},S=P=>{const{userSelectionRect:$,transform:L,nodeLookup:B,edgeLookup:H,connectionLookup:V,triggerNodeChanges:Y,triggerEdgeChanges:k,defaultEdgeOptions:D}=x.getState();if(!N.current||!$)return;C.current=!0;const{x:F,y:z}=Re(P.nativeEvent,N.current),{startX:G,startY:U}=$,Z={startX:G,startY:U,x:F<G?F:G,y:z<U?z:U,width:Math.abs(F-G),height:Math.abs(z-U)},ee=w.current,Q=E.current;w.current=new Set(Ic(B,Z,L,r===Yt.Partial,!0).map(W=>W.id)),E.current=new Set;const K=(D==null?void 0:D.selectable)??!0;for(const W of w.current){const X=V.get(W);if(X)for(const{edgeId:ne}of X.values()){const te=H.get(ne);te&&(te.selectable??K)&&E.current.add(ne)}}if(!Tl(ee,w.current)){const W=gt(B,w.current,!0);Y(W)}if(!Tl(Q,E.current)){const W=gt(H,E.current);k(W)}x.setState({userSelectionRect:Z,userSelectionActive:!0,nodesSelectionActive:!1})},R=P=>{var L,B;if(P.button!==0||!I.current)return;(B=(L=P.target)==null?void 0:L.releasePointerCapture)==null||B.call(L,P.pointerId);const{userSelectionRect:$}=x.getState();!g&&$&&P.target===b.current&&(M==null||M(P)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:w.current.size>0}),s==null||s(P),(t||i)&&(C.current=!1),I.current=!1},A=n===!0||Array.isArray(n)&&n.includes(0);return v.jsxs("div",{className:ue(["react-flow__pane",{draggable:A,dragging:y,selection:e}]),onClick:p?void 0:jn(M,b),onContextMenu:jn(q,b),onWheel:jn(j,b),onPointerEnter:p?void 0:u,onPointerDown:p?O:d,onPointerMove:p?S:d,onPointerUp:p?R:void 0,onPointerLeave:f,ref:b,style:an,children:[h,v.jsx(vE,{})]})}function gc({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:o,onError:c}=t.getState(),l=o.get(e);if(!l){c==null||c("012",Te.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(r||l.selected&&s)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=n==null?void 0:n.current)==null?void 0:u.blur()})):i([e])}function ny({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:i,isSelectable:a,nodeClickDistance:s}){const o=ie(),[c,l]=T.useState(!1),u=T.useRef();return T.useEffect(()=>{u.current=lN({getStoreItems:()=>o.getState(),onNodeMouseDown:d=>{gc({id:d,store:o,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),T.useEffect(()=>{var d,f;if(t)(d=u.current)==null||d.destroy();else if(e.current)return(f=u.current)==null||f.update({noDragClassName:r,handleSelector:n,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:s}),()=>{var h;(h=u.current)==null||h.destroy()}},[r,n,t,a,e,i]),c}const bE=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function iy(){const e=ie();return T.useCallback(r=>{const{nodeExtent:n,snapToGrid:i,snapGrid:a,nodesDraggable:s,onError:o,updateNodePositions:c,nodeLookup:l,nodeOrigin:u}=e.getState(),d=new Map,f=bE(s),h=i?a[0]:5,x=i?a[1]:5,g=r.direction.x*h*r.factor,m=r.direction.y*x*r.factor;for(const[,y]of l){if(!f(y))continue;let _={x:y.internals.positionAbsolute.x+g,y:y.internals.positionAbsolute.y+m};i&&(_=tn(_,a));const{position:p,positionAbsolute:b}=Nv({nodeId:y.id,nextPosition:_,nodeLookup:l,nodeExtent:n,nodeOrigin:u,onError:o});y.position=p,y.internals.positionAbsolute=b,d.set(y.id,y)}c(d)},[])}const Pc=T.createContext(null),_E=Pc.Provider;Pc.Consumer;const ay=()=>T.useContext(Pc),wE=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),NE=(e,t,r)=>n=>{const{connectionClickStartHandle:i,connectionMode:a,connection:s}=n,{fromHandle:o,toHandle:c,isValid:l}=s,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===r;return{connectingFrom:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===r,connectingTo:u,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===r,isPossibleEndHandle:a===at.Strict?(o==null?void 0:o.type)!==r:e!==(o==null?void 0:o.nodeId)||t!==(o==null?void 0:o.id),connectionInProcess:!!o,clickConnectionInProcess:!!i,valid:u&&l}};function EE({type:e="source",position:t=J.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:o,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},h){var R,A;const x=s||null,g=e==="target",m=ie(),y=ay(),{connectOnClick:_,noPanClassName:p,rfId:b}=re(wE,se),{connectingFrom:N,connectingTo:w,clickConnecting:E,isPossibleEndHandle:C,connectionInProcess:I,clickConnectionInProcess:M,valid:q}=re(NE(y,x,e),se);y||(A=(R=m.getState()).onError)==null||A.call(R,"010",Te.error010());const j=P=>{const{defaultEdgeOptions:$,onConnect:L,hasDefaultEdges:B}=m.getState(),H={...$,...P};if(B){const{edges:V,setEdges:Y}=m.getState();Y(Pv(H,V))}L==null||L(H),o==null||o(H)},O=P=>{if(!y)return;const $=Tv(P.nativeEvent);if(i&&($&&P.button===0||!$)){const L=m.getState();pc.onPointerDown(P.nativeEvent,{autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:g,handleId:x,nodeId:y,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:j,isValidConnection:r||L.isValidConnection,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed,dragThreshold:L.connectionDragThreshold})}$?u==null||u(P):d==null||d(P)},S=P=>{const{onClickConnectStart:$,onClickConnectEnd:L,connectionClickStartHandle:B,connectionMode:H,isValidConnection:V,lib:Y,rfId:k,nodeLookup:D,connection:F}=m.getState();if(!y||!B&&!i)return;if(!B){$==null||$(P.nativeEvent,{nodeId:y,handleId:x,handleType:e}),m.setState({connectionClickStartHandle:{nodeId:y,type:e,id:x}});return}const z=Rv(P.target),G=r||V,{connection:U,isValid:Z}=pc.isValid(P.nativeEvent,{handle:{nodeId:y,id:x,type:e},connectionMode:H,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:G,flowId:k,doc:z,lib:Y,nodeLookup:D});Z&&U&&j(U);const ee=structuredClone(F);delete ee.inProgress,ee.toPosition=ee.toHandle?ee.toHandle.position:null,L==null||L(P,ee),m.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":x,"data-nodeid":y,"data-handlepos":t,"data-id":`${b}-${y}-${x}-${e}`,className:ue(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",p,l,{source:!g,target:g,connectable:n,connectablestart:i,connectableend:a,clickconnecting:E,connectingfrom:N,connectingto:w,valid:q,connectionindicator:n&&(!I||C)&&(I||M?a:i)}]),onMouseDown:O,onTouchStart:O,onClick:_?S:void 0,ref:h,...f,children:c})}const Et=T.memo(ty(EE));function SE({data:e,isConnectable:t,sourcePosition:r=J.Bottom}){return v.jsxs(v.Fragment,{children:[e==null?void 0:e.label,v.jsx(Et,{type:"source",position:r,isConnectable:t})]})}function CE({data:e,isConnectable:t,targetPosition:r=J.Top,sourcePosition:n=J.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(Et,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,v.jsx(Et,{type:"source",position:n,isConnectable:t})]})}function IE(){return null}function AE({data:e,isConnectable:t,targetPosition:r=J.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(Et,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label]})}const Gr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},rd={input:SE,default:CE,output:AE,group:IE};function RE(e){var t,r,n,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((r=e.style)==null?void 0:r.height)}:{width:e.width??((n=e.style)==null?void 0:n.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const qE=e=>{const{width:t,height:r,x:n,y:i}=tr(e.nodeLookup,{filter:a=>!!a.selected});return{width:we(t)?t:null,height:we(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${n}px,${i}px)`}};function TE({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=ie(),{width:i,height:a,transformString:s,userSelectionActive:o}=re(qE,se),c=iy(),l=T.useRef(null);if(T.useEffect(()=>{var f;r||(f=l.current)==null||f.focus({preventScroll:!0})},[r]),ny({nodeRef:l}),o||!i||!a)return null;const u=e?f=>{const h=n.getState().nodes.filter(x=>x.selected);e(f,h)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(Gr,f.key)&&(f.preventDefault(),c({direction:Gr[f.key],factor:f.shiftKey?4:1}))};return v.jsx("div",{className:ue(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:v.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:r?void 0:-1,onKeyDown:r?void 0:d,style:{width:i,height:a}})})}const nd=typeof window<"u"?window:void 0,kE=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function sy({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:o,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:d,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:x,panActivationKeyCode:g,zoomActivationKeyCode:m,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:p,panOnScroll:b,panOnScrollSpeed:N,panOnScrollMode:w,zoomOnDoubleClick:E,panOnDrag:C,defaultViewport:I,translateExtent:M,minZoom:q,maxZoom:j,preventScrolling:O,onSelectionContextMenu:S,noWheelClassName:R,noPanClassName:A,disableKeyboardA11y:P,onViewportChange:$,isControlledViewport:L}){const{nodesSelectionActive:B,userSelectionActive:H}=re(kE),V=Kt(l,{target:nd}),Y=Kt(g,{target:nd}),k=Y||C,D=Y||b,F=u&&k!==!0,z=V||H||F;return fE({deleteKeyCode:c,multiSelectionKeyCode:x}),v.jsx(gE,{onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:p,panOnScroll:D,panOnScrollSpeed:N,panOnScrollMode:w,zoomOnDoubleClick:E,panOnDrag:!V&&k,defaultViewport:I,translateExtent:M,minZoom:q,maxZoom:j,zoomActivationKeyCode:m,preventScrolling:O,noWheelClassName:R,noPanClassName:A,onViewportChange:$,isControlledViewport:L,paneClickDistance:o,children:v.jsxs(xE,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:k,isSelecting:!!z,selectionMode:d,selectionKeyPressed:V,selectionOnDrag:F,children:[e,B&&v.jsx(TE,{onSelectionContextMenu:S,noPanClassName:A,disableKeyboardA11y:P})]})})}sy.displayName="FlowRenderer";const ME=T.memo(sy),jE=e=>t=>e?Ic(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(r=>r.id):Array.from(t.nodeLookup.keys());function PE(e){return re(T.useCallback(jE(e),[e]),se)}const LE=e=>e.updateNodeInternals;function OE(){const e=re(LE),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const n=new Map;r.forEach(i=>{const a=i.target.getAttribute("data-id");n.set(a,{id:a,nodeElement:i.target,force:!0})}),e(n)}));return T.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function DE({node:e,nodeType:t,hasDimensions:r,resizeObserver:n}){const i=ie(),a=T.useRef(null),s=T.useRef(null),o=T.useRef(e.sourcePosition),c=T.useRef(e.targetPosition),l=T.useRef(t),u=r&&!!e.internals.handleBounds;return T.useEffect(()=>{a.current&&!e.hidden&&(!u||s.current!==a.current)&&(s.current&&(n==null||n.unobserve(s.current)),n==null||n.observe(a.current),s.current=a.current)},[u,e.hidden]),T.useEffect(()=>()=>{s.current&&(n==null||n.unobserve(s.current),s.current=null)},[]),T.useEffect(()=>{if(a.current){const d=l.current!==t,f=o.current!==e.sourcePosition,h=c.current!==e.targetPosition;(d||f||h)&&(l.current=t,o.current=e.sourcePosition,c.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function FE({id:e,onClick:t,onMouseEnter:r,onMouseMove:n,onMouseLeave:i,onContextMenu:a,onDoubleClick:s,nodesDraggable:o,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:x,rfId:g,nodeTypes:m,nodeClickDistance:y,onError:_}){const{node:p,internals:b,isParent:N}=re(G=>{const U=G.nodeLookup.get(e),Z=G.parentLookup.has(e);return{node:U,internals:U.internals,isParent:Z}},se);let w=p.type||"default",E=(m==null?void 0:m[w])||rd[w];E===void 0&&(_==null||_("003",Te.error003(w)),w="default",E=(m==null?void 0:m.default)||rd.default);const C=!!(p.draggable||o&&typeof p.draggable>"u"),I=!!(p.selectable||c&&typeof p.selectable>"u"),M=!!(p.connectable||l&&typeof p.connectable>"u"),q=!!(p.focusable||u&&typeof p.focusable>"u"),j=ie(),O=Iv(p),S=DE({node:p,nodeType:w,hasDimensions:O,resizeObserver:d}),R=ny({nodeRef:S,disabled:p.hidden||!C,noDragClassName:f,handleSelector:p.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:y}),A=iy();if(p.hidden)return null;const P=He(p),$=RE(p),L=I||C||t||r||n||i,B=r?G=>r(G,{...b.userNode}):void 0,H=n?G=>n(G,{...b.userNode}):void 0,V=i?G=>i(G,{...b.userNode}):void 0,Y=a?G=>a(G,{...b.userNode}):void 0,k=s?G=>s(G,{...b.userNode}):void 0,D=G=>{const{selectNodesOnDrag:U,nodeDragThreshold:Z}=j.getState();I&&(!U||!C||Z>0)&&gc({id:e,store:j,nodeRef:S}),t&&t(G,{...b.userNode})},F=G=>{if(!(qv(G.nativeEvent)||x)){if(yv.includes(G.key)&&I){const U=G.key==="Escape";gc({id:e,store:j,unselect:U,nodeRef:S})}else if(C&&p.selected&&Object.prototype.hasOwnProperty.call(Gr,G.key)){G.preventDefault();const{ariaLabelConfig:U}=j.getState();j.setState({ariaLiveMessage:U["node.a11yDescription.ariaLiveMessage"]({direction:G.key.replace("Arrow","").toLowerCase(),x:~~b.positionAbsolute.x,y:~~b.positionAbsolute.y})}),A({direction:Gr[G.key],factor:G.shiftKey?4:1})}}},z=()=>{var W;if(x||!((W=S.current)!=null&&W.matches(":focus-visible")))return;const{transform:G,width:U,height:Z,autoPanOnNodeFocus:ee,setCenter:Q}=j.getState();if(!ee)return;Ic(new Map([[e,p]]),{x:0,y:0,width:U,height:Z},G,!0).length>0||Q(p.position.x+P.width/2,p.position.y+P.height/2,{zoom:G[2]})};return v.jsx("div",{className:ue(["react-flow__node",`react-flow__node-${w}`,{[h]:C},p.className,{selected:p.selected,selectable:I,parent:N,draggable:C,dragging:R}]),ref:S,style:{zIndex:b.z,transform:`translate(${b.positionAbsolute.x}px,${b.positionAbsolute.y}px)`,pointerEvents:L?"all":"none",visibility:O?"visible":"hidden",...p.style,...$},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:H,onMouseLeave:V,onContextMenu:Y,onClick:D,onDoubleClick:k,onKeyDown:q?F:void 0,tabIndex:q?0:void 0,onFocus:q?z:void 0,role:p.ariaRole??(q?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${Xv}-${g}`,"aria-label":p.ariaLabel,...p.domAttributes,children:v.jsx(_E,{value:e,children:v.jsx(E,{id:e,data:p.data,type:w,positionAbsoluteX:b.positionAbsolute.x,positionAbsoluteY:b.positionAbsolute.y,selected:p.selected??!1,selectable:I,draggable:C,deletable:p.deletable??!0,isConnectable:M,sourcePosition:p.sourcePosition,targetPosition:p.targetPosition,dragging:R,dragHandle:p.dragHandle,zIndex:b.z,parentId:p.parentId,...P})})})}const $E=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function oy(e){const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:i,onError:a}=re($E,se),s=PE(e.onlyRenderVisibleElements),o=OE();return v.jsx("div",{className:"react-flow__nodes",style:an,children:s.map(c=>v.jsx(FE,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:o,nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},c))})}oy.displayName="NodeRenderer";const BE=T.memo(oy);function zE(e){return re(T.useCallback(r=>{if(!e)return r.edges.map(i=>i.id);const n=[];if(r.width&&r.height)for(const i of r.edges){const a=r.nodeLookup.get(i.source),s=r.nodeLookup.get(i.target);a&&s&&X1({sourceNode:a,targetNode:s,width:r.width,height:r.height,transform:r.transform})&&n.push(i.id)}return n},[e]),se)}const HE=({color:e="none",strokeWidth:t=1})=>v.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),GE=({color:e="none",strokeWidth:t=1})=>v.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),id={[$r.Arrow]:HE,[$r.ArrowClosed]:GE};function VE(e){const t=ie();return T.useMemo(()=>{var i,a;return Object.prototype.hasOwnProperty.call(id,e)?id[e]:((a=(i=t.getState()).onError)==null||a.call(i,"009",Te.error009(e)),null)},[e])}const UE=({id:e,type:t,color:r,width:n=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:o="auto-start-reverse"})=>{const c=VE(t);return c?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0",children:v.jsx(c,{color:r,strokeWidth:s})}):null},uy=({defaultColor:e,rfId:t})=>{const r=re(a=>a.edges),n=re(a=>a.defaultEdgeOptions),i=T.useMemo(()=>rN(r,{id:t,defaultColor:e,defaultMarkerStart:n==null?void 0:n.markerStart,defaultMarkerEnd:n==null?void 0:n.markerEnd}),[r,n,t,e]);return i.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:i.map(a=>v.jsx(UE,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};uy.displayName="MarkerDefinitions";var YE=T.memo(uy);function cy({x:e,y:t,label:r,labelStyle:n,labelShowBg:i=!0,labelBgStyle:a,labelBgPadding:s=[2,4],labelBgBorderRadius:o=2,children:c,className:l,...u}){const[d,f]=T.useState({x:1,y:0,width:0,height:0}),h=ue(["react-flow__edge-textwrapper",l]),x=T.useRef(null);return T.useEffect(()=>{if(x.current){const g=x.current.getBBox();f({x:g.x,y:g.y,width:g.width,height:g.height})}},[r]),r?v.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...u,children:[i&&v.jsx("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),v.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:x,style:n,children:r}),c]}):null}cy.displayName="EdgeText";const WE=T.memo(cy);function sn({path:e,labelX:t,labelY:r,label:n,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:o,labelBgBorderRadius:c,interactionWidth:l=20,...u}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...u,d:e,fill:"none",className:ue(["react-flow__edge-path",u.className])}),l&&v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:l,className:"react-flow__edge-interaction"}),n&&we(t)&&we(r)?v.jsx(WE,{x:t,y:r,label:n,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:o,labelBgBorderRadius:c}):null]})}function ad({pos:e,x1:t,y1:r,x2:n,y2:i}){return e===J.Left||e===J.Right?[.5*(t+n),r]:[t,.5*(r+i)]}function ly({sourceX:e,sourceY:t,sourcePosition:r=J.Bottom,targetX:n,targetY:i,targetPosition:a=J.Top}){const[s,o]=ad({pos:r,x1:e,y1:t,x2:n,y2:i}),[c,l]=ad({pos:a,x1:n,y1:i,x2:e,y2:t}),[u,d,f,h]=kv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:c,targetControlY:l});return[`M${e},${t} C${s},${o} ${c},${l} ${n},${i}`,u,d,f,h]}function dy(e){return T.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:a,sourcePosition:s,targetPosition:o,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:x,markerEnd:g,markerStart:m,interactionWidth:y})=>{const[_,p,b]=ly({sourceX:r,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:o}),N=e.isInternal?void 0:t;return v.jsx(sn,{id:N,path:_,labelX:p,labelY:b,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:x,markerEnd:g,markerStart:m,interactionWidth:y})})}const XE=dy({isInternal:!1}),fy=dy({isInternal:!0});XE.displayName="SimpleBezierEdge";fy.displayName="SimpleBezierEdgeInternal";function hy(e){return T.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:h=J.Bottom,targetPosition:x=J.Top,markerEnd:g,markerStart:m,pathOptions:y,interactionWidth:_})=>{const[p,b,N]=dc({sourceX:r,sourceY:n,sourcePosition:h,targetX:i,targetY:a,targetPosition:x,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset,stepPosition:y==null?void 0:y.stepPosition}),w=e.isInternal?void 0:t;return v.jsx(sn,{id:w,path:p,labelX:b,labelY:N,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:m,interactionWidth:_})})}const py=hy({isInternal:!1}),gy=hy({isInternal:!0});py.displayName="SmoothStepEdge";gy.displayName="SmoothStepEdgeInternal";function my(e){return T.memo(({id:t,...r})=>{var i;const n=e.isInternal?void 0:t;return v.jsx(py,{...r,id:n,pathOptions:T.useMemo(()=>{var a;return{borderRadius:0,offset:(a=r.pathOptions)==null?void 0:a.offset}},[(i=r.pathOptions)==null?void 0:i.offset])})})}const KE=my({isInternal:!1}),vy=my({isInternal:!0});KE.displayName="StepEdge";vy.displayName="StepEdgeInternal";function yy(e){return T.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:g})=>{const[m,y,_]=Lv({sourceX:r,sourceY:n,targetX:i,targetY:a}),p=e.isInternal?void 0:t;return v.jsx(sn,{id:p,path:m,labelX:y,labelY:_,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:g})})}const ZE=yy({isInternal:!1}),xy=yy({isInternal:!0});ZE.displayName="StraightEdge";xy.displayName="StraightEdgeInternal";function by(e){return T.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:a,sourcePosition:s=J.Bottom,targetPosition:o=J.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:x,markerEnd:g,markerStart:m,pathOptions:y,interactionWidth:_})=>{const[p,b,N]=Mv({sourceX:r,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:o,curvature:y==null?void 0:y.curvature}),w=e.isInternal?void 0:t;return v.jsx(sn,{id:w,path:p,labelX:b,labelY:N,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:x,markerEnd:g,markerStart:m,interactionWidth:_})})}const JE=by({isInternal:!1}),_y=by({isInternal:!0});JE.displayName="BezierEdge";_y.displayName="BezierEdgeInternal";const sd={default:_y,straight:xy,step:vy,smoothstep:gy,simplebezier:fy},od={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},QE=(e,t,r)=>r===J.Left?e-t:r===J.Right?e+t:e,eS=(e,t,r)=>r===J.Top?e-t:r===J.Bottom?e+t:e,ud="react-flow__edgeupdater";function cd({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:o}){return v.jsx("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:ue([ud,`${ud}-${o}`]),cx:QE(t,n,e),cy:eS(r,n,e),r:n,stroke:"transparent",fill:"transparent"})}function tS({isReconnectable:e,reconnectRadius:t,edge:r,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:o,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:d,setReconnecting:f,setUpdateHover:h}){const x=ie(),g=(b,N)=>{if(b.button!==0)return;const{autoPanOnConnect:w,domNode:E,isValidConnection:C,connectionMode:I,connectionRadius:M,lib:q,onConnectStart:j,onConnectEnd:O,cancelConnection:S,nodeLookup:R,rfId:A,panBy:P,updateConnection:$}=x.getState(),L=N.type==="target",B=(Y,k)=>{f(!1),d==null||d(Y,r,N.type,k)},H=Y=>l==null?void 0:l(r,Y),V=(Y,k)=>{f(!0),u==null||u(b,r,N.type),j==null||j(Y,k)};pc.onPointerDown(b.nativeEvent,{autoPanOnConnect:w,connectionMode:I,connectionRadius:M,domNode:E,handleId:N.id,nodeId:N.nodeId,nodeLookup:R,isTarget:L,edgeUpdaterType:N.type,lib:q,flowId:A,cancelConnection:S,panBy:P,isValidConnection:C,onConnect:H,onConnectStart:V,onConnectEnd:O,onReconnectEnd:B,updateConnection:$,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold})},m=b=>g(b,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),y=b=>g(b,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),_=()=>h(!0),p=()=>h(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(cd,{position:o,centerX:n,centerY:i,radius:t,onMouseDown:m,onMouseEnter:_,onMouseOut:p,type:"source"}),(e===!0||e==="target")&&v.jsx(cd,{position:c,centerX:a,centerY:s,radius:t,onMouseDown:y,onMouseEnter:_,onMouseOut:p,type:"target"})]})}function rS({id:e,edgesFocusable:t,edgesReconnectable:r,elementsSelectable:n,onClick:i,onDoubleClick:a,onContextMenu:s,onMouseEnter:o,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,rfId:x,edgeTypes:g,noPanClassName:m,onError:y,disableKeyboardA11y:_}){let p=re(Q=>Q.edgeLookup.get(e));const b=re(Q=>Q.defaultEdgeOptions);p=b?{...b,...p}:p;let N=p.type||"default",w=(g==null?void 0:g[N])||sd[N];w===void 0&&(y==null||y("011",Te.error011(N)),N="default",w=(g==null?void 0:g.default)||sd.default);const E=!!(p.focusable||t&&typeof p.focusable>"u"),C=typeof d<"u"&&(p.reconnectable||r&&typeof p.reconnectable>"u"),I=!!(p.selectable||n&&typeof p.selectable>"u"),M=T.useRef(null),[q,j]=T.useState(!1),[O,S]=T.useState(!1),R=ie(),{zIndex:A,sourceX:P,sourceY:$,targetX:L,targetY:B,sourcePosition:H,targetPosition:V}=re(T.useCallback(Q=>{const K=Q.nodeLookup.get(p.source),W=Q.nodeLookup.get(p.target);if(!K||!W)return{zIndex:p.zIndex,...od};const X=tN({id:e,sourceNode:K,targetNode:W,sourceHandle:p.sourceHandle||null,targetHandle:p.targetHandle||null,connectionMode:Q.connectionMode,onError:y});return{zIndex:W1({selected:p.selected,zIndex:p.zIndex,sourceNode:K,targetNode:W,elevateOnSelect:Q.elevateEdgesOnSelect}),...X||od}},[p.source,p.target,p.sourceHandle,p.targetHandle,p.selected,p.zIndex]),se),Y=T.useMemo(()=>p.markerStart?`url('#${fc(p.markerStart,x)}')`:void 0,[p.markerStart,x]),k=T.useMemo(()=>p.markerEnd?`url('#${fc(p.markerEnd,x)}')`:void 0,[p.markerEnd,x]);if(p.hidden||P===null||$===null||L===null||B===null)return null;const D=Q=>{var ne;const{addSelectedEdges:K,unselectNodesAndEdges:W,multiSelectionActive:X}=R.getState();I&&(R.setState({nodesSelectionActive:!1}),p.selected&&X?(W({nodes:[],edges:[p]}),(ne=M.current)==null||ne.blur()):K([e])),i&&i(Q,p)},F=a?Q=>{a(Q,{...p})}:void 0,z=s?Q=>{s(Q,{...p})}:void 0,G=o?Q=>{o(Q,{...p})}:void 0,U=c?Q=>{c(Q,{...p})}:void 0,Z=l?Q=>{l(Q,{...p})}:void 0,ee=Q=>{var K;if(!_&&yv.includes(Q.key)&&I){const{unselectNodesAndEdges:W,addSelectedEdges:X}=R.getState();Q.key==="Escape"?((K=M.current)==null||K.blur(),W({edges:[p]})):X([e])}};return v.jsx("svg",{style:{zIndex:A},children:v.jsxs("g",{className:ue(["react-flow__edge",`react-flow__edge-${N}`,p.className,m,{selected:p.selected,animated:p.animated,inactive:!I&&!i,updating:q,selectable:I}]),onClick:D,onDoubleClick:F,onContextMenu:z,onMouseEnter:G,onMouseMove:U,onMouseLeave:Z,onKeyDown:E?ee:void 0,tabIndex:E?0:void 0,role:p.ariaRole??(E?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":p.ariaLabel===null?void 0:p.ariaLabel||`Edge from ${p.source} to ${p.target}`,"aria-describedby":E?`${Kv}-${x}`:void 0,ref:M,...p.domAttributes,children:[!O&&v.jsx(w,{id:e,source:p.source,target:p.target,type:p.type,selected:p.selected,animated:p.animated,selectable:I,deletable:p.deletable??!0,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,sourceX:P,sourceY:$,targetX:L,targetY:B,sourcePosition:H,targetPosition:V,data:p.data,style:p.style,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerStart:Y,markerEnd:k,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth}),C&&v.jsx(tS,{edge:p,isReconnectable:C,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,sourceX:P,sourceY:$,targetX:L,targetY:B,sourcePosition:H,targetPosition:V,setUpdateHover:j,setReconnecting:S})]})})}const nS=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function wy({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:r,edgeTypes:n,noPanClassName:i,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:x,disableKeyboardA11y:g}){const{edgesFocusable:m,edgesReconnectable:y,elementsSelectable:_,onError:p}=re(nS,se),b=zE(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(YE,{defaultColor:e,rfId:r}),b.map(N=>v.jsx(rS,{id:N,edgesFocusable:m,edgesReconnectable:y,elementsSelectable:_,noPanClassName:i,onReconnect:a,onContextMenu:s,onMouseEnter:o,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:d,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:x,rfId:r,onError:p,edgeTypes:n,disableKeyboardA11y:g},N))]})}wy.displayName="EdgeRenderer";const iS=T.memo(wy),aS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function sS({children:e}){const t=re(aS);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function oS(e){const t=jc(),r=T.useRef(!1);T.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const uS=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function cS(e){const t=re(uS),r=ie();return T.useEffect(()=>{e&&(t==null||t(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function lS(e){return e.connection.inProgress?{...e.connection,to:rr(e.connection.to,e.transform)}:{...e.connection}}function dS(e){return lS}function fS(e){const t=dS();return re(t,se)}const hS=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function pS({containerStyle:e,style:t,type:r,component:n}){const{nodesConnectable:i,width:a,height:s,isValid:o,inProgress:c}=re(hS,se);return!(a&&i&&c)?null:v.jsx("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:ue(["react-flow__connection",_v(o)]),children:v.jsx(Ny,{style:t,type:r,CustomComponent:n,isValid:o})})})}const Ny=({style:e,type:t=Ze.Bezier,CustomComponent:r,isValid:n})=>{const{inProgress:i,from:a,fromNode:s,fromHandle:o,fromPosition:c,to:l,toNode:u,toHandle:d,toPosition:f}=fS();if(!i)return;if(r)return v.jsx(r,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:o,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:f,connectionStatus:_v(n),toNode:u,toHandle:d});let h="";const x={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:f};switch(t){case Ze.Bezier:[h]=Mv(x);break;case Ze.SimpleBezier:[h]=ly(x);break;case Ze.Step:[h]=dc({...x,borderRadius:0});break;case Ze.SmoothStep:[h]=dc(x);break;default:[h]=Lv(x)}return v.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};Ny.displayName="ConnectionLine";const gS={};function ld(e=gS){T.useRef(e),ie(),T.useEffect(()=>{},[e])}function mS(){ie(),T.useRef(!1),T.useEffect(()=>{},[])}function Ey({nodeTypes:e,edgeTypes:t,onInit:r,onNodeClick:n,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:o,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:h,connectionLineType:x,connectionLineStyle:g,connectionLineComponent:m,connectionLineContainerStyle:y,selectionKeyCode:_,selectionOnDrag:p,selectionMode:b,multiSelectionKeyCode:N,panActivationKeyCode:w,zoomActivationKeyCode:E,deleteKeyCode:C,onlyRenderVisibleElements:I,elementsSelectable:M,defaultViewport:q,translateExtent:j,minZoom:O,maxZoom:S,preventScrolling:R,defaultMarkerColor:A,zoomOnScroll:P,zoomOnPinch:$,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:H,zoomOnDoubleClick:V,panOnDrag:Y,onPaneClick:k,onPaneMouseEnter:D,onPaneMouseMove:F,onPaneMouseLeave:z,onPaneScroll:G,onPaneContextMenu:U,paneClickDistance:Z,nodeClickDistance:ee,onEdgeContextMenu:Q,onEdgeMouseEnter:K,onEdgeMouseMove:W,onEdgeMouseLeave:X,reconnectRadius:ne,onReconnect:te,onReconnectStart:pe,onReconnectEnd:xe,noDragClassName:dt,noWheelClassName:je,noPanClassName:de,disableKeyboardA11y:oe,nodeExtent:Ue,rfId:Pe,viewport:Ye,onViewportChange:We}){return ld(e),ld(t),mS(),oS(r),cS(Ye),v.jsx(ME,{onPaneClick:k,onPaneMouseEnter:D,onPaneMouseMove:F,onPaneMouseLeave:z,onPaneContextMenu:U,onPaneScroll:G,paneClickDistance:Z,deleteKeyCode:C,selectionKeyCode:_,selectionOnDrag:p,selectionMode:b,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:N,panActivationKeyCode:w,zoomActivationKeyCode:E,elementsSelectable:M,zoomOnScroll:P,zoomOnPinch:$,zoomOnDoubleClick:V,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:H,panOnDrag:Y,defaultViewport:q,translateExtent:j,minZoom:O,maxZoom:S,onSelectionContextMenu:d,preventScrolling:R,noDragClassName:dt,noWheelClassName:je,noPanClassName:de,disableKeyboardA11y:oe,onViewportChange:We,isControlledViewport:!!Ye,children:v.jsxs(sS,{children:[v.jsx(iS,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:te,onReconnectStart:pe,onReconnectEnd:xe,onlyRenderVisibleElements:I,onEdgeContextMenu:Q,onEdgeMouseEnter:K,onEdgeMouseMove:W,onEdgeMouseLeave:X,reconnectRadius:ne,defaultMarkerColor:A,noPanClassName:de,disableKeyboardA11y:oe,rfId:Pe}),v.jsx(pS,{style:g,type:x,component:m,containerStyle:y}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(BE,{nodeTypes:e,onNodeClick:n,onNodeDoubleClick:a,onNodeMouseEnter:o,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:ee,onlyRenderVisibleElements:I,noPanClassName:de,noDragClassName:dt,disableKeyboardA11y:oe,nodeExtent:Ue,rfId:Pe}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ey.displayName="GraphView";const vS=T.memo(Ey),dd=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:c=.5,maxZoom:l=2,nodeOrigin:u,nodeExtent:d}={})=>{const f=new Map,h=new Map,x=new Map,g=new Map,m=n??t??[],y=r??e??[],_=u??[0,0],p=d??Ut;Dv(x,g,m);const b=hc(y,f,h,{nodeOrigin:_,nodeExtent:p,elevateNodesOnSelect:!1});let N=[0,0,1];if(s&&i&&a){const w=tr(f,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))}),{x:E,y:C,zoom:I}=Ac(w,i,a,c,l,(o==null?void 0:o.padding)??.1);N=[E,C,I]}return{rfId:"1",width:0,height:0,transform:N,nodes:y,nodesInitialized:b,nodeLookup:f,parentLookup:h,edges:m,edgeLookup:g,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:n!==void 0,panZoom:null,minZoom:c,maxZoom:l,translateExtent:Ut,nodeExtent:p,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:at.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:_,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:o,fitViewResolver:null,connection:{...bv},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:z1,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:xv}},yS=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:c,maxZoom:l,nodeOrigin:u,nodeExtent:d})=>DN((f,h)=>{async function x(){const{nodeLookup:g,panZoom:m,fitViewOptions:y,fitViewResolver:_,width:p,height:b,minZoom:N,maxZoom:w}=h();m&&(await $1({nodes:g,width:p,height:b,panZoom:m,minZoom:N,maxZoom:w},y),_==null||_.resolve(!0),f({fitViewResolver:null}))}return{...dd({nodes:e,edges:t,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:c,maxZoom:l,nodeOrigin:u,nodeExtent:d,defaultNodes:r,defaultEdges:n}),setNodes:g=>{const{nodeLookup:m,parentLookup:y,nodeOrigin:_,elevateNodesOnSelect:p,fitViewQueued:b}=h(),N=hc(g,m,y,{nodeOrigin:_,nodeExtent:d,elevateNodesOnSelect:p,checkEquality:!0});b&&N?(x(),f({nodes:g,nodesInitialized:N,fitViewQueued:!1,fitViewOptions:void 0})):f({nodes:g,nodesInitialized:N})},setEdges:g=>{const{connectionLookup:m,edgeLookup:y}=h();Dv(m,y,g),f({edges:g})},setDefaultNodesAndEdges:(g,m)=>{if(g){const{setNodes:y}=h();y(g),f({hasDefaultNodes:!0})}if(m){const{setEdges:y}=h();y(m),f({hasDefaultEdges:!0})}},updateNodeInternals:g=>{const{triggerNodeChanges:m,nodeLookup:y,parentLookup:_,domNode:p,nodeOrigin:b,nodeExtent:N,debug:w,fitViewQueued:E}=h(),{changes:C,updatedInternals:I}=oN(g,y,_,p,b,N);I&&(iN(y,_,{nodeOrigin:b,nodeExtent:N}),E?(x(),f({fitViewQueued:!1,fitViewOptions:void 0})):f({}),(C==null?void 0:C.length)>0&&(w&&console.log("React Flow: trigger node changes",C),m==null||m(C)))},updateNodePositions:(g,m=!1)=>{const y=[],_=[],{nodeLookup:p,triggerNodeChanges:b}=h();for(const[N,w]of g){const E=p.get(N),C=!!(E!=null&&E.expandParent&&(E!=null&&E.parentId)&&(w!=null&&w.position)),I={id:N,type:"position",position:C?{x:Math.max(0,w.position.x),y:Math.max(0,w.position.y)}:w.position,dragging:m};C&&E.parentId&&y.push({id:N,parentId:E.parentId,rect:{...w.internals.positionAbsolute,width:w.measured.width??0,height:w.measured.height??0}}),_.push(I)}if(y.length>0){const{parentLookup:N,nodeOrigin:w}=h(),E=Mc(y,p,N,w);_.push(...E)}b(_)},triggerNodeChanges:g=>{const{onNodesChange:m,setNodes:y,nodes:_,hasDefaultNodes:p,debug:b}=h();if(g!=null&&g.length){if(p){const N=Qv(g,_);y(N)}b&&console.log("React Flow: trigger node changes",g),m==null||m(g)}},triggerEdgeChanges:g=>{const{onEdgesChange:m,setEdges:y,edges:_,hasDefaultEdges:p,debug:b}=h();if(g!=null&&g.length){if(p){const N=ey(g,_);y(N)}b&&console.log("React Flow: trigger edge changes",g),m==null||m(g)}},addSelectedNodes:g=>{const{multiSelectionActive:m,edgeLookup:y,nodeLookup:_,triggerNodeChanges:p,triggerEdgeChanges:b}=h();if(m){const N=g.map(w=>Qe(w,!0));p(N);return}p(gt(_,new Set([...g]),!0)),b(gt(y))},addSelectedEdges:g=>{const{multiSelectionActive:m,edgeLookup:y,nodeLookup:_,triggerNodeChanges:p,triggerEdgeChanges:b}=h();if(m){const N=g.map(w=>Qe(w,!0));b(N);return}b(gt(y,new Set([...g]))),p(gt(_,new Set,!0))},unselectNodesAndEdges:({nodes:g,edges:m}={})=>{const{edges:y,nodes:_,nodeLookup:p,triggerNodeChanges:b,triggerEdgeChanges:N}=h(),w=g||_,E=m||y,C=w.map(M=>{const q=p.get(M.id);return q&&(q.selected=!1),Qe(M.id,!1)}),I=E.map(M=>Qe(M.id,!1));b(C),N(I)},setMinZoom:g=>{const{panZoom:m,maxZoom:y}=h();m==null||m.setScaleExtent([g,y]),f({minZoom:g})},setMaxZoom:g=>{const{panZoom:m,minZoom:y}=h();m==null||m.setScaleExtent([y,g]),f({maxZoom:g})},setTranslateExtent:g=>{var m;(m=h().panZoom)==null||m.setTranslateExtent(g),f({translateExtent:g})},setPaneClickDistance:g=>{var m;(m=h().panZoom)==null||m.setClickDistance(g)},resetSelectedElements:()=>{const{edges:g,nodes:m,triggerNodeChanges:y,triggerEdgeChanges:_,elementsSelectable:p}=h();if(!p)return;const b=m.reduce((w,E)=>E.selected?[...w,Qe(E.id,!1)]:w,[]),N=g.reduce((w,E)=>E.selected?[...w,Qe(E.id,!1)]:w,[]);y(b),_(N)},setNodeExtent:g=>{const{nodes:m,nodeLookup:y,parentLookup:_,nodeOrigin:p,elevateNodesOnSelect:b,nodeExtent:N}=h();g[0][0]===N[0][0]&&g[0][1]===N[0][1]&&g[1][0]===N[1][0]&&g[1][1]===N[1][1]||(hc(m,y,_,{nodeOrigin:p,nodeExtent:g,elevateNodesOnSelect:b,checkEquality:!1}),f({nodeExtent:g}))},panBy:g=>{const{transform:m,width:y,height:_,panZoom:p,translateExtent:b}=h();return uN({delta:g,panZoom:p,transform:m,translateExtent:b,width:y,height:_})},setCenter:async(g,m,y)=>{const{width:_,height:p,maxZoom:b,panZoom:N}=h();if(!N)return Promise.resolve(!1);const w=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:b;return await N.setViewport({x:_/2-g*w,y:p/2-m*w,zoom:w},{duration:y==null?void 0:y.duration,ease:y==null?void 0:y.ease,interpolate:y==null?void 0:y.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{f({connection:{...bv}})},updateConnection:g=>{f({connection:g})},reset:()=>f({...dd()})}},Object.is);function Sy({initialNodes:e,initialEdges:t,defaultNodes:r,defaultEdges:n,initialWidth:i,initialHeight:a,initialMinZoom:s,initialMaxZoom:o,initialFitViewOptions:c,fitView:l,nodeOrigin:u,nodeExtent:d,children:f}){const[h]=T.useState(()=>yS({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:a,fitView:l,minZoom:s,maxZoom:o,fitViewOptions:c,nodeOrigin:u,nodeExtent:d}));return v.jsx(FN,{value:h,children:v.jsx(uE,{children:f})})}function xS({children:e,nodes:t,edges:r,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:o,fitViewOptions:c,minZoom:l,maxZoom:u,nodeOrigin:d,nodeExtent:f}){return T.useContext(nn)?v.jsx(v.Fragment,{children:e}):v.jsx(Sy,{initialNodes:t,initialEdges:r,defaultNodes:n,defaultEdges:i,initialWidth:a,initialHeight:s,fitView:o,initialFitViewOptions:c,initialMinZoom:l,initialMaxZoom:u,nodeOrigin:d,nodeExtent:f,children:e})}const bS={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function _S({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:i,nodeTypes:a,edgeTypes:s,onNodeClick:o,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:x,onConnectEnd:g,onClickConnectStart:m,onClickConnectEnd:y,onNodeMouseEnter:_,onNodeMouseMove:p,onNodeMouseLeave:b,onNodeContextMenu:N,onNodeDoubleClick:w,onNodeDragStart:E,onNodeDrag:C,onNodeDragStop:I,onNodesDelete:M,onEdgesDelete:q,onDelete:j,onSelectionChange:O,onSelectionDragStart:S,onSelectionDrag:R,onSelectionDragStop:A,onSelectionContextMenu:P,onSelectionStart:$,onSelectionEnd:L,onBeforeDelete:B,connectionMode:H,connectionLineType:V=Ze.Bezier,connectionLineStyle:Y,connectionLineComponent:k,connectionLineContainerStyle:D,deleteKeyCode:F="Backspace",selectionKeyCode:z="Shift",selectionOnDrag:G=!1,selectionMode:U=Yt.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:ee=Hr()?"Meta":"Control",zoomActivationKeyCode:Q=Hr()?"Meta":"Control",snapToGrid:K,snapGrid:W,onlyRenderVisibleElements:X=!1,selectNodesOnDrag:ne,nodesDraggable:te,autoPanOnNodeFocus:pe,nodesConnectable:xe,nodesFocusable:dt,nodeOrigin:je=Zv,edgesFocusable:de,edgesReconnectable:oe,elementsSelectable:Ue=!0,defaultViewport:Pe=JN,minZoom:Ye=.5,maxZoom:We=2,translateExtent:Le=Ut,preventScrolling:lr=!0,nodeExtent:ft,defaultMarkerColor:Sn="#b1b1b7",zoomOnScroll:dr=!0,zoomOnPinch:Ce=!0,panOnScroll:Oe=!1,panOnScrollSpeed:Z0=.5,panOnScrollMode:J0=rt.Free,zoomOnDoubleClick:Q0=!0,panOnDrag:ex=!0,onPaneClick:tx,onPaneMouseEnter:rx,onPaneMouseMove:nx,onPaneMouseLeave:ix,onPaneScroll:ax,onPaneContextMenu:sx,paneClickDistance:tl=0,nodeClickDistance:ox=0,children:ux,onReconnect:cx,onReconnectStart:lx,onReconnectEnd:dx,onEdgeContextMenu:fx,onEdgeDoubleClick:hx,onEdgeMouseEnter:px,onEdgeMouseMove:gx,onEdgeMouseLeave:mx,reconnectRadius:vx=10,onNodesChange:yx,onEdgesChange:xx,noDragClassName:bx="nodrag",noWheelClassName:_x="nowheel",noPanClassName:rl="nopan",fitView:nl,fitViewOptions:il,connectOnClick:wx,attributionPosition:Nx,proOptions:Ex,defaultEdgeOptions:Sx,elevateNodesOnSelect:Cx,elevateEdgesOnSelect:Ix,disableKeyboardA11y:al=!1,autoPanOnConnect:Ax,autoPanOnNodeDrag:Rx,autoPanSpeed:qx,connectionRadius:Tx,isValidConnection:kx,onError:Mx,style:jx,id:sl,nodeDragThreshold:Px,connectionDragThreshold:Lx,viewport:Ox,onViewportChange:Dx,width:Fx,height:$x,colorMode:Bx="light",debug:zx,onScroll:fr,ariaLabelConfig:Hx,...Gx},Vx){const Cn=sl||"1",Ux=rE(Bx),Yx=T.useCallback(ol=>{ol.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),fr==null||fr(ol)},[fr]);return v.jsx("div",{"data-testid":"rf__wrapper",...Gx,onScroll:Yx,style:{...jx,...bS},ref:Vx,className:ue(["react-flow",i,Ux]),id:sl,role:"application",children:v.jsxs(xS,{nodes:e,edges:t,width:Fx,height:$x,fitView:nl,fitViewOptions:il,minZoom:Ye,maxZoom:We,nodeOrigin:je,nodeExtent:ft,children:[v.jsx(vS,{onInit:l,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:p,onNodeMouseLeave:b,onNodeContextMenu:N,onNodeDoubleClick:w,nodeTypes:a,edgeTypes:s,connectionLineType:V,connectionLineStyle:Y,connectionLineComponent:k,connectionLineContainerStyle:D,selectionKeyCode:z,selectionOnDrag:G,selectionMode:U,deleteKeyCode:F,multiSelectionKeyCode:ee,panActivationKeyCode:Z,zoomActivationKeyCode:Q,onlyRenderVisibleElements:X,defaultViewport:Pe,translateExtent:Le,minZoom:Ye,maxZoom:We,preventScrolling:lr,zoomOnScroll:dr,zoomOnPinch:Ce,zoomOnDoubleClick:Q0,panOnScroll:Oe,panOnScrollSpeed:Z0,panOnScrollMode:J0,panOnDrag:ex,onPaneClick:tx,onPaneMouseEnter:rx,onPaneMouseMove:nx,onPaneMouseLeave:ix,onPaneScroll:ax,onPaneContextMenu:sx,paneClickDistance:tl,nodeClickDistance:ox,onSelectionContextMenu:P,onSelectionStart:$,onSelectionEnd:L,onReconnect:cx,onReconnectStart:lx,onReconnectEnd:dx,onEdgeContextMenu:fx,onEdgeDoubleClick:hx,onEdgeMouseEnter:px,onEdgeMouseMove:gx,onEdgeMouseLeave:mx,reconnectRadius:vx,defaultMarkerColor:Sn,noDragClassName:bx,noWheelClassName:_x,noPanClassName:rl,rfId:Cn,disableKeyboardA11y:al,nodeExtent:ft,viewport:Ox,onViewportChange:Dx}),v.jsx(tE,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:h,onConnectStart:x,onConnectEnd:g,onClickConnectStart:m,onClickConnectEnd:y,nodesDraggable:te,autoPanOnNodeFocus:pe,nodesConnectable:xe,nodesFocusable:dt,edgesFocusable:de,edgesReconnectable:oe,elementsSelectable:Ue,elevateNodesOnSelect:Cx,elevateEdgesOnSelect:Ix,minZoom:Ye,maxZoom:We,nodeExtent:ft,onNodesChange:yx,onEdgesChange:xx,snapToGrid:K,snapGrid:W,connectionMode:H,translateExtent:Le,connectOnClick:wx,defaultEdgeOptions:Sx,fitView:nl,fitViewOptions:il,onNodesDelete:M,onEdgesDelete:q,onDelete:j,onNodeDragStart:E,onNodeDrag:C,onNodeDragStop:I,onSelectionDrag:R,onSelectionDragStart:S,onSelectionDragStop:A,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:rl,nodeOrigin:je,rfId:Cn,autoPanOnConnect:Ax,autoPanOnNodeDrag:Rx,autoPanSpeed:qx,onError:Mx,connectionRadius:Tx,isValidConnection:kx,selectNodesOnDrag:ne,nodeDragThreshold:Px,connectionDragThreshold:Lx,onBeforeDelete:B,paneClickDistance:tl,debug:zx,ariaLabelConfig:Hx}),v.jsx(ZN,{onSelectionChange:O}),ux,v.jsx(UN,{proOptions:Ex,position:Nx}),v.jsx(VN,{rfId:Cn,disableKeyboardA11y:al})]})})}var wS=ty(_S);function NS(e){const[t,r]=T.useState(e),n=T.useCallback(i=>r(a=>Qv(i,a)),[]);return[t,r,n]}function ES(e){const[t,r]=T.useState(e),n=T.useCallback(i=>r(a=>ey(i,a)),[]);return[t,r,n]}function SS({dimensions:e,lineWidth:t,variant:r,className:n}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ue(["react-flow__background-pattern",r,n])})}function CS({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:ue(["react-flow__background-pattern","dots",t])})}var $e;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})($e||($e={}));const IS={[$e.Dots]:1,[$e.Lines]:1,[$e.Cross]:6},AS=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Cy({id:e,variant:t=$e.Dots,gap:r=20,size:n,lineWidth:i=1,offset:a=0,color:s,bgColor:o,style:c,className:l,patternClassName:u}){const d=T.useRef(null),{transform:f,patternId:h}=re(AS,se),x=n||IS[t],g=t===$e.Dots,m=t===$e.Cross,y=Array.isArray(r)?r:[r,r],_=[y[0]*f[2]||1,y[1]*f[2]||1],p=x*f[2],b=Array.isArray(a)?a:[a,a],N=m?[p,p]:_,w=[b[0]*f[2]||1+N[0]/2,b[1]*f[2]||1+N[1]/2],E=`${h}${e||""}`;return v.jsxs("svg",{className:ue(["react-flow__background",l]),style:{...c,...an,"--xy-background-color-props":o,"--xy-background-pattern-color-props":s},ref:d,"data-testid":"rf__background",children:[v.jsx("pattern",{id:E,x:f[0]%_[0],y:f[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`,children:g?v.jsx(CS,{radius:p/2,className:u}):v.jsx(SS,{dimensions:N,lineWidth:i,variant:t,className:u})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}Cy.displayName="Background";const RS=T.memo(Cy);function qS(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function TS(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function kS(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function MS(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function jS(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function wr({children:e,className:t,...r}){return v.jsx("button",{type:"button",className:ue(["react-flow__controls-button",t]),...r,children:e})}const PS=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Iy({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:o,onInteractiveChange:c,className:l,children:u,position:d="bottom-left",orientation:f="vertical","aria-label":h}){const x=ie(),{isInteractive:g,minZoomReached:m,maxZoomReached:y,ariaLabelConfig:_}=re(PS,se),{zoomIn:p,zoomOut:b,fitView:N}=jc(),w=()=>{p(),a==null||a()},E=()=>{b(),s==null||s()},C=()=>{N(i),o==null||o()},I=()=>{x.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),c==null||c(!g)},M=f==="horizontal"?"horizontal":"vertical";return v.jsxs(nr,{className:ue(["react-flow__controls",M,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??_["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(wr,{onClick:w,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:y,children:v.jsx(qS,{})}),v.jsx(wr,{onClick:E,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:m,children:v.jsx(TS,{})})]}),r&&v.jsx(wr,{className:"react-flow__controls-fitview",onClick:C,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:v.jsx(kS,{})}),n&&v.jsx(wr,{className:"react-flow__controls-interactive",onClick:I,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:g?v.jsx(jS,{}):v.jsx(MS,{})}),u]})}Iy.displayName="Controls";const LS=T.memo(Iy);function OS({id:e,x:t,y:r,width:n,height:i,style:a,color:s,strokeColor:o,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:f,onClick:h}){const{background:x,backgroundColor:g}=a||{},m=s||x||g;return v.jsx("rect",{className:ue(["react-flow__minimap-node",{selected:f},l]),x:t,y:r,rx:u,ry:u,width:n,height:i,style:{fill:m,stroke:o,strokeWidth:c},shapeRendering:d,onClick:h?y=>h(y,e):void 0})}const DS=T.memo(OS),FS=e=>e.nodes.map(t=>t.id),Pn=e=>e instanceof Function?e:()=>e;function $S({nodeStrokeColor:e,nodeColor:t,nodeClassName:r="",nodeBorderRadius:n=5,nodeStrokeWidth:i,nodeComponent:a=DS,onClick:s}){const o=re(FS,se),c=Pn(t),l=Pn(e),u=Pn(r),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:o.map(f=>v.jsx(zS,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:n,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:d},f))})}function BS({id:e,nodeColorFunc:t,nodeStrokeColorFunc:r,nodeClassNameFunc:n,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:o,onClick:c}){const{node:l,x:u,y:d,width:f,height:h}=re(x=>{const{internals:g}=x.nodeLookup.get(e),m=g.userNode,{x:y,y:_}=g.positionAbsolute,{width:p,height:b}=He(m);return{node:m,x:y,y:_,width:p,height:b}},se);return!l||l.hidden||!Iv(l)?null:v.jsx(o,{x:u,y:d,width:f,height:h,style:l.style,selected:!!l.selected,className:n(l),color:t(l),borderRadius:i,strokeColor:r(l),strokeWidth:a,shapeRendering:s,onClick:c,id:l.id})}const zS=T.memo(BS);var HS=T.memo($S);const GS=200,VS=150,US=e=>!e.hidden,YS=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Cv(tr(e.nodeLookup,{filter:US}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},WS="react-flow__minimap-desc";function Ay({style:e,className:t,nodeStrokeColor:r,nodeColor:n,nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:o,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:h,onNodeClick:x,pannable:g=!1,zoomable:m=!1,ariaLabel:y,inversePan:_,zoomStep:p=10,offsetScale:b=5}){const N=ie(),w=T.useRef(null),{boundingRect:E,viewBB:C,rfId:I,panZoom:M,translateExtent:q,flowWidth:j,flowHeight:O,ariaLabelConfig:S}=re(YS,se),R=(e==null?void 0:e.width)??GS,A=(e==null?void 0:e.height)??VS,P=E.width/R,$=E.height/A,L=Math.max(P,$),B=L*R,H=L*A,V=b*L,Y=E.x-(B-E.width)/2-V,k=E.y-(H-E.height)/2-V,D=B+V*2,F=H+V*2,z=`${WS}-${I}`,G=T.useRef(0),U=T.useRef();G.current=L,T.useEffect(()=>{if(w.current&&M)return U.current=mN({domNode:w.current,panZoom:M,getTransform:()=>N.getState().transform,getViewScale:()=>G.current}),()=>{var K;(K=U.current)==null||K.destroy()}},[M]),T.useEffect(()=>{var K;(K=U.current)==null||K.update({translateExtent:q,width:j,height:O,inversePan:_,pannable:g,zoomStep:p,zoomable:m})},[g,m,_,p,q,j,O]);const Z=h?K=>{var ne;const[W,X]=((ne=U.current)==null?void 0:ne.pointer(K))||[0,0];h(K,{x:W,y:X})}:void 0,ee=x?T.useCallback((K,W)=>{const X=N.getState().nodeLookup.get(W).internals.userNode;x(K,X)},[]):void 0,Q=y??S["minimap.ariaLabel"];return v.jsx(nr,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*L:void 0,"--xy-minimap-node-background-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:ue(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:R,height:A,viewBox:`${Y} ${k} ${D} ${F}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":z,ref:w,onClick:Z,children:[Q&&v.jsx("title",{id:z,children:Q}),v.jsx(HS,{onClick:ee,nodeColor:n,nodeStrokeColor:r,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:o}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${Y-V},${k-V}h${D+V*2}v${F+V*2}h${-D-V*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ay.displayName="MiniMap";const XS=T.memo(Ay),KS=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,ZS={[Nt.Line]:"right",[Nt.Handle]:"bottom-right"};function JS({nodeId:e,position:t,variant:r=Nt.Handle,className:n,style:i=void 0,children:a,color:s,minWidth:o=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:f,autoScale:h=!0,shouldResize:x,onResizeStart:g,onResize:m,onResizeEnd:y}){const _=ay(),p=typeof e=="string"?e:_,b=ie(),N=T.useRef(null),w=r===Nt.Handle,E=re(T.useCallback(KS(w&&h),[w,h]),se),C=T.useRef(null),I=t??ZS[r];T.useEffect(()=>{if(!(!N.current||!p))return C.current||(C.current=kN({domNode:N.current,nodeId:p,getStoreItems:()=>{const{nodeLookup:q,transform:j,snapGrid:O,snapToGrid:S,nodeOrigin:R,domNode:A}=b.getState();return{nodeLookup:q,transform:j,snapGrid:O,snapToGrid:S,nodeOrigin:R,paneDomNode:A}},onChange:(q,j)=>{const{triggerNodeChanges:O,nodeLookup:S,parentLookup:R,nodeOrigin:A}=b.getState(),P=[],$={x:q.x,y:q.y},L=S.get(p);if(L&&L.expandParent&&L.parentId){const B=L.origin??A,H=q.width??L.measured.width??0,V=q.height??L.measured.height??0,Y={id:L.id,parentId:L.parentId,rect:{width:H,height:V,...Av({x:q.x??L.position.x,y:q.y??L.position.y},{width:H,height:V},L.parentId,S,B)}},k=Mc([Y],S,R,A);P.push(...k),$.x=q.x?Math.max(B[0]*H,q.x):void 0,$.y=q.y?Math.max(B[1]*V,q.y):void 0}if($.x!==void 0&&$.y!==void 0){const B={id:p,type:"position",position:{...$}};P.push(B)}if(q.width!==void 0&&q.height!==void 0){const H={id:p,type:"dimensions",resizing:!0,setAttributes:f?f==="horizontal"?"width":"height":!0,dimensions:{width:q.width,height:q.height}};P.push(H)}for(const B of j){const H={...B,type:"position"};P.push(H)}O(P)},onEnd:({width:q,height:j})=>{const O={id:p,type:"dimensions",resizing:!1,dimensions:{width:q,height:j}};b.getState().triggerNodeChanges([O])}})),C.current.update({controlPosition:I,boundaries:{minWidth:o,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,resizeDirection:f,onResizeStart:g,onResize:m,onResizeEnd:y,shouldResize:x}),()=>{var q;(q=C.current)==null||q.destroy()}},[I,o,c,l,u,d,g,m,y,x]);const M=I.split("-");return v.jsx("div",{className:ue(["react-flow__resize-control","nodrag",...M,r,n]),ref:N,style:{...i,scale:E,...s&&{[w?"backgroundColor":"borderColor"]:s}},children:a})}T.memo(JS);const fd={foundation:"bg-primary text-primary-foreground border-primary",technique:"bg-chart-2 text-white border-chart-2",combination:"bg-chart-1 text-white border-chart-1",application:"bg-accent text-accent-foreground border-accent",usecase:"bg-chart-5 text-white border-chart-5",product:"bg-destructive text-destructive-foreground border-destructive",default:"bg-muted text-muted-foreground border-muted"},QS={Finance:"bg-blue-500",Medical:"bg-green-500",Legal:"bg-purple-500",Education:"bg-yellow-500",Retail:"bg-orange-500",Gaming:"bg-pink-500",Technology:"bg-cyan-500",Banking:"bg-indigo-500",Insurance:"bg-red-500",Government:"bg-gray-500",Pharma:"bg-emerald-500",Automotive:"bg-teal-500",Energy:"bg-amber-500",Manufacturing:"bg-slate-500",Transportation:"bg-violet-500",Logistics:"bg-lime-500",Entertainment:"bg-rose-500",Media:"bg-fuchsia-500",Marketing:"bg-sky-500",Fashion:"bg-pink-400",Software:"bg-blue-400","Customer Service":"bg-indigo-400",Art:"bg-purple-400",Blockchain:"bg-orange-400",Training:"bg-yellow-400"},eC=e=>fd[e]||fd.default,tC=e=>QS[e]||"bg-gray-400",hd={background:"transparent",border:"none",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1,height:1},rC=({data:e,selected:t})=>{const r=e,n=T.useMemo(()=>eC(r.nodeType),[r.nodeType]),i=T.useMemo(()=>`px-3 py-2 rounded-md border shadow-sm transition-all min-w-[140px] relative ${n} ${t?"ring-2 ring-ring ring-offset-1":""}`,[n,t]);return v.jsxs(v.Fragment,{children:[v.jsx(Et,{type:"source",position:J.Top,id:"source",className:"!opacity-0 !pointer-events-none",style:hd}),v.jsx(Et,{type:"target",position:J.Bottom,id:"target",className:"!opacity-0 !pointer-events-none",style:hd}),v.jsx("div",{className:i,children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"font-medium text-xs",children:r.label}),r.nodeType!=="product"&&r.nodeType!=="application"&&v.jsx("div",{className:"text-xs opacity-70 mt-0.5",children:r.nodeType.charAt(0).toUpperCase()+r.nodeType.slice(1)}),(r.nodeType==="product"||r.nodeType==="application")&&r.domains&&r.domains.length>0&&v.jsxs("div",{className:"flex justify-center gap-0.5 mt-1",children:[r.domains.slice(0,3).map(a=>v.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${tC(a)}`,title:a},a)),r.domains.length>3&&v.jsxs("div",{className:"text-xs opacity-50",children:["+",r.domains.length-3]})]})]})})]})},nC=T.memo(rC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],aC=le("calendar",iC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oC=le("check",sC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],cC=le("chevron-down",uC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dC=le("chevron-up",lC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mc=le("circle-check-big",fC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pC=le("circle",hC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],pd=le("cpu",gC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Nr=le("file-json",mC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],yC=le("git-branch",vC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Er=le("grid-3x3",xC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],_C=le("maximize-2",bC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],NC=le("minimize-2",wC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],SC=le("settings-2",EC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],gd=le("tag",CC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],AC=le("trending-up",IC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qC=le("triangle-alert",RC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Pt=le("upload",TC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ry=le("x",kC),qy=T.createContext(void 0),Ty=()=>{const e=T.useContext(qy);if(!e)throw new Error("useData must be used within a DataProvider");return e},MC=[{id:"sample1",type:"custom",position:{x:250,y:100},data:{label:"AI Foundation",nodeType:"foundation",category:"core",domains:["Technology"]}},{id:"sample2",type:"custom",position:{x:100,y:200},data:{label:"Machine Learning",nodeType:"technique",category:"algorithm",domains:["Technology","Finance"]}},{id:"sample3",type:"custom",position:{x:400,y:200},data:{label:"Deep Learning",nodeType:"technique",category:"algorithm",domains:["Technology","Medical"]}},{id:"sample4",type:"custom",position:{x:250,y:300},data:{label:"Neural Networks",nodeType:"combination",category:"hybrid",domains:["Technology"]}},{id:"sample5",type:"custom",position:{x:250,y:400},data:{label:"AI Assistant",nodeType:"product",category:"solution",domains:["Technology","Retail","Education"]}}],jC=[{id:"e1-2",source:"sample1",target:"sample2",type:"simplebezier",data:{edgeType:"dependency"}},{id:"e1-3",source:"sample1",target:"sample3",type:"simplebezier",data:{edgeType:"dependency"}},{id:"e2-4",source:"sample2",target:"sample4",type:"simplebezier",data:{edgeType:"evolution"}},{id:"e3-4",source:"sample3",target:"sample4",type:"simplebezier",data:{edgeType:"evolution"}},{id:"e4-5",source:"sample4",target:"sample5",type:"simplebezier",data:{edgeType:"implementation"}}],PC={sample1:{description:"The foundational concepts and theories that underpin artificial intelligence",capabilities:["Pattern Recognition","Data Processing","Automated Decision Making"],limitations:["Requires Large Datasets","Computational Resources"],useCases:["Automation","Prediction","Optimization"],technicalDetails:"Core algorithms and mathematical frameworks for AI systems"},sample2:{description:"Algorithms that enable computers to learn from and make predictions based on data",capabilities:["Supervised Learning","Unsupervised Learning","Feature Extraction"],limitations:["Data Quality Dependency","Overfitting Risk"],useCases:["Classification","Regression","Clustering"],technicalDetails:"Statistical methods and optimization techniques for model training"},sample3:{description:"Advanced machine learning using artificial neural networks with multiple layers",capabilities:["Complex Pattern Recognition","Feature Learning","High-dimensional Data Processing"],limitations:["Requires Massive Data","Black Box Nature","High Computational Cost"],useCases:["Image Recognition","Natural Language Processing","Speech Recognition"],technicalDetails:"Multi-layer neural networks with backpropagation and gradient descent"},sample4:{description:"Computational models inspired by biological neural networks",capabilities:["Non-linear Modeling","Parallel Processing","Adaptive Learning"],limitations:["Training Complexity","Interpretability"],useCases:["Pattern Recognition","Function Approximation","Time Series Prediction"],technicalDetails:"Interconnected nodes with weights, biases, and activation functions"},sample5:{description:"AI-powered virtual assistant providing automated help and support",capabilities:["Natural Language Understanding","Task Automation","Contextual Responses"],limitations:["Limited to Training Data","May Produce Errors"],useCases:["Customer Service","Personal Assistance","Information Retrieval"],technicalDetails:"Combines NLP, machine learning, and dialogue management systems"}},LC=({children:e})=>{const[t,r]=T.useState(MC),[n,i]=T.useState(jC),[a,s]=T.useState(PC),o=l=>{r(l.nodes),i(l.edges),s(l.descriptions)},c=t.length>0;return v.jsx(qy.Provider,{value:{nodes:t,edges:n,descriptions:a,setData:o,hasData:c},children:e})},OC=e=>({Finance:"bg-blue-500",Medical:"bg-green-500",Legal:"bg-purple-500",Education:"bg-yellow-500",Retail:"bg-orange-500",Gaming:"bg-pink-500",Technology:"bg-cyan-500",Banking:"bg-indigo-500",Insurance:"bg-red-500",Government:"bg-gray-500",Pharma:"bg-emerald-500",Automotive:"bg-teal-500",Energy:"bg-amber-500",Manufacturing:"bg-slate-500",Transportation:"bg-violet-500",Logistics:"bg-lime-500",Entertainment:"bg-rose-500",Media:"bg-fuchsia-500",Marketing:"bg-sky-500",Fashion:"bg-pink-400",Software:"bg-blue-400","Customer Service":"bg-indigo-400",Art:"bg-purple-400",Blockchain:"bg-orange-400",Training:"bg-yellow-400"})[e]||"bg-gray-400",DC=({node:e,onClose:t,connectedNodes:r})=>{const{descriptions:n}=Ty();if(!e)return null;const i=n[e.id];return i?v.jsxs("div",{className:"fixed right-0 top-0 h-full w-96 bg-background border-l shadow-xl z-50 overflow-hidden flex flex-col",children:[v.jsx("div",{className:"p-6 border-b bg-muted/30",children:v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold text-foreground",children:i.title}),v.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.data.nodeType.toUpperCase()})]}),v.jsx("button",{onClick:t,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:v.jsx(Ry,{className:"w-5 h-5"})})]})}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[v.jsx("div",{children:v.jsx("p",{className:"text-muted-foreground",children:i.shortDescription})}),e.data.domains&&e.data.domains.length>0&&v.jsxs("div",{children:[v.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[v.jsx(gd,{className:"w-4 h-4"}),"Industries & Domains"]}),v.jsx("div",{className:"flex flex-wrap gap-2",children:e.data.domains.map(a=>v.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-muted text-muted-foreground text-xs font-medium border",children:[v.jsx("div",{className:`w-2 h-2 rounded-full ${OC(a)}`}),a]},a))})]}),i.tags&&i.tags.length>0&&v.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map(a=>v.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium",children:[v.jsx(gd,{className:"w-3 h-3"}),a]},a))}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Overview"}),v.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:i.fullDescription})]}),i.keyFeatures&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Key Features"}),v.jsx("ul",{className:"space-y-1",children:i.keyFeatures.map((a,s)=>v.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[v.jsx("span",{className:"text-primary mr-2",children:"•"}),a]},s))})]}),i.useCases&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Use Cases"}),v.jsx("ul",{className:"space-y-1",children:i.useCases.map((a,s)=>v.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[v.jsx("span",{className:"text-primary mr-2",children:"•"}),a]},s))})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.yearIntroduced&&v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(aC,{className:"w-4 h-4 text-muted-foreground"}),v.jsxs("span",{className:"text-muted-foreground",children:["Introduced: ",i.yearIntroduced]})]}),i.marketSize&&v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(AC,{className:"w-4 h-4 text-muted-foreground"}),v.jsx("span",{className:"text-muted-foreground",children:i.marketSize})]})]}),r&&v.jsxs("div",{className:"space-y-4",children:[r.source.length>0&&v.jsxs("div",{children:[v.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[v.jsx(pd,{className:"w-4 h-4"}),"Enabled By"]}),v.jsx("div",{className:"space-y-1",children:r.source.map(a=>v.jsxs("div",{className:"text-sm text-muted-foreground bg-muted/30 p-2 rounded",children:[a.data.label,v.jsxs("span",{className:"text-xs ml-2 opacity-60",children:["(",a.data.nodeType,")"]})]},a.id))})]}),r.target.length>0&&v.jsxs("div",{children:[v.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[v.jsx(pd,{className:"w-4 h-4"}),"Enables"]}),v.jsx("div",{className:"space-y-1",children:r.target.map(a=>v.jsxs("div",{className:"text-sm text-muted-foreground bg-muted/30 p-2 rounded",children:[a.data.label,v.jsxs("span",{className:"text-xs ml-2 opacity-60",children:["(",a.data.nodeType,")"]})]},a.id))})]})]}),i.relatedLinks&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Learn More"}),v.jsx("div",{className:"space-y-2",children:i.relatedLinks.map((a,s)=>v.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[v.jsx(tb,{className:"w-4 h-4"}),a.title]},s))})]})]})]}):null},FC={hierarchical:["nodeSpacingX","nodeSpacingY","rankSpacing","alignment","ranker","animate"],radial:["radialSpacing","startAngle","endAngle","animate"],TB:["nodeSpacingX","nodeSpacingY","rankSpacing","animate"],LR:["nodeSpacingX","nodeSpacingY","rankSpacing","animate"],BT:["nodeSpacingX","nodeSpacingY","rankSpacing","animate"],RL:["nodeSpacingX","nodeSpacingY","rankSpacing","animate"],manual:["animate"]},$C=({config:e,onConfigChange:t,onLayoutSelect:r,selectedLayout:n})=>{const[i,a]=Ie.useState(!1),s=Ie.useMemo(()=>({...e,radialSpacing:e.radialSpacing??200,startAngle:e.startAngle??0,endAngle:e.endAngle??360}),[e]),o=[{id:"hierarchical",name:"Hierarchical",icon:yC},{id:"radial",name:"Radial",icon:pC},{id:"TB",name:"Top-Bottom",icon:Er},{id:"LR",name:"Left-Right",icon:Er},{id:"BT",name:"Bottom-Top",icon:Er},{id:"RL",name:"Right-Left",icon:Er}],c=FC[n]||[],l=c.length>0;return v.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[v.jsx(SC,{className:"w-4 h-4"}),"Layout Options"]}),l&&v.jsx("button",{onClick:()=>a(!i),className:"p-1 hover:bg-muted rounded transition-colors",title:i?"Collapse settings":"Expand settings",children:i?v.jsx(NC,{className:"w-4 h-4"}):v.jsx(_C,{className:"w-4 h-4"})})]}),v.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.map(u=>{const d=u.icon;return v.jsxs("button",{onClick:()=>r(u.id),className:`px-3 py-2 text-xs font-medium rounded-md transition-colors flex items-center justify-center gap-1 ${n===u.id?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,title:u.name,children:[v.jsx(d,{className:"w-3 h-3"}),v.jsx("span",{className:"hidden sm:inline",children:u.name})]},u.id)})}),i&&l&&v.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[c.includes("nodeSpacingX")&&v.jsxs("div",{children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[v.jsx("span",{children:"Horizontal Spacing"}),v.jsxs("span",{children:[s.nodeSpacingX,"px"]})]}),v.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:s.nodeSpacingX,onChange:u=>t({...s,nodeSpacingX:parseInt(u.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),c.includes("nodeSpacingY")&&v.jsxs("div",{children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[v.jsx("span",{children:"Vertical Spacing"}),v.jsxs("span",{children:[s.nodeSpacingY,"px"]})]}),v.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:s.nodeSpacingY,onChange:u=>t({...s,nodeSpacingY:parseInt(u.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),c.includes("rankSpacing")&&v.jsxs("div",{children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[v.jsx("span",{children:"Layer Distance"}),v.jsxs("span",{children:[s.rankSpacing,"px"]})]}),v.jsx("input",{type:"range",min:"100",max:"400",step:"10",value:s.rankSpacing,onChange:u=>t({...s,rankSpacing:parseInt(u.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),c.includes("radialSpacing")&&v.jsxs("div",{children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[v.jsx("span",{children:"Radial Distance"}),v.jsxs("span",{children:[s.radialSpacing,"px"]})]}),v.jsx("input",{type:"range",min:"100",max:"500",step:"20",value:s.radialSpacing,onChange:u=>t({...s,radialSpacing:parseInt(u.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),c.includes("startAngle")&&v.jsxs("div",{children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[v.jsx("span",{children:"Start Angle"}),v.jsxs("span",{children:[s.startAngle,"°"]})]}),v.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:s.startAngle,onChange:u=>t({...s,startAngle:parseInt(u.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),c.includes("endAngle")&&v.jsxs("div",{children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[v.jsx("span",{children:"End Angle"}),v.jsxs("span",{children:[s.endAngle,"°"]})]}),v.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:s.endAngle,onChange:u=>t({...s,endAngle:parseInt(u.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),c.includes("alignment")&&v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Node Alignment"}),v.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"UL",label:"Up-Left"},{value:"UR",label:"Up-Right"},{value:"DL",label:"Down-Left"},{value:"DR",label:"Down-Right"}].map(u=>v.jsx("button",{onClick:()=>t({...s,alignment:u.value}),className:`px-2 py-1 text-xs rounded transition-colors ${s.alignment===u.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:u.label},u.value))})]}),c.includes("ranker")&&v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Layout Algorithm"}),v.jsxs("select",{value:s.ranker,onChange:u=>t({...s,ranker:u.target.value}),className:"w-full px-2 py-1 text-xs bg-muted text-foreground rounded border border-border",children:[v.jsx("option",{value:"network-simplex",children:"Network Simplex (Balanced)"}),v.jsx("option",{value:"tight-tree",children:"Tight Tree (Compact)"}),v.jsx("option",{value:"longest-path",children:"Longest Path (Hierarchical)"})]})]}),c.includes("animate")&&v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Animate Transitions"}),v.jsx("button",{onClick:()=>t({...s,animate:!s.animate}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.animate?"bg-primary":"bg-muted"}`,children:v.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${s.animate?"translate-x-5":"translate-x-1"}`})})]}),v.jsx("button",{onClick:()=>{t({nodeSpacingX:100,nodeSpacingY:100,rankSpacing:150,alignment:"UL",ranker:"network-simplex",animate:!0,radialSpacing:200,startAngle:0,endAngle:360})},className:"w-full px-3 py-1.5 text-xs bg-secondary text-secondary-foreground hover:bg-secondary/80 rounded-md transition-colors",children:"Reset to Defaults"})]}),i&&!l&&v.jsx("div",{className:"pt-3 border-t",children:v.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"No configuration options for manual layout"})})]})};function md({className:e,...t}){return v.jsx("textarea",{"data-slot":"textarea",className:Zt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function Be(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function BC(e){const t=e+"CollectionProvider",[r,n]=yc(t),[i,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=g=>{const{scope:m,children:y}=g,_=Ie.useRef(null),p=Ie.useRef(new Map).current;return v.jsx(i,{scope:m,itemMap:p,collectionRef:_,children:y})};s.displayName=t;const o=e+"CollectionSlot",c=ul(o),l=Ie.forwardRef((g,m)=>{const{scope:y,children:_}=g,p=a(o,y),b=kr(m,p.collectionRef);return v.jsx(c,{ref:b,children:_})});l.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",f=ul(u),h=Ie.forwardRef((g,m)=>{const{scope:y,children:_,...p}=g,b=Ie.useRef(null),N=kr(m,b),w=a(u,y);return Ie.useEffect(()=>(w.itemMap.set(b,{ref:b,...p}),()=>void w.itemMap.delete(b))),v.jsx(f,{[d]:"",ref:N,children:_})});h.displayName=u;function x(g){const m=a(e+"CollectionConsumer",g);return Ie.useCallback(()=>{const _=m.collectionRef.current;if(!_)return[];const p=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(m.itemMap.values()).sort((w,E)=>p.indexOf(w.ref.current)-p.indexOf(E.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:s,Slot:l,ItemSlot:h},x,n]}var Vr=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},zC=$m[" useId ".trim().toString()]||(()=>{}),HC=0;function ky(e){const[t,r]=T.useState(zC());return Vr(()=>{r(n=>n??String(HC++))},[e]),e||(t?`radix-${t}`:"")}function GC(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var VC=$m[" useInsertionEffect ".trim().toString()]||Vr;function My({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,a,s]=UC({defaultProp:t,onChange:r}),o=e!==void 0,c=o?e:i;{const u=T.useRef(e!==void 0);T.useEffect(()=>{const d=u.current;d!==o&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,n])}const l=T.useCallback(u=>{var d;if(o){const f=YC(u)?u(e):u;f!==e&&((d=s.current)==null||d.call(s,f))}else a(u)},[o,e,a,s]);return[c,l]}function UC({defaultProp:e,onChange:t}){const[r,n]=T.useState(e),i=T.useRef(r),a=T.useRef(t);return VC(()=>{a.current=t},[t]),T.useEffect(()=>{var s;i.current!==r&&((s=a.current)==null||s.call(a,r),i.current=r)},[r,i]),[r,n,a]}function YC(e){return typeof e=="function"}var WC=T.createContext(void 0);function jy(e){const t=T.useContext(WC);return e||t||"ltr"}var Ln="rovingFocusGroup.onEntryFocus",XC={bubbles:!1,cancelable:!0},ir="RovingFocusGroup",[vc,Py,KC]=BC(ir),[ZC,Ly]=yc(ir,[KC]),[JC,QC]=ZC(ir),Oy=T.forwardRef((e,t)=>v.jsx(vc.Provider,{scope:e.__scopeRovingFocusGroup,children:v.jsx(vc.Slot,{scope:e.__scopeRovingFocusGroup,children:v.jsx(eI,{...e,ref:t})})}));Oy.displayName=ir;var eI=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=T.useRef(null),h=kr(t,f),x=jy(a),[g,m]=My({prop:s,defaultProp:o??null,onChange:c,caller:ir}),[y,_]=T.useState(!1),p=GC(l),b=Py(r),N=T.useRef(!1),[w,E]=T.useState(0);return T.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(Ln,p),()=>C.removeEventListener(Ln,p)},[p]),v.jsx(JC,{scope:r,orientation:n,dir:x,loop:i,currentTabStopId:g,onItemFocus:T.useCallback(C=>m(C),[m]),onItemShiftTab:T.useCallback(()=>_(!0),[]),onFocusableItemAdd:T.useCallback(()=>E(C=>C+1),[]),onFocusableItemRemove:T.useCallback(()=>E(C=>C-1),[]),children:v.jsx(St.div,{tabIndex:y||w===0?-1:0,"data-orientation":n,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:Be(e.onMouseDown,()=>{N.current=!0}),onFocus:Be(e.onFocus,C=>{const I=!N.current;if(C.target===C.currentTarget&&I&&!y){const M=new CustomEvent(Ln,XC);if(C.currentTarget.dispatchEvent(M),!M.defaultPrevented){const q=b().filter(A=>A.focusable),j=q.find(A=>A.active),O=q.find(A=>A.id===g),R=[j,O,...q].filter(Boolean).map(A=>A.ref.current);$y(R,u)}}N.current=!1}),onBlur:Be(e.onBlur,()=>_(!1))})})}),Dy="RovingFocusGroupItem",Fy=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,children:s,...o}=e,c=ky(),l=a||c,u=QC(Dy,r),d=u.currentTabStopId===l,f=Py(r),{onFocusableItemAdd:h,onFocusableItemRemove:x,currentTabStopId:g}=u;return T.useEffect(()=>{if(n)return h(),()=>x()},[n,h,x]),v.jsx(vc.ItemSlot,{scope:r,id:l,focusable:n,active:i,children:v.jsx(St.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Be(e.onMouseDown,m=>{n?u.onItemFocus(l):m.preventDefault()}),onFocus:Be(e.onFocus,()=>u.onItemFocus(l)),onKeyDown:Be(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){u.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const y=nI(m,u.orientation,u.dir);if(y!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let p=f().filter(b=>b.focusable).map(b=>b.ref.current);if(y==="last")p.reverse();else if(y==="prev"||y==="next"){y==="prev"&&p.reverse();const b=p.indexOf(m.currentTarget);p=u.loop?iI(p,b+1):p.slice(b+1)}setTimeout(()=>$y(p))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:g!=null}):s})})});Fy.displayName=Dy;var tI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function nI(e,t,r){const n=rI(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return tI[n]}function $y(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function iI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var aI=Oy,sI=Fy;function oI(e,t){return T.useReducer((r,n)=>t[r][n]??r,e)}var By=e=>{const{present:t,children:r}=e,n=uI(t),i=typeof r=="function"?r({present:n.isPresent}):T.Children.only(r),a=kr(n.ref,cI(i));return typeof r=="function"||n.isPresent?T.cloneElement(i,{ref:a}):null};By.displayName="Presence";function uI(e){const[t,r]=T.useState(),n=T.useRef(null),i=T.useRef(e),a=T.useRef("none"),s=e?"mounted":"unmounted",[o,c]=oI(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const l=Sr(n.current);a.current=o==="mounted"?l:"none"},[o]),Vr(()=>{const l=n.current,u=i.current;if(u!==e){const f=a.current,h=Sr(l);e?c("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Vr(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,d=h=>{const g=Sr(n.current).includes(h.animationName);if(h.target===t&&g&&(c("ANIMATION_END"),!i.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},f=h=>{h.target===t&&(a.current=Sr(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:T.useCallback(l=>{n.current=l?getComputedStyle(l):null,r(l)},[])}}function Sr(e){return(e==null?void 0:e.animationName)||"none"}function cI(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var on="Tabs",[lI,X2]=yc(on,[Ly]),zy=Ly(),[dI,Lc]=lI(on),Hy=T.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:o,activationMode:c="automatic",...l}=e,u=jy(o),[d,f]=My({prop:n,onChange:i,defaultProp:a??"",caller:on});return v.jsx(dI,{scope:r,baseId:ky(),value:d,onValueChange:f,orientation:s,dir:u,activationMode:c,children:v.jsx(St.div,{dir:u,"data-orientation":s,...l,ref:t})})});Hy.displayName=on;var Gy="TabsList",Vy=T.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,a=Lc(Gy,r),s=zy(r);return v.jsx(aI,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:n,children:v.jsx(St.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});Vy.displayName=Gy;var Uy="TabsTrigger",Yy=T.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=e,s=Lc(Uy,r),o=zy(r),c=Ky(s.baseId,n),l=Zy(s.baseId,n),u=n===s.value;return v.jsx(sI,{asChild:!0,...o,focusable:!i,active:u,children:v.jsx(St.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:Be(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?s.onValueChange(n):d.preventDefault()}),onKeyDown:Be(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&s.onValueChange(n)}),onFocus:Be(e.onFocus,()=>{const d=s.activationMode!=="manual";!u&&!i&&d&&s.onValueChange(n)})})})});Yy.displayName=Uy;var Wy="TabsContent",Xy=T.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...s}=e,o=Lc(Wy,r),c=Ky(o.baseId,n),l=Zy(o.baseId,n),u=n===o.value,d=T.useRef(u);return T.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),v.jsx(By,{present:i||u,children:({present:f})=>v.jsx(St.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&a})})});Xy.displayName=Wy;function Ky(e,t){return`${e}-trigger-${t}`}function Zy(e,t){return`${e}-content-${t}`}var fI=Hy,hI=Vy,pI=Yy,gI=Xy;function mI({className:e,...t}){return v.jsx(fI,{"data-slot":"tabs",className:Zt("flex flex-col gap-2",e),...t})}function vI({className:e,...t}){return v.jsx(hI,{"data-slot":"tabs-list",className:Zt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function vd({className:e,...t}){return v.jsx(pI,{"data-slot":"tabs-trigger",className:Zt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function yd({className:e,...t}){return v.jsx(gI,{"data-slot":"tabs-content",className:Zt("flex-1 outline-none",e),...t})}const yI=({onDataLoaded:e})=>{const[t,r]=T.useState(""),[n,i]=T.useState(""),[a,s]=T.useState(null),[o,c]=T.useState(!1),[l,u]=T.useState(!1),[d,f]=T.useState(!1),h=T.useCallback(()=>{s(null),c(!1);try{if(!t.trim())throw new Error("Graph data is required");const w=JSON.parse(t);if(!w.nodes||!Array.isArray(w.nodes))throw new Error('Graph data must contain a "nodes" array');if(!w.edges||!Array.isArray(w.edges))throw new Error('Graph data must contain an "edges" array');w.nodes.forEach((C,I)=>{if(!C.id)throw new Error(`Node at index ${I} is missing "id"`);if(!C.type)throw new Error(`Node at index ${I} is missing "type"`);if(!C.position||typeof C.position.x!="number"||typeof C.position.y!="number")throw new Error(`Node at index ${I} has invalid position`);if(!C.data||!C.data.label)throw new Error(`Node at index ${I} is missing data.label`)}),w.edges.forEach((C,I)=>{if(!C.id)throw new Error(`Edge at index ${I} is missing "id"`);if(!C.source)throw new Error(`Edge at index ${I} is missing "source"`);if(!C.target)throw new Error(`Edge at index ${I} is missing "target"`)});let E={};if(n.trim()){const C=JSON.parse(n);if(C.descriptions&&typeof C.descriptions=="object")E=C.descriptions;else if(typeof C=="object")E=C;else throw new Error('Descriptions must be an object or contain a "descriptions" object')}e({nodes:w.nodes,edges:w.edges,descriptions:E}),c(!0),setTimeout(()=>c(!1),3e3)}catch(w){s(w instanceof Error?w.message:"Invalid JSON data")}},[t,n,e]),x=T.useCallback((w,E)=>{var I;const C=(I=w.target.files)==null?void 0:I[0];C&&g(C,E)},[]),g=T.useCallback((w,E)=>{if(!w.name.endsWith(".json")){s("Please upload a JSON file");return}const C=new FileReader;C.onload=I=>{var q;const M=(q=I.target)==null?void 0:q.result;try{JSON.parse(M),E==="graph"?(r(M),s(null)):(i(M),s(null))}catch{s(`Invalid JSON in ${w.name}`)}},C.onerror=()=>{s(`Failed to read ${w.name}`)},C.readAsText(w)},[]),m=T.useCallback(w=>{w.preventDefault(),w.stopPropagation()},[]),y=T.useCallback((w,E)=>{w.preventDefault(),w.stopPropagation(),E==="graph"?u(!0):f(!0)},[]),_=T.useCallback((w,E)=>{w.preventDefault(),w.stopPropagation(),E==="graph"?u(!1):f(!1)},[]),p=T.useCallback((w,E)=>{w.preventDefault(),w.stopPropagation(),E==="graph"?u(!1):f(!1);const I=Array.from(w.dataTransfer.files).find(M=>M.name.endsWith(".json"));I?g(I,E):s("Please drop a JSON file")},[g]);return v.jsxs(Kx,{className:"w-full max-w-4xl mx-auto",children:[v.jsxs(Zx,{children:[v.jsx(Jx,{children:"Load JSON Data"}),v.jsx(Qx,{children:"Upload or paste your graph data and node descriptions in JSON format"})]}),v.jsxs(eb,{children:[v.jsxs(mI,{defaultValue:"paste",className:"w-full",children:[v.jsxs(vI,{className:"grid w-full grid-cols-2",children:[v.jsx(vd,{value:"paste",children:"Paste JSON"}),v.jsx(vd,{value:"upload",children:"Upload Files"})]}),v.jsxs(yd,{value:"paste",className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsxs("label",{className:"text-sm font-medium",children:["Graph Data (Required) ",v.jsx(Nr,{className:"inline w-4 h-4 ml-1"})]}),v.jsxs("div",{onDragOver:m,onDragEnter:w=>y(w,"graph"),onDragLeave:w=>_(w,"graph"),onDrop:w=>p(w,"graph"),className:`relative transition-all duration-200 ${l?"ring-2 ring-primary ring-offset-2 bg-primary/5":""}`,children:[v.jsx(md,{placeholder:`{
  "nodes": [
    {
      "id": "node1",
      "type": "custom",
      "position": { "x": 0, "y": 0 },
      "data": {
        "label": "Sample Node",
        "nodeType": "foundation",
        "category": "core",
        "domains": ["Technology"]
      }
    }
  ],
  "edges": [
    {
      "id": "edge1",
      "source": "node1",
      "target": "node2",
      "type": "smoothstep",
      "data": { "edgeType": "dependency" }
    }
  ]
}`,value:t,onChange:w=>r(w.target.value),className:"font-mono text-xs h-64"}),l&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-md pointer-events-none",children:v.jsxs("div",{className:"text-center",children:[v.jsx(Pt,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),v.jsx("p",{className:"text-sm font-medium",children:"Drop JSON file here"})]})})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("label",{className:"text-sm font-medium",children:["Node Descriptions (Optional) ",v.jsx(Nr,{className:"inline w-4 h-4 ml-1"})]}),v.jsxs("div",{onDragOver:m,onDragEnter:w=>y(w,"descriptions"),onDragLeave:w=>_(w,"descriptions"),onDrop:w=>p(w,"descriptions"),className:`relative transition-all duration-200 ${d?"ring-2 ring-primary ring-offset-2 bg-primary/5":""}`,children:[v.jsx(md,{placeholder:`{
  "descriptions": {
    "node1": {
      "description": "This is a sample node description",
      "capabilities": ["Capability 1", "Capability 2"],
      "limitations": ["Limitation 1"],
      "useCases": ["Use case 1"],
      "technicalDetails": "Technical implementation details"
    }
  }
}`,value:n,onChange:w=>i(w.target.value),className:"font-mono text-xs h-64"}),d&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-md pointer-events-none",children:v.jsxs("div",{className:"text-center",children:[v.jsx(Pt,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),v.jsx("p",{className:"text-sm font-medium",children:"Drop JSON file here"})]})})]})]})]}),v.jsxs(yd,{value:"upload",className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"text-sm font-medium",children:"Graph Data File (Required)"}),v.jsxs("div",{onDragOver:m,onDragEnter:w=>y(w,"graph"),onDragLeave:w=>_(w,"graph"),onDrop:w=>p(w,"graph"),className:`border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${l?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50"}`,children:[v.jsx(Pt,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),v.jsx("p",{className:"text-sm font-medium mb-1",children:"Drop JSON file here or click to browse"}),v.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Supports .json files"}),v.jsx("input",{type:"file",accept:".json",onChange:w=>x(w,"graph"),className:"hidden",id:"graph-file-input"}),v.jsxs("label",{htmlFor:"graph-file-input",className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md bg-primary text-primary-foreground hover:bg-primary/90 cursor-pointer",children:[v.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Browse Files"]})]}),t&&v.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[v.jsx(mc,{className:"w-4 h-4"})," Graph data loaded"]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"text-sm font-medium",children:"Descriptions File (Optional)"}),v.jsxs("div",{onDragOver:m,onDragEnter:w=>y(w,"descriptions"),onDragLeave:w=>_(w,"descriptions"),onDrop:w=>p(w,"descriptions"),className:`border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${d?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50"}`,children:[v.jsx(Nr,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),v.jsx("p",{className:"text-sm font-medium mb-1",children:"Drop JSON file here or click to browse"}),v.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Supports .json files"}),v.jsx("input",{type:"file",accept:".json",onChange:w=>x(w,"descriptions"),className:"hidden",id:"desc-file-input"}),v.jsxs("label",{htmlFor:"desc-file-input",className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md bg-primary text-primary-foreground hover:bg-primary/90 cursor-pointer",children:[v.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Browse Files"]})]}),n&&v.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[v.jsx(mc,{className:"w-4 h-4"})," Descriptions loaded"]})]})]})]}),a&&v.jsxs(cl,{variant:"destructive",className:"mt-4",children:[v.jsx(Bm,{className:"h-4 w-4"}),v.jsx(ll,{children:a})]}),o&&v.jsx(cl,{className:"mt-4 border-green-500 text-green-600",children:v.jsx(ll,{children:"Data loaded successfully!"})}),v.jsx("div",{className:"flex justify-end mt-6",children:v.jsx(Bt,{onClick:h,disabled:!t,children:"Load Data"})})]})]})};function xI(e,t,r){const n=[],i=new Map(e.map(u=>[u.id,u])),a=new Map,s=new Map;t.forEach(u=>{a.has(u.source)||a.set(u.source,[]),a.get(u.source).push(u),s.has(u.target)||s.set(u.target,[]),s.get(u.target).push(u)});const o={product:0,application:0,technique:0,foundation:0,combination:0,domain:0,other:0};let c=0;const l=new Set;return e.forEach(u=>{var x,g,m,y,_;const d=((x=u.data)==null?void 0:x.nodeType)||"other";o[d]=(o[d]||0)+1,r[u.id]?c++:n.push({type:"warning",category:"missing_description",nodeId:u.id,message:`Node "${((g=u.data)==null?void 0:g.label)||u.id}" is missing a description`,details:`Node type: ${d}`}),d==="product"&&((s.get(u.id)||[]).some(N=>{var E;const w=i.get(N.source);return((E=w==null?void 0:w.data)==null?void 0:E.nodeType)==="application"})||n.push({type:"error",category:"invalid_hierarchy",nodeId:u.id,message:`Product node "${((m=u.data)==null?void 0:m.label)||u.id}" is not connected from any application node`,details:"All product nodes must be connected from at least one application node"})),d==="application"&&((s.get(u.id)||[]).some(N=>{var C;const w=i.get(N.source),E=(C=w==null?void 0:w.data)==null?void 0:C.nodeType;return E==="technique"||E==="foundation"||E==="combination"})||n.push({type:"error",category:"invalid_hierarchy",nodeId:u.id,message:`Application node "${((y=u.data)==null?void 0:y.label)||u.id}" has no technique or technology connections`,details:"Application nodes must have at least one connection from a technique, foundation, or combination node"}));const f=s.has(u.id),h=a.has(u.id);!f&&!h&&(l.add(u.id),n.push({type:"warning",category:"orphaned_node",nodeId:u.id,message:`Node "${((_=u.data)==null?void 0:_.label)||u.id}" has no connections`,details:"This node is not connected to any other nodes in the graph"}))}),t.forEach(u=>{i.has(u.source)||n.push({type:"error",category:"missing_connection",message:`Edge "${u.id}" references non-existent source node "${u.source}"`}),i.has(u.target)||n.push({type:"error",category:"missing_connection",message:`Edge "${u.id}" references non-existent target node "${u.target}"`})}),n.sort((u,d)=>u.type!==d.type?u.type==="error"?-1:1:u.category.localeCompare(d.category)),{isValid:n.filter(u=>u.type==="error").length===0,issues:n,stats:{totalNodes:e.length,totalEdges:t.length,nodesWithDescriptions:c,productNodes:o.product,applicationNodes:o.application,techniqueNodes:o.technique,foundationNodes:o.foundation,orphanedNodes:l.size}}}function bI(e){return e==="error"?"text-red-500":"text-yellow-500"}function Cr(e){switch(e){case"missing_connection":return"🔗";case"missing_description":return"📝";case"invalid_hierarchy":return"🏗️";case"orphaned_node":return"🏝️";default:return"⚠️"}}const _I=({nodes:e,edges:t,descriptions:r,onNodeClick:n})=>{const[i,a]=T.useState(!1),[s,o]=T.useState("all"),[c,l]=T.useState(!1),u=T.useMemo(()=>xI(e,t,r),[e,t,r]),d=T.useMemo(()=>s==="all"?u.issues:u.issues.filter(p=>p.category===s),[u.issues,s]),f=u.issues.filter(p=>p.type==="error").length,h=u.issues.filter(p=>p.type==="warning").length,x=T.useMemo(()=>{const p={};return u.issues.forEach(b=>{p[b.category]=(p[b.category]||0)+1}),p},[u.issues]),g=()=>f>0?"border-red-500 bg-red-50 dark:bg-red-950/20":h>0?"border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20":"border-green-500 bg-green-50 dark:bg-green-950/20",m=()=>f>0?v.jsx(Bm,{className:"w-4 h-4 text-red-500"}):h>0?v.jsx(qC,{className:"w-4 h-4 text-yellow-500"}):v.jsx(mc,{className:"w-4 h-4 text-green-500"}),y=()=>{const p=[];if(p.push("=== AI CAPABILITY MAP VALIDATION REPORT ==="),p.push(`Generated: ${new Date().toLocaleString()}`),p.push(""),p.push("SUMMARY"),p.push("-------"),p.push(`Total Nodes: ${u.stats.totalNodes}`),p.push(`Total Edges: ${u.stats.totalEdges}`),p.push(`Nodes with Descriptions: ${u.stats.nodesWithDescriptions}/${u.stats.totalNodes}`),p.push(`Orphaned Nodes: ${u.stats.orphanedNodes}`),p.push(""),p.push(`Errors: ${f}`),p.push(`Warnings: ${h}`),p.push(""),u.issues.reduce((b,N)=>(b[N.category]||(b[N.category]=[]),b[N.category].push(N),b),{}),u.issues.length>0){p.push("ISSUES"),p.push("------");const b=u.issues.filter(w=>w.type==="error");b.length>0&&(p.push(""),p.push("### ERRORS ###"),b.forEach((w,E)=>{p.push(`${E+1}. [${Cr(w.category)}] ${w.message}`),w.details&&p.push(`   Details: ${w.details}`),w.nodeId&&p.push(`   Node ID: ${w.nodeId}`)}));const N=u.issues.filter(w=>w.type==="warning");N.length>0&&(p.push(""),p.push("### WARNINGS ###"),N.forEach((w,E)=>{p.push(`${E+1}. [${Cr(w.category)}] ${w.message}`),w.details&&p.push(`   Details: ${w.details}`),w.nodeId&&p.push(`   Node ID: ${w.nodeId}`)}))}else p.push("✅ All validation checks passed!");return p.push(""),p.push("=== END OF REPORT ==="),p.join(`
`)},_=async()=>{try{const p=y();await navigator.clipboard.writeText(p),l(!0),setTimeout(()=>l(!1),2e3)}catch(p){console.error("Failed to copy:",p)}};return v.jsxs("div",{className:`fixed top-4 right-4 max-w-md bg-card border-2 rounded-lg shadow-xl z-40 ${g()}`,children:[v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 transition-colors rounded p-2 -m-2",onClick:()=>a(!i),children:[v.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[m(),v.jsx("span",{className:"font-semibold whitespace-nowrap",children:"Data Validation"}),(f>0||h>0)&&v.jsxs("div",{className:"flex gap-1",children:[f>0&&v.jsxs("span",{className:"text-xs px-2 py-0.5 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 rounded-full whitespace-nowrap",children:[f," error",f!==1?"s":""]}),h>0&&v.jsxs("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 rounded-full whitespace-nowrap",children:[h," warning",h!==1?"s":""]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Bt,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:p=>{p.stopPropagation(),_()},title:"Copy validation report to clipboard",children:c?v.jsxs(v.Fragment,{children:[v.jsx(oC,{className:"w-3 h-3 mr-1"}),v.jsx("span",{className:"text-xs",children:"Copied!"})]}):v.jsxs(v.Fragment,{children:[v.jsx(rb,{className:"w-3 h-3 mr-1"}),v.jsx("span",{className:"text-xs",children:"Copy Report"})]})}),i?v.jsx(cC,{className:"w-4 h-4"}):v.jsx(dC,{className:"w-4 h-4"})]})]})}),i&&v.jsxs("div",{className:"border-t border-border",children:[v.jsx("div",{className:"p-4 bg-muted/30",children:v.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[v.jsxs("div",{children:["Total Nodes: ",v.jsx("span",{className:"font-semibold",children:u.stats.totalNodes})]}),v.jsxs("div",{children:["Total Edges: ",v.jsx("span",{className:"font-semibold",children:u.stats.totalEdges})]}),v.jsxs("div",{children:["With Descriptions: ",v.jsxs("span",{className:"font-semibold",children:[u.stats.nodesWithDescriptions,"/",u.stats.totalNodes]})]}),v.jsxs("div",{children:["Orphaned Nodes: ",v.jsx("span",{className:"font-semibold",children:u.stats.orphanedNodes})]}),v.jsxs("div",{children:["Product Nodes: ",v.jsx("span",{className:"font-semibold",children:u.stats.productNodes})]}),v.jsxs("div",{children:["Application Nodes: ",v.jsx("span",{className:"font-semibold",children:u.stats.applicationNodes})]})]})}),u.issues.length>0&&v.jsx("div",{className:"p-4 border-t border-border",children:v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-1 text-xs rounded transition-colors ${s==="all"?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:["All (",u.issues.length,")"]}),Object.entries(x).map(([p,b])=>v.jsxs("button",{onClick:()=>o(p),className:`px-3 py-1 text-xs rounded transition-colors ${s===p?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:[Cr(p)," ",p.replace("_"," ")," (",b,")"]},p))]})}),v.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.length===0?v.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:u.issues.length===0?"✅ All validation checks passed!":"No issues in this category"}):v.jsx("div",{className:"p-4 space-y-2",children:d.map((p,b)=>v.jsx("div",{className:"p-3 bg-background rounded-lg border text-sm space-y-1",children:v.jsxs("div",{className:"flex items-start justify-between gap-2",children:[v.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[v.jsx("span",{className:"mt-0.5",children:Cr(p.category)}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:`font-medium ${bI(p.type)}`,children:p.message}),p.details&&v.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:p.details})]})]}),p.nodeId&&n&&v.jsx(Bt,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>n(p.nodeId),children:"Go to node"})]})},b))})})]})]})};function Oc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var On,xd;function wI(){if(xd)return On;xd=1;function e(){this.__data__=[],this.size=0}return On=e,On}var Dn,bd;function Ct(){if(bd)return Dn;bd=1;function e(t,r){return t===r||t!==t&&r!==r}return Dn=e,Dn}var Fn,_d;function un(){if(_d)return Fn;_d=1;var e=Ct();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return Fn=t,Fn}var $n,wd;function NI(){if(wd)return $n;wd=1;var e=un(),t=Array.prototype,r=t.splice;function n(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():r.call(a,s,1),--this.size,!0}return $n=n,$n}var Bn,Nd;function EI(){if(Nd)return Bn;Nd=1;var e=un();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return Bn=t,Bn}var zn,Ed;function SI(){if(Ed)return zn;Ed=1;var e=un();function t(r){return e(this.__data__,r)>-1}return zn=t,zn}var Hn,Sd;function CI(){if(Sd)return Hn;Sd=1;var e=un();function t(r,n){var i=this.__data__,a=e(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return Hn=t,Hn}var Gn,Cd;function cn(){if(Cd)return Gn;Cd=1;var e=wI(),t=NI(),r=EI(),n=SI(),i=CI();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Gn=a,Gn}var Vn,Id;function II(){if(Id)return Vn;Id=1;var e=cn();function t(){this.__data__=new e,this.size=0}return Vn=t,Vn}var Un,Ad;function AI(){if(Ad)return Un;Ad=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Un=e,Un}var Yn,Rd;function RI(){if(Rd)return Yn;Rd=1;function e(t){return this.__data__.get(t)}return Yn=e,Yn}var Wn,qd;function qI(){if(qd)return Wn;qd=1;function e(t){return this.__data__.has(t)}return Wn=e,Wn}var Xn,Td;function Jy(){if(Td)return Xn;Td=1;var e=typeof hr=="object"&&hr&&hr.Object===Object&&hr;return Xn=e,Xn}var Kn,kd;function Se(){if(kd)return Kn;kd=1;var e=Jy(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Kn=r,Kn}var Zn,Md;function It(){if(Md)return Zn;Md=1;var e=Se(),t=e.Symbol;return Zn=t,Zn}var Jn,jd;function TI(){if(jd)return Jn;jd=1;var e=It(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=r.call(s,i),c=s[i];try{s[i]=void 0;var l=!0}catch{}var u=n.call(s);return l&&(o?s[i]=c:delete s[i]),u}return Jn=a,Jn}var Qn,Pd;function kI(){if(Pd)return Qn;Pd=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Qn=r,Qn}var ei,Ld;function ot(){if(Ld)return ei;Ld=1;var e=It(),t=TI(),r=kI(),n="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:n:a&&a in Object(o)?t(o):r(o)}return ei=s,ei}var ti,Od;function ve(){if(Od)return ti;Od=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return ti=e,ti}var ri,Dd;function ar(){if(Dd)return ri;Dd=1;var e=ot(),t=ve(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var c=e(o);return c==n||c==i||c==r||c==a}return ri=s,ri}var ni,Fd;function MI(){if(Fd)return ni;Fd=1;var e=Se(),t=e["__core-js_shared__"];return ni=t,ni}var ii,$d;function jI(){if($d)return ii;$d=1;var e=MI(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return ii=r,ii}var ai,Bd;function Qy(){if(Bd)return ai;Bd=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return ai=r,ai}var si,zd;function PI(){if(zd)return si;zd=1;var e=ar(),t=jI(),r=ve(),n=Qy(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,c=s.toString,l=o.hasOwnProperty,u=RegExp("^"+c.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!r(f)||t(f))return!1;var h=e(f)?u:a;return h.test(n(f))}return si=d,si}var oi,Hd;function LI(){if(Hd)return oi;Hd=1;function e(t,r){return t==null?void 0:t[r]}return oi=e,oi}var ui,Gd;function ut(){if(Gd)return ui;Gd=1;var e=PI(),t=LI();function r(n,i){var a=t(n,i);return e(a)?a:void 0}return ui=r,ui}var ci,Vd;function Dc(){if(Vd)return ci;Vd=1;var e=ut(),t=Se(),r=e(t,"Map");return ci=r,ci}var li,Ud;function ln(){if(Ud)return li;Ud=1;var e=ut(),t=e(Object,"create");return li=t,li}var di,Yd;function OI(){if(Yd)return di;Yd=1;var e=ln();function t(){this.__data__=e?e(null):{},this.size=0}return di=t,di}var fi,Wd;function DI(){if(Wd)return fi;Wd=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return fi=e,fi}var hi,Xd;function FI(){if(Xd)return hi;Xd=1;var e=ln(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return n.call(s,a)?s[a]:void 0}return hi=i,hi}var pi,Kd;function $I(){if(Kd)return pi;Kd=1;var e=ln(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var a=this.__data__;return e?a[i]!==void 0:r.call(a,i)}return pi=n,pi}var gi,Zd;function BI(){if(Zd)return gi;Zd=1;var e=ln(),t="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=e&&i===void 0?t:i,this}return gi=r,gi}var mi,Jd;function zI(){if(Jd)return mi;Jd=1;var e=OI(),t=DI(),r=FI(),n=$I(),i=BI();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,mi=a,mi}var vi,Qd;function HI(){if(Qd)return vi;Qd=1;var e=zI(),t=cn(),r=Dc();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return vi=n,vi}var yi,ef;function GI(){if(ef)return yi;ef=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return yi=e,yi}var xi,tf;function dn(){if(tf)return xi;tf=1;var e=GI();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return xi=t,xi}var bi,rf;function VI(){if(rf)return bi;rf=1;var e=dn();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return bi=t,bi}var _i,nf;function UI(){if(nf)return _i;nf=1;var e=dn();function t(r){return e(this,r).get(r)}return _i=t,_i}var wi,af;function YI(){if(af)return wi;af=1;var e=dn();function t(r){return e(this,r).has(r)}return wi=t,wi}var Ni,sf;function WI(){if(sf)return Ni;sf=1;var e=dn();function t(r,n){var i=e(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return Ni=t,Ni}var Ei,of;function Fc(){if(of)return Ei;of=1;var e=HI(),t=VI(),r=UI(),n=YI(),i=WI();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Ei=a,Ei}var Si,uf;function XI(){if(uf)return Si;uf=1;var e=cn(),t=Dc(),r=Fc(),n=200;function i(a,s){var o=this.__data__;if(o instanceof e){var c=o.__data__;if(!t||c.length<n-1)return c.push([a,s]),this.size=++o.size,this;o=this.__data__=new r(c)}return o.set(a,s),this.size=o.size,this}return Si=i,Si}var Ci,cf;function fn(){if(cf)return Ci;cf=1;var e=cn(),t=II(),r=AI(),n=RI(),i=qI(),a=XI();function s(o){var c=this.__data__=new e(o);this.size=c.size}return s.prototype.clear=t,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Ci=s,Ci}var Ii,lf;function $c(){if(lf)return Ii;lf=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return Ii=e,Ii}var Ai,df;function e0(){if(df)return Ai;df=1;var e=ut(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Ai=t,Ai}var Ri,ff;function hn(){if(ff)return Ri;ff=1;var e=e0();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return Ri=t,Ri}var qi,hf;function pn(){if(hf)return qi;hf=1;var e=hn(),t=Ct(),r=Object.prototype,n=r.hasOwnProperty;function i(a,s,o){var c=a[s];(!(n.call(a,s)&&t(c,o))||o===void 0&&!(s in a))&&e(a,s,o)}return qi=i,qi}var Ti,pf;function sr(){if(pf)return Ti;pf=1;var e=pn(),t=hn();function r(n,i,a,s){var o=!a;a||(a={});for(var c=-1,l=i.length;++c<l;){var u=i[c],d=s?s(a[u],n[u],u,a,n):void 0;d===void 0&&(d=n[u]),o?t(a,u,d):e(a,u,d)}return a}return Ti=r,Ti}var ki,gf;function KI(){if(gf)return ki;gf=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return ki=e,ki}var Mi,mf;function Me(){if(mf)return Mi;mf=1;function e(t){return t!=null&&typeof t=="object"}return Mi=e,Mi}var ji,vf;function ZI(){if(vf)return ji;vf=1;var e=ot(),t=Me(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return ji=n,ji}var Pi,yf;function or(){if(yf)return Pi;yf=1;var e=ZI(),t=Me(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return Pi=a,Pi}var Li,xf;function ce(){if(xf)return Li;xf=1;var e=Array.isArray;return Li=e,Li}var Lt={exports:{}},Oi,bf;function JI(){if(bf)return Oi;bf=1;function e(){return!1}return Oi=e,Oi}Lt.exports;var _f;function At(){return _f||(_f=1,function(e,t){var r=Se(),n=JI(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?r.Buffer:void 0,c=o?o.isBuffer:void 0,l=c||n;e.exports=l}(Lt,Lt.exports)),Lt.exports}var Di,wf;function gn(){if(wf)return Di;wf=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return Di=r,Di}var Fi,Nf;function Bc(){if(Nf)return Fi;Nf=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Fi=t,Fi}var $i,Ef;function QI(){if(Ef)return $i;Ef=1;var e=ot(),t=Bc(),r=Me(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",c="[object Function]",l="[object Map]",u="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",x="[object String]",g="[object WeakMap]",m="[object ArrayBuffer]",y="[object DataView]",_="[object Float32Array]",p="[object Float64Array]",b="[object Int8Array]",N="[object Int16Array]",w="[object Int32Array]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",I="[object Uint16Array]",M="[object Uint32Array]",q={};q[_]=q[p]=q[b]=q[N]=q[w]=q[E]=q[C]=q[I]=q[M]=!0,q[n]=q[i]=q[m]=q[a]=q[y]=q[s]=q[o]=q[c]=q[l]=q[u]=q[d]=q[f]=q[h]=q[x]=q[g]=!1;function j(O){return r(O)&&t(O.length)&&!!q[e(O)]}return $i=j,$i}var Bi,Sf;function mn(){if(Sf)return Bi;Sf=1;function e(t){return function(r){return t(r)}}return Bi=e,Bi}var Ot={exports:{}};Ot.exports;var Cf;function zc(){return Cf||(Cf=1,function(e,t){var r=Jy(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,s=a&&r.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Ot,Ot.exports)),Ot.exports}var zi,If;function ur(){if(If)return zi;If=1;var e=QI(),t=mn(),r=zc(),n=r&&r.isTypedArray,i=n?t(n):e;return zi=i,zi}var Hi,Af;function t0(){if(Af)return Hi;Af=1;var e=KI(),t=or(),r=ce(),n=At(),i=gn(),a=ur(),s=Object.prototype,o=s.hasOwnProperty;function c(l,u){var d=r(l),f=!d&&t(l),h=!d&&!f&&n(l),x=!d&&!f&&!h&&a(l),g=d||f||h||x,m=g?e(l.length,String):[],y=m.length;for(var _ in l)(u||o.call(l,_))&&!(g&&(_=="length"||h&&(_=="offset"||_=="parent")||x&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,y)))&&m.push(_);return m}return Hi=c,Hi}var Gi,Rf;function vn(){if(Rf)return Gi;Rf=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return Gi=t,Gi}var Vi,qf;function r0(){if(qf)return Vi;qf=1;function e(t,r){return function(n){return t(r(n))}}return Vi=e,Vi}var Ui,Tf;function eA(){if(Tf)return Ui;Tf=1;var e=r0(),t=e(Object.keys,Object);return Ui=t,Ui}var Yi,kf;function Hc(){if(kf)return Yi;kf=1;var e=vn(),t=eA(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))n.call(a,o)&&o!="constructor"&&s.push(o);return s}return Yi=i,Yi}var Wi,Mf;function Ge(){if(Mf)return Wi;Mf=1;var e=ar(),t=Bc();function r(n){return n!=null&&t(n.length)&&!e(n)}return Wi=r,Wi}var Xi,jf;function Je(){if(jf)return Xi;jf=1;var e=t0(),t=Hc(),r=Ge();function n(i){return r(i)?e(i):t(i)}return Xi=n,Xi}var Ki,Pf;function tA(){if(Pf)return Ki;Pf=1;var e=sr(),t=Je();function r(n,i){return n&&e(i,t(i),n)}return Ki=r,Ki}var Zi,Lf;function rA(){if(Lf)return Zi;Lf=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return Zi=e,Zi}var Ji,Of;function nA(){if(Of)return Ji;Of=1;var e=ve(),t=vn(),r=rA(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!e(s))return r(s);var o=t(s),c=[];for(var l in s)l=="constructor"&&(o||!i.call(s,l))||c.push(l);return c}return Ji=a,Ji}var Qi,Df;function ct(){if(Df)return Qi;Df=1;var e=t0(),t=nA(),r=Ge();function n(i){return r(i)?e(i,!0):t(i)}return Qi=n,Qi}var ea,Ff;function iA(){if(Ff)return ea;Ff=1;var e=sr(),t=ct();function r(n,i){return n&&e(i,t(i),n)}return ea=r,ea}var Dt={exports:{}};Dt.exports;var $f;function n0(){return $f||($f=1,function(e,t){var r=Se(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,s=a?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var d=l.length,f=o?o(d):new l.constructor(d);return l.copy(f),f}e.exports=c}(Dt,Dt.exports)),Dt.exports}var ta,Bf;function i0(){if(Bf)return ta;Bf=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return ta=e,ta}var ra,zf;function a0(){if(zf)return ra;zf=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=0,s=[];++n<i;){var o=t[n];r(o,n,t)&&(s[a++]=o)}return s}return ra=e,ra}var na,Hf;function s0(){if(Hf)return na;Hf=1;function e(){return[]}return na=e,na}var ia,Gf;function Gc(){if(Gf)return ia;Gf=1;var e=a0(),t=s0(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return n.call(s,o)}))}:t;return ia=a,ia}var aa,Vf;function aA(){if(Vf)return aa;Vf=1;var e=sr(),t=Gc();function r(n,i){return e(n,t(n),i)}return aa=r,aa}var sa,Uf;function Vc(){if(Uf)return sa;Uf=1;function e(t,r){for(var n=-1,i=r.length,a=t.length;++n<i;)t[a+n]=r[n];return t}return sa=e,sa}var oa,Yf;function yn(){if(Yf)return oa;Yf=1;var e=r0(),t=e(Object.getPrototypeOf,Object);return oa=t,oa}var ua,Wf;function o0(){if(Wf)return ua;Wf=1;var e=Vc(),t=yn(),r=Gc(),n=s0(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,r(s)),s=t(s);return o}:n;return ua=a,ua}var ca,Xf;function sA(){if(Xf)return ca;Xf=1;var e=sr(),t=o0();function r(n,i){return e(n,t(n),i)}return ca=r,ca}var la,Kf;function u0(){if(Kf)return la;Kf=1;var e=Vc(),t=ce();function r(n,i,a){var s=i(n);return t(n)?s:e(s,a(n))}return la=r,la}var da,Zf;function c0(){if(Zf)return da;Zf=1;var e=u0(),t=Gc(),r=Je();function n(i){return e(i,r,t)}return da=n,da}var fa,Jf;function oA(){if(Jf)return fa;Jf=1;var e=u0(),t=o0(),r=ct();function n(i){return e(i,r,t)}return fa=n,fa}var ha,Qf;function uA(){if(Qf)return ha;Qf=1;var e=ut(),t=Se(),r=e(t,"DataView");return ha=r,ha}var pa,eh;function cA(){if(eh)return pa;eh=1;var e=ut(),t=Se(),r=e(t,"Promise");return pa=r,pa}var ga,th;function l0(){if(th)return ga;th=1;var e=ut(),t=Se(),r=e(t,"Set");return ga=r,ga}var ma,rh;function lA(){if(rh)return ma;rh=1;var e=ut(),t=Se(),r=e(t,"WeakMap");return ma=r,ma}var va,nh;function Rt(){if(nh)return va;nh=1;var e=uA(),t=Dc(),r=cA(),n=l0(),i=lA(),a=ot(),s=Qy(),o="[object Map]",c="[object Object]",l="[object Promise]",u="[object Set]",d="[object WeakMap]",f="[object DataView]",h=s(e),x=s(t),g=s(r),m=s(n),y=s(i),_=a;return(e&&_(new e(new ArrayBuffer(1)))!=f||t&&_(new t)!=o||r&&_(r.resolve())!=l||n&&_(new n)!=u||i&&_(new i)!=d)&&(_=function(p){var b=a(p),N=b==c?p.constructor:void 0,w=N?s(N):"";if(w)switch(w){case h:return f;case x:return o;case g:return l;case m:return u;case y:return d}return b}),va=_,va}var ya,ih;function dA(){if(ih)return ya;ih=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return ya=r,ya}var xa,ah;function d0(){if(ah)return xa;ah=1;var e=Se(),t=e.Uint8Array;return xa=t,xa}var ba,sh;function Uc(){if(sh)return ba;sh=1;var e=d0();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return ba=t,ba}var _a,oh;function fA(){if(oh)return _a;oh=1;var e=Uc();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return _a=t,_a}var wa,uh;function hA(){if(uh)return wa;uh=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return wa=t,wa}var Na,ch;function pA(){if(ch)return Na;ch=1;var e=It(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return Na=n,Na}var Ea,lh;function f0(){if(lh)return Ea;lh=1;var e=Uc();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return Ea=t,Ea}var Sa,dh;function gA(){if(dh)return Sa;dh=1;var e=Uc(),t=fA(),r=hA(),n=pA(),i=f0(),a="[object Boolean]",s="[object Date]",o="[object Map]",c="[object Number]",l="[object RegExp]",u="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",x="[object DataView]",g="[object Float32Array]",m="[object Float64Array]",y="[object Int8Array]",_="[object Int16Array]",p="[object Int32Array]",b="[object Uint8Array]",N="[object Uint8ClampedArray]",w="[object Uint16Array]",E="[object Uint32Array]";function C(I,M,q){var j=I.constructor;switch(M){case h:return e(I);case a:case s:return new j(+I);case x:return t(I,q);case g:case m:case y:case _:case p:case b:case N:case w:case E:return i(I,q);case o:return new j;case c:case d:return new j(I);case l:return r(I);case u:return new j;case f:return n(I)}}return Sa=C,Sa}var Ca,fh;function h0(){if(fh)return Ca;fh=1;var e=ve(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}();return Ca=r,Ca}var Ia,hh;function p0(){if(hh)return Ia;hh=1;var e=h0(),t=yn(),r=vn();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return Ia=n,Ia}var Aa,ph;function mA(){if(ph)return Aa;ph=1;var e=Rt(),t=Me(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return Aa=n,Aa}var Ra,gh;function vA(){if(gh)return Ra;gh=1;var e=mA(),t=mn(),r=zc(),n=r&&r.isMap,i=n?t(n):e;return Ra=i,Ra}var qa,mh;function yA(){if(mh)return qa;mh=1;var e=Rt(),t=Me(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return qa=n,qa}var Ta,vh;function xA(){if(vh)return Ta;vh=1;var e=yA(),t=mn(),r=zc(),n=r&&r.isSet,i=n?t(n):e;return Ta=i,Ta}var ka,yh;function g0(){if(yh)return ka;yh=1;var e=fn(),t=$c(),r=pn(),n=tA(),i=iA(),a=n0(),s=i0(),o=aA(),c=sA(),l=c0(),u=oA(),d=Rt(),f=dA(),h=gA(),x=p0(),g=ce(),m=At(),y=vA(),_=ve(),p=xA(),b=Je(),N=ct(),w=1,E=2,C=4,I="[object Arguments]",M="[object Array]",q="[object Boolean]",j="[object Date]",O="[object Error]",S="[object Function]",R="[object GeneratorFunction]",A="[object Map]",P="[object Number]",$="[object Object]",L="[object RegExp]",B="[object Set]",H="[object String]",V="[object Symbol]",Y="[object WeakMap]",k="[object ArrayBuffer]",D="[object DataView]",F="[object Float32Array]",z="[object Float64Array]",G="[object Int8Array]",U="[object Int16Array]",Z="[object Int32Array]",ee="[object Uint8Array]",Q="[object Uint8ClampedArray]",K="[object Uint16Array]",W="[object Uint32Array]",X={};X[I]=X[M]=X[k]=X[D]=X[q]=X[j]=X[F]=X[z]=X[G]=X[U]=X[Z]=X[A]=X[P]=X[$]=X[L]=X[B]=X[H]=X[V]=X[ee]=X[Q]=X[K]=X[W]=!0,X[O]=X[S]=X[Y]=!1;function ne(te,pe,xe,dt,je,de){var oe,Ue=pe&w,Pe=pe&E,Ye=pe&C;if(xe&&(oe=je?xe(te,dt,je,de):xe(te)),oe!==void 0)return oe;if(!_(te))return te;var We=g(te);if(We){if(oe=f(te),!Ue)return s(te,oe)}else{var Le=d(te),lr=Le==S||Le==R;if(m(te))return a(te,Ue);if(Le==$||Le==I||lr&&!je){if(oe=Pe||lr?{}:x(te),!Ue)return Pe?c(te,i(oe,te)):o(te,n(oe,te))}else{if(!X[Le])return je?te:{};oe=h(te,Le,Ue)}}de||(de=new e);var ft=de.get(te);if(ft)return ft;de.set(te,oe),p(te)?te.forEach(function(Ce){oe.add(ne(Ce,pe,xe,Ce,te,de))}):y(te)&&te.forEach(function(Ce,Oe){oe.set(Oe,ne(Ce,pe,xe,Oe,te,de))});var Sn=Ye?Pe?u:l:Pe?N:b,dr=We?void 0:Sn(te);return t(dr||te,function(Ce,Oe){dr&&(Oe=Ce,Ce=te[Oe]),r(oe,Oe,ne(Ce,pe,xe,Oe,te,de))}),oe}return ka=ne,ka}var Ma,xh;function bA(){if(xh)return Ma;xh=1;var e=g0(),t=4;function r(n){return e(n,t)}return Ma=r,Ma}var ja,bh;function Yc(){if(bh)return ja;bh=1;function e(t){return function(){return t}}return ja=e,ja}var Pa,_h;function _A(){if(_h)return Pa;_h=1;function e(t){return function(r,n,i){for(var a=-1,s=Object(r),o=i(r),c=o.length;c--;){var l=o[t?c:++a];if(n(s[l],l,s)===!1)break}return r}}return Pa=e,Pa}var La,wh;function Wc(){if(wh)return La;wh=1;var e=_A(),t=e();return La=t,La}var Oa,Nh;function Xc(){if(Nh)return Oa;Nh=1;var e=Wc(),t=Je();function r(n,i){return n&&e(n,i,t)}return Oa=r,Oa}var Da,Eh;function wA(){if(Eh)return Da;Eh=1;var e=Ge();function t(r,n){return function(i,a){if(i==null)return i;if(!e(i))return r(i,a);for(var s=i.length,o=n?s:-1,c=Object(i);(n?o--:++o<s)&&a(c[o],o,c)!==!1;);return i}}return Da=t,Da}var Fa,Sh;function xn(){if(Sh)return Fa;Sh=1;var e=Xc(),t=wA(),r=t(e);return Fa=r,Fa}var $a,Ch;function lt(){if(Ch)return $a;Ch=1;function e(t){return t}return $a=e,$a}var Ba,Ih;function m0(){if(Ih)return Ba;Ih=1;var e=lt();function t(r){return typeof r=="function"?r:e}return Ba=t,Ba}var za,Ah;function v0(){if(Ah)return za;Ah=1;var e=$c(),t=xn(),r=m0(),n=ce();function i(a,s){var o=n(a)?e:t;return o(a,r(s))}return za=i,za}var Ha,Rh;function y0(){return Rh||(Rh=1,Ha=v0()),Ha}var Ga,qh;function NA(){if(qh)return Ga;qh=1;var e=xn();function t(r,n){var i=[];return e(r,function(a,s,o){n(a,s,o)&&i.push(a)}),i}return Ga=t,Ga}var Va,Th;function EA(){if(Th)return Va;Th=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Va=t,Va}var Ua,kh;function SA(){if(kh)return Ua;kh=1;function e(t){return this.__data__.has(t)}return Ua=e,Ua}var Ya,Mh;function x0(){if(Mh)return Ya;Mh=1;var e=Fc(),t=EA(),r=SA();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,Ya=n,Ya}var Wa,jh;function CA(){if(jh)return Wa;jh=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return Wa=e,Wa}var Xa,Ph;function b0(){if(Ph)return Xa;Ph=1;function e(t,r){return t.has(r)}return Xa=e,Xa}var Ka,Lh;function _0(){if(Lh)return Ka;Lh=1;var e=x0(),t=CA(),r=b0(),n=1,i=2;function a(s,o,c,l,u,d){var f=c&n,h=s.length,x=o.length;if(h!=x&&!(f&&x>h))return!1;var g=d.get(s),m=d.get(o);if(g&&m)return g==o&&m==s;var y=-1,_=!0,p=c&i?new e:void 0;for(d.set(s,o),d.set(o,s);++y<h;){var b=s[y],N=o[y];if(l)var w=f?l(N,b,y,o,s,d):l(b,N,y,s,o,d);if(w!==void 0){if(w)continue;_=!1;break}if(p){if(!t(o,function(E,C){if(!r(p,C)&&(b===E||u(b,E,c,l,d)))return p.push(C)})){_=!1;break}}else if(!(b===N||u(b,N,c,l,d))){_=!1;break}}return d.delete(s),d.delete(o),_}return Ka=a,Ka}var Za,Oh;function IA(){if(Oh)return Za;Oh=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,a){n[++r]=[a,i]}),n}return Za=e,Za}var Ja,Dh;function Kc(){if(Dh)return Ja;Dh=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return Ja=e,Ja}var Qa,Fh;function AA(){if(Fh)return Qa;Fh=1;var e=It(),t=d0(),r=Ct(),n=_0(),i=IA(),a=Kc(),s=1,o=2,c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",x="[object Set]",g="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",_="[object DataView]",p=e?e.prototype:void 0,b=p?p.valueOf:void 0;function N(w,E,C,I,M,q,j){switch(C){case _:if(w.byteLength!=E.byteLength||w.byteOffset!=E.byteOffset)return!1;w=w.buffer,E=E.buffer;case y:return!(w.byteLength!=E.byteLength||!q(new t(w),new t(E)));case c:case l:case f:return r(+w,+E);case u:return w.name==E.name&&w.message==E.message;case h:case g:return w==E+"";case d:var O=i;case x:var S=I&s;if(O||(O=a),w.size!=E.size&&!S)return!1;var R=j.get(w);if(R)return R==E;I|=o,j.set(w,E);var A=n(O(w),O(E),I,M,q,j);return j.delete(w),A;case m:if(b)return b.call(w)==b.call(E)}return!1}return Qa=N,Qa}var es,$h;function RA(){if($h)return es;$h=1;var e=c0(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,s,o,c,l,u){var d=o&t,f=e(a),h=f.length,x=e(s),g=x.length;if(h!=g&&!d)return!1;for(var m=h;m--;){var y=f[m];if(!(d?y in s:n.call(s,y)))return!1}var _=u.get(a),p=u.get(s);if(_&&p)return _==s&&p==a;var b=!0;u.set(a,s),u.set(s,a);for(var N=d;++m<h;){y=f[m];var w=a[y],E=s[y];if(c)var C=d?c(E,w,y,s,a,u):c(w,E,y,a,s,u);if(!(C===void 0?w===E||l(w,E,o,c,u):C)){b=!1;break}N||(N=y=="constructor")}if(b&&!N){var I=a.constructor,M=s.constructor;I!=M&&"constructor"in a&&"constructor"in s&&!(typeof I=="function"&&I instanceof I&&typeof M=="function"&&M instanceof M)&&(b=!1)}return u.delete(a),u.delete(s),b}return es=i,es}var ts,Bh;function qA(){if(Bh)return ts;Bh=1;var e=fn(),t=_0(),r=AA(),n=RA(),i=Rt(),a=ce(),s=At(),o=ur(),c=1,l="[object Arguments]",u="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function x(g,m,y,_,p,b){var N=a(g),w=a(m),E=N?u:i(g),C=w?u:i(m);E=E==l?d:E,C=C==l?d:C;var I=E==d,M=C==d,q=E==C;if(q&&s(g)){if(!s(m))return!1;N=!0,I=!1}if(q&&!I)return b||(b=new e),N||o(g)?t(g,m,y,_,p,b):r(g,m,E,y,_,p,b);if(!(y&c)){var j=I&&h.call(g,"__wrapped__"),O=M&&h.call(m,"__wrapped__");if(j||O){var S=j?g.value():g,R=O?m.value():m;return b||(b=new e),p(S,R,y,_,b)}}return q?(b||(b=new e),n(g,m,y,_,p,b)):!1}return ts=x,ts}var rs,zh;function w0(){if(zh)return rs;zh=1;var e=qA(),t=Me();function r(n,i,a,s,o){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,a,s,r,o)}return rs=r,rs}var ns,Hh;function TA(){if(Hh)return ns;Hh=1;var e=fn(),t=w0(),r=1,n=2;function i(a,s,o,c){var l=o.length,u=l,d=!c;if(a==null)return!u;for(a=Object(a);l--;){var f=o[l];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++l<u;){f=o[l];var h=f[0],x=a[h],g=f[1];if(d&&f[2]){if(x===void 0&&!(h in a))return!1}else{var m=new e;if(c)var y=c(x,g,h,a,s,m);if(!(y===void 0?t(g,x,r|n,c,m):y))return!1}}return!0}return ns=i,ns}var is,Gh;function N0(){if(Gh)return is;Gh=1;var e=ve();function t(r){return r===r&&!e(r)}return is=t,is}var as,Vh;function kA(){if(Vh)return as;Vh=1;var e=N0(),t=Je();function r(n){for(var i=t(n),a=i.length;a--;){var s=i[a],o=n[s];i[a]=[s,o,e(o)]}return i}return as=r,as}var ss,Uh;function E0(){if(Uh)return ss;Uh=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return ss=e,ss}var os,Yh;function MA(){if(Yh)return os;Yh=1;var e=TA(),t=kA(),r=E0();function n(i){var a=t(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return os=n,os}var us,Wh;function qt(){if(Wh)return us;Wh=1;var e=ot(),t=Me(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return us=n,us}var cs,Xh;function Zc(){if(Xh)return cs;Xh=1;var e=ce(),t=qt(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:n.test(a)||!r.test(a)||s!=null&&a in Object(s)}return cs=i,cs}var ls,Kh;function jA(){if(Kh)return ls;Kh=1;var e=Fc(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],c=a.cache;if(c.has(o))return c.get(o);var l=n.apply(this,s);return a.cache=c.set(o,l)||c,l};return a.cache=new(r.Cache||e),a}return r.Cache=e,ls=r,ls}var ds,Zh;function PA(){if(Zh)return ds;Zh=1;var e=jA(),t=500;function r(n){var i=e(n,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return ds=r,ds}var fs,Jh;function LA(){if(Jh)return fs;Jh=1;var e=PA(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,c,l){a.push(c?l.replace(r,"$1"):o||s)}),a});return fs=n,fs}var hs,Qh;function bn(){if(Qh)return hs;Qh=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=Array(i);++n<i;)a[n]=r(t[n],n,t);return a}return hs=e,hs}var ps,ep;function OA(){if(ep)return ps;ep=1;var e=It(),t=bn(),r=ce(),n=qt(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return t(o,s)+"";if(n(o))return a?a.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return ps=s,ps}var gs,tp;function S0(){if(tp)return gs;tp=1;var e=OA();function t(r){return r==null?"":e(r)}return gs=t,gs}var ms,rp;function _n(){if(rp)return ms;rp=1;var e=ce(),t=Zc(),r=LA(),n=S0();function i(a,s){return e(a)?a:t(a,s)?[a]:r(n(a))}return ms=i,ms}var vs,np;function cr(){if(np)return vs;np=1;var e=qt();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return vs=t,vs}var ys,ip;function wn(){if(ip)return ys;ip=1;var e=_n(),t=cr();function r(n,i){i=e(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[t(i[a++])];return a&&a==s?n:void 0}return ys=r,ys}var xs,ap;function DA(){if(ap)return xs;ap=1;var e=wn();function t(r,n,i){var a=r==null?void 0:e(r,n);return a===void 0?i:a}return xs=t,xs}var bs,sp;function FA(){if(sp)return bs;sp=1;function e(t,r){return t!=null&&r in Object(t)}return bs=e,bs}var _s,op;function C0(){if(op)return _s;op=1;var e=_n(),t=or(),r=ce(),n=gn(),i=Bc(),a=cr();function s(o,c,l){c=e(c,o);for(var u=-1,d=c.length,f=!1;++u<d;){var h=a(c[u]);if(!(f=o!=null&&l(o,h)))break;o=o[h]}return f||++u!=d?f:(d=o==null?0:o.length,!!d&&i(d)&&n(h,d)&&(r(o)||t(o)))}return _s=s,_s}var ws,up;function I0(){if(up)return ws;up=1;var e=FA(),t=C0();function r(n,i){return n!=null&&t(n,i,e)}return ws=r,ws}var Ns,cp;function $A(){if(cp)return Ns;cp=1;var e=w0(),t=DA(),r=I0(),n=Zc(),i=N0(),a=E0(),s=cr(),o=1,c=2;function l(u,d){return n(u)&&i(d)?a(s(u),d):function(f){var h=t(f,u);return h===void 0&&h===d?r(f,u):e(d,h,o|c)}}return Ns=l,Ns}var Es,lp;function A0(){if(lp)return Es;lp=1;function e(t){return function(r){return r==null?void 0:r[t]}}return Es=e,Es}var Ss,dp;function BA(){if(dp)return Ss;dp=1;var e=wn();function t(r){return function(n){return e(n,r)}}return Ss=t,Ss}var Cs,fp;function zA(){if(fp)return Cs;fp=1;var e=A0(),t=BA(),r=Zc(),n=cr();function i(a){return r(a)?e(n(a)):t(a)}return Cs=i,Cs}var Is,hp;function Ve(){if(hp)return Is;hp=1;var e=MA(),t=$A(),r=lt(),n=ce(),i=zA();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?t(s[0],s[1]):e(s):i(s)}return Is=a,Is}var As,pp;function R0(){if(pp)return As;pp=1;var e=a0(),t=NA(),r=Ve(),n=ce();function i(a,s){var o=n(a)?e:t;return o(a,r(s,3))}return As=i,As}var Rs,gp;function HA(){if(gp)return Rs;gp=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return Rs=r,Rs}var qs,mp;function q0(){if(mp)return qs;mp=1;var e=HA(),t=C0();function r(n,i){return n!=null&&t(n,i,e)}return qs=r,qs}var Ts,vp;function GA(){if(vp)return Ts;vp=1;var e=Hc(),t=Rt(),r=or(),n=ce(),i=Ge(),a=At(),s=vn(),o=ur(),c="[object Map]",l="[object Set]",u=Object.prototype,d=u.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||o(h)||r(h)))return!h.length;var x=t(h);if(x==c||x==l)return!h.size;if(s(h))return!e(h).length;for(var g in h)if(d.call(h,g))return!1;return!0}return Ts=f,Ts}var ks,yp;function T0(){if(yp)return ks;yp=1;function e(t){return t===void 0}return ks=e,ks}var Ms,xp;function k0(){if(xp)return Ms;xp=1;var e=xn(),t=Ge();function r(n,i){var a=-1,s=t(n)?Array(n.length):[];return e(n,function(o,c,l){s[++a]=i(o,c,l)}),s}return Ms=r,Ms}var js,bp;function M0(){if(bp)return js;bp=1;var e=bn(),t=Ve(),r=k0(),n=ce();function i(a,s){var o=n(a)?e:r;return o(a,t(s,3))}return js=i,js}var Ps,_p;function VA(){if(_p)return Ps;_p=1;function e(t,r,n,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(n=t[++a]);++a<s;)n=r(n,t[a],a,t);return n}return Ps=e,Ps}var Ls,wp;function UA(){if(wp)return Ls;wp=1;function e(t,r,n,i,a){return a(t,function(s,o,c){n=i?(i=!1,s):r(n,s,o,c)}),n}return Ls=e,Ls}var Os,Np;function j0(){if(Np)return Os;Np=1;var e=VA(),t=xn(),r=Ve(),n=UA(),i=ce();function a(s,o,c){var l=i(s)?e:n,u=arguments.length<3;return l(s,r(o,4),c,u,t)}return Os=a,Os}var Ds,Ep;function YA(){if(Ep)return Ds;Ep=1;var e=ot(),t=ce(),r=Me(),n="[object String]";function i(a){return typeof a=="string"||!t(a)&&r(a)&&e(a)==n}return Ds=i,Ds}var Fs,Sp;function WA(){if(Sp)return Fs;Sp=1;var e=A0(),t=e("length");return Fs=t,Fs}var $s,Cp;function XA(){if(Cp)return $s;Cp=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function c(l){return o.test(l)}return $s=c,$s}var Bs,Ip;function KA(){if(Ip)return Bs;Ip=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+c+")",u="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",x=l+"?",g="["+a+"]?",m="(?:"+h+"(?:"+[u,d,f].join("|")+")"+g+x+")*",y=g+x+m,_="(?:"+[u+o+"?",o,d,f,s].join("|")+")",p=RegExp(c+"(?="+c+")|"+_+y,"g");function b(N){for(var w=p.lastIndex=0;p.test(N);)++w;return w}return Bs=b,Bs}var zs,Ap;function ZA(){if(Ap)return zs;Ap=1;var e=WA(),t=XA(),r=KA();function n(i){return t(i)?r(i):e(i)}return zs=n,zs}var Hs,Rp;function JA(){if(Rp)return Hs;Rp=1;var e=Hc(),t=Rt(),r=Ge(),n=YA(),i=ZA(),a="[object Map]",s="[object Set]";function o(c){if(c==null)return 0;if(r(c))return n(c)?i(c):c.length;var l=t(c);return l==a||l==s?c.size:e(c).length}return Hs=o,Hs}var Gs,qp;function QA(){if(qp)return Gs;qp=1;var e=$c(),t=h0(),r=Xc(),n=Ve(),i=yn(),a=ce(),s=At(),o=ar(),c=ve(),l=ur();function u(d,f,h){var x=a(d),g=x||s(d)||l(d);if(f=n(f,4),h==null){var m=d&&d.constructor;g?h=x?new m:[]:c(d)?h=o(m)?t(i(d)):{}:h={}}return(g?e:r)(d,function(y,_,p){return f(h,y,_,p)}),h}return Gs=u,Gs}var Vs,Tp;function eR(){if(Tp)return Vs;Tp=1;var e=It(),t=or(),r=ce(),n=e?e.isConcatSpreadable:void 0;function i(a){return r(a)||t(a)||!!(n&&a&&a[n])}return Vs=i,Vs}var Us,kp;function Jc(){if(kp)return Us;kp=1;var e=Vc(),t=eR();function r(n,i,a,s,o){var c=-1,l=n.length;for(a||(a=t),o||(o=[]);++c<l;){var u=n[c];i>0&&a(u)?i>1?r(u,i-1,a,s,o):e(o,u):s||(o[o.length]=u)}return o}return Us=r,Us}var Ys,Mp;function tR(){if(Mp)return Ys;Mp=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return Ys=e,Ys}var Ws,jp;function P0(){if(jp)return Ws;jp=1;var e=tR(),t=Math.max;function r(n,i,a){return i=t(i===void 0?n.length-1:i,0),function(){for(var s=arguments,o=-1,c=t(s.length-i,0),l=Array(c);++o<c;)l[o]=s[i+o];o=-1;for(var u=Array(i+1);++o<i;)u[o]=s[o];return u[i]=a(l),e(n,this,u)}}return Ws=r,Ws}var Xs,Pp;function rR(){if(Pp)return Xs;Pp=1;var e=Yc(),t=e0(),r=lt(),n=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return Xs=n,Xs}var Ks,Lp;function nR(){if(Lp)return Ks;Lp=1;var e=800,t=16,r=Date.now;function n(i){var a=0,s=0;return function(){var o=r(),c=t-(o-s);if(s=o,c>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return Ks=n,Ks}var Zs,Op;function L0(){if(Op)return Zs;Op=1;var e=rR(),t=nR(),r=t(e);return Zs=r,Zs}var Js,Dp;function Nn(){if(Dp)return Js;Dp=1;var e=lt(),t=P0(),r=L0();function n(i,a){return r(t(i,a,e),i+"")}return Js=n,Js}var Qs,Fp;function O0(){if(Fp)return Qs;Fp=1;function e(t,r,n,i){for(var a=t.length,s=n+(i?1:-1);i?s--:++s<a;)if(r(t[s],s,t))return s;return-1}return Qs=e,Qs}var eo,$p;function iR(){if($p)return eo;$p=1;function e(t){return t!==t}return eo=e,eo}var to,Bp;function aR(){if(Bp)return to;Bp=1;function e(t,r,n){for(var i=n-1,a=t.length;++i<a;)if(t[i]===r)return i;return-1}return to=e,to}var ro,zp;function sR(){if(zp)return ro;zp=1;var e=O0(),t=iR(),r=aR();function n(i,a,s){return a===a?r(i,a,s):e(i,t,s)}return ro=n,ro}var no,Hp;function oR(){if(Hp)return no;Hp=1;var e=sR();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return no=t,no}var io,Gp;function uR(){if(Gp)return io;Gp=1;function e(t,r,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(r,t[i]))return!0;return!1}return io=e,io}var ao,Vp;function cR(){if(Vp)return ao;Vp=1;function e(){}return ao=e,ao}var so,Up;function lR(){if(Up)return so;Up=1;var e=l0(),t=cR(),r=Kc(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(a){return new e(a)}:t;return so=i,so}var oo,Yp;function dR(){if(Yp)return oo;Yp=1;var e=x0(),t=oR(),r=uR(),n=b0(),i=lR(),a=Kc(),s=200;function o(c,l,u){var d=-1,f=t,h=c.length,x=!0,g=[],m=g;if(u)x=!1,f=r;else if(h>=s){var y=l?null:i(c);if(y)return a(y);x=!1,f=n,m=new e}else m=l?[]:g;e:for(;++d<h;){var _=c[d],p=l?l(_):_;if(_=u||_!==0?_:0,x&&p===p){for(var b=m.length;b--;)if(m[b]===p)continue e;l&&m.push(p),g.push(_)}else f(m,p,u)||(m!==g&&m.push(p),g.push(_))}return g}return oo=o,oo}var uo,Wp;function D0(){if(Wp)return uo;Wp=1;var e=Ge(),t=Me();function r(n){return t(n)&&e(n)}return uo=r,uo}var co,Xp;function fR(){if(Xp)return co;Xp=1;var e=Jc(),t=Nn(),r=dR(),n=D0(),i=t(function(a){return r(e(a,1,n,!0))});return co=i,co}var lo,Kp;function hR(){if(Kp)return lo;Kp=1;var e=bn();function t(r,n){return e(n,function(i){return r[i]})}return lo=t,lo}var fo,Zp;function F0(){if(Zp)return fo;Zp=1;var e=hR(),t=Je();function r(n){return n==null?[]:e(n,t(n))}return fo=r,fo}var ho,Jp;function ye(){if(Jp)return ho;Jp=1;var e;if(typeof Oc=="function")try{e={clone:bA(),constant:Yc(),each:y0(),filter:R0(),has:q0(),isArray:ce(),isEmpty:GA(),isFunction:ar(),isUndefined:T0(),keys:Je(),map:M0(),reduce:j0(),size:JA(),transform:QA(),union:fR(),values:F0()}}catch{}return e||(e=window._),ho=e,ho}var po,Qp;function Qc(){if(Qp)return po;Qp=1;var e=ye();po=i;var t="\0",r="\0",n="";function i(u){this._isDirected=e.has(u,"directed")?u.directed:!0,this._isMultigraph=e.has(u,"multigraph")?u.multigraph:!1,this._isCompound=e.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(u){return this._label=u,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultNodeLabelFn=u,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._in[d])})},i.prototype.sinks=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._out[d])})},i.prototype.setNodes=function(u,d){var f=arguments,h=this;return e.each(u,function(x){f.length>1?h.setNode(x,d):h.setNode(x)}),this},i.prototype.setNode=function(u,d){return e.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=d),this):(this._nodes[u]=arguments.length>1?d:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=r,this._children[u]={},this._children[r][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},i.prototype.node=function(u){return this._nodes[u]},i.prototype.hasNode=function(u){return e.has(this._nodes,u)},i.prototype.removeNode=function(u){var d=this;if(e.has(this._nodes,u)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],e.each(this.children(u),function(h){d.setParent(h)}),delete this._children[u]),e.each(e.keys(this._in[u]),f),delete this._in[u],delete this._preds[u],e.each(e.keys(this._out[u]),f),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},i.prototype.setParent=function(u,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=r;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===u)throw new Error("Setting "+d+" as parent of "+u+" would create a cycle");this.setNode(d)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=d,this._children[d][u]=!0,this},i.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},i.prototype.parent=function(u){if(this._isCompound){var d=this._parent[u];if(d!==r)return d}},i.prototype.children=function(u){if(e.isUndefined(u)&&(u=r),this._isCompound){var d=this._children[u];if(d)return e.keys(d)}else{if(u===r)return this.nodes();if(this.hasNode(u))return[]}},i.prototype.predecessors=function(u){var d=this._preds[u];if(d)return e.keys(d)},i.prototype.successors=function(u){var d=this._sucs[u];if(d)return e.keys(d)},i.prototype.neighbors=function(u){var d=this.predecessors(u);if(d)return e.union(d,this.successors(u))},i.prototype.isLeaf=function(u){var d;return this.isDirected()?d=this.successors(u):d=this.neighbors(u),d.length===0},i.prototype.filterNodes=function(u){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(g,m){u(m)&&d.setNode(m,g)}),e.each(this._edgeObjs,function(g){d.hasNode(g.v)&&d.hasNode(g.w)&&d.setEdge(g,f.edge(g))});var h={};function x(g){var m=f.parent(g);return m===void 0||d.hasNode(m)?(h[g]=m,m):m in h?h[m]:x(m)}return this._isCompound&&e.each(d.nodes(),function(g){d.setParent(g,x(g))}),d},i.prototype.setDefaultEdgeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultEdgeLabelFn=u,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(u,d){var f=this,h=arguments;return e.reduce(u,function(x,g){return h.length>1?f.setEdge(x,g,d):f.setEdge(x,g),g}),this},i.prototype.setEdge=function(){var u,d,f,h,x=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(u=g.v,d=g.w,f=g.name,arguments.length===2&&(h=arguments[1],x=!0)):(u=g,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],x=!0)),u=""+u,d=""+d,e.isUndefined(f)||(f=""+f);var m=o(this._isDirected,u,d,f);if(e.has(this._edgeLabels,m))return x&&(this._edgeLabels[m]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(d),this._edgeLabels[m]=x?h:this._defaultEdgeLabelFn(u,d,f);var y=c(this._isDirected,u,d,f);return u=y.v,d=y.w,Object.freeze(y),this._edgeObjs[m]=y,a(this._preds[d],u),a(this._sucs[u],d),this._in[d][m]=y,this._out[u][m]=y,this._edgeCount++,this},i.prototype.edge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,u,d,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,u,d,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,u,d,f),x=this._edgeObjs[h];return x&&(u=x.v,d=x.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[d],u),s(this._sucs[u],d),delete this._in[d][h],delete this._out[u][h],this._edgeCount--),this},i.prototype.inEdges=function(u,d){var f=this._in[u];if(f){var h=e.values(f);return d?e.filter(h,function(x){return x.v===d}):h}},i.prototype.outEdges=function(u,d){var f=this._out[u];if(f){var h=e.values(f);return d?e.filter(h,function(x){return x.w===d}):h}},i.prototype.nodeEdges=function(u,d){var f=this.inEdges(u,d);if(f)return f.concat(this.outEdges(u,d))};function a(u,d){u[d]?u[d]++:u[d]=1}function s(u,d){--u[d]||delete u[d]}function o(u,d,f,h){var x=""+d,g=""+f;if(!u&&x>g){var m=x;x=g,g=m}return x+n+g+n+(e.isUndefined(h)?t:h)}function c(u,d,f,h){var x=""+d,g=""+f;if(!u&&x>g){var m=x;x=g,g=m}var y={v:x,w:g};return h&&(y.name=h),y}function l(u,d){return o(u,d.v,d.w,d.name)}return po}var go,eg;function pR(){return eg||(eg=1,go="2.1.8"),go}var mo,tg;function gR(){return tg||(tg=1,mo={Graph:Qc(),version:pR()}),mo}var vo,rg;function mR(){if(rg)return vo;rg=1;var e=ye(),t=Qc();vo={write:r,read:a};function r(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function n(s){return e.map(s.nodes(),function(o){var c=s.node(o),l=s.parent(o),u={v:o};return e.isUndefined(c)||(u.value=c),e.isUndefined(l)||(u.parent=l),u})}function i(s){return e.map(s.edges(),function(o){var c=s.edge(o),l={v:o.v,w:o.w};return e.isUndefined(o.name)||(l.name=o.name),e.isUndefined(c)||(l.value=c),l})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(c){o.setNode(c.v,c.value),c.parent&&o.setParent(c.v,c.parent)}),e.each(s.edges,function(c){o.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),o}return vo}var yo,ng;function vR(){if(ng)return yo;ng=1;var e=ye();yo=t;function t(r){var n={},i=[],a;function s(o){e.has(n,o)||(n[o]=!0,a.push(o),e.each(r.successors(o),s),e.each(r.predecessors(o),s))}return e.each(r.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return yo}var xo,ig;function $0(){if(ig)return xo;ig=1;var e=ye();xo=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var a=this._arr,s=a.length;return i[r]=s,a.push({key:r,priority:n}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,a=i+1,s=r;i<n.length&&(s=n[i].priority<n[s].priority?i:s,a<n.length&&(s=n[a].priority<n[s].priority?a:s),s!==r&&(this._swap(r,s),this._heapify(s)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,a;r!==0&&(a=r>>1,!(n[a].priority<i));)this._swap(r,a),r=a},t.prototype._swap=function(r,n){var i=this._arr,a=this._keyIndices,s=i[r],o=i[n];i[r]=o,i[n]=s,a[o.key]=r,a[s.key]=n},xo}var bo,ag;function B0(){if(ag)return bo;ag=1;var e=ye(),t=$0();bo=n;var r=e.constant(1);function n(a,s,o,c){return i(a,String(s),o||r,c||function(l){return a.outEdges(l)})}function i(a,s,o,c){var l={},u=new t,d,f,h=function(x){var g=x.v!==d?x.v:x.w,m=l[g],y=o(x),_=f.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+y);_<m.distance&&(m.distance=_,m.predecessor=d,u.decrease(g,_))};for(a.nodes().forEach(function(x){var g=x===s?0:Number.POSITIVE_INFINITY;l[x]={distance:g},u.add(x,g)});u.size()>0&&(d=u.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)c(d).forEach(h);return l}return bo}var _o,sg;function yR(){if(sg)return _o;sg=1;var e=B0(),t=ye();_o=r;function r(n,i,a){return t.transform(n.nodes(),function(s,o){s[o]=e(n,o,i,a)},{})}return _o}var wo,og;function z0(){if(og)return wo;og=1;var e=ye();wo=t;function t(r){var n=0,i=[],a={},s=[];function o(c){var l=a[c]={onStack:!0,lowlink:n,index:n++};if(i.push(c),r.successors(c).forEach(function(f){e.has(a,f)?a[f].onStack&&(l.lowlink=Math.min(l.lowlink,a[f].index)):(o(f),l.lowlink=Math.min(l.lowlink,a[f].lowlink))}),l.lowlink===l.index){var u=[],d;do d=i.pop(),a[d].onStack=!1,u.push(d);while(c!==d);s.push(u)}}return r.nodes().forEach(function(c){e.has(a,c)||o(c)}),s}return wo}var No,ug;function xR(){if(ug)return No;ug=1;var e=ye(),t=z0();No=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return No}var Eo,cg;function bR(){if(cg)return Eo;cg=1;var e=ye();Eo=r;var t=e.constant(1);function r(i,a,s){return n(i,a||t,s||function(o){return i.outEdges(o)})}function n(i,a,s){var o={},c=i.nodes();return c.forEach(function(l){o[l]={},o[l][l]={distance:0},c.forEach(function(u){l!==u&&(o[l][u]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(u){var d=u.v===l?u.w:u.v,f=a(u);o[l][d]={distance:f,predecessor:l}})}),c.forEach(function(l){var u=o[l];c.forEach(function(d){var f=o[d];c.forEach(function(h){var x=f[l],g=u[h],m=f[h],y=x.distance+g.distance;y<m.distance&&(m.distance=y,m.predecessor=g.predecessor)})})}),o}return Eo}var So,lg;function H0(){if(lg)return So;lg=1;var e=ye();So=t,t.CycleException=r;function t(n){var i={},a={},s=[];function o(c){if(e.has(a,c))throw new r;e.has(i,c)||(a[c]=!0,i[c]=!0,e.each(n.predecessors(c),o),delete a[c],s.push(c))}if(e.each(n.sinks(),o),e.size(i)!==n.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,So}var Co,dg;function _R(){if(dg)return Co;dg=1;var e=H0();Co=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return Co}var Io,fg;function G0(){if(fg)return Io;fg=1;var e=ye();Io=t;function t(n,i,a){e.isArray(i)||(i=[i]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],c={};return e.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);r(n,l,a==="post",c,s,o)}),o}function r(n,i,a,s,o,c){e.has(s,i)||(s[i]=!0,a||c.push(i),e.each(o(i),function(l){r(n,l,a,s,o,c)}),a&&c.push(i))}return Io}var Ao,hg;function wR(){if(hg)return Ao;hg=1;var e=G0();Ao=t;function t(r,n){return e(r,n,"post")}return Ao}var Ro,pg;function NR(){if(pg)return Ro;pg=1;var e=G0();Ro=t;function t(r,n){return e(r,n,"pre")}return Ro}var qo,gg;function ER(){if(gg)return qo;gg=1;var e=ye(),t=Qc(),r=$0();qo=n;function n(i,a){var s=new t,o={},c=new r,l;function u(f){var h=f.v===l?f.w:f.v,x=c.priority(h);if(x!==void 0){var g=a(f);g<x&&(o[h]=l,c.decrease(h,g))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(f){c.add(f,Number.POSITIVE_INFINITY),s.setNode(f)}),c.decrease(i.nodes()[0],0);for(var d=!1;c.size()>0;){if(l=c.removeMin(),e.has(o,l))s.setEdge(l,o[l]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(l).forEach(u)}return s}return qo}var To,mg;function SR(){return mg||(mg=1,To={components:vR(),dijkstra:B0(),dijkstraAll:yR(),findCycles:xR(),floydWarshall:bR(),isAcyclic:_R(),postorder:wR(),preorder:NR(),prim:ER(),tarjan:z0(),topsort:H0()}),To}var ko,vg;function CR(){if(vg)return ko;vg=1;var e=gR();return ko={Graph:e.Graph,json:mR(),alg:SR(),version:e.version},ko}var Mo,yg;function Ne(){if(yg)return Mo;yg=1;var e;if(typeof Oc=="function")try{e=CR()}catch{}return e||(e=window.graphlib),Mo=e,Mo}var jo,xg;function IR(){if(xg)return jo;xg=1;var e=g0(),t=1,r=4;function n(i){return e(i,t|r)}return jo=n,jo}var Po,bg;function En(){if(bg)return Po;bg=1;var e=Ct(),t=Ge(),r=gn(),n=ve();function i(a,s,o){if(!n(o))return!1;var c=typeof s;return(c=="number"?t(o)&&r(s,o.length):c=="string"&&s in o)?e(o[s],a):!1}return Po=i,Po}var Lo,_g;function AR(){if(_g)return Lo;_g=1;var e=Nn(),t=Ct(),r=En(),n=ct(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,c){o=Object(o);var l=-1,u=c.length,d=u>2?c[2]:void 0;for(d&&r(c[0],c[1],d)&&(u=1);++l<u;)for(var f=c[l],h=n(f),x=-1,g=h.length;++x<g;){var m=h[x],y=o[m];(y===void 0||t(y,i[m])&&!a.call(o,m))&&(o[m]=f[m])}return o});return Lo=s,Lo}var Oo,wg;function RR(){if(wg)return Oo;wg=1;var e=Ve(),t=Ge(),r=Je();function n(i){return function(a,s,o){var c=Object(a);if(!t(a)){var l=e(s,3);a=r(a),s=function(d){return l(c[d],d,c)}}var u=i(a,s,o);return u>-1?c[l?a[u]:u]:void 0}}return Oo=n,Oo}var Do,Ng;function qR(){if(Ng)return Do;Ng=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Do=t,Do}var Fo,Eg;function TR(){if(Eg)return Fo;Eg=1;var e=qR(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Fo=r,Fo}var $o,Sg;function kR(){if(Sg)return $o;Sg=1;var e=TR(),t=ve(),r=qt(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function c(l){if(typeof l=="number")return l;if(r(l))return n;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=a.test(l);return d||s.test(l)?o(l.slice(2),d?2:8):i.test(l)?n:+l}return $o=c,$o}var Bo,Cg;function V0(){if(Cg)return Bo;Cg=1;var e=kR(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*r}return i===i?i:0}return Bo=n,Bo}var zo,Ig;function MR(){if(Ig)return zo;Ig=1;var e=V0();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return zo=t,zo}var Ho,Ag;function jR(){if(Ag)return Ho;Ag=1;var e=O0(),t=Ve(),r=MR(),n=Math.max;function i(a,s,o){var c=a==null?0:a.length;if(!c)return-1;var l=o==null?0:r(o);return l<0&&(l=n(c+l,0)),e(a,t(s,3),l)}return Ho=i,Ho}var Go,Rg;function PR(){if(Rg)return Go;Rg=1;var e=RR(),t=jR(),r=e(t);return Go=r,Go}var Vo,qg;function U0(){if(qg)return Vo;qg=1;var e=Jc();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return Vo=t,Vo}var Uo,Tg;function LR(){if(Tg)return Uo;Tg=1;var e=Wc(),t=m0(),r=ct();function n(i,a){return i==null?i:e(i,t(a),r)}return Uo=n,Uo}var Yo,kg;function OR(){if(kg)return Yo;kg=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Yo=e,Yo}var Wo,Mg;function DR(){if(Mg)return Wo;Mg=1;var e=hn(),t=Xc(),r=Ve();function n(i,a){var s={};return a=r(a,3),t(i,function(o,c,l){e(s,c,a(o,c,l))}),s}return Wo=n,Wo}var Xo,jg;function el(){if(jg)return Xo;jg=1;var e=qt();function t(r,n,i){for(var a=-1,s=r.length;++a<s;){var o=r[a],c=n(o);if(c!=null&&(l===void 0?c===c&&!e(c):i(c,l)))var l=c,u=o}return u}return Xo=t,Xo}var Ko,Pg;function FR(){if(Pg)return Ko;Pg=1;function e(t,r){return t>r}return Ko=e,Ko}var Zo,Lg;function $R(){if(Lg)return Zo;Lg=1;var e=el(),t=FR(),r=lt();function n(i){return i&&i.length?e(i,r,t):void 0}return Zo=n,Zo}var Jo,Og;function Y0(){if(Og)return Jo;Og=1;var e=hn(),t=Ct();function r(n,i,a){(a!==void 0&&!t(n[i],a)||a===void 0&&!(i in n))&&e(n,i,a)}return Jo=r,Jo}var Qo,Dg;function BR(){if(Dg)return Qo;Dg=1;var e=ot(),t=yn(),r=Me(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,c=s.call(Object);function l(u){if(!r(u)||e(u)!=n)return!1;var d=t(u);if(d===null)return!0;var f=o.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&s.call(f)==c}return Qo=l,Qo}var eu,Fg;function W0(){if(Fg)return eu;Fg=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return eu=e,eu}var tu,$g;function zR(){if($g)return tu;$g=1;var e=sr(),t=ct();function r(n){return e(n,t(n))}return tu=r,tu}var ru,Bg;function HR(){if(Bg)return ru;Bg=1;var e=Y0(),t=n0(),r=f0(),n=i0(),i=p0(),a=or(),s=ce(),o=D0(),c=At(),l=ar(),u=ve(),d=BR(),f=ur(),h=W0(),x=zR();function g(m,y,_,p,b,N,w){var E=h(m,_),C=h(y,_),I=w.get(C);if(I){e(m,_,I);return}var M=N?N(E,C,_+"",m,y,w):void 0,q=M===void 0;if(q){var j=s(C),O=!j&&c(C),S=!j&&!O&&f(C);M=C,j||O||S?s(E)?M=E:o(E)?M=n(E):O?(q=!1,M=t(C,!0)):S?(q=!1,M=r(C,!0)):M=[]:d(C)||a(C)?(M=E,a(E)?M=x(E):(!u(E)||l(E))&&(M=i(C))):q=!1}q&&(w.set(C,M),b(M,C,p,N,w),w.delete(C)),e(m,_,M)}return ru=g,ru}var nu,zg;function GR(){if(zg)return nu;zg=1;var e=fn(),t=Y0(),r=Wc(),n=HR(),i=ve(),a=ct(),s=W0();function o(c,l,u,d,f){c!==l&&r(l,function(h,x){if(f||(f=new e),i(h))n(c,l,x,u,o,d,f);else{var g=d?d(s(c,x),h,x+"",c,l,f):void 0;g===void 0&&(g=h),t(c,x,g)}},a)}return nu=o,nu}var iu,Hg;function VR(){if(Hg)return iu;Hg=1;var e=Nn(),t=En();function r(n){return e(function(i,a){var s=-1,o=a.length,c=o>1?a[o-1]:void 0,l=o>2?a[2]:void 0;for(c=n.length>3&&typeof c=="function"?(o--,c):void 0,l&&t(a[0],a[1],l)&&(c=o<3?void 0:c,o=1),i=Object(i);++s<o;){var u=a[s];u&&n(i,u,s,c)}return i})}return iu=r,iu}var au,Gg;function UR(){if(Gg)return au;Gg=1;var e=GR(),t=VR(),r=t(function(n,i,a){e(n,i,a)});return au=r,au}var su,Vg;function X0(){if(Vg)return su;Vg=1;function e(t,r){return t<r}return su=e,su}var ou,Ug;function YR(){if(Ug)return ou;Ug=1;var e=el(),t=X0(),r=lt();function n(i){return i&&i.length?e(i,r,t):void 0}return ou=n,ou}var uu,Yg;function WR(){if(Yg)return uu;Yg=1;var e=el(),t=Ve(),r=X0();function n(i,a){return i&&i.length?e(i,t(a,2),r):void 0}return uu=n,uu}var cu,Wg;function XR(){if(Wg)return cu;Wg=1;var e=Se(),t=function(){return e.Date.now()};return cu=t,cu}var lu,Xg;function KR(){if(Xg)return lu;Xg=1;var e=pn(),t=_n(),r=gn(),n=ve(),i=cr();function a(s,o,c,l){if(!n(s))return s;o=t(o,s);for(var u=-1,d=o.length,f=d-1,h=s;h!=null&&++u<d;){var x=i(o[u]),g=c;if(x==="__proto__"||x==="constructor"||x==="prototype")return s;if(u!=f){var m=h[x];g=l?l(m,x,h):void 0,g===void 0&&(g=n(m)?m:r(o[u+1])?[]:{})}e(h,x,g),h=h[x]}return s}return lu=a,lu}var du,Kg;function ZR(){if(Kg)return du;Kg=1;var e=wn(),t=KR(),r=_n();function n(i,a,s){for(var o=-1,c=a.length,l={};++o<c;){var u=a[o],d=e(i,u);s(d,u)&&t(l,r(u,i),d)}return l}return du=n,du}var fu,Zg;function JR(){if(Zg)return fu;Zg=1;var e=ZR(),t=I0();function r(n,i){return e(n,i,function(a,s){return t(n,s)})}return fu=r,fu}var hu,Jg;function QR(){if(Jg)return hu;Jg=1;var e=U0(),t=P0(),r=L0();function n(i){return r(t(i,void 0,e),i+"")}return hu=n,hu}var pu,Qg;function e2(){if(Qg)return pu;Qg=1;var e=JR(),t=QR(),r=t(function(n,i){return n==null?{}:e(n,i)});return pu=r,pu}var gu,em;function t2(){if(em)return gu;em=1;var e=Math.ceil,t=Math.max;function r(n,i,a,s){for(var o=-1,c=t(e((i-n)/(a||1)),0),l=Array(c);c--;)l[s?c:++o]=n,n+=a;return l}return gu=r,gu}var mu,tm;function r2(){if(tm)return mu;tm=1;var e=t2(),t=En(),r=V0();function n(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),o=o===void 0?a<s?1:-1:r(o),e(a,s,o,i)}}return mu=n,mu}var vu,rm;function n2(){if(rm)return vu;rm=1;var e=r2(),t=e();return vu=t,vu}var yu,nm;function i2(){if(nm)return yu;nm=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return yu=e,yu}var xu,im;function a2(){if(im)return xu;im=1;var e=qt();function t(r,n){if(r!==n){var i=r!==void 0,a=r===null,s=r===r,o=e(r),c=n!==void 0,l=n===null,u=n===n,d=e(n);if(!l&&!d&&!o&&r>n||o&&c&&u&&!l&&!d||a&&c&&u||!i&&u||!s)return 1;if(!a&&!o&&!d&&r<n||d&&i&&s&&!a&&!o||l&&i&&s||!c&&s||!u)return-1}return 0}return xu=t,xu}var bu,am;function s2(){if(am)return bu;am=1;var e=a2();function t(r,n,i){for(var a=-1,s=r.criteria,o=n.criteria,c=s.length,l=i.length;++a<c;){var u=e(s[a],o[a]);if(u){if(a>=l)return u;var d=i[a];return u*(d=="desc"?-1:1)}}return r.index-n.index}return bu=t,bu}var _u,sm;function o2(){if(sm)return _u;sm=1;var e=bn(),t=wn(),r=Ve(),n=k0(),i=i2(),a=mn(),s=s2(),o=lt(),c=ce();function l(u,d,f){d.length?d=e(d,function(g){return c(g)?function(m){return t(m,g.length===1?g[0]:g)}:g}):d=[o];var h=-1;d=e(d,a(r));var x=n(u,function(g,m,y){var _=e(d,function(p){return p(g)});return{criteria:_,index:++h,value:g}});return i(x,function(g,m){return s(g,m,f)})}return _u=l,_u}var wu,om;function u2(){if(om)return wu;om=1;var e=Jc(),t=o2(),r=Nn(),n=En(),i=r(function(a,s){if(a==null)return[];var o=s.length;return o>1&&n(a,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return wu=i,wu}var Nu,um;function c2(){if(um)return Nu;um=1;var e=S0(),t=0;function r(n){var i=++t;return e(n)+i}return Nu=r,Nu}var Eu,cm;function l2(){if(cm)return Eu;cm=1;function e(t,r,n){for(var i=-1,a=t.length,s=r.length,o={};++i<a;){var c=i<s?r[i]:void 0;n(o,t[i],c)}return o}return Eu=e,Eu}var Su,lm;function d2(){if(lm)return Su;lm=1;var e=pn(),t=l2();function r(n,i){return t(n||[],i||[],e)}return Su=r,Su}var Cu,dm;function ae(){if(dm)return Cu;dm=1;var e;if(typeof Oc=="function")try{e={cloneDeep:IR(),constant:Yc(),defaults:AR(),each:y0(),filter:R0(),find:PR(),flatten:U0(),forEach:v0(),forIn:LR(),has:q0(),isUndefined:T0(),last:OR(),map:M0(),mapValues:DR(),max:$R(),merge:UR(),min:YR(),minBy:WR(),now:XR(),pick:e2(),range:n2(),reduce:j0(),sortBy:u2(),uniqueId:c2(),values:F0(),zipObject:d2()}}catch{}return e||(e=window._),Cu=e,Cu}var Iu,fm;function f2(){if(fm)return Iu;fm=1,Iu=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,a=i._prev;a!==i;)n.push(JSON.stringify(a,r)),a=a._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return Iu}var Au,hm;function h2(){if(hm)return Au;hm=1;var e=ae(),t=Ne().Graph,r=f2();Au=i;var n=e.constant(1);function i(l,u){if(l.nodeCount()<=1)return[];var d=o(l,u||n),f=a(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(f,function(h){return l.outEdges(h.v,h.w)}),!0)}function a(l,u,d){for(var f=[],h=u[u.length-1],x=u[0],g;l.nodeCount();){for(;g=x.dequeue();)s(l,u,d,g);for(;g=h.dequeue();)s(l,u,d,g);if(l.nodeCount()){for(var m=u.length-2;m>0;--m)if(g=u[m].dequeue(),g){f=f.concat(s(l,u,d,g,!0));break}}}return f}function s(l,u,d,f,h){var x=h?[]:void 0;return e.forEach(l.inEdges(f.v),function(g){var m=l.edge(g),y=l.node(g.v);h&&x.push({v:g.v,w:g.w}),y.out-=m,c(u,d,y)}),e.forEach(l.outEdges(f.v),function(g){var m=l.edge(g),y=g.w,_=l.node(y);_.in-=m,c(u,d,_)}),l.removeNode(f.v),x}function o(l,u){var d=new t,f=0,h=0;e.forEach(l.nodes(),function(m){d.setNode(m,{v:m,in:0,out:0})}),e.forEach(l.edges(),function(m){var y=d.edge(m.v,m.w)||0,_=u(m),p=y+_;d.setEdge(m.v,m.w,p),h=Math.max(h,d.node(m.v).out+=_),f=Math.max(f,d.node(m.w).in+=_)});var x=e.range(h+f+3).map(function(){return new r}),g=f+1;return e.forEach(d.nodes(),function(m){c(x,g,d.node(m))}),{graph:d,buckets:x,zeroIdx:g}}function c(l,u,d){d.out?d.in?l[d.out-d.in+u].enqueue(d):l[l.length-1].enqueue(d):l[0].enqueue(d)}return Au}var Ru,pm;function p2(){if(pm)return Ru;pm=1;var e=ae(),t=h2();Ru={run:r,undo:i};function r(a){var s=a.graph().acyclicer==="greedy"?t(a,o(a)):n(a);e.forEach(s,function(c){var l=a.edge(c);a.removeEdge(c),l.forwardName=c.name,l.reversed=!0,a.setEdge(c.w,c.v,l,e.uniqueId("rev"))});function o(c){return function(l){return c.edge(l).weight}}}function n(a){var s=[],o={},c={};function l(u){e.has(c,u)||(c[u]=!0,o[u]=!0,e.forEach(a.outEdges(u),function(d){e.has(o,d.w)?s.push(d):l(d.w)}),delete o[u])}return e.forEach(a.nodes(),l),s}function i(a){e.forEach(a.edges(),function(s){var o=a.edge(s);if(o.reversed){a.removeEdge(s);var c=o.forwardName;delete o.reversed,delete o.forwardName,a.setEdge(s.w,s.v,o,c)}})}return Ru}var qu,gm;function he(){if(gm)return qu;gm=1;var e=ae(),t=Ne().Graph;qu={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:s,intersectRect:o,buildLayerMatrix:c,normalizeRanks:l,removeEmptyRanks:u,addBorderNode:d,maxRank:f,partition:h,time:x,notime:g};function r(m,y,_,p){var b;do b=e.uniqueId(p);while(m.hasNode(b));return _.dummy=y,m.setNode(b,_),b}function n(m){var y=new t().setGraph(m.graph());return e.forEach(m.nodes(),function(_){y.setNode(_,m.node(_))}),e.forEach(m.edges(),function(_){var p=y.edge(_.v,_.w)||{weight:0,minlen:1},b=m.edge(_);y.setEdge(_.v,_.w,{weight:p.weight+b.weight,minlen:Math.max(p.minlen,b.minlen)})}),y}function i(m){var y=new t({multigraph:m.isMultigraph()}).setGraph(m.graph());return e.forEach(m.nodes(),function(_){m.children(_).length||y.setNode(_,m.node(_))}),e.forEach(m.edges(),function(_){y.setEdge(_,m.edge(_))}),y}function a(m){var y=e.map(m.nodes(),function(_){var p={};return e.forEach(m.outEdges(_),function(b){p[b.w]=(p[b.w]||0)+m.edge(b).weight}),p});return e.zipObject(m.nodes(),y)}function s(m){var y=e.map(m.nodes(),function(_){var p={};return e.forEach(m.inEdges(_),function(b){p[b.v]=(p[b.v]||0)+m.edge(b).weight}),p});return e.zipObject(m.nodes(),y)}function o(m,y){var _=m.x,p=m.y,b=y.x-_,N=y.y-p,w=m.width/2,E=m.height/2;if(!b&&!N)throw new Error("Not possible to find intersection inside of the rectangle");var C,I;return Math.abs(N)*w>Math.abs(b)*E?(N<0&&(E=-E),C=E*b/N,I=E):(b<0&&(w=-w),C=w,I=w*N/b),{x:_+C,y:p+I}}function c(m){var y=e.map(e.range(f(m)+1),function(){return[]});return e.forEach(m.nodes(),function(_){var p=m.node(_),b=p.rank;e.isUndefined(b)||(y[b][p.order]=_)}),y}function l(m){var y=e.min(e.map(m.nodes(),function(_){return m.node(_).rank}));e.forEach(m.nodes(),function(_){var p=m.node(_);e.has(p,"rank")&&(p.rank-=y)})}function u(m){var y=e.min(e.map(m.nodes(),function(N){return m.node(N).rank})),_=[];e.forEach(m.nodes(),function(N){var w=m.node(N).rank-y;_[w]||(_[w]=[]),_[w].push(N)});var p=0,b=m.graph().nodeRankFactor;e.forEach(_,function(N,w){e.isUndefined(N)&&w%b!==0?--p:p&&e.forEach(N,function(E){m.node(E).rank+=p})})}function d(m,y,_,p){var b={width:0,height:0};return arguments.length>=4&&(b.rank=_,b.order=p),r(m,"border",b,y)}function f(m){return e.max(e.map(m.nodes(),function(y){var _=m.node(y).rank;if(!e.isUndefined(_))return _}))}function h(m,y){var _={lhs:[],rhs:[]};return e.forEach(m,function(p){y(p)?_.lhs.push(p):_.rhs.push(p)}),_}function x(m,y){var _=e.now();try{return y()}finally{console.log(m+" time: "+(e.now()-_)+"ms")}}function g(m,y){return y()}return qu}var Tu,mm;function g2(){if(mm)return Tu;mm=1;var e=ae(),t=he();Tu={run:r,undo:i};function r(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(s){n(a,s)})}function n(a,s){var o=s.v,c=a.node(o).rank,l=s.w,u=a.node(l).rank,d=s.name,f=a.edge(s),h=f.labelRank;if(u!==c+1){a.removeEdge(s);var x,g,m;for(m=0,++c;c<u;++m,++c)f.points=[],g={width:0,height:0,edgeLabel:f,edgeObj:s,rank:c},x=t.addDummyNode(a,"edge",g,"_d"),c===h&&(g.width=f.width,g.height=f.height,g.dummy="edge-label",g.labelpos=f.labelpos),a.setEdge(o,x,{weight:f.weight},d),m===0&&a.graph().dummyChains.push(x),o=x;a.setEdge(o,l,{weight:f.weight},d)}}function i(a){e.forEach(a.graph().dummyChains,function(s){var o=a.node(s),c=o.edgeLabel,l;for(a.setEdge(o.edgeObj,c);o.dummy;)l=a.successors(s)[0],a.removeNode(s),c.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(c.x=o.x,c.y=o.y,c.width=o.width,c.height=o.height),s=l,o=a.node(s)})}return Tu}var ku,vm;function Ur(){if(vm)return ku;vm=1;var e=ae();ku={longestPath:t,slack:r};function t(n){var i={};function a(s){var o=n.node(s);if(e.has(i,s))return o.rank;i[s]=!0;var c=e.min(e.map(n.outEdges(s),function(l){return a(l.w)-n.edge(l).minlen}));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),o.rank=c}e.forEach(n.sources(),a)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return ku}var Mu,ym;function K0(){if(ym)return Mu;ym=1;var e=ae(),t=Ne().Graph,r=Ur().slack;Mu=n;function n(o){var c=new t({directed:!1}),l=o.nodes()[0],u=o.nodeCount();c.setNode(l,{});for(var d,f;i(c,o)<u;)d=a(c,o),f=c.hasNode(d.v)?r(o,d):-r(o,d),s(c,o,f);return c}function i(o,c){function l(u){e.forEach(c.nodeEdges(u),function(d){var f=d.v,h=u===f?d.w:f;!o.hasNode(h)&&!r(c,d)&&(o.setNode(h,{}),o.setEdge(u,h,{}),l(h))})}return e.forEach(o.nodes(),l),o.nodeCount()}function a(o,c){return e.minBy(c.edges(),function(l){if(o.hasNode(l.v)!==o.hasNode(l.w))return r(c,l)})}function s(o,c,l){e.forEach(o.nodes(),function(u){c.node(u).rank+=l})}return Mu}var ju,xm;function m2(){if(xm)return ju;xm=1;var e=ae(),t=K0(),r=Ur().slack,n=Ur().longestPath,i=Ne().alg.preorder,a=Ne().alg.postorder,s=he().simplify;ju=o,o.initLowLimValues=d,o.initCutValues=c,o.calcCutValue=u,o.leaveEdge=h,o.enterEdge=x,o.exchangeEdges=g;function o(p){p=s(p),n(p);var b=t(p);d(b),c(b,p);for(var N,w;N=h(b);)w=x(b,p,N),g(b,p,N,w)}function c(p,b){var N=a(p,p.nodes());N=N.slice(0,N.length-1),e.forEach(N,function(w){l(p,b,w)})}function l(p,b,N){var w=p.node(N),E=w.parent;p.edge(N,E).cutvalue=u(p,b,N)}function u(p,b,N){var w=p.node(N),E=w.parent,C=!0,I=b.edge(N,E),M=0;return I||(C=!1,I=b.edge(E,N)),M=I.weight,e.forEach(b.nodeEdges(N),function(q){var j=q.v===N,O=j?q.w:q.v;if(O!==E){var S=j===C,R=b.edge(q).weight;if(M+=S?R:-R,y(p,N,O)){var A=p.edge(N,O).cutvalue;M+=S?-A:A}}}),M}function d(p,b){arguments.length<2&&(b=p.nodes()[0]),f(p,{},1,b)}function f(p,b,N,w,E){var C=N,I=p.node(w);return b[w]=!0,e.forEach(p.neighbors(w),function(M){e.has(b,M)||(N=f(p,b,N,M,w))}),I.low=C,I.lim=N++,E?I.parent=E:delete I.parent,N}function h(p){return e.find(p.edges(),function(b){return p.edge(b).cutvalue<0})}function x(p,b,N){var w=N.v,E=N.w;b.hasEdge(w,E)||(w=N.w,E=N.v);var C=p.node(w),I=p.node(E),M=C,q=!1;C.lim>I.lim&&(M=I,q=!0);var j=e.filter(b.edges(),function(O){return q===_(p,p.node(O.v),M)&&q!==_(p,p.node(O.w),M)});return e.minBy(j,function(O){return r(b,O)})}function g(p,b,N,w){var E=N.v,C=N.w;p.removeEdge(E,C),p.setEdge(w.v,w.w,{}),d(p),c(p,b),m(p,b)}function m(p,b){var N=e.find(p.nodes(),function(E){return!b.node(E).parent}),w=i(p,N);w=w.slice(1),e.forEach(w,function(E){var C=p.node(E).parent,I=b.edge(E,C),M=!1;I||(I=b.edge(C,E),M=!0),b.node(E).rank=b.node(C).rank+(M?I.minlen:-I.minlen)})}function y(p,b,N){return p.hasEdge(b,N)}function _(p,b,N){return N.low<=b.lim&&b.lim<=N.lim}return ju}var Pu,bm;function v2(){if(bm)return Pu;bm=1;var e=Ur(),t=e.longestPath,r=K0(),n=m2();Pu=i;function i(c){switch(c.graph().ranker){case"network-simplex":o(c);break;case"tight-tree":s(c);break;case"longest-path":a(c);break;default:o(c)}}var a=t;function s(c){t(c),r(c)}function o(c){n(c)}return Pu}var Lu,_m;function y2(){if(_m)return Lu;_m=1;var e=ae();Lu=t;function t(i){var a=n(i);e.forEach(i.graph().dummyChains,function(s){for(var o=i.node(s),c=o.edgeObj,l=r(i,a,c.v,c.w),u=l.path,d=l.lca,f=0,h=u[f],x=!0;s!==c.w;){if(o=i.node(s),x){for(;(h=u[f])!==d&&i.node(h).maxRank<o.rank;)f++;h===d&&(x=!1)}if(!x){for(;f<u.length-1&&i.node(h=u[f+1]).minRank<=o.rank;)f++;h=u[f]}i.setParent(s,h),s=i.successors(s)[0]}})}function r(i,a,s,o){var c=[],l=[],u=Math.min(a[s].low,a[o].low),d=Math.max(a[s].lim,a[o].lim),f,h;f=s;do f=i.parent(f),c.push(f);while(f&&(a[f].low>u||d>a[f].lim));for(h=f,f=o;(f=i.parent(f))!==h;)l.push(f);return{path:c.concat(l.reverse()),lca:h}}function n(i){var a={},s=0;function o(c){var l=s;e.forEach(i.children(c),o),a[c]={low:l,lim:s++}}return e.forEach(i.children(),o),a}return Lu}var Ou,wm;function x2(){if(wm)return Ou;wm=1;var e=ae(),t=he();Ou={run:r,cleanup:s};function r(o){var c=t.addDummyNode(o,"root",{},"_root"),l=i(o),u=e.max(e.values(l))-1,d=2*u+1;o.graph().nestingRoot=c,e.forEach(o.edges(),function(h){o.edge(h).minlen*=d});var f=a(o)+1;e.forEach(o.children(),function(h){n(o,c,d,f,u,l,h)}),o.graph().nodeRankFactor=d}function n(o,c,l,u,d,f,h){var x=o.children(h);if(!x.length){h!==c&&o.setEdge(c,h,{weight:0,minlen:l});return}var g=t.addBorderNode(o,"_bt"),m=t.addBorderNode(o,"_bb"),y=o.node(h);o.setParent(g,h),y.borderTop=g,o.setParent(m,h),y.borderBottom=m,e.forEach(x,function(_){n(o,c,l,u,d,f,_);var p=o.node(_),b=p.borderTop?p.borderTop:_,N=p.borderBottom?p.borderBottom:_,w=p.borderTop?u:2*u,E=b!==N?1:d-f[h]+1;o.setEdge(g,b,{weight:w,minlen:E,nestingEdge:!0}),o.setEdge(N,m,{weight:w,minlen:E,nestingEdge:!0})}),o.parent(h)||o.setEdge(c,g,{weight:0,minlen:d+f[h]})}function i(o){var c={};function l(u,d){var f=o.children(u);f&&f.length&&e.forEach(f,function(h){l(h,d+1)}),c[u]=d}return e.forEach(o.children(),function(u){l(u,1)}),c}function a(o){return e.reduce(o.edges(),function(c,l){return c+o.edge(l).weight},0)}function s(o){var c=o.graph();o.removeNode(c.nestingRoot),delete c.nestingRoot,e.forEach(o.edges(),function(l){var u=o.edge(l);u.nestingEdge&&o.removeEdge(l)})}return Ou}var Du,Nm;function b2(){if(Nm)return Du;Nm=1;var e=ae(),t=he();Du=r;function r(i){function a(s){var o=i.children(s),c=i.node(s);if(o.length&&e.forEach(o,a),e.has(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(var l=c.minRank,u=c.maxRank+1;l<u;++l)n(i,"borderLeft","_bl",s,c,l),n(i,"borderRight","_br",s,c,l)}}e.forEach(i.children(),a)}function n(i,a,s,o,c,l){var u={width:0,height:0,rank:l,borderType:a},d=c[a][l-1],f=t.addDummyNode(i,"border",u,s);c[a][l]=f,i.setParent(f,o),d&&i.setEdge(d,f,{weight:1})}return Du}var Fu,Em;function _2(){if(Em)return Fu;Em=1;var e=ae();Fu={adjust:t,undo:r};function t(l){var u=l.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&n(l)}function r(l){var u=l.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&a(l),(u==="lr"||u==="rl")&&(o(l),n(l))}function n(l){e.forEach(l.nodes(),function(u){i(l.node(u))}),e.forEach(l.edges(),function(u){i(l.edge(u))})}function i(l){var u=l.width;l.width=l.height,l.height=u}function a(l){e.forEach(l.nodes(),function(u){s(l.node(u))}),e.forEach(l.edges(),function(u){var d=l.edge(u);e.forEach(d.points,s),e.has(d,"y")&&s(d)})}function s(l){l.y=-l.y}function o(l){e.forEach(l.nodes(),function(u){c(l.node(u))}),e.forEach(l.edges(),function(u){var d=l.edge(u);e.forEach(d.points,c),e.has(d,"x")&&c(d)})}function c(l){var u=l.x;l.x=l.y,l.y=u}return Fu}var $u,Sm;function w2(){if(Sm)return $u;Sm=1;var e=ae();$u=t;function t(r){var n={},i=e.filter(r.nodes(),function(l){return!r.children(l).length}),a=e.max(e.map(i,function(l){return r.node(l).rank})),s=e.map(e.range(a+1),function(){return[]});function o(l){if(!e.has(n,l)){n[l]=!0;var u=r.node(l);s[u.rank].push(l),e.forEach(r.successors(l),o)}}var c=e.sortBy(i,function(l){return r.node(l).rank});return e.forEach(c,o),s}return $u}var Bu,Cm;function N2(){if(Cm)return Bu;Cm=1;var e=ae();Bu=t;function t(n,i){for(var a=0,s=1;s<i.length;++s)a+=r(n,i[s-1],i[s]);return a}function r(n,i,a){for(var s=e.zipObject(a,e.map(a,function(f,h){return h})),o=e.flatten(e.map(i,function(f){return e.sortBy(e.map(n.outEdges(f),function(h){return{pos:s[h.w],weight:n.edge(h).weight}}),"pos")}),!0),c=1;c<a.length;)c<<=1;var l=2*c-1;c-=1;var u=e.map(new Array(l),function(){return 0}),d=0;return e.forEach(o.forEach(function(f){var h=f.pos+c;u[h]+=f.weight;for(var x=0;h>0;)h%2&&(x+=u[h+1]),h=h-1>>1,u[h]+=f.weight;d+=f.weight*x})),d}return Bu}var zu,Im;function E2(){if(Im)return zu;Im=1;var e=ae();zu=t;function t(r,n){return e.map(n,function(i){var a=r.inEdges(i);if(a.length){var s=e.reduce(a,function(o,c){var l=r.edge(c),u=r.node(c.v);return{sum:o.sum+l.weight*u.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return zu}var Hu,Am;function S2(){if(Am)return Hu;Am=1;var e=ae();Hu=t;function t(i,a){var s={};e.forEach(i,function(c,l){var u=s[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:l};e.isUndefined(c.barycenter)||(u.barycenter=c.barycenter,u.weight=c.weight)}),e.forEach(a.edges(),function(c){var l=s[c.v],u=s[c.w];!e.isUndefined(l)&&!e.isUndefined(u)&&(u.indegree++,l.out.push(s[c.w]))});var o=e.filter(s,function(c){return!c.indegree});return r(o)}function r(i){var a=[];function s(l){return function(u){u.merged||(e.isUndefined(u.barycenter)||e.isUndefined(l.barycenter)||u.barycenter>=l.barycenter)&&n(l,u)}}function o(l){return function(u){u.in.push(l),--u.indegree===0&&i.push(u)}}for(;i.length;){var c=i.pop();a.push(c),e.forEach(c.in.reverse(),s(c)),e.forEach(c.out,o(c))}return e.map(e.filter(a,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function n(i,a){var s=0,o=0;i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=s/o,i.weight=o,i.i=Math.min(a.i,i.i),a.merged=!0}return Hu}var Gu,Rm;function C2(){if(Rm)return Gu;Rm=1;var e=ae(),t=he();Gu=r;function r(a,s){var o=t.partition(a,function(g){return e.has(g,"barycenter")}),c=o.lhs,l=e.sortBy(o.rhs,function(g){return-g.i}),u=[],d=0,f=0,h=0;c.sort(i(!!s)),h=n(u,l,h),e.forEach(c,function(g){h+=g.vs.length,u.push(g.vs),d+=g.barycenter*g.weight,f+=g.weight,h=n(u,l,h)});var x={vs:e.flatten(u,!0)};return f&&(x.barycenter=d/f,x.weight=f),x}function n(a,s,o){for(var c;s.length&&(c=e.last(s)).i<=o;)s.pop(),a.push(c.vs),o++;return o}function i(a){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:a?o.i-s.i:s.i-o.i}}return Gu}var Vu,qm;function I2(){if(qm)return Vu;qm=1;var e=ae(),t=E2(),r=S2(),n=C2();Vu=i;function i(o,c,l,u){var d=o.children(c),f=o.node(c),h=f?f.borderLeft:void 0,x=f?f.borderRight:void 0,g={};h&&(d=e.filter(d,function(N){return N!==h&&N!==x}));var m=t(o,d);e.forEach(m,function(N){if(o.children(N.v).length){var w=i(o,N.v,l,u);g[N.v]=w,e.has(w,"barycenter")&&s(N,w)}});var y=r(m,l);a(y,g);var _=n(y,u);if(h&&(_.vs=e.flatten([h,_.vs,x],!0),o.predecessors(h).length)){var p=o.node(o.predecessors(h)[0]),b=o.node(o.predecessors(x)[0]);e.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+p.order+b.order)/(_.weight+2),_.weight+=2}return _}function a(o,c){e.forEach(o,function(l){l.vs=e.flatten(l.vs.map(function(u){return c[u]?c[u].vs:u}),!0)})}function s(o,c){e.isUndefined(o.barycenter)?(o.barycenter=c.barycenter,o.weight=c.weight):(o.barycenter=(o.barycenter*o.weight+c.barycenter*c.weight)/(o.weight+c.weight),o.weight+=c.weight)}return Vu}var Uu,Tm;function A2(){if(Tm)return Uu;Tm=1;var e=ae(),t=Ne().Graph;Uu=r;function r(i,a,s){var o=n(i),c=new t({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(l){return i.node(l)});return e.forEach(i.nodes(),function(l){var u=i.node(l),d=i.parent(l);(u.rank===a||u.minRank<=a&&a<=u.maxRank)&&(c.setNode(l),c.setParent(l,d||o),e.forEach(i[s](l),function(f){var h=f.v===l?f.w:f.v,x=c.edge(h,l),g=e.isUndefined(x)?0:x.weight;c.setEdge(h,l,{weight:i.edge(f).weight+g})}),e.has(u,"minRank")&&c.setNode(l,{borderLeft:u.borderLeft[a],borderRight:u.borderRight[a]}))}),c}function n(i){for(var a;i.hasNode(a=e.uniqueId("_root")););return a}return Uu}var Yu,km;function R2(){if(km)return Yu;km=1;var e=ae();Yu=t;function t(r,n,i){var a={},s;e.forEach(i,function(o){for(var c=r.parent(o),l,u;c;){if(l=r.parent(c),l?(u=a[l],a[l]=c):(u=s,s=c),u&&u!==c){n.setEdge(u,c);return}c=l}})}return Yu}var Wu,Mm;function q2(){if(Mm)return Wu;Mm=1;var e=ae(),t=w2(),r=N2(),n=I2(),i=A2(),a=R2(),s=Ne().Graph,o=he();Wu=c;function c(f){var h=o.maxRank(f),x=l(f,e.range(1,h+1),"inEdges"),g=l(f,e.range(h-1,-1,-1),"outEdges"),m=t(f);d(f,m);for(var y=Number.POSITIVE_INFINITY,_,p=0,b=0;b<4;++p,++b){u(p%2?x:g,p%4>=2),m=o.buildLayerMatrix(f);var N=r(f,m);N<y&&(b=0,_=e.cloneDeep(m),y=N)}d(f,_)}function l(f,h,x){return e.map(h,function(g){return i(f,g,x)})}function u(f,h){var x=new s;e.forEach(f,function(g){var m=g.graph().root,y=n(g,m,x,h);e.forEach(y.vs,function(_,p){g.node(_).order=p}),a(g,x,y.vs)})}function d(f,h){e.forEach(h,function(x){e.forEach(x,function(g,m){f.node(g).order=m})})}return Wu}var Xu,jm;function T2(){if(jm)return Xu;jm=1;var e=ae(),t=Ne().Graph,r=he();Xu={positionX:x,findType1Conflicts:n,findType2Conflicts:i,addConflict:s,hasConflict:o,verticalAlignment:c,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:d,balance:h};function n(y,_){var p={};function b(N,w){var E=0,C=0,I=N.length,M=e.last(w);return e.forEach(w,function(q,j){var O=a(y,q),S=O?y.node(O).order:I;(O||q===M)&&(e.forEach(w.slice(C,j+1),function(R){e.forEach(y.predecessors(R),function(A){var P=y.node(A),$=P.order;($<E||S<$)&&!(P.dummy&&y.node(R).dummy)&&s(p,A,R)})}),C=j+1,E=S)}),w}return e.reduce(_,b),p}function i(y,_){var p={};function b(w,E,C,I,M){var q;e.forEach(e.range(E,C),function(j){q=w[j],y.node(q).dummy&&e.forEach(y.predecessors(q),function(O){var S=y.node(O);S.dummy&&(S.order<I||S.order>M)&&s(p,O,q)})})}function N(w,E){var C=-1,I,M=0;return e.forEach(E,function(q,j){if(y.node(q).dummy==="border"){var O=y.predecessors(q);O.length&&(I=y.node(O[0]).order,b(E,M,j,C,I),M=j,C=I)}b(E,M,E.length,I,w.length)}),E}return e.reduce(_,N),p}function a(y,_){if(y.node(_).dummy)return e.find(y.predecessors(_),function(p){return y.node(p).dummy})}function s(y,_,p){if(_>p){var b=_;_=p,p=b}var N=y[_];N||(y[_]=N={}),N[p]=!0}function o(y,_,p){if(_>p){var b=_;_=p,p=b}return e.has(y[_],p)}function c(y,_,p,b){var N={},w={},E={};return e.forEach(_,function(C){e.forEach(C,function(I,M){N[I]=I,w[I]=I,E[I]=M})}),e.forEach(_,function(C){var I=-1;e.forEach(C,function(M){var q=b(M);if(q.length){q=e.sortBy(q,function(A){return E[A]});for(var j=(q.length-1)/2,O=Math.floor(j),S=Math.ceil(j);O<=S;++O){var R=q[O];w[M]===M&&I<E[R]&&!o(p,M,R)&&(w[R]=M,w[M]=N[M]=N[R],I=E[R])}}})}),{root:N,align:w}}function l(y,_,p,b,N){var w={},E=u(y,_,p,N),C=N?"borderLeft":"borderRight";function I(j,O){for(var S=E.nodes(),R=S.pop(),A={};R;)A[R]?j(R):(A[R]=!0,S.push(R),S=S.concat(O(R))),R=S.pop()}function M(j){w[j]=E.inEdges(j).reduce(function(O,S){return Math.max(O,w[S.v]+E.edge(S))},0)}function q(j){var O=E.outEdges(j).reduce(function(R,A){return Math.min(R,w[A.w]-E.edge(A))},Number.POSITIVE_INFINITY),S=y.node(j);O!==Number.POSITIVE_INFINITY&&S.borderType!==C&&(w[j]=Math.max(w[j],O))}return I(M,E.predecessors.bind(E)),I(q,E.successors.bind(E)),e.forEach(b,function(j){w[j]=w[p[j]]}),w}function u(y,_,p,b){var N=new t,w=y.graph(),E=g(w.nodesep,w.edgesep,b);return e.forEach(_,function(C){var I;e.forEach(C,function(M){var q=p[M];if(N.setNode(q),I){var j=p[I],O=N.edge(j,q);N.setEdge(j,q,Math.max(E(y,M,I),O||0))}I=M})}),N}function d(y,_){return e.minBy(e.values(_),function(p){var b=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY;return e.forIn(p,function(w,E){var C=m(y,E)/2;b=Math.max(w+C,b),N=Math.min(w-C,N)}),b-N})}function f(y,_){var p=e.values(_),b=e.min(p),N=e.max(p);e.forEach(["u","d"],function(w){e.forEach(["l","r"],function(E){var C=w+E,I=y[C],M;if(I!==_){var q=e.values(I);M=E==="l"?b-e.min(q):N-e.max(q),M&&(y[C]=e.mapValues(I,function(j){return j+M}))}})})}function h(y,_){return e.mapValues(y.ul,function(p,b){if(_)return y[_.toLowerCase()][b];var N=e.sortBy(e.map(y,b));return(N[1]+N[2])/2})}function x(y){var _=r.buildLayerMatrix(y),p=e.merge(n(y,_),i(y,_)),b={},N;e.forEach(["u","d"],function(E){N=E==="u"?_:e.values(_).reverse(),e.forEach(["l","r"],function(C){C==="r"&&(N=e.map(N,function(j){return e.values(j).reverse()}));var I=(E==="u"?y.predecessors:y.successors).bind(y),M=c(y,N,p,I),q=l(y,N,M.root,M.align,C==="r");C==="r"&&(q=e.mapValues(q,function(j){return-j})),b[E+C]=q})});var w=d(y,b);return f(b,w),h(b,y.graph().align)}function g(y,_,p){return function(b,N,w){var E=b.node(N),C=b.node(w),I=0,M;if(I+=E.width/2,e.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":M=-E.width/2;break;case"r":M=E.width/2;break}if(M&&(I+=p?M:-M),M=0,I+=(E.dummy?_:y)/2,I+=(C.dummy?_:y)/2,I+=C.width/2,e.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":M=C.width/2;break;case"r":M=-C.width/2;break}return M&&(I+=p?M:-M),M=0,I}}function m(y,_){return y.node(_).width}return Xu}var Ku,Pm;function k2(){if(Pm)return Ku;Pm=1;var e=ae(),t=he(),r=T2().positionX;Ku=n;function n(a){a=t.asNonCompoundGraph(a),i(a),e.forEach(r(a),function(s,o){a.node(o).x=s})}function i(a){var s=t.buildLayerMatrix(a),o=a.graph().ranksep,c=0;e.forEach(s,function(l){var u=e.max(e.map(l,function(d){return a.node(d).height}));e.forEach(l,function(d){a.node(d).y=c+u/2}),c+=u+o})}return Ku}var Zu,Lm;function M2(){if(Lm)return Zu;Lm=1;var e=ae(),t=p2(),r=g2(),n=v2(),i=he().normalizeRanks,a=y2(),s=he().removeEmptyRanks,o=x2(),c=b2(),l=_2(),u=q2(),d=k2(),f=he(),h=Ne().Graph;Zu=x;function x(k,D){var F=D&&D.debugTiming?f.time:f.notime;F("layout",function(){var z=F("  buildLayoutGraph",function(){return I(k)});F("  runLayout",function(){g(z,F)}),F("  updateInputGraph",function(){m(k,z)})})}function g(k,D){D("    makeSpaceForEdgeLabels",function(){M(k)}),D("    removeSelfEdges",function(){L(k)}),D("    acyclic",function(){t.run(k)}),D("    nestingGraph.run",function(){o.run(k)}),D("    rank",function(){n(f.asNonCompoundGraph(k))}),D("    injectEdgeLabelProxies",function(){q(k)}),D("    removeEmptyRanks",function(){s(k)}),D("    nestingGraph.cleanup",function(){o.cleanup(k)}),D("    normalizeRanks",function(){i(k)}),D("    assignRankMinMax",function(){j(k)}),D("    removeEdgeLabelProxies",function(){O(k)}),D("    normalize.run",function(){r.run(k)}),D("    parentDummyChains",function(){a(k)}),D("    addBorderSegments",function(){c(k)}),D("    order",function(){u(k)}),D("    insertSelfEdges",function(){B(k)}),D("    adjustCoordinateSystem",function(){l.adjust(k)}),D("    position",function(){d(k)}),D("    positionSelfEdges",function(){H(k)}),D("    removeBorderNodes",function(){$(k)}),D("    normalize.undo",function(){r.undo(k)}),D("    fixupEdgeLabelCoords",function(){A(k)}),D("    undoCoordinateSystem",function(){l.undo(k)}),D("    translateGraph",function(){S(k)}),D("    assignNodeIntersects",function(){R(k)}),D("    reversePoints",function(){P(k)}),D("    acyclic.undo",function(){t.undo(k)})}function m(k,D){e.forEach(k.nodes(),function(F){var z=k.node(F),G=D.node(F);z&&(z.x=G.x,z.y=G.y,D.children(F).length&&(z.width=G.width,z.height=G.height))}),e.forEach(k.edges(),function(F){var z=k.edge(F),G=D.edge(F);z.points=G.points,e.has(G,"x")&&(z.x=G.x,z.y=G.y)}),k.graph().width=D.graph().width,k.graph().height=D.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},p=["acyclicer","ranker","rankdir","align"],b=["width","height"],N={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function I(k){var D=new h({multigraph:!0,compound:!0}),F=Y(k.graph());return D.setGraph(e.merge({},_,V(F,y),e.pick(F,p))),e.forEach(k.nodes(),function(z){var G=Y(k.node(z));D.setNode(z,e.defaults(V(G,b),N)),D.setParent(z,k.parent(z))}),e.forEach(k.edges(),function(z){var G=Y(k.edge(z));D.setEdge(z,e.merge({},E,V(G,w),e.pick(G,C)))}),D}function M(k){var D=k.graph();D.ranksep/=2,e.forEach(k.edges(),function(F){var z=k.edge(F);z.minlen*=2,z.labelpos.toLowerCase()!=="c"&&(D.rankdir==="TB"||D.rankdir==="BT"?z.width+=z.labeloffset:z.height+=z.labeloffset)})}function q(k){e.forEach(k.edges(),function(D){var F=k.edge(D);if(F.width&&F.height){var z=k.node(D.v),G=k.node(D.w),U={rank:(G.rank-z.rank)/2+z.rank,e:D};f.addDummyNode(k,"edge-proxy",U,"_ep")}})}function j(k){var D=0;e.forEach(k.nodes(),function(F){var z=k.node(F);z.borderTop&&(z.minRank=k.node(z.borderTop).rank,z.maxRank=k.node(z.borderBottom).rank,D=e.max(D,z.maxRank))}),k.graph().maxRank=D}function O(k){e.forEach(k.nodes(),function(D){var F=k.node(D);F.dummy==="edge-proxy"&&(k.edge(F.e).labelRank=F.rank,k.removeNode(D))})}function S(k){var D=Number.POSITIVE_INFINITY,F=0,z=Number.POSITIVE_INFINITY,G=0,U=k.graph(),Z=U.marginx||0,ee=U.marginy||0;function Q(K){var W=K.x,X=K.y,ne=K.width,te=K.height;D=Math.min(D,W-ne/2),F=Math.max(F,W+ne/2),z=Math.min(z,X-te/2),G=Math.max(G,X+te/2)}e.forEach(k.nodes(),function(K){Q(k.node(K))}),e.forEach(k.edges(),function(K){var W=k.edge(K);e.has(W,"x")&&Q(W)}),D-=Z,z-=ee,e.forEach(k.nodes(),function(K){var W=k.node(K);W.x-=D,W.y-=z}),e.forEach(k.edges(),function(K){var W=k.edge(K);e.forEach(W.points,function(X){X.x-=D,X.y-=z}),e.has(W,"x")&&(W.x-=D),e.has(W,"y")&&(W.y-=z)}),U.width=F-D+Z,U.height=G-z+ee}function R(k){e.forEach(k.edges(),function(D){var F=k.edge(D),z=k.node(D.v),G=k.node(D.w),U,Z;F.points?(U=F.points[0],Z=F.points[F.points.length-1]):(F.points=[],U=G,Z=z),F.points.unshift(f.intersectRect(z,U)),F.points.push(f.intersectRect(G,Z))})}function A(k){e.forEach(k.edges(),function(D){var F=k.edge(D);if(e.has(F,"x"))switch((F.labelpos==="l"||F.labelpos==="r")&&(F.width-=F.labeloffset),F.labelpos){case"l":F.x-=F.width/2+F.labeloffset;break;case"r":F.x+=F.width/2+F.labeloffset;break}})}function P(k){e.forEach(k.edges(),function(D){var F=k.edge(D);F.reversed&&F.points.reverse()})}function $(k){e.forEach(k.nodes(),function(D){if(k.children(D).length){var F=k.node(D),z=k.node(F.borderTop),G=k.node(F.borderBottom),U=k.node(e.last(F.borderLeft)),Z=k.node(e.last(F.borderRight));F.width=Math.abs(Z.x-U.x),F.height=Math.abs(G.y-z.y),F.x=U.x+F.width/2,F.y=z.y+F.height/2}}),e.forEach(k.nodes(),function(D){k.node(D).dummy==="border"&&k.removeNode(D)})}function L(k){e.forEach(k.edges(),function(D){if(D.v===D.w){var F=k.node(D.v);F.selfEdges||(F.selfEdges=[]),F.selfEdges.push({e:D,label:k.edge(D)}),k.removeEdge(D)}})}function B(k){var D=f.buildLayerMatrix(k);e.forEach(D,function(F){var z=0;e.forEach(F,function(G,U){var Z=k.node(G);Z.order=U+z,e.forEach(Z.selfEdges,function(ee){f.addDummyNode(k,"selfedge",{width:ee.label.width,height:ee.label.height,rank:Z.rank,order:U+ ++z,e:ee.e,label:ee.label},"_se")}),delete Z.selfEdges})})}function H(k){e.forEach(k.nodes(),function(D){var F=k.node(D);if(F.dummy==="selfedge"){var z=k.node(F.e.v),G=z.x+z.width/2,U=z.y,Z=F.x-G,ee=z.height/2;k.setEdge(F.e,F.label),k.removeNode(D),F.label.points=[{x:G+2*Z/3,y:U-ee},{x:G+5*Z/6,y:U-ee},{x:G+Z,y:U},{x:G+5*Z/6,y:U+ee},{x:G+2*Z/3,y:U+ee}],F.label.x=F.x,F.label.y=F.y}})}function V(k,D){return e.mapValues(e.pick(k,D),Number)}function Y(k){var D={};return e.forEach(k,function(F,z){D[z.toLowerCase()]=F}),D}return Zu}var Ju,Om;function j2(){if(Om)return Ju;Om=1;var e=ae(),t=he(),r=Ne().Graph;Ju={debugOrdering:n};function n(i){var a=t.buildLayerMatrix(i),s=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+i.node(o).rank)}),e.forEach(i.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),e.forEach(a,function(o,c){var l="layer"+c;s.setNode(l,{rank:"same"}),e.reduce(o,function(u,d){return s.setEdge(u,d,{style:"invis"}),d})}),s}return Ju}var Qu,Dm;function P2(){return Dm||(Dm=1,Qu="0.8.5"),Qu}var ec,Fm;function L2(){return Fm||(Fm=1,ec={graphlib:Ne(),layout:M2(),debug:j2(),util:{time:he().time,notime:he().notime},version:P2()}),ec}var O2=L2();const Yr=Xx(O2),D2=(e,t,r="TB",n)=>{const i=new Yr.graphlib.Graph;i.setDefaultEdgeLabel(()=>({}));const a=180,s=100,o={nodeSpacingX:(n==null?void 0:n.nodeSpacingX)||100,nodeSpacingY:(n==null?void 0:n.nodeSpacingY)||100,rankSpacing:(n==null?void 0:n.rankSpacing)||150,alignment:(n==null?void 0:n.alignment)||"UL",ranker:(n==null?void 0:n.ranker)||"network-simplex"};return i.setGraph({rankdir:r,nodesep:r==="LR"||r==="RL"?o.nodeSpacingY:o.nodeSpacingX,ranksep:o.rankSpacing,marginx:50,marginy:50,align:o.alignment,ranker:o.ranker}),e.forEach(l=>{i.setNode(l.id,{width:a,height:s})}),t.forEach(l=>{i.setEdge(l.source,l.target)}),Yr.layout(i),{nodes:e.map(l=>{const u=i.node(l.id);return{...l,position:{x:u.x-a/2,y:u.y-s/2}}}),edges:t}},tc=(e,t,r)=>{const n=new Map,i=new Map,a=new Map;e.forEach(g=>{a.set(g.id,g),n.set(g.id,[]),i.set(g.id,[])}),t.forEach(g=>{var m,y,_,p,b;((m=g.data)==null?void 0:m.edgeType)==="enables"||((y=g.data)==null?void 0:y.edgeType)==="produces"?((_=n.get(g.source))==null||_.push(g.target),(p=i.get(g.target))==null||p.push(g.source)):(b=g.data)==null||b.edgeType});const s=(g,m=new Set)=>{if(m.has(g))return 0;m.add(g);const y=n.get(g)||[];let _=y.length;return y.forEach(p=>{_+=s(p,m)}),_},o=new Map;e.forEach(g=>{o.set(g.id,s(g.id))});const c=new Yr.graphlib.Graph;c.setDefaultEdgeLabel(()=>({}));const l=180,u=100,d=(r==null?void 0:r.nodeSpacingX)||80,f=(r==null?void 0:r.rankSpacing)||150;c.setGraph({rankdir:"TB",nodesep:d,ranksep:f,marginx:50,marginy:50,align:(r==null?void 0:r.alignment)||"UL",ranker:"longest-path"}),e.forEach(g=>{const m=o.get(g.id)||0,y=Math.min(m*10,200);c.setNode(g.id,{width:l+y,height:u})}),t.forEach(g=>{c.setEdge(g.source,g.target)}),Yr.layout(c);const h=e.map(g=>{const m=c.node(g.id),y=o.get(g.id)||0,_=Math.min(y*10,200);return{...g,position:{x:m.x-(l+_)/2,y:m.y-u/2}}});return{nodes:h.map(g=>{const m=i.get(g.id)||[];if(m.length>0){const y=h.find(_=>_.id===m[0]);if(y){const _=y.position.x-g.position.x;return{...g,position:{x:g.position.x+_*.1,y:g.position.y}}}}return g}),edges:t}},F2=(e,t,r,n)=>{var x;const i={x:0,y:0},a=(r==null?void 0:r.radialSpacing)||300,s=((r==null?void 0:r.startAngle)||0)*Math.PI/180,o=((r==null?void 0:r.endAngle)||360)*Math.PI/180,c=new Map,l=new Set,u=new Map;t.forEach(g=>{u.has(g.source)||u.set(g.source,[]),u.has(g.target)||u.set(g.target,[]),u.get(g.source).push(g.target),u.get(g.target).push(g.source)});const d=(x=e[0])==null?void 0:x.id;if(d){const g=[d];for(c.set(d,0),l.add(d);g.length>0;){const m=g.shift(),y=c.get(m);(u.get(m)||[]).forEach(p=>{l.has(p)||(l.add(p),c.set(p,y+1),g.push(p))})}}const f=new Map;return e.forEach(g=>{const m=c.get(g.id)||0;f.has(m)||f.set(m,[]),f.get(m).push(g)}),{nodes:e.map(g=>{const m=c.get(g.id)||0,y=f.get(m)||[],_=y.indexOf(g),p=o-s,b=p/Math.max(y.length-(p>=2*Math.PI?0:1),1),N=s+_*b,w=a*(m+1);return{...g,position:{x:i.x+Math.cos(N)*w,y:i.y+Math.sin(N)*w}}}),edges:t}},$2=T.memo(nC),B2={custom:$2},z2={},H2=()=>{const{nodes:e,edges:t,descriptions:r,setData:n}=Ty(),[i,a]=T.useState(!1),[s,o]=T.useState({nodeSpacingX:60,nodeSpacingY:60,rankSpacing:120,alignment:"UL",ranker:"longest-path",animate:!0}),[c,l]=T.useState("simplebezier"),u=T.useMemo(()=>{const S=t.map(A=>({id:A.id,source:A.source,target:A.target,type:c,animated:!1,data:A.data,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));return tc(e,S,s)},[e,t,c,s]),[d,f,h]=NS(u.nodes),[x,g,m]=ES(u.edges);T.useEffect(()=>{const S=tc(e,t,s),R=S.edges.map(A=>({...A,type:c,animated:!1,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));f(S.nodes),g(R)},[e,t,f,g,c,s]),T.useEffect(()=>{g(S=>S.map(R=>({...R,type:c})))},[c,g]);const[y,_]=T.useState("hierarchical"),[p,b]=T.useState(null),N=T.useCallback(S=>{const R=d.find(A=>A.id===S);R&&b(R)},[d]),w=T.useCallback((S,R)=>{const A=R;b(A),g(P=>{const $=new Set;return P.forEach(L=>{(L.source===A.id||L.target===A.id)&&$.add(L.id)}),P.map(L=>{var H;const B=$.has(L.id);return!B&&((H=L.style)==null?void 0:H.opacity)===.2?L:{...L,animated:!1,style:{stroke:B?"#3b82f6":"#94a3b8",strokeWidth:B?2:1,opacity:B?.8:.2}}})})},[g]),E=T.useCallback(()=>{b(null),g(S=>S.map(R=>({...R,animated:!1,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}})))},[g]),C=T.useMemo(()=>{if(!p)return{source:[],target:[]};const S=x.filter(A=>A.target===p.id).map(A=>d.find(P=>P.id===A.source)).filter(Boolean),R=x.filter(A=>A.source===p.id).map(A=>d.find(P=>P.id===A.target)).filter(Boolean);return{source:S,target:R}},[p,d,x]),I=T.useCallback(S=>g(R=>Pv({...S,type:c,animated:!1,style:{strokeWidth:1,stroke:"#6b7280",opacity:.5}},R)),[g,c]),M=T.useCallback(S=>{let R;switch(S){case"hierarchical":R=tc(d,x,s);break;case"radial":R=F2(d,x,{radialSpacing:s.radialSpacing,startAngle:s.startAngle,endAngle:s.endAngle});break;case"TB":case"LR":case"BT":case"RL":R=D2(d,x,S,s);break;default:return}const A=R.edges.map(P=>({...P,type:c,animated:!1,data:P.data,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));if(s.animate){const $=d.map(V=>({...V.position})),L=R.nodes.map(V=>V.position),B=Date.now(),H=()=>{const V=Date.now()-B,Y=Math.min(V/500,1),k=1-Math.pow(1-Y,3),D=d.map((F,z)=>({...R.nodes[z],position:{x:$[z].x+(L[z].x-$[z].x)*k,y:$[z].y+(L[z].y-$[z].y)*k}}));f(D),Y<1?requestAnimationFrame(H):g(A)};H()}else f(R.nodes),g(A);_(S)},[d,x,f,g,s,c]),q=T.useCallback(S=>{n(S),a(!1)},[n]),j=S=>{var R;switch((R=S.data)==null?void 0:R.nodeType){case"foundation":return"hsl(var(--primary))";case"technique":return"hsl(var(--chart-2))";case"combination":return"hsl(var(--chart-1))";case"application":return"hsl(var(--accent))";case"product":return"hsl(var(--destructive))";case"domain":return"hsl(var(--secondary))";default:return"hsl(var(--muted))"}},O=T.useMemo(()=>({type:c,animated:!1,style:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1,opacity:.5}}),[c]);return i?v.jsx("div",{className:"w-full h-full flex items-center justify-center bg-background p-8",children:v.jsxs("div",{className:"relative",children:[v.jsx(Bt,{onClick:()=>a(!1),variant:"ghost",size:"icon",className:"absolute -top-12 right-0",children:v.jsx(Ry,{className:"h-4 w-4"})}),v.jsx(yI,{onDataLoaded:q})]})}):v.jsxs("div",{className:"w-full h-full",children:[v.jsxs(wS,{nodes:d,edges:x,onNodesChange:h,onEdgesChange:m,onConnect:I,onNodeClick:w,onPaneClick:E,nodeTypes:B2,edgeTypes:z2,defaultEdgeOptions:O,fitView:!0,fitViewOptions:{padding:.2,maxZoom:1},className:"bg-background",minZoom:.1,maxZoom:2,connectionMode:at.Loose,elevateNodesOnSelect:!1,elevateEdgesOnSelect:!1,selectNodesOnDrag:!1,proOptions:{hideAttribution:!0},children:[v.jsx(RS,{variant:$e.Dots,gap:20,size:1,color:"hsl(var(--muted-foreground) / 0.2)"}),v.jsx(LS,{className:"bg-card border shadow-lg"}),v.jsx(XS,{nodeColor:j,className:"!bg-card !border !shadow-lg",maskColor:"hsl(var(--background) / 0.6)"}),v.jsxs(nr,{position:"top-left",className:"space-y-2 max-w-sm",children:[v.jsxs(Bt,{onClick:()=>a(!0),className:"w-full mb-2",variant:"outline",children:[v.jsx(Pt,{className:"mr-2 h-4 w-4"}),"Load JSON Data"]}),v.jsx($C,{config:s,onConfigChange:S=>{o(S),y!=="manual"&&M(y)},onLayoutSelect:S=>M(S),selectedLayout:y}),v.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[v.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Edge Type"}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx("button",{onClick:()=>l("straight"),className:`px-3 py-1 text-xs rounded transition-colors ${c==="straight"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Fastest performance",children:"Straight"}),v.jsx("button",{onClick:()=>l("smoothstep"),className:`px-3 py-1 text-xs rounded transition-colors ${c==="smoothstep"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Balanced performance and aesthetics",children:"Smooth Step"}),v.jsx("button",{onClick:()=>l("simplebezier"),className:`px-3 py-1 text-xs rounded transition-colors ${c==="simplebezier"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Simple curves",children:"Simple Bezier"}),v.jsx("button",{onClick:()=>l("bezier"),className:`px-3 py-1 text-xs rounded transition-colors ${c==="bezier"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Complex curves",children:"Bezier"})]}),v.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[c==="straight"&&"⚡ Fastest rendering",c==="smoothstep"&&"⚖️ Good balance",c==="simplebezier"&&"〰️ Simple curves",c==="bezier"&&"🎨 Best aesthetics"]})]}),v.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[v.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Node Types"}),v.jsxs("div",{className:"space-y-1 text-xs",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-3 h-3 rounded bg-primary"}),v.jsx("span",{className:"text-muted-foreground",children:"Foundation"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-3 h-3 rounded bg-chart-2"}),v.jsx("span",{className:"text-muted-foreground",children:"Technique"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-3 h-3 rounded bg-chart-1"}),v.jsx("span",{className:"text-muted-foreground",children:"Combination"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-3 h-3 rounded bg-accent"}),v.jsx("span",{className:"text-muted-foreground",children:"Application"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-3 h-3 rounded bg-destructive"}),v.jsx("span",{className:"text-muted-foreground",children:"Product"})]})]})]}),v.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[v.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Domain Tags"}),v.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),v.jsx("span",{className:"text-muted-foreground",children:"Finance"})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),v.jsx("span",{className:"text-muted-foreground",children:"Medical"})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),v.jsx("span",{className:"text-muted-foreground",children:"Legal"})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),v.jsx("span",{className:"text-muted-foreground",children:"Education"})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),v.jsx("span",{className:"text-muted-foreground",children:"Retail"})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-pink-500"}),v.jsx("span",{className:"text-muted-foreground",children:"Gaming"})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500"}),v.jsx("span",{className:"text-muted-foreground",children:"Technology"})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-teal-500"}),v.jsx("span",{className:"text-muted-foreground",children:"Automotive"})]})]})]})]})]}),v.jsx(DC,{node:p,onClose:()=>b(null),connectedNodes:C}),v.jsx(_I,{nodes:d,edges:x,descriptions:r,onNodeClick:N})]})},G2=()=>v.jsx(LC,{children:v.jsx(Sy,{children:v.jsx(H2,{})})}),V2=()=>v.jsx("div",{className:"w-full h-screen bg-background",children:v.jsx(G2,{})}),K2=V2;export{K2 as component};
