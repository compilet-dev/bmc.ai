import{u as rb,R as ke,r as j,j as p,a as zm,c as pr,g as nb}from"./index-CEtBPBH7.js";import{c as ie,a as Jt,u as Mr,b as fl,C as Hm,d as Gm,e as Vm,f as Um,B as _e,g as ib}from"./card-B4rxitd3.js";import{C as ab,E as sb,c as _u,P as Ct,A as Ft,a as Tr,b as $t,d as ob}from"./index-Cwj3Qgk3.js";function ue(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=ue(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var cb={value:()=>{}};function Zr(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Ar(r)}function Ar(e){this._=e}function ub(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Ar.prototype=Zr.prototype={constructor:Ar,on:function(e,t){var r=this._,n=ub(e+"",r),i,a=-1,s=n.length;if(arguments.length<2){for(;++a<s;)if((i=(e=n[a]).type)&&(i=lb(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=n[a]).type)r[i]=hl(r[i],e.name,t);else if(t==null)for(i in r)r[i]=hl(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Ar(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)}};function lb(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function hl(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=cb,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var su="http://www.w3.org/1999/xhtml";const pl={svg:"http://www.w3.org/2000/svg",xhtml:su,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jr(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),pl.hasOwnProperty(t)?{space:pl[t],local:e}:e}function db(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===su&&t.documentElement.namespaceURI===su?t.createElement(e):t.createElementNS(r,e)}}function fb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ym(e){var t=Jr(e);return(t.local?fb:db)(t)}function hb(){}function wu(e){return e==null?hb:function(){return this.querySelector(e)}}function pb(e){typeof e!="function"&&(e=wu(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=new Array(s),u,l,c=0;c<s;++c)(u=a[c])&&(l=e.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),o[c]=l);return new me(n,this._parents)}function gb(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mb(){return[]}function Wm(e){return e==null?mb:function(){return this.querySelectorAll(e)}}function vb(e){return function(){return gb(e.apply(this,arguments))}}function yb(e){typeof e=="function"?e=vb(e):e=Wm(e);for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a)for(var s=t[a],o=s.length,u,l=0;l<o;++l)(u=s[l])&&(n.push(e.call(u,u.__data__,l,s)),i.push(u));return new me(n,i)}function Xm(e){return function(){return this.matches(e)}}function Km(e){return function(t){return t.matches(e)}}var xb=Array.prototype.find;function bb(e){return function(){return xb.call(this.children,e)}}function _b(){return this.firstElementChild}function wb(e){return this.select(e==null?_b:bb(typeof e=="function"?e:Km(e)))}var Nb=Array.prototype.filter;function Eb(){return Array.from(this.children)}function Sb(e){return function(){return Nb.call(this.children,e)}}function Cb(e){return this.selectAll(e==null?Eb:Sb(typeof e=="function"?e:Km(e)))}function Ab(e){typeof e!="function"&&(e=Xm(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=[],u,l=0;l<s;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&o.push(u);return new me(n,this._parents)}function Zm(e){return new Array(e.length)}function kb(){return new me(this._enter||this._groups.map(Zm),this._parents)}function qr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qr.prototype={constructor:qr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ib(e){return function(){return e}}function jb(e,t,r,n,i,a){for(var s=0,o,u=t.length,l=a.length;s<l;++s)(o=t[s])?(o.__data__=a[s],n[s]=o):r[s]=new qr(e,a[s]);for(;s<u;++s)(o=t[s])&&(i[s]=o)}function Rb(e,t,r,n,i,a,s){var o,u,l=new Map,c=t.length,d=a.length,f=new Array(c),h;for(o=0;o<c;++o)(u=t[o])&&(f[o]=h=s.call(u,u.__data__,o,t)+"",l.has(h)?i[o]=u:l.set(h,u));for(o=0;o<d;++o)h=s.call(e,a[o],o,a)+"",(u=l.get(h))?(n[o]=u,u.__data__=a[o],l.delete(h)):r[o]=new qr(e,a[o]);for(o=0;o<c;++o)(u=t[o])&&l.get(f[o])===u&&(i[o]=u)}function Mb(e){return e.__data__}function Tb(e,t){if(!arguments.length)return Array.from(this,Mb);var r=t?Rb:jb,n=this._parents,i=this._groups;typeof e!="function"&&(e=Ib(e));for(var a=i.length,s=new Array(a),o=new Array(a),u=new Array(a),l=0;l<a;++l){var c=n[l],d=i[l],f=d.length,h=qb(e.call(c,c&&c.__data__,l,n)),x=h.length,m=o[l]=new Array(x),v=s[l]=new Array(x),y=u[l]=new Array(f);r(c,d,m,v,y,h,t);for(var _=0,g=0,b,N;_<x;++_)if(b=m[_]){for(_>=g&&(g=_+1);!(N=v[g])&&++g<x;);b._next=N||null}}return s=new me(s,n),s._enter=o,s._exit=u,s}function qb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pb(){return new me(this._exit||this._groups.map(Zm),this._parents)}function Lb(e,t,r){var n=this.enter(),i=this,a=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?a.remove():r(a),n&&i?n.merge(i).order():i}function Db(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,a=n.length,s=Math.min(i,a),o=new Array(i),u=0;u<s;++u)for(var l=r[u],c=n[u],d=l.length,f=o[u]=new Array(d),h,x=0;x<d;++x)(h=l[x]||c[x])&&(f[x]=h);for(;u<i;++u)o[u]=r[u];return new me(o,this._parents)}function Ob(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,a=n[i],s;--i>=0;)(s=n[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Fb(e){e||(e=$b);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var s=r[a],o=s.length,u=i[a]=new Array(o),l,c=0;c<o;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new me(i,this._parents).order()}function $b(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Bb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zb(){return Array.from(this)}function Hb(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length;i<a;++i){var s=n[i];if(s)return s}return null}function Gb(){let e=0;for(const t of this)++e;return e}function Vb(){return!this.node()}function Ub(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,s=i.length,o;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function Yb(e){return function(){this.removeAttribute(e)}}function Wb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xb(e,t){return function(){this.setAttribute(e,t)}}function Kb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Zb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Jb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Qb(e,t){var r=Jr(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Wb:Yb:typeof t=="function"?r.local?Jb:Zb:r.local?Kb:Xb)(r,t))}function Jm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function e_(e){return function(){this.style.removeProperty(e)}}function t_(e,t,r){return function(){this.style.setProperty(e,t,r)}}function r_(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function n_(e,t,r){return arguments.length>1?this.each((t==null?e_:typeof t=="function"?r_:t_)(e,t,r??"")):xt(this.node(),e)}function xt(e,t){return e.style.getPropertyValue(t)||Jm(e).getComputedStyle(e,null).getPropertyValue(t)}function i_(e){return function(){delete this[e]}}function a_(e,t){return function(){this[e]=t}}function s_(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function o_(e,t){return arguments.length>1?this.each((t==null?i_:typeof t=="function"?s_:a_)(e,t)):this.node()[e]}function Qm(e){return e.trim().split(/^|\s+/)}function Nu(e){return e.classList||new ev(e)}function ev(e){this._node=e,this._names=Qm(e.getAttribute("class")||"")}ev.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function tv(e,t){for(var r=Nu(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function rv(e,t){for(var r=Nu(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function c_(e){return function(){tv(this,e)}}function u_(e){return function(){rv(this,e)}}function l_(e,t){return function(){(t.apply(this,arguments)?tv:rv)(this,e)}}function d_(e,t){var r=Qm(e+"");if(arguments.length<2){for(var n=Nu(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?l_:t?c_:u_)(r,t))}function f_(){this.textContent=""}function h_(e){return function(){this.textContent=e}}function p_(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function g_(e){return arguments.length?this.each(e==null?f_:(typeof e=="function"?p_:h_)(e)):this.node().textContent}function m_(){this.innerHTML=""}function v_(e){return function(){this.innerHTML=e}}function y_(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function x_(e){return arguments.length?this.each(e==null?m_:(typeof e=="function"?y_:v_)(e)):this.node().innerHTML}function b_(){this.nextSibling&&this.parentNode.appendChild(this)}function __(){return this.each(b_)}function w_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function N_(){return this.each(w_)}function E_(e){var t=typeof e=="function"?e:Ym(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function S_(){return null}function C_(e,t){var r=typeof e=="function"?e:Ym(e),n=t==null?S_:typeof t=="function"?t:wu(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function A_(){var e=this.parentNode;e&&e.removeChild(this)}function k_(){return this.each(A_)}function I_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function j_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function R_(e){return this.select(e?j_:I_)}function M_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function T_(e){return function(t){e.call(this,t,this.__data__)}}function q_(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function P_(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,a;r<i;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++n]=a;++n?t.length=n:delete this.__on}}}function L_(e,t,r){return function(){var n=this.__on,i,a=T_(t);if(n){for(var s=0,o=n.length;s<o;++s)if((i=n[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=t;return}}this.addEventListener(e.type,a,r),i={type:e.type,name:e.name,value:t,listener:a,options:r},n?n.push(i):this.__on=[i]}}function D_(e,t,r){var n=q_(e+""),i,a=n.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,c;u<l;++u)for(i=0,c=o[u];i<a;++i)if((s=n[i]).type===c.type&&s.name===c.name)return c.value}return}for(o=t?L_:P_,i=0;i<a;++i)this.each(o(n[i],t,r));return this}function nv(e,t,r){var n=Jm(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function O_(e,t){return function(){return nv(this,e,t)}}function F_(e,t){return function(){return nv(this,e,t.apply(this,arguments))}}function $_(e,t){return this.each((typeof t=="function"?F_:O_)(e,t))}function*B_(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length,s;i<a;++i)(s=n[i])&&(yield s)}var iv=[null];function me(e,t){this._groups=e,this._parents=t}function Qt(){return new me([[document.documentElement]],iv)}function z_(){return this}me.prototype=Qt.prototype={constructor:me,select:pb,selectAll:yb,selectChild:wb,selectChildren:Cb,filter:Ab,data:Tb,enter:kb,exit:Pb,join:Lb,merge:Db,selection:z_,order:Ob,sort:Fb,call:Bb,nodes:zb,node:Hb,size:Gb,empty:Vb,each:Ub,attr:Qb,style:n_,property:o_,classed:d_,text:g_,html:x_,raise:__,lower:N_,append:E_,insert:C_,remove:k_,clone:R_,datum:M_,on:D_,dispatch:$_,[Symbol.iterator]:B_};function ge(e){return typeof e=="string"?new me([[document.querySelector(e)]],[document.documentElement]):new me([[e]],iv)}function H_(e){let t;for(;t=e.sourceEvent;)e=t;return e}function be(e,t){if(e=H_(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const G_={passive:!1},Ht={capture:!0,passive:!1};function Rn(e){e.stopImmediatePropagation()}function vt(e){e.preventDefault(),e.stopImmediatePropagation()}function av(e){var t=e.document.documentElement,r=ge(e).on("dragstart.drag",vt,Ht);"onselectstart"in t?r.on("selectstart.drag",vt,Ht):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function sv(e,t){var r=e.document.documentElement,n=ge(e).on("dragstart.drag",null);t&&(n.on("click.drag",vt,Ht),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const gr=e=>()=>e;function ou(e,{sourceEvent:t,subject:r,target:n,identifier:i,active:a,x:s,y:o,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}ou.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function V_(e){return!e.ctrlKey&&!e.button}function U_(){return this.parentNode}function Y_(e,t){return t??{x:e.x,y:e.y}}function W_(){return navigator.maxTouchPoints||"ontouchstart"in this}function ov(){var e=V_,t=U_,r=Y_,n=W_,i={},a=Zr("start","drag","end"),s=0,o,u,l,c,d=0;function f(b){b.on("mousedown.drag",h).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,G_).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(b,N){if(!(c||!e.call(this,b,N))){var E=g(this,t.call(this,b,N),b,N,"mouse");E&&(ge(b.view).on("mousemove.drag",x,Ht).on("mouseup.drag",m,Ht),av(b.view),Rn(b),l=!1,o=b.clientX,u=b.clientY,E("start",b))}}function x(b){if(vt(b),!l){var N=b.clientX-o,E=b.clientY-u;l=N*N+E*E>d}i.mouse("drag",b)}function m(b){ge(b.view).on("mousemove.drag mouseup.drag",null),sv(b.view,l),vt(b),i.mouse("end",b)}function v(b,N){if(e.call(this,b,N)){var E=b.changedTouches,w=t.call(this,b,N),A=E.length,k,T;for(k=0;k<A;++k)(T=g(this,w,b,N,E[k].identifier,E[k]))&&(Rn(b),T("start",b,E[k]))}}function y(b){var N=b.changedTouches,E=N.length,w,A;for(w=0;w<E;++w)(A=i[N[w].identifier])&&(vt(b),A("drag",b,N[w]))}function _(b){var N=b.changedTouches,E=N.length,w,A;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),w=0;w<E;++w)(A=i[N[w].identifier])&&(Rn(b),A("end",b,N[w]))}function g(b,N,E,w,A,k){var T=a.copy(),M=be(k||E,N),L,F,C;if((C=r.call(b,new ou("beforestart",{sourceEvent:E,target:f,identifier:A,active:s,x:M[0],y:M[1],dx:0,dy:0,dispatch:T}),w))!=null)return L=C.x-M[0]||0,F=C.y-M[1]||0,function R(S,I,O){var q=M,$;switch(S){case"start":i[A]=R,$=s++;break;case"end":delete i[A],--s;case"drag":M=be(O||I,N),$=s;break}T.call(S,b,new ou(S,{sourceEvent:I,subject:C,target:f,identifier:A,active:$,x:M[0]+L,y:M[1]+F,dx:M[0]-q[0],dy:M[1]-q[1],dispatch:T}),w)}}return f.filter=function(b){return arguments.length?(e=typeof b=="function"?b:gr(!!b),f):e},f.container=function(b){return arguments.length?(t=typeof b=="function"?b:gr(b),f):t},f.subject=function(b){return arguments.length?(r=typeof b=="function"?b:gr(b),f):r},f.touchable=function(b){return arguments.length?(n=typeof b=="function"?b:gr(!!b),f):n},f.on=function(){var b=a.on.apply(a,arguments);return b===a?f:b},f.clickDistance=function(b){return arguments.length?(d=(b=+b)*b,f):Math.sqrt(d)},f}function Eu(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cv(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function er(){}var Gt=.7,Pr=1/Gt,yt="\\s*([+-]?\\d+)\\s*",Vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",X_=/^#([0-9a-f]{3,8})$/,K_=new RegExp(`^rgb\\(${yt},${yt},${yt}\\)$`),Z_=new RegExp(`^rgb\\(${Re},${Re},${Re}\\)$`),J_=new RegExp(`^rgba\\(${yt},${yt},${yt},${Vt}\\)$`),Q_=new RegExp(`^rgba\\(${Re},${Re},${Re},${Vt}\\)$`),e1=new RegExp(`^hsl\\(${Vt},${Re},${Re}\\)$`),t1=new RegExp(`^hsla\\(${Vt},${Re},${Re},${Vt}\\)$`),gl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Eu(er,it,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ml,formatHex:ml,formatHex8:r1,formatHsl:n1,formatRgb:vl,toString:vl});function ml(){return this.rgb().formatHex()}function r1(){return this.rgb().formatHex8()}function n1(){return uv(this).formatHsl()}function vl(){return this.rgb().formatRgb()}function it(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=X_.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?yl(t):r===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?mr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?mr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=K_.exec(e))?new fe(t[1],t[2],t[3],1):(t=Z_.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=J_.exec(e))?mr(t[1],t[2],t[3],t[4]):(t=Q_.exec(e))?mr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=e1.exec(e))?_l(t[1],t[2]/100,t[3]/100,1):(t=t1.exec(e))?_l(t[1],t[2]/100,t[3]/100,t[4]):gl.hasOwnProperty(e)?yl(gl[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function yl(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function mr(e,t,r,n){return n<=0&&(e=t=r=NaN),new fe(e,t,r,n)}function i1(e){return e instanceof er||(e=it(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function cu(e,t,r,n){return arguments.length===1?i1(e):new fe(e,t,r,n??1)}function fe(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Eu(fe,cu,cv(er,{brighter(e){return e=e==null?Pr:Math.pow(Pr,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gt:Math.pow(Gt,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(rt(this.r),rt(this.g),rt(this.b),Lr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xl,formatHex:xl,formatHex8:a1,formatRgb:bl,toString:bl}));function xl(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}`}function a1(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}${tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function bl(){const e=Lr(this.opacity);return`${e===1?"rgb(":"rgba("}${rt(this.r)}, ${rt(this.g)}, ${rt(this.b)}${e===1?")":`, ${e})`}`}function Lr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tt(e){return e=rt(e),(e<16?"0":"")+e.toString(16)}function _l(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new we(e,t,r,n)}function uv(e){if(e instanceof we)return new we(e.h,e.s,e.l,e.opacity);if(e instanceof er||(e=it(e)),!e)return new we;if(e instanceof we)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,u=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=u<.5?a+i:2-a-i,s*=60):o=u>0&&u<1?0:s,new we(s,o,u,e.opacity)}function s1(e,t,r,n){return arguments.length===1?uv(e):new we(e,t,r,n??1)}function we(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Eu(we,s1,cv(er,{brighter(e){return e=e==null?Pr:Math.pow(Pr,e),new we(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gt:Math.pow(Gt,e),new we(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new fe(Mn(e>=240?e-240:e+120,i,n),Mn(e,i,n),Mn(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new we(wl(this.h),vr(this.s),vr(this.l),Lr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lr(this.opacity);return`${e===1?"hsl(":"hsla("}${wl(this.h)}, ${vr(this.s)*100}%, ${vr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wl(e){return e=(e||0)%360,e<0?e+360:e}function vr(e){return Math.max(0,Math.min(1,e||0))}function Mn(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Su=e=>()=>e;function o1(e,t){return function(r){return e+r*t}}function c1(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function u1(e){return(e=+e)==1?lv:function(t,r){return r-t?c1(t,r,e):Su(isNaN(t)?r:t)}}function lv(e,t){var r=t-e;return r?o1(e,r):Su(isNaN(e)?t:e)}const Dr=function e(t){var r=u1(t);function n(i,a){var s=r((i=cu(i)).r,(a=cu(a)).r),o=r(i.g,a.g),u=r(i.b,a.b),l=lv(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=o(c),i.b=u(c),i.opacity=l(c),i+""}}return n.gamma=e,n}(1);function l1(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function d1(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function f1(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Bt(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function h1(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ie(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function p1(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Bt(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var uu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tn=new RegExp(uu.source,"g");function g1(e){return function(){return e}}function m1(e){return function(t){return e(t)+""}}function dv(e,t){var r=uu.lastIndex=Tn.lastIndex=0,n,i,a,s=-1,o=[],u=[];for(e=e+"",t=t+"";(n=uu.exec(e))&&(i=Tn.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,u.push({i:s,x:Ie(n,i)})),r=Tn.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?u[0]?m1(u[0].x):g1(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)o[(d=u[c]).i]=d.x(l);return o.join("")})}function Bt(e,t){var r=typeof t,n;return t==null||r==="boolean"?Su(t):(r==="number"?Ie:r==="string"?(n=it(t))?(t=n,Dr):dv:t instanceof it?Dr:t instanceof Date?h1:d1(t)?l1:Array.isArray(t)?f1:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?p1:Ie)(e,t)}var Nl=180/Math.PI,lu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fv(e,t,r,n,i,a){var s,o,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*r+t*n)&&(r-=e*u,n-=t*u),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,u/=o),e*n<t*r&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Nl,skewX:Math.atan(u)*Nl,scaleX:s,scaleY:o}}var yr;function v1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lu:fv(t.a,t.b,t.c,t.d,t.e,t.f)}function y1(e){return e==null||(yr||(yr=document.createElementNS("http://www.w3.org/2000/svg","g")),yr.setAttribute("transform",e),!(e=yr.transform.baseVal.consolidate()))?lu:(e=e.matrix,fv(e.a,e.b,e.c,e.d,e.e,e.f))}function hv(e,t,r,n){function i(l){return l.length?l.pop()+" ":""}function a(l,c,d,f,h,x){if(l!==d||c!==f){var m=h.push("translate(",null,t,null,r);x.push({i:m-4,x:Ie(l,d)},{i:m-2,x:Ie(c,f)})}else(d||f)&&h.push("translate("+d+t+f+r)}function s(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,n)-2,x:Ie(l,c)})):c&&d.push(i(d)+"rotate("+c+n)}function o(l,c,d,f){l!==c?f.push({i:d.push(i(d)+"skewX(",null,n)-2,x:Ie(l,c)}):c&&d.push(i(d)+"skewX("+c+n)}function u(l,c,d,f,h,x){if(l!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");x.push({i:m-4,x:Ie(l,d)},{i:m-2,x:Ie(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,d,f),s(l.rotate,c.rotate,d,f),o(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var x=-1,m=f.length,v;++x<m;)d[(v=f[x]).i]=v.x(h);return d.join("")}}}var x1=hv(v1,"px, ","px)","deg)"),b1=hv(y1,", ",")",")"),_1=1e-12;function El(e){return((e=Math.exp(e))+1/e)/2}function w1(e){return((e=Math.exp(e))-1/e)/2}function N1(e){return((e=Math.exp(2*e))-1)/(e+1)}const kr=function e(t,r,n){function i(a,s){var o=a[0],u=a[1],l=a[2],c=s[0],d=s[1],f=s[2],h=c-o,x=d-u,m=h*h+x*x,v,y;if(m<_1)y=Math.log(f/l)/t,v=function(w){return[o+w*h,u+w*x,l*Math.exp(t*w*y)]};else{var _=Math.sqrt(m),g=(f*f-l*l+n*m)/(2*l*r*_),b=(f*f-l*l-n*m)/(2*f*r*_),N=Math.log(Math.sqrt(g*g+1)-g),E=Math.log(Math.sqrt(b*b+1)-b);y=(E-N)/t,v=function(w){var A=w*y,k=El(N),T=l/(r*_)*(k*N1(t*A+N)-w1(N));return[o+T*h,u+T*x,l*k/El(t*A+N)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,u=o*o;return e(s,o,u)},i}(Math.SQRT2,2,4);var bt=0,qt=0,Mt=0,pv=1e3,Or,Pt,Fr=0,at=0,Qr=0,Ut=typeof performance=="object"&&performance.now?performance:Date,gv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Cu(){return at||(gv(E1),at=Ut.now()+Qr)}function E1(){at=0}function $r(){this._call=this._time=this._next=null}$r.prototype=mv.prototype={constructor:$r,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Cu():+r)+(t==null?0:+t),!this._next&&Pt!==this&&(Pt?Pt._next=this:Or=this,Pt=this),this._call=e,this._time=r,du()},stop:function(){this._call&&(this._call=null,this._time=1/0,du())}};function mv(e,t,r){var n=new $r;return n.restart(e,t,r),n}function S1(){Cu(),++bt;for(var e=Or,t;e;)(t=at-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bt}function Sl(){at=(Fr=Ut.now())+Qr,bt=qt=0;try{S1()}finally{bt=0,A1(),at=0}}function C1(){var e=Ut.now(),t=e-Fr;t>pv&&(Qr-=t,Fr=e)}function A1(){for(var e,t=Or,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Or=r);Pt=e,du(n)}function du(e){if(!bt){qt&&(qt=clearTimeout(qt));var t=e-at;t>24?(e<1/0&&(qt=setTimeout(Sl,e-Ut.now()-Qr)),Mt&&(Mt=clearInterval(Mt))):(Mt||(Fr=Ut.now(),Mt=setInterval(C1,pv)),bt=1,gv(Sl))}}function Cl(e,t,r){var n=new $r;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var k1=Zr("start","end","cancel","interrupt"),I1=[],vv=0,Al=1,fu=2,Ir=3,kl=4,hu=5,jr=6;function en(e,t,r,n,i,a){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;j1(e,r,{name:t,index:n,group:i,on:k1,tween:I1,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:vv})}function Au(e,t){var r=Se(e,t);if(r.state>vv)throw new Error("too late; already scheduled");return r}function Te(e,t){var r=Se(e,t);if(r.state>Ir)throw new Error("too late; already running");return r}function Se(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function j1(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=mv(a,0,r.time);function a(l){r.state=Al,r.timer.restart(s,r.delay,r.time),r.delay<=l&&s(l-r.delay)}function s(l){var c,d,f,h;if(r.state!==Al)return u();for(c in n)if(h=n[c],h.name===r.name){if(h.state===Ir)return Cl(s);h.state===kl?(h.state=jr,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[c]):+c<t&&(h.state=jr,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[c])}if(Cl(function(){r.state===Ir&&(r.state=kl,r.timer.restart(o,r.delay,r.time),o(l))}),r.state=fu,r.on.call("start",e,e.__data__,r.index,r.group),r.state===fu){for(r.state=Ir,i=new Array(f=r.tween.length),c=0,d=-1;c<f;++c)(h=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(i[++d]=h);i.length=d+1}}function o(l){for(var c=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=hu,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);r.state===hu&&(r.on.call("end",e,e.__data__,r.index,r.group),u())}function u(){r.state=jr,r.timer.stop(),delete n[t];for(var l in n)return;delete e.__transition}}function Rr(e,t){var r=e.__transition,n,i,a=!0,s;if(r){t=t==null?null:t+"";for(s in r){if((n=r[s]).name!==t){a=!1;continue}i=n.state>fu&&n.state<hu,n.state=jr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[s]}a&&delete e.__transition}}function R1(e){return this.each(function(){Rr(this,e)})}function M1(e,t){var r,n;return function(){var i=Te(this,e),a=i.tween;if(a!==r){n=r=a;for(var s=0,o=n.length;s<o;++s)if(n[s].name===t){n=n.slice(),n.splice(s,1);break}}i.tween=n}}function T1(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var a=Te(this,e),s=a.tween;if(s!==n){i=(n=s).slice();for(var o={name:t,value:r},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=o;break}u===l&&i.push(o)}a.tween=i}}function q1(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Se(this.node(),r).tween,i=0,a=n.length,s;i<a;++i)if((s=n[i]).name===e)return s.value;return null}return this.each((t==null?M1:T1)(r,e,t))}function ku(e,t,r){var n=e._id;return e.each(function(){var i=Te(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return Se(i,n).value[t]}}function yv(e,t){var r;return(typeof t=="number"?Ie:t instanceof it?Dr:(r=it(t))?(t=r,Dr):dv)(e,t)}function P1(e){return function(){this.removeAttribute(e)}}function L1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function D1(e,t,r){var n,i=r+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===n?a:a=t(n=s,r)}}function O1(e,t,r){var n,i=r+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===n?a:a=t(n=s,r)}}function F1(e,t,r){var n,i,a;return function(){var s,o=r(this),u;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=o+"",s===u?null:s===n&&u===i?a:(i=u,a=t(n=s,o)))}}function $1(e,t,r){var n,i,a;return function(){var s,o=r(this),u;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=o+"",s===u?null:s===n&&u===i?a:(i=u,a=t(n=s,o)))}}function B1(e,t){var r=Jr(e),n=r==="transform"?b1:yv;return this.attrTween(e,typeof t=="function"?(r.local?$1:F1)(r,n,ku(this,"attr."+e,t)):t==null?(r.local?L1:P1)(r):(r.local?O1:D1)(r,n,t))}function z1(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function H1(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function G1(e,t){var r,n;function i(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&H1(e,a)),r}return i._value=t,i}function V1(e,t){var r,n;function i(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&z1(e,a)),r}return i._value=t,i}function U1(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Jr(e);return this.tween(r,(n.local?G1:V1)(n,t))}function Y1(e,t){return function(){Au(this,e).delay=+t.apply(this,arguments)}}function W1(e,t){return t=+t,function(){Au(this,e).delay=t}}function X1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Y1:W1)(t,e)):Se(this.node(),t).delay}function K1(e,t){return function(){Te(this,e).duration=+t.apply(this,arguments)}}function Z1(e,t){return t=+t,function(){Te(this,e).duration=t}}function J1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?K1:Z1)(t,e)):Se(this.node(),t).duration}function Q1(e,t){if(typeof t!="function")throw new Error;return function(){Te(this,e).ease=t}}function ew(e){var t=this._id;return arguments.length?this.each(Q1(t,e)):Se(this.node(),t).ease}function tw(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Te(this,e).ease=r}}function rw(e){if(typeof e!="function")throw new Error;return this.each(tw(this._id,e))}function nw(e){typeof e!="function"&&(e=Xm(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=[],u,l=0;l<s;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&o.push(u);return new He(n,this._parents,this._name,this._id)}function iw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),s=new Array(n),o=0;o<a;++o)for(var u=t[o],l=r[o],c=u.length,d=s[o]=new Array(c),f,h=0;h<c;++h)(f=u[h]||l[h])&&(d[h]=f);for(;o<n;++o)s[o]=t[o];return new He(s,this._parents,this._name,this._id)}function aw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function sw(e,t,r){var n,i,a=aw(t)?Au:Te;return function(){var s=a(this,e),o=s.on;o!==n&&(i=(n=o).copy()).on(t,r),s.on=i}}function ow(e,t){var r=this._id;return arguments.length<2?Se(this.node(),r).on.on(e):this.each(sw(r,e,t))}function cw(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function uw(){return this.on("end.remove",cw(this._id))}function lw(e){var t=this._name,r=this._id;typeof e!="function"&&(e=wu(e));for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s)for(var o=n[s],u=o.length,l=a[s]=new Array(u),c,d,f=0;f<u;++f)(c=o[f])&&(d=e.call(c,c.__data__,f,o))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,en(l[f],t,r,f,l,Se(c,r)));return new He(a,this._parents,t,r)}function dw(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Wm(e));for(var n=this._groups,i=n.length,a=[],s=[],o=0;o<i;++o)for(var u=n[o],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,x=Se(c,r),m=0,v=f.length;m<v;++m)(h=f[m])&&en(h,t,r,m,f,x);a.push(f),s.push(c)}return new He(a,s,t,r)}var fw=Qt.prototype.constructor;function hw(){return new fw(this._groups,this._parents)}function pw(e,t){var r,n,i;return function(){var a=xt(this,e),s=(this.style.removeProperty(e),xt(this,e));return a===s?null:a===r&&s===n?i:i=t(r=a,n=s)}}function xv(e){return function(){this.style.removeProperty(e)}}function gw(e,t,r){var n,i=r+"",a;return function(){var s=xt(this,e);return s===i?null:s===n?a:a=t(n=s,r)}}function mw(e,t,r){var n,i,a;return function(){var s=xt(this,e),o=r(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(e),xt(this,e))),s===u?null:s===n&&u===i?a:(i=u,a=t(n=s,o))}}function vw(e,t){var r,n,i,a="style."+t,s="end."+a,o;return function(){var u=Te(this,e),l=u.on,c=u.value[a]==null?o||(o=xv(t)):void 0;(l!==r||i!==c)&&(n=(r=l).copy()).on(s,i=c),u.on=n}}function yw(e,t,r){var n=(e+="")=="transform"?x1:yv;return t==null?this.styleTween(e,pw(e,n)).on("end.style."+e,xv(e)):typeof t=="function"?this.styleTween(e,mw(e,n,ku(this,"style."+e,t))).each(vw(this._id,e)):this.styleTween(e,gw(e,n,t),r).on("end.style."+e,null)}function xw(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function bw(e,t,r){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&xw(e,s,r)),n}return a._value=t,a}function _w(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,bw(e,t,r??""))}function ww(e){return function(){this.textContent=e}}function Nw(e){return function(){var t=e(this);this.textContent=t??""}}function Ew(e){return this.tween("text",typeof e=="function"?Nw(ku(this,"text",e)):ww(e==null?"":e+""))}function Sw(e){return function(t){this.textContent=e.call(this,t)}}function Cw(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&Sw(i)),t}return n._value=e,n}function Aw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Cw(e))}function kw(){for(var e=this._name,t=this._id,r=bv(),n=this._groups,i=n.length,a=0;a<i;++a)for(var s=n[a],o=s.length,u,l=0;l<o;++l)if(u=s[l]){var c=Se(u,t);en(u,e,r,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new He(n,this._parents,e,r)}function Iw(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(a,s){var o={value:s},u={value:function(){--i===0&&a()}};r.each(function(){var l=Te(this,n),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(u)),l.on=t}),i===0&&a()})}var jw=0;function He(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function bv(){return++jw}var Fe=Qt.prototype;He.prototype={constructor:He,select:lw,selectAll:dw,selectChild:Fe.selectChild,selectChildren:Fe.selectChildren,filter:nw,merge:iw,selection:hw,transition:kw,call:Fe.call,nodes:Fe.nodes,node:Fe.node,size:Fe.size,empty:Fe.empty,each:Fe.each,on:ow,attr:B1,attrTween:U1,style:yw,styleTween:_w,text:Ew,textTween:Aw,remove:uw,tween:q1,delay:X1,duration:J1,ease:ew,easeVarying:rw,end:Iw,[Symbol.iterator]:Fe[Symbol.iterator]};function Rw(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Mw={time:null,delay:0,duration:250,ease:Rw};function Tw(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function qw(e){var t,r;e instanceof He?(t=e._id,e=e._name):(t=bv(),(r=Mw).time=Cu(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var s=n[a],o=s.length,u,l=0;l<o;++l)(u=s[l])&&en(u,e,t,l,s,r||Tw(u,t));return new He(n,this._parents,e,t)}Qt.prototype.interrupt=R1;Qt.prototype.transition=qw;const xr=e=>()=>e;function Pw(e,{sourceEvent:t,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}function $e(e,t,r){this.k=e,this.x=t,this.y=r}$e.prototype={constructor:$e,scale:function(e){return e===1?this:new $e(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $e(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tn=new $e(1,0,0);_v.prototype=$e.prototype;function _v(e){for(;!e.__zoom;)if(!(e=e.parentNode))return tn;return e.__zoom}function qn(e){e.stopImmediatePropagation()}function Tt(e){e.preventDefault(),e.stopImmediatePropagation()}function Lw(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Dw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Il(){return this.__zoom||tn}function Ow(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Fw(){return navigator.maxTouchPoints||"ontouchstart"in this}function $w(e,t,r){var n=e.invertX(t[0][0])-r[0][0],i=e.invertX(t[1][0])-r[1][0],a=e.invertY(t[0][1])-r[0][1],s=e.invertY(t[1][1])-r[1][1];return e.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function wv(){var e=Lw,t=Dw,r=$w,n=Ow,i=Fw,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,u=kr,l=Zr("start","zoom","end"),c,d,f,h=500,x=150,m=0,v=10;function y(C){C.property("__zoom",Il).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",T).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(C,R,S,I){var O=C.selection?C.selection():C;O.property("__zoom",Il),C!==O?N(C,R,S,I):O.interrupt().each(function(){E(this,arguments).event(I).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},y.scaleBy=function(C,R,S,I){y.scaleTo(C,function(){var O=this.__zoom.k,q=typeof R=="function"?R.apply(this,arguments):R;return O*q},S,I)},y.scaleTo=function(C,R,S,I){y.transform(C,function(){var O=t.apply(this,arguments),q=this.__zoom,$=S==null?b(O):typeof S=="function"?S.apply(this,arguments):S,z=q.invert($),H=typeof R=="function"?R.apply(this,arguments):R;return r(g(_(q,H),$,z),O,s)},S,I)},y.translateBy=function(C,R,S,I){y.transform(C,function(){return r(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,I)},y.translateTo=function(C,R,S,I,O){y.transform(C,function(){var q=t.apply(this,arguments),$=this.__zoom,z=I==null?b(q):typeof I=="function"?I.apply(this,arguments):I;return r(tn.translate(z[0],z[1]).scale($.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof S=="function"?-S.apply(this,arguments):-S),q,s)},I,O)};function _(C,R){return R=Math.max(a[0],Math.min(a[1],R)),R===C.k?C:new $e(R,C.x,C.y)}function g(C,R,S){var I=R[0]-S[0]*C.k,O=R[1]-S[1]*C.k;return I===C.x&&O===C.y?C:new $e(C.k,I,O)}function b(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function N(C,R,S,I){C.on("start.zoom",function(){E(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(I).end()}).tween("zoom",function(){var O=this,q=arguments,$=E(O,q).event(I),z=t.apply(O,q),H=S==null?b(z):typeof S=="function"?S.apply(O,q):S,U=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),P=O.__zoom,D=typeof R=="function"?R.apply(O,q):R,B=u(P.invert(H).concat(U/P.k),D.invert(H).concat(U/D.k));return function(G){if(G===1)G=D;else{var V=B(G),Y=U/V[2];G=new $e(Y,H[0]-V[0]*Y,H[1]-V[1]*Y)}$.zoom(null,G)}})}function E(C,R,S){return!S&&C.__zooming||new w(C,R)}function w(C,R){this.that=C,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,R),this.taps=0}w.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,R){return this.mouse&&C!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var R=ge(this.that).datum();l.call(C,this.that,new Pw(C,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:l}),R)}};function A(C,...R){if(!e.apply(this,arguments))return;var S=E(this,R).event(C),I=this.__zoom,O=Math.max(a[0],Math.min(a[1],I.k*Math.pow(2,n.apply(this,arguments)))),q=be(C);if(S.wheel)(S.mouse[0][0]!==q[0]||S.mouse[0][1]!==q[1])&&(S.mouse[1]=I.invert(S.mouse[0]=q)),clearTimeout(S.wheel);else{if(I.k===O)return;S.mouse=[q,I.invert(q)],Rr(this),S.start()}Tt(C),S.wheel=setTimeout($,x),S.zoom("mouse",r(g(_(I,O),S.mouse[0],S.mouse[1]),S.extent,s));function $(){S.wheel=null,S.end()}}function k(C,...R){if(f||!e.apply(this,arguments))return;var S=C.currentTarget,I=E(this,R,!0).event(C),O=ge(C.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",U,!0),q=be(C,S),$=C.clientX,z=C.clientY;av(C.view),qn(C),I.mouse=[q,this.__zoom.invert(q)],Rr(this),I.start();function H(P){if(Tt(P),!I.moved){var D=P.clientX-$,B=P.clientY-z;I.moved=D*D+B*B>m}I.event(P).zoom("mouse",r(g(I.that.__zoom,I.mouse[0]=be(P,S),I.mouse[1]),I.extent,s))}function U(P){O.on("mousemove.zoom mouseup.zoom",null),sv(P.view,I.moved),Tt(P),I.event(P).end()}}function T(C,...R){if(e.apply(this,arguments)){var S=this.__zoom,I=be(C.changedTouches?C.changedTouches[0]:C,this),O=S.invert(I),q=S.k*(C.shiftKey?.5:2),$=r(g(_(S,q),I,O),t.apply(this,R),s);Tt(C),o>0?ge(this).transition().duration(o).call(N,$,I,C):ge(this).call(y.transform,$,I,C)}}function M(C,...R){if(e.apply(this,arguments)){var S=C.touches,I=S.length,O=E(this,R,C.changedTouches.length===I).event(C),q,$,z,H;for(qn(C),$=0;$<I;++$)z=S[$],H=be(z,this),H=[H,this.__zoom.invert(H),z.identifier],O.touch0?!O.touch1&&O.touch0[2]!==H[2]&&(O.touch1=H,O.taps=0):(O.touch0=H,q=!0,O.taps=1+!!c);c&&(c=clearTimeout(c)),q&&(O.taps<2&&(d=H[0],c=setTimeout(function(){c=null},h)),Rr(this),O.start())}}function L(C,...R){if(this.__zooming){var S=E(this,R).event(C),I=C.changedTouches,O=I.length,q,$,z,H;for(Tt(C),q=0;q<O;++q)$=I[q],z=be($,this),S.touch0&&S.touch0[2]===$.identifier?S.touch0[0]=z:S.touch1&&S.touch1[2]===$.identifier&&(S.touch1[0]=z);if($=S.that.__zoom,S.touch1){var U=S.touch0[0],P=S.touch0[1],D=S.touch1[0],B=S.touch1[1],G=(G=D[0]-U[0])*G+(G=D[1]-U[1])*G,V=(V=B[0]-P[0])*V+(V=B[1]-P[1])*V;$=_($,Math.sqrt(G/V)),z=[(U[0]+D[0])/2,(U[1]+D[1])/2],H=[(P[0]+B[0])/2,(P[1]+B[1])/2]}else if(S.touch0)z=S.touch0[0],H=S.touch0[1];else return;S.zoom("touch",r(g($,z,H),S.extent,s))}}function F(C,...R){if(this.__zooming){var S=E(this,R).event(C),I=C.changedTouches,O=I.length,q,$;for(qn(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),q=0;q<O;++q)$=I[q],S.touch0&&S.touch0[2]===$.identifier?delete S.touch0:S.touch1&&S.touch1[2]===$.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&($=be($,this),Math.hypot(d[0]-$[0],d[1]-$[1])<v)){var z=ge(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return y.wheelDelta=function(C){return arguments.length?(n=typeof C=="function"?C:xr(+C),y):n},y.filter=function(C){return arguments.length?(e=typeof C=="function"?C:xr(!!C),y):e},y.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:xr(!!C),y):i},y.extent=function(C){return arguments.length?(t=typeof C=="function"?C:xr([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),y):t},y.scaleExtent=function(C){return arguments.length?(a[0]=+C[0],a[1]=+C[1],y):[a[0],a[1]]},y.translateExtent=function(C){return arguments.length?(s[0][0]=+C[0][0],s[1][0]=+C[1][0],s[0][1]=+C[0][1],s[1][1]=+C[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(C){return arguments.length?(r=C,y):r},y.duration=function(C){return arguments.length?(o=+C,y):o},y.interpolate=function(C){return arguments.length?(u=C,y):u},y.on=function(){var C=l.on.apply(l,arguments);return C===l?y:C},y.clickDistance=function(C){return arguments.length?(m=(C=+C)*C,y):Math.sqrt(m)},y.tapDistance=function(C){return arguments.length?(v=+C,y):v},y}const Me={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:r,targetHandle:n})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:n}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Yt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Nv=["Enter"," ","Escape"],Ev={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:r})=>`Moved selected node ${e}. New position, x: ${t}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var st;(function(e){e.Strict="strict",e.Loose="loose"})(st||(st={}));var nt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(nt||(nt={}));var Wt;(function(e){e.Partial="partial",e.Full="full"})(Wt||(Wt={}));const Sv={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Je;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Je||(Je={}));var Br;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Br||(Br={}));var J;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(J||(J={}));const jl={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top};function Cv(e){return e===null?null:e?"valid":"invalid"}const Av=e=>"id"in e&&"source"in e&&"target"in e,Bw=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Iu=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),tr=(e,t=[0,0])=>{const{width:r,height:n}=Ge(e),i=e.origin??t,a=r*i[0],s=n*i[1];return{x:e.position.x-a,y:e.position.y-s}},zw=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,i)=>{const a=typeof i=="string";let s=!t.nodeLookup&&!a?i:void 0;t.nodeLookup&&(s=a?t.nodeLookup.get(i):Iu(i)?i:t.nodeLookup.get(i.id));const o=s?zr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return rn(n,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return nn(r)},rr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(n=>{if(t.filter===void 0||t.filter(n)){const i=zr(n);r=rn(r,i)}}),nn(r)},ju=(e,t,[r,n,i]=[0,0,1],a=!1,s=!1)=>{const o={...nr(t,[r,n,i]),width:t.width/i,height:t.height/i},u=[];for(const l of e.values()){const{measured:c,selectable:d=!0,hidden:f=!1}=l;if(s&&!d||f)continue;const h=c.width??l.width??l.initialWidth??null,x=c.height??l.height??l.initialHeight??null,m=Xt(o,wt(l)),v=(h??0)*(x??0),y=a&&m>0;(!l.internals.handleBounds||y||m>=v||l.dragging)&&u.push(l)}return u},Hw=(e,t)=>{const r=new Set;return e.forEach(n=>{r.add(n.id)}),t.filter(n=>r.has(n.source)||r.has(n.target))};function Gw(e,t){const r=new Map,n=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!n||n.has(i.id))&&r.set(i.id,i)}),r}async function Vw({nodes:e,width:t,height:r,panZoom:n,minZoom:i,maxZoom:a},s){if(e.size===0)return Promise.resolve(!0);const o=Gw(e,s),u=rr(o),l=Ru(u,t,r,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??a,(s==null?void 0:s.padding)??.1);return await n.setViewport(l,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function kv({nodeId:e,nextPosition:t,nodeLookup:r,nodeOrigin:n=[0,0],nodeExtent:i,onError:a}){const s=r.get(e),o=s.parentId?r.get(s.parentId):void 0,{x:u,y:l}=o?o.internals.positionAbsolute:{x:0,y:0},c=s.origin??n;let d=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!o)a==null||a("005",Me.error005());else{const h=o.measured.width,x=o.measured.height;h&&x&&(d=[[u,l],[u+h,l+x]])}else o&&Nt(s.extent)&&(d=[[s.extent[0][0]+u,s.extent[0][1]+l],[s.extent[1][0]+u,s.extent[1][1]+l]]);const f=Nt(d)?ot(t,d,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(a==null||a("015",Me.error015())),{position:{x:f.x-u+(s.measured.width??0)*c[0],y:f.y-l+(s.measured.height??0)*c[1]},positionAbsolute:f}}async function Uw({nodesToRemove:e=[],edgesToRemove:t=[],nodes:r,edges:n,onBeforeDelete:i}){const a=new Set(e.map(f=>f.id)),s=[];for(const f of r){if(f.deletable===!1)continue;const h=a.has(f.id),x=!h&&f.parentId&&s.find(m=>m.id===f.parentId);(h||x)&&s.push(f)}const o=new Set(t.map(f=>f.id)),u=n.filter(f=>f.deletable!==!1),c=Hw(s,u);for(const f of u)o.has(f.id)&&!c.find(x=>x.id===f.id)&&c.push(f);if(!i)return{edges:c,nodes:s};const d=await i({nodes:s,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:s}:{edges:[],nodes:[]}:d}const _t=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),ot=(e={x:0,y:0},t,r)=>({x:_t(e.x,t[0][0],t[1][0]-((r==null?void 0:r.width)??0)),y:_t(e.y,t[0][1],t[1][1]-((r==null?void 0:r.height)??0))});function Iv(e,t,r){const{width:n,height:i}=Ge(r),{x:a,y:s}=r.internals.positionAbsolute;return ot(e,[[a,s],[a+n,s+i]],t)}const Rl=(e,t,r)=>e<t?_t(Math.abs(e-t),1,t)/t:e>r?-_t(Math.abs(e-r),1,t)/t:0,jv=(e,t,r=15,n=40)=>{const i=Rl(e.x,n,t.width-n)*r,a=Rl(e.y,n,t.height-n)*r;return[i,a]},rn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),pu=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),nn=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),wt=(e,t=[0,0])=>{var i,a;const{x:r,y:n}=Iu(e)?e.internals.positionAbsolute:tr(e,t);return{x:r,y:n,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},zr=(e,t=[0,0])=>{var i,a;const{x:r,y:n}=Iu(e)?e.internals.positionAbsolute:tr(e,t);return{x:r,y:n,x2:r+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:n+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},Rv=(e,t)=>nn(rn(pu(e),pu(t))),Xt=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Ml=e=>Ne(e.width)&&Ne(e.height)&&Ne(e.x)&&Ne(e.y),Ne=e=>!isNaN(e)&&isFinite(e),Yw=(e,t)=>{},an=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),nr=({x:e,y:t},[r,n,i],a=!1,s=[1,1])=>{const o={x:(e-r)/i,y:(t-n)/i};return a?an(o,s):o},Hr=({x:e,y:t},[r,n,i])=>({x:e*i+r,y:t*i+n});function pt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(t*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Ww(e,t,r){if(typeof e=="string"||typeof e=="number"){const n=pt(e,r),i=pt(e,t);return{top:n,right:i,bottom:n,left:i,x:i*2,y:n*2}}if(typeof e=="object"){const n=pt(e.top??e.y??0,r),i=pt(e.bottom??e.y??0,r),a=pt(e.left??e.x??0,t),s=pt(e.right??e.x??0,t);return{top:n,right:s,bottom:i,left:a,x:a+s,y:n+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Xw(e,t,r,n,i,a){const{x:s,y:o}=Hr(e,[t,r,n]),{x:u,y:l}=Hr({x:e.x+e.width,y:e.y+e.height},[t,r,n]),c=i-u,d=a-l;return{left:Math.floor(s),top:Math.floor(o),right:Math.floor(c),bottom:Math.floor(d)}}const Ru=(e,t,r,n,i,a)=>{const s=Ww(a,t,r),o=(t-s.x)/e.width,u=(r-s.y)/e.height,l=Math.min(o,u),c=_t(l,n,i),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,x=r/2-f*c,m=Xw(e,h,x,c,t,r),v={left:Math.min(m.left-s.left,0),top:Math.min(m.top-s.top,0),right:Math.min(m.right-s.right,0),bottom:Math.min(m.bottom-s.bottom,0)};return{x:h-v.left+v.right,y:x-v.top+v.bottom,zoom:c}},Gr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Nt(e){return e!==void 0&&e!=="parent"}function Ge(e){var t,r;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0}}function Mv(e){var t,r;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight)!==void 0}function Tv(e,t={width:0,height:0},r,n,i){const a={...e},s=n.get(r);if(s){const o=s.origin||i;a.x+=s.internals.positionAbsolute.x-(t.width??0)*o[0],a.y+=s.internals.positionAbsolute.y-(t.height??0)*o[1]}return a}function Tl(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Kw(){let e,t;return{promise:new Promise((n,i)=>{e=n,t=i}),resolve:e,reject:t}}function Zw(e){return{...Ev,...e||{}}}function zt(e,{snapGrid:t=[0,0],snapToGrid:r=!1,transform:n,containerBounds:i}){const{x:a,y:s}=je(e),o=nr({x:a-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},n),{x:u,y:l}=r?an(o,t):o;return{xSnapped:u,ySnapped:l,...o}}const Mu=e=>({width:e.offsetWidth,height:e.offsetHeight}),qv=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Jw=["INPUT","SELECT","TEXTAREA"];function Pv(e){var n,i;const t=((i=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Jw.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Lv=e=>"clientX"in e,je=(e,t)=>{var a,s;const r=Lv(e),n=r?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=r?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},ql=(e,t,r,n,i)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(s=>{const o=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(o.left-r.left)/n,y:(o.top-r.top)/n,...Mu(s)}})};function Dv({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:o}){const u=e*.125+i*.375+s*.375+r*.125,l=t*.125+a*.375+o*.375+n*.125,c=Math.abs(u-e),d=Math.abs(l-t);return[u,l,c,d]}function br(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Pl({pos:e,x1:t,y1:r,x2:n,y2:i,c:a}){switch(e){case J.Left:return[t-br(t-n,a),r];case J.Right:return[t+br(n-t,a),r];case J.Top:return[t,r-br(r-i,a)];case J.Bottom:return[t,r+br(i-r,a)]}}function Ov({sourceX:e,sourceY:t,sourcePosition:r=J.Bottom,targetX:n,targetY:i,targetPosition:a=J.Top,curvature:s=.25}){const[o,u]=Pl({pos:r,x1:e,y1:t,x2:n,y2:i,c:s}),[l,c]=Pl({pos:a,x1:n,y1:i,x2:e,y2:t,c:s}),[d,f,h,x]=Dv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${e},${t} C${o},${u} ${l},${c} ${n},${i}`,d,f,h,x]}function Fv({sourceX:e,sourceY:t,targetX:r,targetY:n}){const i=Math.abs(r-e)/2,a=r<e?r+i:r-i,s=Math.abs(n-t)/2,o=n<t?n+s:n-s;return[a,o,i,s]}function Qw({sourceNode:e,targetNode:t,selected:r=!1,zIndex:n,elevateOnSelect:i=!1}){if(n!==void 0)return n;const a=i&&r?1e3:0,s=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return a+s}function eN({sourceNode:e,targetNode:t,width:r,height:n,transform:i}){const a=rn(zr(e),zr(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:r/i[2],height:n/i[2]};return Xt(s,nn(a))>0}const tN=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`xy-edge__${e}${t||""}-${r}${n||""}`,rN=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),$v=(e,t)=>{if(!e.source||!e.target)return t;let r;return Av(e)?r={...e}:r={...e,id:tN(e)},rN(r,t)?t:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,t.concat(r))};function Bv({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[i,a,s,o]=Fv({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,i,a,s,o]}const Ll={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}},nN=({source:e,sourcePosition:t=J.Bottom,target:r})=>t===J.Left||t===J.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Dl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function iN({source:e,sourcePosition:t=J.Bottom,target:r,targetPosition:n=J.Top,center:i,offset:a,stepPosition:s}){const o=Ll[t],u=Ll[n],l={x:e.x+o.x*a,y:e.y+o.y*a},c={x:r.x+u.x*a,y:r.y+u.y*a},d=nN({source:l,sourcePosition:t,target:c}),f=d.x!==0?"x":"y",h=d[f];let x=[],m,v;const y={x:0,y:0},_={x:0,y:0},[,,g,b]=Fv({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*u[f]===-1){f==="x"?(m=i.x??l.x+(c.x-l.x)*s,v=i.y??(l.y+c.y)/2):(m=i.x??(l.x+c.x)/2,v=i.y??l.y+(c.y-l.y)*s);const E=[{x:m,y:l.y},{x:m,y:c.y}],w=[{x:l.x,y:v},{x:c.x,y:v}];o[f]===h?x=f==="x"?E:w:x=f==="x"?w:E}else{const E=[{x:l.x,y:c.y}],w=[{x:c.x,y:l.y}];if(f==="x"?x=o.x===h?w:E:x=o.y===h?E:w,t===n){const L=Math.abs(e[f]-r[f]);if(L<=a){const F=Math.min(a-1,a-L);o[f]===h?y[f]=(l[f]>e[f]?-1:1)*F:_[f]=(c[f]>r[f]?-1:1)*F}}if(t!==n){const L=f==="x"?"y":"x",F=o[f]===u[L],C=l[L]>c[L],R=l[L]<c[L];(o[f]===1&&(!F&&C||F&&R)||o[f]!==1&&(!F&&R||F&&C))&&(x=f==="x"?E:w)}const A={x:l.x+y.x,y:l.y+y.y},k={x:c.x+_.x,y:c.y+_.y},T=Math.max(Math.abs(A.x-x[0].x),Math.abs(k.x-x[0].x)),M=Math.max(Math.abs(A.y-x[0].y),Math.abs(k.y-x[0].y));T>=M?(m=(A.x+k.x)/2,v=x[0].y):(m=x[0].x,v=(A.y+k.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...x,{x:c.x+_.x,y:c.y+_.y},r],m,v,g,b]}function aN(e,t,r,n){const i=Math.min(Dl(e,t)/2,Dl(t,r)/2,n),{x:a,y:s}=t;if(e.x===a&&a===r.x||e.y===s&&s===r.y)return`L${a} ${s}`;if(e.y===s){const l=e.x<r.x?-1:1,c=e.y<r.y?1:-1;return`L ${a+i*l},${s}Q ${a},${s} ${a},${s+i*c}`}const o=e.x<r.x?1:-1,u=e.y<r.y?-1:1;return`L ${a},${s+i*u}Q ${a},${s} ${a+i*o},${s}`}function gu({sourceX:e,sourceY:t,sourcePosition:r=J.Bottom,targetX:n,targetY:i,targetPosition:a=J.Top,borderRadius:s=5,centerX:o,centerY:u,offset:l=20,stepPosition:c=.5}){const[d,f,h,x,m]=iN({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:i},targetPosition:a,center:{x:o,y:u},offset:l,stepPosition:c});return[d.reduce((y,_,g)=>{let b="";return g>0&&g<d.length-1?b=aN(d[g-1],_,d[g+1],s):b=`${g===0?"M":"L"}${_.x} ${_.y}`,y+=b,y},""),f,h,x,m]}function Ol(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function sN(e){var d;const{sourceNode:t,targetNode:r}=e;if(!Ol(t)||!Ol(r))return null;const n=t.internals.handleBounds||Fl(t.handles),i=r.internals.handleBounds||Fl(r.handles),a=$l((n==null?void 0:n.source)??[],e.sourceHandle),s=$l(e.connectionMode===st.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!a||!s)return(d=e.onError)==null||d.call(e,"008",Me.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const o=(a==null?void 0:a.position)||J.Bottom,u=(s==null?void 0:s.position)||J.Top,l=Kt(t,a,o),c=Kt(r,s,u);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y,sourcePosition:o,targetPosition:u}}function Fl(e){if(!e)return null;const t=[],r=[];for(const n of e)n.width=n.width??1,n.height=n.height??1,n.type==="source"?t.push(n):n.type==="target"&&r.push(n);return{source:t,target:r}}function Kt(e,t,r=J.Left,n=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:o}=t??Ge(e);if(n)return{x:i+s/2,y:a+o/2};switch((t==null?void 0:t.position)??r){case J.Top:return{x:i+s/2,y:a};case J.Right:return{x:i+s,y:a+o/2};case J.Bottom:return{x:i+s/2,y:a+o};case J.Left:return{x:i,y:a+o/2}}}function $l(e,t){return e&&(t?e.find(r=>r.id===t):e[0])||null}function mu(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function oN(e,{id:t,defaultColor:r,defaultMarkerStart:n,defaultMarkerEnd:i}){const a=new Set;return e.reduce((s,o)=>([o.markerStart||n,o.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const l=mu(u,t);a.has(l)||(s.push({id:l,color:u.color||r,...u}),a.add(l))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))}const Tu={nodeOrigin:[0,0],nodeExtent:Yt,elevateNodesOnSelect:!0,defaults:{}},cN={...Tu,checkEquality:!0};function qu(e,t){const r={...e};for(const n in t)t[n]!==void 0&&(r[n]=t[n]);return r}function uN(e,t,r){const n=qu(Tu,r);for(const i of e.values())if(i.parentId)Pu(i,e,t,n);else{const a=tr(i,n.nodeOrigin),s=Nt(i.extent)?i.extent:n.nodeExtent,o=ot(a,s,Ge(i));i.internals.positionAbsolute=o}}function vu(e,t,r,n){var u,l;const i=qu(cN,n);let a=e.length>0;const s=new Map(t),o=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),r.clear();for(const c of e){let d=s.get(c.id);if(i.checkEquality&&c===(d==null?void 0:d.internals.userNode))t.set(c.id,d);else{const f=tr(c,i.nodeOrigin),h=Nt(c.extent)?c.extent:i.nodeExtent,x=ot(f,h,Ge(c));d={...i.defaults,...c,measured:{width:(u=c.measured)==null?void 0:u.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:x,handleBounds:c.measured?d==null?void 0:d.internals.handleBounds:void 0,z:zv(c,o),userNode:c}},t.set(c.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(a=!1),c.parentId&&Pu(d,t,r,n)}return a}function lN(e,t){if(!e.parentId)return;const r=t.get(e.parentId);r?r.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Pu(e,t,r,n){const{elevateNodesOnSelect:i,nodeOrigin:a,nodeExtent:s}=qu(Tu,n),o=e.parentId,u=t.get(o);if(!u){console.warn(`Parent node ${o} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}lN(e,r);const l=i?1e3:0,{x:c,y:d,z:f}=dN(e,u,a,s,l),{positionAbsolute:h}=e.internals,x=c!==h.x||d!==h.y;(x||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:c,y:d}:h,z:f}})}function zv(e,t){return(Ne(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function dN(e,t,r,n,i){const{x:a,y:s}=t.internals.positionAbsolute,o=Ge(e),u=tr(e,r),l=Nt(e.extent)?ot(u,e.extent,o):u;let c=ot({x:a+l.x,y:s+l.y},n,o);e.extent==="parent"&&(c=Iv(c,o,t));const d=zv(e,i),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>=d?f+1:d}}function Lu(e,t,r,n=[0,0]){var s;const i=[],a=new Map;for(const o of e){const u=t.get(o.parentId);if(!u)continue;const l=((s=a.get(o.parentId))==null?void 0:s.expandedRect)??wt(u),c=Rv(l,o.rect);a.set(o.parentId,{expandedRect:c,parent:u})}return a.size>0&&a.forEach(({expandedRect:o,parent:u},l)=>{var g;const c=u.internals.positionAbsolute,d=Ge(u),f=u.origin??n,h=o.x<c.x?Math.round(Math.abs(c.x-o.x)):0,x=o.y<c.y?Math.round(Math.abs(c.y-o.y)):0,m=Math.max(d.width,Math.round(o.width)),v=Math.max(d.height,Math.round(o.height)),y=(m-d.width)*f[0],_=(v-d.height)*f[1];(h>0||x>0||y||_)&&(i.push({id:l,type:"position",position:{x:u.position.x-h+y,y:u.position.y-x+_}}),(g=r.get(l))==null||g.forEach(b=>{e.some(N=>N.id===b.id)||i.push({id:b.id,type:"position",position:{x:b.position.x+h,y:b.position.y+x}})})),(d.width<o.width||d.height<o.height||h||x)&&i.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(h?f[0]*h-y:0),height:v+(x?f[1]*x-_:0)}})}),i}function fN(e,t,r,n,i,a){const s=n==null?void 0:n.querySelector(".xyflow__viewport");let o=!1;if(!s)return{changes:[],updatedInternals:o};const u=[],l=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const h=t.get(f.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),o=!0;continue}const x=Mu(f.nodeElement),m=h.measured.width!==x.width||h.measured.height!==x.height;if(!!(x.width&&x.height&&(m||!h.internals.handleBounds||f.force))){const y=f.nodeElement.getBoundingClientRect(),_=Nt(h.extent)?h.extent:a;let{positionAbsolute:g}=h.internals;h.parentId&&h.extent==="parent"?g=Iv(g,x,t.get(h.parentId)):_&&(g=ot(g,_,x));const b={...h,measured:x,internals:{...h.internals,positionAbsolute:g,handleBounds:{source:ql("source",f.nodeElement,y,c,h.id),target:ql("target",f.nodeElement,y,c,h.id)}}};t.set(h.id,b),h.parentId&&Pu(b,t,r,{nodeOrigin:i}),o=!0,m&&(u.push({id:h.id,type:"dimensions",dimensions:x}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:wt(b,i)}))}}if(d.length>0){const f=Lu(d,t,r,i);u.push(...f)}return{changes:u,updatedInternals:o}}async function hN({delta:e,panZoom:t,transform:r,translateExtent:n,width:i,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[i,a]],n),o=!!s&&(s.x!==r[0]||s.y!==r[1]||s.k!==r[2]);return Promise.resolve(o)}function Bl(e,t,r,n,i,a){let s=i;const o=n.get(s)||new Map;n.set(s,o.set(r,t)),s=`${i}-${e}`;const u=n.get(s)||new Map;if(n.set(s,u.set(r,t)),a){s=`${i}-${e}-${a}`;const l=n.get(s)||new Map;n.set(s,l.set(r,t))}}function Hv(e,t,r){e.clear(),t.clear();for(const n of r){const{source:i,target:a,sourceHandle:s=null,targetHandle:o=null}=n,u={edgeId:n.id,source:i,target:a,sourceHandle:s,targetHandle:o},l=`${i}-${s}--${a}-${o}`,c=`${a}-${o}--${i}-${s}`;Bl("source",u,c,e,i,s),Bl("target",u,l,e,a,o),t.set(n.id,n)}}function Gv(e,t){if(!e.parentId)return!1;const r=t.get(e.parentId);return r?r.selected?!0:Gv(r,t):!1}function zl(e,t,r){var i;let n=e;do{if((i=n==null?void 0:n.matches)!=null&&i.call(n,t))return!0;if(n===r)return!1;n=n==null?void 0:n.parentElement}while(n);return!1}function pN(e,t,r,n){const i=new Map;for(const[a,s]of e)if((s.selected||s.id===n)&&(!s.parentId||!Gv(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const o=e.get(a);o&&i.set(a,{id:a,position:o.position||{x:0,y:0},distance:{x:r.x-o.internals.positionAbsolute.x,y:r.y-o.internals.positionAbsolute.y},extent:o.extent,parentId:o.parentId,origin:o.origin,expandParent:o.expandParent,internals:{positionAbsolute:o.internals.positionAbsolute||{x:0,y:0}},measured:{width:o.measured.width??0,height:o.measured.height??0}})}return i}function Pn({nodeId:e,dragItems:t,nodeLookup:r,dragging:n=!0}){var s,o,u;const i=[];for(const[l,c]of t){const d=(s=r.get(l))==null?void 0:s.internals.userNode;d&&i.push({...d,position:c.position,dragging:n})}if(!e)return[i[0],i];const a=(o=r.get(e))==null?void 0:o.internals.userNode;return[a?{...a,position:((u=t.get(e))==null?void 0:u.position)||a.position,dragging:n}:i[0],i]}function gN({onNodeMouseDown:e,getStoreItems:t,onDragStart:r,onDrag:n,onDragStop:i}){let a={x:null,y:null},s=0,o=new Map,u=!1,l={x:0,y:0},c=null,d=!1,f=null,h=!1,x=!1;function m({noDragClassName:y,handleSelector:_,domNode:g,isSelectable:b,nodeId:N,nodeClickDistance:E=0}){f=ge(g);function w({x:M,y:L},F){const{nodeLookup:C,nodeExtent:R,snapGrid:S,snapToGrid:I,nodeOrigin:O,onNodeDrag:q,onSelectionDrag:$,onError:z,updateNodePositions:H}=t();a={x:M,y:L};let U=!1,P={x:0,y:0,x2:0,y2:0};if(o.size>1&&R){const D=rr(o);P=pu(D)}for(const[D,B]of o){if(!C.has(D))continue;let G={x:M-B.distance.x,y:L-B.distance.y};I&&(G=an(G,S));let V=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];if(o.size>1&&R&&!B.extent){const{positionAbsolute:ee}=B.internals,Q=ee.x-P.x+R[0][0],K=ee.x+B.measured.width-P.x2+R[1][0],W=ee.y-P.y+R[0][1],X=ee.y+B.measured.height-P.y2+R[1][1];V=[[Q,W],[K,X]]}const{position:Y,positionAbsolute:Z}=kv({nodeId:D,nextPosition:G,nodeLookup:C,nodeExtent:V,nodeOrigin:O,onError:z});U=U||B.position.x!==Y.x||B.position.y!==Y.y,B.position=Y,B.internals.positionAbsolute=Z}if(x=x||U,!!U&&(H(o,!0),F&&(n||q||!N&&$))){const[D,B]=Pn({nodeId:N,dragItems:o,nodeLookup:C});n==null||n(F,o,D,B),q==null||q(F,D,B),N||$==null||$(F,B)}}async function A(){if(!c)return;const{transform:M,panBy:L,autoPanSpeed:F,autoPanOnNodeDrag:C}=t();if(!C){u=!1,cancelAnimationFrame(s);return}const[R,S]=jv(l,c,F);(R!==0||S!==0)&&(a.x=(a.x??0)-R/M[2],a.y=(a.y??0)-S/M[2],await L({x:R,y:S})&&w(a,null)),s=requestAnimationFrame(A)}function k(M){var U;const{nodeLookup:L,multiSelectionActive:F,nodesDraggable:C,transform:R,snapGrid:S,snapToGrid:I,selectNodesOnDrag:O,onNodeDragStart:q,onSelectionDragStart:$,unselectNodesAndEdges:z}=t();d=!0,(!O||!b)&&!F&&N&&((U=L.get(N))!=null&&U.selected||z()),b&&O&&N&&(e==null||e(N));const H=zt(M.sourceEvent,{transform:R,snapGrid:S,snapToGrid:I,containerBounds:c});if(a=H,o=pN(L,C,H,N),o.size>0&&(r||q||!N&&$)){const[P,D]=Pn({nodeId:N,dragItems:o,nodeLookup:L});r==null||r(M.sourceEvent,o,P,D),q==null||q(M.sourceEvent,P,D),N||$==null||$(M.sourceEvent,D)}}const T=ov().clickDistance(E).on("start",M=>{const{domNode:L,nodeDragThreshold:F,transform:C,snapGrid:R,snapToGrid:S}=t();c=(L==null?void 0:L.getBoundingClientRect())||null,h=!1,x=!1,F===0&&k(M),a=zt(M.sourceEvent,{transform:C,snapGrid:R,snapToGrid:S,containerBounds:c}),l=je(M.sourceEvent,c)}).on("drag",M=>{const{autoPanOnNodeDrag:L,transform:F,snapGrid:C,snapToGrid:R,nodeDragThreshold:S,nodeLookup:I}=t(),O=zt(M.sourceEvent,{transform:F,snapGrid:C,snapToGrid:R,containerBounds:c});if((M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||N&&!I.has(N))&&(h=!0),!h){if(!u&&L&&d&&(u=!0,A()),!d){const q=O.xSnapped-(a.x??0),$=O.ySnapped-(a.y??0);Math.sqrt(q*q+$*$)>S&&k(M)}(a.x!==O.xSnapped||a.y!==O.ySnapped)&&o&&d&&(l=je(M.sourceEvent,c),w(O,M.sourceEvent))}}).on("end",M=>{if(!(!d||h)&&(u=!1,d=!1,cancelAnimationFrame(s),o.size>0)){const{nodeLookup:L,updateNodePositions:F,onNodeDragStop:C,onSelectionDragStop:R}=t();if(x&&(F(o,!1),x=!1),i||C||!N&&R){const[S,I]=Pn({nodeId:N,dragItems:o,nodeLookup:L,dragging:!1});i==null||i(M.sourceEvent,o,S,I),C==null||C(M.sourceEvent,S,I),N||R==null||R(M.sourceEvent,I)}}}).filter(M=>{const L=M.target;return!M.button&&(!y||!zl(L,`.${y}`,g))&&(!_||zl(L,_,g))});f.call(T)}function v(){f==null||f.on(".drag",null)}return{update:m,destroy:v}}function mN(e,t,r){const n=[],i={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const a of t.values())Xt(i,wt(a))>0&&n.push(a);return n}const vN=250;function yN(e,t,r,n){var o,u;let i=[],a=1/0;const s=mN(e,r,t+vN);for(const l of s){const c=[...((o=l.internals.handleBounds)==null?void 0:o.source)??[],...((u=l.internals.handleBounds)==null?void 0:u.target)??[]];for(const d of c){if(n.nodeId===d.nodeId&&n.type===d.type&&n.id===d.id)continue;const{x:f,y:h}=Kt(l,d,d.position,!0),x=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(h-e.y,2));x>t||(x<a?(i=[{...d,x:f,y:h}],a=x):x===a&&i.push({...d,x:f,y:h}))}}if(!i.length)return null;if(i.length>1){const l=n.type==="source"?"target":"source";return i.find(c=>c.type===l)??i[0]}return i[0]}function Vv(e,t,r,n,i,a=!1){var l,c,d;const s=n.get(e);if(!s)return null;const o=i==="strict"?(l=s.internals.handleBounds)==null?void 0:l[t]:[...((c=s.internals.handleBounds)==null?void 0:c.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],u=(r?o==null?void 0:o.find(f=>f.id===r):o==null?void 0:o[0])??null;return u&&a?{...u,...Kt(s,u,u.position,!0)}:u}function Uv(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function xN(e,t){let r=null;return t?r=!0:e&&!t&&(r=!1),r}const Yv=()=>!0;function bN(e,{connectionMode:t,connectionRadius:r,handleId:n,nodeId:i,edgeUpdaterType:a,isTarget:s,domNode:o,nodeLookup:u,lib:l,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:x,onConnect:m,onConnectEnd:v,isValidConnection:y=Yv,onReconnectEnd:_,updateConnection:g,getTransform:b,getFromHandle:N,autoPanSpeed:E,dragThreshold:w=1}){const A=qv(e.target);let k=0,T;const{x:M,y:L}=je(e),F=A==null?void 0:A.elementFromPoint(M,L),C=Uv(a,F),R=o==null?void 0:o.getBoundingClientRect();let S=!1;if(!R||!C)return;const I=Vv(i,C,n,u,t);if(!I)return;let O=je(e,R),q=!1,$=null,z=!1,H=null;function U(){if(!c||!R)return;const[ee,Q]=jv(O,R,E);f({x:ee,y:Q}),k=requestAnimationFrame(U)}const P={...I,nodeId:i,type:C,position:I.position},D=u.get(i);let G={inProgress:!0,isValid:null,from:Kt(D,P,J.Left,!0),fromHandle:P,fromPosition:P.position,fromNode:D,to:O,toHandle:null,toPosition:jl[P.position],toNode:null};function V(){S=!0,g(G),x==null||x(e,{nodeId:i,handleId:n,handleType:C})}w===0&&V();function Y(ee){if(!S){const{x:X,y:ne}=je(ee),te=X-M,pe=ne-L;if(!(te*te+pe*pe>w*w))return;V()}if(!N()||!P){Z(ee);return}const Q=b();O=je(ee,R),T=yN(nr(O,Q,!1,[1,1]),r,u,P),q||(U(),q=!0);const K=Wv(ee,{handle:T,connectionMode:t,fromNodeId:i,fromHandleId:n,fromType:s?"target":"source",isValidConnection:y,doc:A,lib:l,flowId:d,nodeLookup:u});H=K.handleDomNode,$=K.connection,z=xN(!!T,K.isValid);const W={...G,isValid:z,to:K.toHandle&&z?Hr({x:K.toHandle.x,y:K.toHandle.y},Q):O,toHandle:K.toHandle,toPosition:z&&K.toHandle?K.toHandle.position:jl[P.position],toNode:K.toHandle?u.get(K.toHandle.nodeId):null};z&&T&&G.toHandle&&W.toHandle&&G.toHandle.type===W.toHandle.type&&G.toHandle.nodeId===W.toHandle.nodeId&&G.toHandle.id===W.toHandle.id&&G.to.x===W.to.x&&G.to.y===W.to.y||(g(W),G=W)}function Z(ee){if(S){(T||H)&&$&&z&&(m==null||m($));const{inProgress:Q,...K}=G,W={...K,toPosition:G.toHandle?G.toPosition:null};v==null||v(ee,W),a&&(_==null||_(ee,W))}h(),cancelAnimationFrame(k),q=!1,z=!1,$=null,H=null,A.removeEventListener("mousemove",Y),A.removeEventListener("mouseup",Z),A.removeEventListener("touchmove",Y),A.removeEventListener("touchend",Z)}A.addEventListener("mousemove",Y),A.addEventListener("mouseup",Z),A.addEventListener("touchmove",Y),A.addEventListener("touchend",Z)}function Wv(e,{handle:t,connectionMode:r,fromNodeId:n,fromHandleId:i,fromType:a,doc:s,lib:o,flowId:u,isValidConnection:l=Yv,nodeLookup:c}){const d=a==="target",f=t?s.querySelector(`.${o}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:x}=je(e),m=s.elementFromPoint(h,x),v=m!=null&&m.classList.contains(`${o}-flow__handle`)?m:f,y={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const _=Uv(void 0,v),g=v.getAttribute("data-nodeid"),b=v.getAttribute("data-handleid"),N=v.classList.contains("connectable"),E=v.classList.contains("connectableend");if(!g||!_)return y;const w={source:d?g:n,sourceHandle:d?b:i,target:d?n:g,targetHandle:d?i:b};y.connection=w;const k=N&&E&&(r===st.Strict?d&&_==="source"||!d&&_==="target":g!==n||b!==i);y.isValid=k&&l(w),y.toHandle=Vv(g,_,b,c,r,!0)}return y}const yu={onPointerDown:bN,isValid:Wv};function _N({domNode:e,panZoom:t,getTransform:r,getViewScale:n}){const i=ge(e);function a({translateExtent:o,width:u,height:l,zoomStep:c=10,pannable:d=!0,zoomable:f=!0,inversePan:h=!1}){const x=g=>{const b=r();if(g.sourceEvent.type!=="wheel"||!t)return;const N=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*c,E=b[2]*Math.pow(2,N);t.scaleTo(E)};let m=[0,0];const v=g=>{(g.sourceEvent.type==="mousedown"||g.sourceEvent.type==="touchstart")&&(m=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY])},y=g=>{const b=r();if(g.sourceEvent.type!=="mousemove"&&g.sourceEvent.type!=="touchmove"||!t)return;const N=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY],E=[N[0]-m[0],N[1]-m[1]];m=N;const w=n()*Math.max(b[2],Math.log(b[2]))*(h?-1:1),A={x:b[0]-E[0]*w,y:b[1]-E[1]*w},k=[[0,0],[u,l]];t.setViewportConstrained({x:A.x,y:A.y,zoom:b[2]},k,o)},_=wv().on("start",v).on("zoom",d?y:null).on("zoom.wheel",f?x:null);i.call(_,{})}function s(){i.on("zoom",null)}return{update:a,destroy:s,pointer:be}}const wN=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,sn=e=>({x:e.x,y:e.y,zoom:e.k}),Ln=({x:e,y:t,zoom:r})=>tn.translate(e,t).scale(r),gt=(e,t)=>e.target.closest(`.${t}`),Xv=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),NN=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Dn=(e,t=0,r=NN,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).ease(r).on("end",n):e},Kv=e=>{const t=e.ctrlKey&&Gr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function EN({zoomPanValues:e,noWheelClassName:t,d3Selection:r,d3Zoom:n,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:o,onPanZoom:u,onPanZoomEnd:l}){return c=>{if(gt(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const d=r.property("__zoom").k||1;if(c.ctrlKey&&s){const v=be(c),y=Kv(c),_=d*Math.pow(2,y);n.scaleTo(r,_,v,c);return}const f=c.deltaMode===1?20:1;let h=i===nt.Vertical?0:c.deltaX*f,x=i===nt.Horizontal?0:c.deltaY*f;!Gr()&&c.shiftKey&&i!==nt.Vertical&&(h=c.deltaY*f,x=0),n.translateBy(r,-(h/d)*a,-(x/d)*a,{internal:!0});const m=sn(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,o==null||o(c,m)),e.isPanScrolling&&(u==null||u(c,m),e.panScrollTimeout=setTimeout(()=>{l==null||l(c,m),e.isPanScrolling=!1},150))}}function SN({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:r}){return function(n,i){const a=n.type==="wheel",s=!t&&a&&!n.ctrlKey,o=gt(n,e);if(n.ctrlKey&&a&&o&&n.preventDefault(),s||o)return null;n.preventDefault(),r.call(this,n,i)}}function CN({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:r}){return n=>{var a,s,o;if((a=n.sourceEvent)!=null&&a.internal)return;const i=sn(n.transform);e.mouseButton=((s=n.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((o=n.sourceEvent)==null?void 0:o.type)==="mousedown"&&t(!0),r&&(r==null||r(n.sourceEvent,i))}}function AN({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:r,onTransformChange:n,onPanZoom:i}){return a=>{var s,o;e.usedRightMouseButton=!!(r&&Xv(t,e.mouseButton??0)),(s=a.sourceEvent)!=null&&s.sync||n([a.transform.x,a.transform.y,a.transform.k]),i&&!((o=a.sourceEvent)!=null&&o.internal)&&(i==null||i(a.sourceEvent,sn(a.transform)))}}function kN({zoomPanValues:e,panOnDrag:t,panOnScroll:r,onDraggingChange:n,onPanZoomEnd:i,onPaneContextMenu:a}){return s=>{var o;if(!((o=s.sourceEvent)!=null&&o.internal)&&(e.isZoomingOrPanning=!1,a&&Xv(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),e.usedRightMouseButton=!1,n(!1),i&&wN(e.prevViewport,s.transform))){const u=sn(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},r?150:0)}}}function IN({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:r,panOnDrag:n,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:o,noPanClassName:u,lib:l}){return c=>{var x;const d=e||t,f=r&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(gt(c,`${l}-flow__node`)||gt(c,`${l}-flow__edge`)))return!0;if(!n&&!d&&!i&&!a&&!r||s||gt(c,o)&&c.type==="wheel"||gt(c,u)&&(c.type!=="wheel"||i&&c.type==="wheel"&&!e)||!r&&c.ctrlKey&&c.type==="wheel")return!1;if(!r&&c.type==="touchstart"&&((x=c.touches)==null?void 0:x.length)>1)return c.preventDefault(),!1;if(!d&&!i&&!f&&c.type==="wheel"||!n&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(n)&&!n.includes(c.button)&&c.type==="mousedown")return!1;const h=Array.isArray(n)&&n.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function jN({domNode:e,minZoom:t,maxZoom:r,paneClickDistance:n,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:u,onDraggingChange:l}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=wv().clickDistance(!Ne(n)||n<0?0:n).scaleExtent([t,r]).translateExtent(i),h=ge(e).call(f);g({x:a.x,y:a.y,zoom:_t(a.zoom,t,r)},[[0,0],[d.width,d.height]],i);const x=h.on("wheel.zoom"),m=h.on("dblclick.zoom");f.wheelDelta(Kv);function v(L,F){return h?new Promise(C=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Bt:kr).transform(Dn(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>C(!0)),L)}):Promise.resolve(!1)}function y({noWheelClassName:L,noPanClassName:F,onPaneContextMenu:C,userSelectionActive:R,panOnScroll:S,panOnDrag:I,panOnScrollMode:O,panOnScrollSpeed:q,preventScrolling:$,zoomOnPinch:z,zoomOnScroll:H,zoomOnDoubleClick:U,zoomActivationKeyPressed:P,lib:D,onTransformChange:B}){R&&!c.isZoomingOrPanning&&_();const V=S&&!P&&!R?EN({zoomPanValues:c,noWheelClassName:L,d3Selection:h,d3Zoom:f,panOnScrollMode:O,panOnScrollSpeed:q,zoomOnPinch:z,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:u}):SN({noWheelClassName:L,preventScrolling:$,d3ZoomHandler:x});if(h.on("wheel.zoom",V,{passive:!1}),!R){const Z=CN({zoomPanValues:c,onDraggingChange:l,onPanZoomStart:o});f.on("start",Z);const ee=AN({zoomPanValues:c,panOnDrag:I,onPaneContextMenu:!!C,onPanZoom:s,onTransformChange:B});f.on("zoom",ee);const Q=kN({zoomPanValues:c,panOnDrag:I,panOnScroll:S,onPaneContextMenu:C,onPanZoomEnd:u,onDraggingChange:l});f.on("end",Q)}const Y=IN({zoomActivationKeyPressed:P,panOnDrag:I,zoomOnScroll:H,panOnScroll:S,zoomOnDoubleClick:U,zoomOnPinch:z,userSelectionActive:R,noPanClassName:F,noWheelClassName:L,lib:D});f.filter(Y),U?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)}function _(){f.on("zoom",null)}async function g(L,F,C){const R=Ln(L),S=f==null?void 0:f.constrain()(R,F,C);return S&&await v(S),new Promise(I=>I(S))}async function b(L,F){const C=Ln(L);return await v(C,F),new Promise(R=>R(C))}function N(L){if(h){const F=Ln(L),C=h.property("__zoom");(C.k!==L.zoom||C.x!==L.x||C.y!==L.y)&&(f==null||f.transform(h,F,null,{sync:!0}))}}function E(){const L=h?_v(h.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function w(L,F){return h?new Promise(C=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Bt:kr).scaleTo(Dn(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>C(!0)),L)}):Promise.resolve(!1)}function A(L,F){return h?new Promise(C=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Bt:kr).scaleBy(Dn(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>C(!0)),L)}):Promise.resolve(!1)}function k(L){f==null||f.scaleExtent(L)}function T(L){f==null||f.translateExtent(L)}function M(L){const F=!Ne(L)||L<0?0:L;f==null||f.clickDistance(F)}return{update:y,destroy:_,setViewport:b,setViewportConstrained:g,getViewport:E,scaleTo:w,scaleBy:A,setScaleExtent:k,setTranslateExtent:T,syncViewport:N,setClickDistance:M}}var Et;(function(e){e.Line="line",e.Handle="handle"})(Et||(Et={}));function RN({width:e,prevWidth:t,height:r,prevHeight:n,affectsX:i,affectsY:a}){const s=e-t,o=r-n,u=[s>0?1:s<0?-1:0,o>0?1:o<0?-1:0];return s&&i&&(u[0]=u[0]*-1),o&&a&&(u[1]=u[1]*-1),u}function MN(e){const t=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),n=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:r,affectsX:n,affectsY:i}}function Ke(e,t){return Math.max(0,t-e)}function Ze(e,t){return Math.max(0,e-t)}function _r(e,t,r){return Math.max(0,t-e,e-r)}function Hl(e,t){return e?!t:t}function TN(e,t,r,n,i,a,s,o){let{affectsX:u,affectsY:l}=t;const{isHorizontal:c,isVertical:d}=t,f=c&&d,{xSnapped:h,ySnapped:x}=r,{minWidth:m,maxWidth:v,minHeight:y,maxHeight:_}=n,{x:g,y:b,width:N,height:E,aspectRatio:w}=e;let A=Math.floor(c?h-e.pointerX:0),k=Math.floor(d?x-e.pointerY:0);const T=N+(u?-A:A),M=E+(l?-k:k),L=-a[0]*N,F=-a[1]*E;let C=_r(T,m,v),R=_r(M,y,_);if(s){let O=0,q=0;u&&A<0?O=Ke(g+A+L,s[0][0]):!u&&A>0&&(O=Ze(g+T+L,s[1][0])),l&&k<0?q=Ke(b+k+F,s[0][1]):!l&&k>0&&(q=Ze(b+M+F,s[1][1])),C=Math.max(C,O),R=Math.max(R,q)}if(o){let O=0,q=0;u&&A>0?O=Ze(g+A,o[0][0]):!u&&A<0&&(O=Ke(g+T,o[1][0])),l&&k>0?q=Ze(b+k,o[0][1]):!l&&k<0&&(q=Ke(b+M,o[1][1])),C=Math.max(C,O),R=Math.max(R,q)}if(i){if(c){const O=_r(T/w,y,_)*w;if(C=Math.max(C,O),s){let q=0;!u&&!l||u&&!l&&f?q=Ze(b+F+T/w,s[1][1])*w:q=Ke(b+F+(u?A:-A)/w,s[0][1])*w,C=Math.max(C,q)}if(o){let q=0;!u&&!l||u&&!l&&f?q=Ke(b+T/w,o[1][1])*w:q=Ze(b+(u?A:-A)/w,o[0][1])*w,C=Math.max(C,q)}}if(d){const O=_r(M*w,m,v)/w;if(R=Math.max(R,O),s){let q=0;!u&&!l||l&&!u&&f?q=Ze(g+M*w+L,s[1][0])/w:q=Ke(g+(l?k:-k)*w+L,s[0][0])/w,R=Math.max(R,q)}if(o){let q=0;!u&&!l||l&&!u&&f?q=Ke(g+M*w,o[1][0])/w:q=Ze(g+(l?k:-k)*w,o[0][0])/w,R=Math.max(R,q)}}}k=k+(k<0?R:-R),A=A+(A<0?C:-C),i&&(f?T>M*w?k=(Hl(u,l)?-A:A)/w:A=(Hl(u,l)?-k:k)*w:c?(k=A/w,l=u):(A=k*w,u=l));const S=u?g+A:g,I=l?b+k:b;return{width:N+(u?-A:A),height:E+(l?-k:k),x:a[0]*A*(u?-1:1)+S,y:a[1]*k*(l?-1:1)+I}}const Zv={width:0,height:0,x:0,y:0},qN={...Zv,pointerX:0,pointerY:0,aspectRatio:1};function PN(e){return[[0,0],[e.measured.width,e.measured.height]]}function LN(e,t,r){const n=t.position.x+e.position.x,i=t.position.y+e.position.y,a=e.measured.width??0,s=e.measured.height??0,o=r[0]*a,u=r[1]*s;return[[n-o,i-u],[n+a-o,i+s-u]]}function DN({domNode:e,nodeId:t,getStoreItems:r,onChange:n,onEnd:i}){const a=ge(e);function s({controlPosition:u,boundaries:l,keepAspectRatio:c,resizeDirection:d,onResizeStart:f,onResize:h,onResizeEnd:x,shouldResize:m}){let v={...Zv},y={...qN};const _=MN(u);let g,b=null,N=[],E,w,A;const k=ov().on("start",T=>{const{nodeLookup:M,transform:L,snapGrid:F,snapToGrid:C,nodeOrigin:R,paneDomNode:S}=r();if(g=M.get(t),!g)return;b=(S==null?void 0:S.getBoundingClientRect())??null;const{xSnapped:I,ySnapped:O}=zt(T.sourceEvent,{transform:L,snapGrid:F,snapToGrid:C,containerBounds:b});v={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},y={...v,pointerX:I,pointerY:O,aspectRatio:v.width/v.height},E=void 0,g.parentId&&(g.extent==="parent"||g.expandParent)&&(E=M.get(g.parentId),w=E&&g.extent==="parent"?PN(E):void 0),N=[],A=void 0;for(const[q,$]of M)if($.parentId===t&&(N.push({id:q,position:{...$.position},extent:$.extent}),$.extent==="parent"||$.expandParent)){const z=LN($,g,$.origin??R);A?A=[[Math.min(z[0][0],A[0][0]),Math.min(z[0][1],A[0][1])],[Math.max(z[1][0],A[1][0]),Math.max(z[1][1],A[1][1])]]:A=z}f==null||f(T,{...v})}).on("drag",T=>{const{transform:M,snapGrid:L,snapToGrid:F,nodeOrigin:C}=r(),R=zt(T.sourceEvent,{transform:M,snapGrid:L,snapToGrid:F,containerBounds:b}),S=[];if(!g)return;const{x:I,y:O,width:q,height:$}=v,z={},H=g.origin??C,{width:U,height:P,x:D,y:B}=TN(y,_,R,l,c,H,w,A),G=U!==q,V=P!==$,Y=D!==I&&G,Z=B!==O&&V;if(!Y&&!Z&&!G&&!V)return;if((Y||Z||H[0]===1||H[1]===1)&&(z.x=Y?D:v.x,z.y=Z?B:v.y,v.x=z.x,v.y=z.y,N.length>0)){const W=D-I,X=B-O;for(const ne of N)ne.position={x:ne.position.x-W+H[0]*(U-q),y:ne.position.y-X+H[1]*(P-$)},S.push(ne)}if((G||V)&&(z.width=G&&(!d||d==="horizontal")?U:v.width,z.height=V&&(!d||d==="vertical")?P:v.height,v.width=z.width,v.height=z.height),E&&g.expandParent){const W=H[0]*(z.width??0);z.x&&z.x<W&&(v.x=W,y.x=y.x-(z.x-W));const X=H[1]*(z.height??0);z.y&&z.y<X&&(v.y=X,y.y=y.y-(z.y-X))}const ee=RN({width:v.width,prevWidth:q,height:v.height,prevHeight:$,affectsX:_.affectsX,affectsY:_.affectsY}),Q={...v,direction:ee};(m==null?void 0:m(T,Q))!==!1&&(h==null||h(T,Q),n(z,S))}).on("end",T=>{x==null||x(T,{...v}),i==null||i({...v})});a.call(k)}function o(){a.on(".drag",null)}return{update:s,destroy:o}}const ON={},Gl=e=>{let t;const r=new Set,n=(c,d)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(x=>x(t,h))}},i=()=>t,u={setState:n,getState:i,getInitialState:()=>l,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{(ON?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(n,i,u);return u},FN=e=>e?Gl(e):Gl,{useDebugValue:$N}=ke,{useSyncExternalStoreWithSelector:BN}=rb,zN=e=>e;function Jv(e,t=zN,r){const n=BN(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return $N(n),n}const Vl=(e,t)=>{const r=FN(e),n=(i,a=t)=>Jv(r,i,a);return Object.assign(n,r),n},HN=(e,t)=>e?Vl(e,t):Vl;function oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}const on=j.createContext(null),GN=on.Provider,Qv=Me.error001();function re(e,t){const r=j.useContext(on);if(r===null)throw new Error(Qv);return Jv(r,e,t)}function ae(){const e=j.useContext(on);if(e===null)throw new Error(Qv);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Ul={display:"none"},VN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ey="react-flow__node-desc",ty="react-flow__edge-desc",UN="react-flow__aria-live",YN=e=>e.ariaLiveMessage,WN=e=>e.ariaLabelConfig;function XN({rfId:e}){const t=re(YN);return p.jsx("div",{id:`${UN}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:VN,children:t})}function KN({rfId:e,disableKeyboardA11y:t}){const r=re(WN);return p.jsxs(p.Fragment,{children:[p.jsx("div",{id:`${ey}-${e}`,style:Ul,children:t?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),p.jsx("div",{id:`${ty}-${e}`,style:Ul,children:r["edge.a11yDescription.default"]}),!t&&p.jsx(XN,{rfId:e})]})}const ir=j.forwardRef(({position:e="top-left",children:t,className:r,style:n,...i},a)=>{const s=`${e}`.split("-");return p.jsx("div",{className:ue(["react-flow__panel",r,...s]),style:n,ref:a,...i,children:t})});ir.displayName="Panel";function ZN({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:p.jsx(ir,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:p.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const JN=e=>{const t=[],r=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,n]of e.edgeLookup)n.selected&&r.push(n);return{selectedNodes:t,selectedEdges:r}},wr=e=>e.id;function QN(e,t){return oe(e.selectedNodes.map(wr),t.selectedNodes.map(wr))&&oe(e.selectedEdges.map(wr),t.selectedEdges.map(wr))}function eE({onSelectionChange:e}){const t=ae(),{selectedNodes:r,selectedEdges:n}=re(JN,QN);return j.useEffect(()=>{const i={nodes:r,edges:n};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(a=>a(i))},[r,n,e]),null}const tE=e=>!!e.onSelectionChangeHandlers;function rE({onSelectionChange:e}){const t=re(tE);return e||t?p.jsx(eE,{onSelectionChange:e}):null}const ry=[0,0],nE={x:0,y:0,zoom:1},iE=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],Yl=[...iE,"rfId"],aE=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Wl={translateExtent:Yt,nodeOrigin:ry,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function sE(e){const{setNodes:t,setEdges:r,setMinZoom:n,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:o,setDefaultNodesAndEdges:u,setPaneClickDistance:l}=re(aE,oe),c=ae();j.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{d.current=Wl,o()}),[]);const d=j.useRef(Wl);return j.useEffect(()=>{for(const f of Yl){const h=e[f],x=d.current[f];h!==x&&(typeof e[f]>"u"||(f==="nodes"?t(h):f==="edges"?r(h):f==="minZoom"?n(h):f==="maxZoom"?i(h):f==="translateExtent"?a(h):f==="nodeExtent"?s(h):f==="paneClickDistance"?l(h):f==="ariaLabelConfig"?c.setState({ariaLabelConfig:Zw(h)}):f==="fitView"?c.setState({fitViewQueued:h}):f==="fitViewOptions"?c.setState({fitViewOptions:h}):c.setState({[f]:h})))}d.current=e},Yl.map(f=>e[f])),null}function Xl(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function oE(e){var n;const[t,r]=j.useState(e==="system"?null:e);return j.useEffect(()=>{if(e!=="system"){r(e);return}const i=Xl(),a=()=>r(i!=null&&i.matches?"dark":"light");return a(),i==null||i.addEventListener("change",a),()=>{i==null||i.removeEventListener("change",a)}},[e]),t!==null?t:(n=Xl())!=null&&n.matches?"dark":"light"}const Kl=typeof document<"u"?document:null;function Zt(e=null,t={target:Kl,actInsideInputWithModifier:!0}){const[r,n]=j.useState(!1),i=j.useRef(!1),a=j.useRef(new Set([])),[s,o]=j.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=l.reduce((d,f)=>d.concat(...f),[]);return[l,c]}return[[],[]]},[e]);return j.useEffect(()=>{const u=(t==null?void 0:t.target)??Kl,l=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=h=>{var v,y;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!l)&&Pv(h))return!1;const m=Jl(h.code,o);if(a.current.add(h[m]),Zl(s,a.current,!1)){const _=((y=(v=h.composedPath)==null?void 0:v.call(h))==null?void 0:y[0])||h.target,g=(_==null?void 0:_.nodeName)==="BUTTON"||(_==null?void 0:_.nodeName)==="A";t.preventDefault!==!1&&(i.current||!g)&&h.preventDefault(),n(!0)}},d=h=>{const x=Jl(h.code,o);Zl(s,a.current,!0)?(n(!1),a.current.clear()):a.current.delete(h[x]),h.key==="Meta"&&a.current.clear(),i.current=!1},f=()=>{a.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,n]),r}function Zl(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(i=>t.has(i)))}function Jl(e,t){return t.includes(e)?"code":"key"}const cE=()=>{const e=ae();return j.useMemo(()=>({zoomIn:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,r)=>{const{panZoom:n}=e.getState();return n?n.scaleTo(t,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,r)=>{const{transform:[n,i,a],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??n,y:t.y??i,zoom:t.zoom??a},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,r,n]=e.getState().transform;return{x:t,y:r,zoom:n}},setCenter:async(t,r,n)=>e.getState().setCenter(t,r,n),fitBounds:async(t,r)=>{const{width:n,height:i,minZoom:a,maxZoom:s,panZoom:o}=e.getState(),u=Ru(t,n,i,a,s,(r==null?void 0:r.padding)??.1);return o?(await o.setViewport(u,{duration:r==null?void 0:r.duration,ease:r==null?void 0:r.ease,interpolate:r==null?void 0:r.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,r={})=>{const{transform:n,snapGrid:i,snapToGrid:a,domNode:s}=e.getState();if(!s)return t;const{x:o,y:u}=s.getBoundingClientRect(),l={x:t.x-o,y:t.y-u},c=r.snapGrid??i,d=r.snapToGrid??a;return nr(l,n,d,c)},flowToScreenPosition:t=>{const{transform:r,domNode:n}=e.getState();if(!n)return t;const{x:i,y:a}=n.getBoundingClientRect(),s=Hr(t,r);return{x:s.x+i,y:s.y+a}}}),[])};function ny(e,t){const r=[],n=new Map,i=[];for(const a of e)if(a.type==="add"){i.push(a);continue}else if(a.type==="remove"||a.type==="replace")n.set(a.id,[a]);else{const s=n.get(a.id);s?s.push(a):n.set(a.id,[a])}for(const a of t){const s=n.get(a.id);if(!s){r.push(a);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){r.push({...s[0].item});continue}const o={...a};for(const u of s)uE(u,o);r.push(o)}return i.length&&i.forEach(a=>{a.index!==void 0?r.splice(a.index,0,{...a.item}):r.push({...a.item})}),r}function uE(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function iy(e,t){return ny(e,t)}function ay(e,t){return ny(e,t)}function et(e,t){return{id:e,type:"select",selected:t}}function mt(e,t=new Set,r=!1){const n=[];for(const[i,a]of e){const s=t.has(i);!(a.selected===void 0&&!s)&&a.selected!==s&&(r&&(a.selected=s),n.push(et(a.id,s)))}return n}function Ql({items:e=[],lookup:t}){var i;const r=[],n=new Map(e.map(a=>[a.id,a]));for(const[a,s]of e.entries()){const o=t.get(s.id),u=((i=o==null?void 0:o.internals)==null?void 0:i.userNode)??o;u!==void 0&&u!==s&&r.push({id:s.id,item:s,type:"replace"}),u===void 0&&r.push({item:s,type:"add",index:a})}for(const[a]of t)n.get(a)===void 0&&r.push({id:a,type:"remove"});return r}function ed(e){return{id:e.id,type:"remove"}}const td=e=>Bw(e),lE=e=>Av(e);function sy(e){return j.forwardRef(e)}const dE=typeof window<"u"?j.useLayoutEffect:j.useEffect;function rd(e){const[t,r]=j.useState(BigInt(0)),[n]=j.useState(()=>fE(()=>r(i=>i+BigInt(1))));return dE(()=>{const i=n.get();i.length&&(e(i),n.reset())},[t]),n}function fE(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:r=>{t.push(r),e()}}}const oy=j.createContext(null);function hE({children:e}){const t=ae(),r=j.useCallback(o=>{const{nodes:u=[],setNodes:l,hasDefaultNodes:c,onNodesChange:d,nodeLookup:f,fitViewQueued:h}=t.getState();let x=u;for(const v of o)x=typeof v=="function"?v(x):v;const m=Ql({items:x,lookup:f});c&&l(x),m.length>0?d==null||d(m):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:v,nodes:y,setNodes:_}=t.getState();v&&_(y)})},[]),n=rd(r),i=j.useCallback(o=>{const{edges:u=[],setEdges:l,hasDefaultEdges:c,onEdgesChange:d,edgeLookup:f}=t.getState();let h=u;for(const x of o)h=typeof x=="function"?x(h):x;c?l(h):d&&d(Ql({items:h,lookup:f}))},[]),a=rd(i),s=j.useMemo(()=>({nodeQueue:n,edgeQueue:a}),[]);return p.jsx(oy.Provider,{value:s,children:e})}function pE(){const e=j.useContext(oy);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const gE=e=>!!e.panZoom;function cn(){const e=cE(),t=ae(),r=pE(),n=re(gE),i=j.useMemo(()=>{const a=d=>t.getState().nodeLookup.get(d),s=d=>{r.nodeQueue.push(d)},o=d=>{r.edgeQueue.push(d)},u=d=>{var y,_;const{nodeLookup:f,nodeOrigin:h}=t.getState(),x=td(d)?d:f.get(d.id),m=x.parentId?Tv(x.position,x.measured,x.parentId,f,h):x.position,v={...x,position:m,width:((y=x.measured)==null?void 0:y.width)??x.width,height:((_=x.measured)==null?void 0:_.height)??x.height};return wt(v)},l=(d,f,h={replace:!1})=>{s(x=>x.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return h.replace&&td(v)?v:{...m,...v}}return m}))},c=(d,f,h={replace:!1})=>{o(x=>x.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return h.replace&&lE(v)?v:{...m,...v}}return m}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=a(d))==null?void 0:f.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:s,setEdges:o,addNodes:d=>{const f=Array.isArray(d)?d:[d];r.nodeQueue.push(h=>[...h,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];r.edgeQueue.push(h=>[...h,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:h}=t.getState(),[x,m,v]=h;return{nodes:d.map(y=>({...y})),edges:f.map(y=>({...y})),viewport:{x,y:m,zoom:v}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:h,edges:x,onNodesDelete:m,onEdgesDelete:v,triggerNodeChanges:y,triggerEdgeChanges:_,onDelete:g,onBeforeDelete:b}=t.getState(),{nodes:N,edges:E}=await Uw({nodesToRemove:d,edgesToRemove:f,nodes:h,edges:x,onBeforeDelete:b}),w=E.length>0,A=N.length>0;if(w){const k=E.map(ed);v==null||v(E),_(k)}if(A){const k=N.map(ed);m==null||m(N),y(k)}return(A||w)&&(g==null||g({nodes:N,edges:E})),{deletedNodes:N,deletedEdges:E}},getIntersectingNodes:(d,f=!0,h)=>{const x=Ml(d),m=x?d:u(d),v=h!==void 0;return m?(h||t.getState().nodes).filter(y=>{const _=t.getState().nodeLookup.get(y.id);if(_&&!x&&(y.id===d.id||!_.internals.positionAbsolute))return!1;const g=wt(v?y:_),b=Xt(g,m);return f&&b>0||b>=g.width*g.height||b>=m.width*m.height}):[]},isNodeIntersecting:(d,f,h=!0)=>{const m=Ml(d)?d:u(d);if(!m)return!1;const v=Xt(m,f);return h&&v>0||v>=m.width*m.height},updateNode:l,updateNodeData:(d,f,h={replace:!1})=>{l(d,x=>{const m=typeof f=="function"?f(x):f;return h.replace?{...x,data:m}:{...x,data:{...x.data,...m}}},h)},updateEdge:c,updateEdgeData:(d,f,h={replace:!1})=>{c(d,x=>{const m=typeof f=="function"?f(x):f;return h.replace?{...x,data:m}:{...x,data:{...x.data,...m}}},h)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:h}=t.getState();return zw(d,{nodeLookup:f,nodeOrigin:h})},getHandleConnections:({type:d,id:f,nodeId:h})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${h}-${d}${f?`-${f}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:d,handleId:f,nodeId:h})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${h}${d?f?`-${d}-${f}`:`-${d}`:""}`))==null?void 0:x.values())??[])},fitView:async d=>{const f=t.getState().fitViewResolver??Kw();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:f}),r.nodeQueue.push(h=>[...h]),f.promise}}},[]);return j.useMemo(()=>({...i,...e,viewportInitialized:n}),[n])}const nd=e=>e.selected,mE=typeof window<"u"?window:void 0;function vE({deleteKeyCode:e,multiSelectionKeyCode:t}){const r=ae(),{deleteElements:n}=cn(),i=Zt(e,{actInsideInputWithModifier:!1}),a=Zt(t,{target:mE});j.useEffect(()=>{if(i){const{edges:s,nodes:o}=r.getState();n({nodes:o.filter(nd),edges:s.filter(nd)}),r.setState({nodesSelectionActive:!1})}},[i]),j.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])}function yE(e){const t=ae();j.useEffect(()=>{const r=()=>{var i,a;if(!e.current)return!1;const n=Mu(e.current);(n.height===0||n.width===0)&&((a=(i=t.getState()).onError)==null||a.call(i,"004",Me.error004())),t.setState({width:n.width||500,height:n.height||500})};if(e.current){r(),window.addEventListener("resize",r);const n=new ResizeObserver(()=>r());return n.observe(e.current),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}}},[])}const un={position:"absolute",width:"100%",height:"100%",top:0,left:0},xE=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function bE({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:r=!0,panOnScroll:n=!1,panOnScrollSpeed:i=.5,panOnScrollMode:a=nt.Free,zoomOnDoubleClick:s=!0,panOnDrag:o=!0,defaultViewport:u,translateExtent:l,minZoom:c,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:h=!0,children:x,noWheelClassName:m,noPanClassName:v,onViewportChange:y,isControlledViewport:_,paneClickDistance:g}){const b=ae(),N=j.useRef(null),{userSelectionActive:E,lib:w}=re(xE,oe),A=Zt(f),k=j.useRef();yE(N);const T=j.useCallback(M=>{y==null||y({x:M[0],y:M[1],zoom:M[2]}),_||b.setState({transform:M})},[y,_]);return j.useEffect(()=>{if(N.current){k.current=jN({domNode:N.current,minZoom:c,maxZoom:d,translateExtent:l,viewport:u,paneClickDistance:g,onDraggingChange:C=>b.setState({paneDragging:C}),onPanZoomStart:(C,R)=>{const{onViewportChangeStart:S,onMoveStart:I}=b.getState();I==null||I(C,R),S==null||S(R)},onPanZoom:(C,R)=>{const{onViewportChange:S,onMove:I}=b.getState();I==null||I(C,R),S==null||S(R)},onPanZoomEnd:(C,R)=>{const{onViewportChangeEnd:S,onMoveEnd:I}=b.getState();I==null||I(C,R),S==null||S(R)}});const{x:M,y:L,zoom:F}=k.current.getViewport();return b.setState({panZoom:k.current,transform:[M,L,F],domNode:N.current.closest(".react-flow")}),()=>{var C;(C=k.current)==null||C.destroy()}}},[]),j.useEffect(()=>{var M;(M=k.current)==null||M.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:r,panOnScroll:n,panOnScrollSpeed:i,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:o,zoomActivationKeyPressed:A,preventScrolling:h,noPanClassName:v,userSelectionActive:E,noWheelClassName:m,lib:w,onTransformChange:T})},[e,t,r,n,i,a,s,o,A,h,v,E,m,w,T]),p.jsx("div",{className:"react-flow__renderer",ref:N,style:un,children:x})}const _E=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function wE(){const{userSelectionActive:e,userSelectionRect:t}=re(_E,oe);return e&&t?p.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const On=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},NE=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function EE({isSelecting:e,selectionKeyPressed:t,selectionMode:r=Wt.Full,panOnDrag:n,selectionOnDrag:i,onSelectionStart:a,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:u,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:f,children:h}){const x=ae(),{userSelectionActive:m,elementsSelectable:v,dragging:y,connectionInProgress:_}=re(NE,oe),g=v&&(e||m),b=j.useRef(null),N=j.useRef(),E=j.useRef(new Set),w=j.useRef(new Set),A=j.useRef(!1),k=j.useRef(!1),T=I=>{if(A.current||_){A.current=!1;return}o==null||o(I),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},M=I=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){I.preventDefault();return}u==null||u(I)},L=l?I=>l(I):void 0,F=I=>{var H,U;const{resetSelectedElements:O,domNode:q}=x.getState();if(N.current=q==null?void 0:q.getBoundingClientRect(),!v||!e||I.button!==0||I.target!==b.current||!N.current)return;(U=(H=I.target)==null?void 0:H.setPointerCapture)==null||U.call(H,I.pointerId),k.current=!0,A.current=!1;const{x:$,y:z}=je(I.nativeEvent,N.current);O(),x.setState({userSelectionRect:{width:0,height:0,startX:$,startY:z,x:$,y:z}}),a==null||a(I)},C=I=>{const{userSelectionRect:O,transform:q,nodeLookup:$,edgeLookup:z,connectionLookup:H,triggerNodeChanges:U,triggerEdgeChanges:P,defaultEdgeOptions:D}=x.getState();if(!N.current||!O)return;A.current=!0;const{x:B,y:G}=je(I.nativeEvent,N.current),{startX:V,startY:Y}=O,Z={startX:V,startY:Y,x:B<V?B:V,y:G<Y?G:Y,width:Math.abs(B-V),height:Math.abs(G-Y)},ee=E.current,Q=w.current;E.current=new Set(ju($,Z,q,r===Wt.Partial,!0).map(W=>W.id)),w.current=new Set;const K=(D==null?void 0:D.selectable)??!0;for(const W of E.current){const X=H.get(W);if(X)for(const{edgeId:ne}of X.values()){const te=z.get(ne);te&&(te.selectable??K)&&w.current.add(ne)}}if(!Tl(ee,E.current)){const W=mt($,E.current,!0);U(W)}if(!Tl(Q,w.current)){const W=mt(z,w.current);P(W)}x.setState({userSelectionRect:Z,userSelectionActive:!0,nodesSelectionActive:!1})},R=I=>{var q,$;if(I.button!==0||!k.current)return;($=(q=I.target)==null?void 0:q.releasePointerCapture)==null||$.call(q,I.pointerId);const{userSelectionRect:O}=x.getState();!m&&O&&I.target===b.current&&(T==null||T(I)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:E.current.size>0}),s==null||s(I),(t||i)&&(A.current=!1),k.current=!1},S=n===!0||Array.isArray(n)&&n.includes(0);return p.jsxs("div",{className:ue(["react-flow__pane",{draggable:S,dragging:y,selection:e}]),onClick:g?void 0:On(T,b),onContextMenu:On(M,b),onWheel:On(L,b),onPointerEnter:g?void 0:c,onPointerDown:g?F:d,onPointerMove:g?C:d,onPointerUp:g?R:void 0,onPointerLeave:f,ref:b,style:un,children:[h,p.jsx(wE,{})]})}function xu({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:o,onError:u}=t.getState(),l=o.get(e);if(!l){u==null||u("012",Me.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(r||l.selected&&s)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var c;return(c=n==null?void 0:n.current)==null?void 0:c.blur()})):i([e])}function cy({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:i,isSelectable:a,nodeClickDistance:s}){const o=ae(),[u,l]=j.useState(!1),c=j.useRef();return j.useEffect(()=>{c.current=gN({getStoreItems:()=>o.getState(),onNodeMouseDown:d=>{xu({id:d,store:o,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),j.useEffect(()=>{var d,f;if(t)(d=c.current)==null||d.destroy();else if(e.current)return(f=c.current)==null||f.update({noDragClassName:r,handleSelector:n,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:s}),()=>{var h;(h=c.current)==null||h.destroy()}},[r,n,t,a,e,i]),u}const SE=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function uy(){const e=ae();return j.useCallback(r=>{const{nodeExtent:n,snapToGrid:i,snapGrid:a,nodesDraggable:s,onError:o,updateNodePositions:u,nodeLookup:l,nodeOrigin:c}=e.getState(),d=new Map,f=SE(s),h=i?a[0]:5,x=i?a[1]:5,m=r.direction.x*h*r.factor,v=r.direction.y*x*r.factor;for(const[,y]of l){if(!f(y))continue;let _={x:y.internals.positionAbsolute.x+m,y:y.internals.positionAbsolute.y+v};i&&(_=an(_,a));const{position:g,positionAbsolute:b}=kv({nodeId:y.id,nextPosition:_,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:o});y.position=g,y.internals.positionAbsolute=b,d.set(y.id,y)}u(d)},[])}const Du=j.createContext(null),CE=Du.Provider;Du.Consumer;const ly=()=>j.useContext(Du),AE=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),kE=(e,t,r)=>n=>{const{connectionClickStartHandle:i,connectionMode:a,connection:s}=n,{fromHandle:o,toHandle:u,isValid:l}=s,c=(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===r;return{connectingFrom:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===r,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===r,isPossibleEndHandle:a===st.Strict?(o==null?void 0:o.type)!==r:e!==(o==null?void 0:o.nodeId)||t!==(o==null?void 0:o.id),connectionInProcess:!!o,clickConnectionInProcess:!!i,valid:c&&l}};function IE({type:e="source",position:t=J.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:o,children:u,className:l,onMouseDown:c,onTouchStart:d,...f},h){var R,S;const x=s||null,m=e==="target",v=ae(),y=ly(),{connectOnClick:_,noPanClassName:g,rfId:b}=re(AE,oe),{connectingFrom:N,connectingTo:E,clickConnecting:w,isPossibleEndHandle:A,connectionInProcess:k,clickConnectionInProcess:T,valid:M}=re(kE(y,x,e),oe);y||(S=(R=v.getState()).onError)==null||S.call(R,"010",Me.error010());const L=I=>{const{defaultEdgeOptions:O,onConnect:q,hasDefaultEdges:$}=v.getState(),z={...O,...I};if($){const{edges:H,setEdges:U}=v.getState();U($v(z,H))}q==null||q(z),o==null||o(z)},F=I=>{if(!y)return;const O=Lv(I.nativeEvent);if(i&&(O&&I.button===0||!O)){const q=v.getState();yu.onPointerDown(I.nativeEvent,{autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:m,handleId:x,nodeId:y,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:L,isValidConnection:r||q.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}O?c==null||c(I):d==null||d(I)},C=I=>{const{onClickConnectStart:O,onClickConnectEnd:q,connectionClickStartHandle:$,connectionMode:z,isValidConnection:H,lib:U,rfId:P,nodeLookup:D,connection:B}=v.getState();if(!y||!$&&!i)return;if(!$){O==null||O(I.nativeEvent,{nodeId:y,handleId:x,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,id:x}});return}const G=qv(I.target),V=r||H,{connection:Y,isValid:Z}=yu.isValid(I.nativeEvent,{handle:{nodeId:y,id:x,type:e},connectionMode:z,fromNodeId:$.nodeId,fromHandleId:$.id||null,fromType:$.type,isValidConnection:V,flowId:P,doc:G,lib:U,nodeLookup:D});Z&&Y&&L(Y);const ee=structuredClone(B);delete ee.inProgress,ee.toPosition=ee.toHandle?ee.toHandle.position:null,q==null||q(I,ee),v.setState({connectionClickStartHandle:null})};return p.jsx("div",{"data-handleid":x,"data-nodeid":y,"data-handlepos":t,"data-id":`${b}-${y}-${x}-${e}`,className:ue(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,l,{source:!m,target:m,connectable:n,connectablestart:i,connectableend:a,clickconnecting:w,connectingfrom:N,connectingto:E,valid:M,connectionindicator:n&&(!k||A)&&(k||T?a:i)}]),onMouseDown:F,onTouchStart:F,onClick:_?C:void 0,ref:h,...f,children:u})}const St=j.memo(sy(IE));function jE({data:e,isConnectable:t,sourcePosition:r=J.Bottom}){return p.jsxs(p.Fragment,{children:[e==null?void 0:e.label,p.jsx(St,{type:"source",position:r,isConnectable:t})]})}function RE({data:e,isConnectable:t,targetPosition:r=J.Top,sourcePosition:n=J.Bottom}){return p.jsxs(p.Fragment,{children:[p.jsx(St,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,p.jsx(St,{type:"source",position:n,isConnectable:t})]})}function ME(){return null}function TE({data:e,isConnectable:t,targetPosition:r=J.Top}){return p.jsxs(p.Fragment,{children:[p.jsx(St,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label]})}const Vr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},id={input:jE,default:RE,output:TE,group:ME};function qE(e){var t,r,n,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((r=e.style)==null?void 0:r.height)}:{width:e.width??((n=e.style)==null?void 0:n.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const PE=e=>{const{width:t,height:r,x:n,y:i}=rr(e.nodeLookup,{filter:a=>!!a.selected});return{width:Ne(t)?t:null,height:Ne(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${n}px,${i}px)`}};function LE({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=ae(),{width:i,height:a,transformString:s,userSelectionActive:o}=re(PE,oe),u=uy(),l=j.useRef(null);if(j.useEffect(()=>{var f;r||(f=l.current)==null||f.focus({preventScroll:!0})},[r]),cy({nodeRef:l}),o||!i||!a)return null;const c=e?f=>{const h=n.getState().nodes.filter(x=>x.selected);e(f,h)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(Vr,f.key)&&(f.preventDefault(),u({direction:Vr[f.key],factor:f.shiftKey?4:1}))};return p.jsx("div",{className:ue(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:p.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:r?void 0:-1,onKeyDown:r?void 0:d,style:{width:i,height:a}})})}const ad=typeof window<"u"?window:void 0,DE=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function dy({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:o,deleteKeyCode:u,selectionKeyCode:l,selectionOnDrag:c,selectionMode:d,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:x,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:g,panOnScroll:b,panOnScrollSpeed:N,panOnScrollMode:E,zoomOnDoubleClick:w,panOnDrag:A,defaultViewport:k,translateExtent:T,minZoom:M,maxZoom:L,preventScrolling:F,onSelectionContextMenu:C,noWheelClassName:R,noPanClassName:S,disableKeyboardA11y:I,onViewportChange:O,isControlledViewport:q}){const{nodesSelectionActive:$,userSelectionActive:z}=re(DE),H=Zt(l,{target:ad}),U=Zt(m,{target:ad}),P=U||A,D=U||b,B=c&&P!==!0,G=H||z||B;return vE({deleteKeyCode:u,multiSelectionKeyCode:x}),p.jsx(bE,{onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:g,panOnScroll:D,panOnScrollSpeed:N,panOnScrollMode:E,zoomOnDoubleClick:w,panOnDrag:!H&&P,defaultViewport:k,translateExtent:T,minZoom:M,maxZoom:L,zoomActivationKeyCode:v,preventScrolling:F,noWheelClassName:R,noPanClassName:S,onViewportChange:O,isControlledViewport:q,paneClickDistance:o,children:p.jsxs(EE,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:P,isSelecting:!!G,selectionMode:d,selectionKeyPressed:H,selectionOnDrag:B,children:[e,$&&p.jsx(LE,{onSelectionContextMenu:C,noPanClassName:S,disableKeyboardA11y:I})]})})}dy.displayName="FlowRenderer";const OE=j.memo(dy),FE=e=>t=>e?ju(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(r=>r.id):Array.from(t.nodeLookup.keys());function $E(e){return re(j.useCallback(FE(e),[e]),oe)}const BE=e=>e.updateNodeInternals;function zE(){const e=re(BE),[t]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const n=new Map;r.forEach(i=>{const a=i.target.getAttribute("data-id");n.set(a,{id:a,nodeElement:i.target,force:!0})}),e(n)}));return j.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function HE({node:e,nodeType:t,hasDimensions:r,resizeObserver:n}){const i=ae(),a=j.useRef(null),s=j.useRef(null),o=j.useRef(e.sourcePosition),u=j.useRef(e.targetPosition),l=j.useRef(t),c=r&&!!e.internals.handleBounds;return j.useEffect(()=>{a.current&&!e.hidden&&(!c||s.current!==a.current)&&(s.current&&(n==null||n.unobserve(s.current)),n==null||n.observe(a.current),s.current=a.current)},[c,e.hidden]),j.useEffect(()=>()=>{s.current&&(n==null||n.unobserve(s.current),s.current=null)},[]),j.useEffect(()=>{if(a.current){const d=l.current!==t,f=o.current!==e.sourcePosition,h=u.current!==e.targetPosition;(d||f||h)&&(l.current=t,o.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function GE({id:e,onClick:t,onMouseEnter:r,onMouseMove:n,onMouseLeave:i,onContextMenu:a,onDoubleClick:s,nodesDraggable:o,elementsSelectable:u,nodesConnectable:l,nodesFocusable:c,resizeObserver:d,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:x,rfId:m,nodeTypes:v,nodeClickDistance:y,onError:_}){const{node:g,internals:b,isParent:N}=re(V=>{const Y=V.nodeLookup.get(e),Z=V.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:Z}},oe);let E=g.type||"default",w=(v==null?void 0:v[E])||id[E];w===void 0&&(_==null||_("003",Me.error003(E)),E="default",w=(v==null?void 0:v.default)||id.default);const A=!!(g.draggable||o&&typeof g.draggable>"u"),k=!!(g.selectable||u&&typeof g.selectable>"u"),T=!!(g.connectable||l&&typeof g.connectable>"u"),M=!!(g.focusable||c&&typeof g.focusable>"u"),L=ae(),F=Mv(g),C=HE({node:g,nodeType:E,hasDimensions:F,resizeObserver:d}),R=cy({nodeRef:C,disabled:g.hidden||!A,noDragClassName:f,handleSelector:g.dragHandle,nodeId:e,isSelectable:k,nodeClickDistance:y}),S=uy();if(g.hidden)return null;const I=Ge(g),O=qE(g),q=k||A||t||r||n||i,$=r?V=>r(V,{...b.userNode}):void 0,z=n?V=>n(V,{...b.userNode}):void 0,H=i?V=>i(V,{...b.userNode}):void 0,U=a?V=>a(V,{...b.userNode}):void 0,P=s?V=>s(V,{...b.userNode}):void 0,D=V=>{const{selectNodesOnDrag:Y,nodeDragThreshold:Z}=L.getState();k&&(!Y||!A||Z>0)&&xu({id:e,store:L,nodeRef:C}),t&&t(V,{...b.userNode})},B=V=>{if(!(Pv(V.nativeEvent)||x)){if(Nv.includes(V.key)&&k){const Y=V.key==="Escape";xu({id:e,store:L,unselect:Y,nodeRef:C})}else if(A&&g.selected&&Object.prototype.hasOwnProperty.call(Vr,V.key)){V.preventDefault();const{ariaLabelConfig:Y}=L.getState();L.setState({ariaLiveMessage:Y["node.a11yDescription.ariaLiveMessage"]({direction:V.key.replace("Arrow","").toLowerCase(),x:~~b.positionAbsolute.x,y:~~b.positionAbsolute.y})}),S({direction:Vr[V.key],factor:V.shiftKey?4:1})}}},G=()=>{var W;if(x||!((W=C.current)!=null&&W.matches(":focus-visible")))return;const{transform:V,width:Y,height:Z,autoPanOnNodeFocus:ee,setCenter:Q}=L.getState();if(!ee)return;ju(new Map([[e,g]]),{x:0,y:0,width:Y,height:Z},V,!0).length>0||Q(g.position.x+I.width/2,g.position.y+I.height/2,{zoom:V[2]})};return p.jsx("div",{className:ue(["react-flow__node",`react-flow__node-${E}`,{[h]:A},g.className,{selected:g.selected,selectable:k,parent:N,draggable:A,dragging:R}]),ref:C,style:{zIndex:b.z,transform:`translate(${b.positionAbsolute.x}px,${b.positionAbsolute.y}px)`,pointerEvents:q?"all":"none",visibility:F?"visible":"hidden",...g.style,...O},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:$,onMouseMove:z,onMouseLeave:H,onContextMenu:U,onClick:D,onDoubleClick:P,onKeyDown:M?B:void 0,tabIndex:M?0:void 0,onFocus:M?G:void 0,role:g.ariaRole??(M?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${ey}-${m}`,"aria-label":g.ariaLabel,...g.domAttributes,children:p.jsx(CE,{value:e,children:p.jsx(w,{id:e,data:g.data,type:E,positionAbsoluteX:b.positionAbsolute.x,positionAbsoluteY:b.positionAbsolute.y,selected:g.selected??!1,selectable:k,draggable:A,deletable:g.deletable??!0,isConnectable:T,sourcePosition:g.sourcePosition,targetPosition:g.targetPosition,dragging:R,dragHandle:g.dragHandle,zIndex:b.z,parentId:g.parentId,...I})})})}const VE=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function fy(e){const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:i,onError:a}=re(VE,oe),s=$E(e.onlyRenderVisibleElements),o=zE();return p.jsx("div",{className:"react-flow__nodes",style:un,children:s.map(u=>p.jsx(GE,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:o,nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},u))})}fy.displayName="NodeRenderer";const UE=j.memo(fy);function YE(e){return re(j.useCallback(r=>{if(!e)return r.edges.map(i=>i.id);const n=[];if(r.width&&r.height)for(const i of r.edges){const a=r.nodeLookup.get(i.source),s=r.nodeLookup.get(i.target);a&&s&&eN({sourceNode:a,targetNode:s,width:r.width,height:r.height,transform:r.transform})&&n.push(i.id)}return n},[e]),oe)}const WE=({color:e="none",strokeWidth:t=1})=>p.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),XE=({color:e="none",strokeWidth:t=1})=>p.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),sd={[Br.Arrow]:WE,[Br.ArrowClosed]:XE};function KE(e){const t=ae();return j.useMemo(()=>{var i,a;return Object.prototype.hasOwnProperty.call(sd,e)?sd[e]:((a=(i=t.getState()).onError)==null||a.call(i,"009",Me.error009(e)),null)},[e])}const ZE=({id:e,type:t,color:r,width:n=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:o="auto-start-reverse"})=>{const u=KE(t);return u?p.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0",children:p.jsx(u,{color:r,strokeWidth:s})}):null},hy=({defaultColor:e,rfId:t})=>{const r=re(a=>a.edges),n=re(a=>a.defaultEdgeOptions),i=j.useMemo(()=>oN(r,{id:t,defaultColor:e,defaultMarkerStart:n==null?void 0:n.markerStart,defaultMarkerEnd:n==null?void 0:n.markerEnd}),[r,n,t,e]);return i.length?p.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:p.jsx("defs",{children:i.map(a=>p.jsx(ZE,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};hy.displayName="MarkerDefinitions";var JE=j.memo(hy);function py({x:e,y:t,label:r,labelStyle:n,labelShowBg:i=!0,labelBgStyle:a,labelBgPadding:s=[2,4],labelBgBorderRadius:o=2,children:u,className:l,...c}){const[d,f]=j.useState({x:1,y:0,width:0,height:0}),h=ue(["react-flow__edge-textwrapper",l]),x=j.useRef(null);return j.useEffect(()=>{if(x.current){const m=x.current.getBBox();f({x:m.x,y:m.y,width:m.width,height:m.height})}},[r]),r?p.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...c,children:[i&&p.jsx("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),p.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:x,style:n,children:r}),u]}):null}py.displayName="EdgeText";const QE=j.memo(py);function ln({path:e,labelX:t,labelY:r,label:n,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:o,labelBgBorderRadius:u,interactionWidth:l=20,...c}){return p.jsxs(p.Fragment,{children:[p.jsx("path",{...c,d:e,fill:"none",className:ue(["react-flow__edge-path",c.className])}),l&&p.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:l,className:"react-flow__edge-interaction"}),n&&Ne(t)&&Ne(r)?p.jsx(QE,{x:t,y:r,label:n,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:o,labelBgBorderRadius:u}):null]})}function od({pos:e,x1:t,y1:r,x2:n,y2:i}){return e===J.Left||e===J.Right?[.5*(t+n),r]:[t,.5*(r+i)]}function gy({sourceX:e,sourceY:t,sourcePosition:r=J.Bottom,targetX:n,targetY:i,targetPosition:a=J.Top}){const[s,o]=od({pos:r,x1:e,y1:t,x2:n,y2:i}),[u,l]=od({pos:a,x1:n,y1:i,x2:e,y2:t}),[c,d,f,h]=Dv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:u,targetControlY:l});return[`M${e},${t} C${s},${o} ${u},${l} ${n},${i}`,c,d,f,h]}function my(e){return j.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:a,sourcePosition:s,targetPosition:o,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:x,markerEnd:m,markerStart:v,interactionWidth:y})=>{const[_,g,b]=gy({sourceX:r,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:o}),N=e.isInternal?void 0:t;return p.jsx(ln,{id:N,path:_,labelX:g,labelY:b,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:x,markerEnd:m,markerStart:v,interactionWidth:y})})}const eS=my({isInternal:!1}),vy=my({isInternal:!0});eS.displayName="SimpleBezierEdge";vy.displayName="SimpleBezierEdgeInternal";function yy(e){return j.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:f,sourcePosition:h=J.Bottom,targetPosition:x=J.Top,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:_})=>{const[g,b,N]=gu({sourceX:r,sourceY:n,sourcePosition:h,targetX:i,targetY:a,targetPosition:x,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset,stepPosition:y==null?void 0:y.stepPosition}),E=e.isInternal?void 0:t;return p.jsx(ln,{id:E,path:g,labelX:b,labelY:N,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:v,interactionWidth:_})})}const xy=yy({isInternal:!1}),by=yy({isInternal:!0});xy.displayName="SmoothStepEdge";by.displayName="SmoothStepEdgeInternal";function _y(e){return j.memo(({id:t,...r})=>{var i;const n=e.isInternal?void 0:t;return p.jsx(xy,{...r,id:n,pathOptions:j.useMemo(()=>{var a;return{borderRadius:0,offset:(a=r.pathOptions)==null?void 0:a.offset}},[(i=r.pathOptions)==null?void 0:i.offset])})})}const tS=_y({isInternal:!1}),wy=_y({isInternal:!0});tS.displayName="StepEdge";wy.displayName="StepEdgeInternal";function Ny(e){return j.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:m})=>{const[v,y,_]=Bv({sourceX:r,sourceY:n,targetX:i,targetY:a}),g=e.isInternal?void 0:t;return p.jsx(ln,{id:g,path:v,labelX:y,labelY:_,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:m})})}const rS=Ny({isInternal:!1}),Ey=Ny({isInternal:!0});rS.displayName="StraightEdge";Ey.displayName="StraightEdgeInternal";function Sy(e){return j.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:a,sourcePosition:s=J.Bottom,targetPosition:o=J.Top,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:x,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:_})=>{const[g,b,N]=Ov({sourceX:r,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:o,curvature:y==null?void 0:y.curvature}),E=e.isInternal?void 0:t;return p.jsx(ln,{id:E,path:g,labelX:b,labelY:N,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:x,markerEnd:m,markerStart:v,interactionWidth:_})})}const nS=Sy({isInternal:!1}),Cy=Sy({isInternal:!0});nS.displayName="BezierEdge";Cy.displayName="BezierEdgeInternal";const cd={default:Cy,straight:Ey,step:wy,smoothstep:by,simplebezier:vy},ud={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},iS=(e,t,r)=>r===J.Left?e-t:r===J.Right?e+t:e,aS=(e,t,r)=>r===J.Top?e-t:r===J.Bottom?e+t:e,ld="react-flow__edgeupdater";function dd({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:o}){return p.jsx("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:ue([ld,`${ld}-${o}`]),cx:iS(t,n,e),cy:aS(r,n,e),r:n,stroke:"transparent",fill:"transparent"})}function sS({isReconnectable:e,reconnectRadius:t,edge:r,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:o,targetPosition:u,onReconnect:l,onReconnectStart:c,onReconnectEnd:d,setReconnecting:f,setUpdateHover:h}){const x=ae(),m=(b,N)=>{if(b.button!==0)return;const{autoPanOnConnect:E,domNode:w,isValidConnection:A,connectionMode:k,connectionRadius:T,lib:M,onConnectStart:L,onConnectEnd:F,cancelConnection:C,nodeLookup:R,rfId:S,panBy:I,updateConnection:O}=x.getState(),q=N.type==="target",$=(U,P)=>{f(!1),d==null||d(U,r,N.type,P)},z=U=>l==null?void 0:l(r,U),H=(U,P)=>{f(!0),c==null||c(b,r,N.type),L==null||L(U,P)};yu.onPointerDown(b.nativeEvent,{autoPanOnConnect:E,connectionMode:k,connectionRadius:T,domNode:w,handleId:N.id,nodeId:N.nodeId,nodeLookup:R,isTarget:q,edgeUpdaterType:N.type,lib:M,flowId:S,cancelConnection:C,panBy:I,isValidConnection:A,onConnect:z,onConnectStart:H,onConnectEnd:F,onReconnectEnd:$,updateConnection:O,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold})},v=b=>m(b,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),y=b=>m(b,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),_=()=>h(!0),g=()=>h(!1);return p.jsxs(p.Fragment,{children:[(e===!0||e==="source")&&p.jsx(dd,{position:o,centerX:n,centerY:i,radius:t,onMouseDown:v,onMouseEnter:_,onMouseOut:g,type:"source"}),(e===!0||e==="target")&&p.jsx(dd,{position:u,centerX:a,centerY:s,radius:t,onMouseDown:y,onMouseEnter:_,onMouseOut:g,type:"target"})]})}function oS({id:e,edgesFocusable:t,edgesReconnectable:r,elementsSelectable:n,onClick:i,onDoubleClick:a,onContextMenu:s,onMouseEnter:o,onMouseMove:u,onMouseLeave:l,reconnectRadius:c,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,rfId:x,edgeTypes:m,noPanClassName:v,onError:y,disableKeyboardA11y:_}){let g=re(Q=>Q.edgeLookup.get(e));const b=re(Q=>Q.defaultEdgeOptions);g=b?{...b,...g}:g;let N=g.type||"default",E=(m==null?void 0:m[N])||cd[N];E===void 0&&(y==null||y("011",Me.error011(N)),N="default",E=(m==null?void 0:m.default)||cd.default);const w=!!(g.focusable||t&&typeof g.focusable>"u"),A=typeof d<"u"&&(g.reconnectable||r&&typeof g.reconnectable>"u"),k=!!(g.selectable||n&&typeof g.selectable>"u"),T=j.useRef(null),[M,L]=j.useState(!1),[F,C]=j.useState(!1),R=ae(),{zIndex:S,sourceX:I,sourceY:O,targetX:q,targetY:$,sourcePosition:z,targetPosition:H}=re(j.useCallback(Q=>{const K=Q.nodeLookup.get(g.source),W=Q.nodeLookup.get(g.target);if(!K||!W)return{zIndex:g.zIndex,...ud};const X=sN({id:e,sourceNode:K,targetNode:W,sourceHandle:g.sourceHandle||null,targetHandle:g.targetHandle||null,connectionMode:Q.connectionMode,onError:y});return{zIndex:Qw({selected:g.selected,zIndex:g.zIndex,sourceNode:K,targetNode:W,elevateOnSelect:Q.elevateEdgesOnSelect}),...X||ud}},[g.source,g.target,g.sourceHandle,g.targetHandle,g.selected,g.zIndex]),oe),U=j.useMemo(()=>g.markerStart?`url('#${mu(g.markerStart,x)}')`:void 0,[g.markerStart,x]),P=j.useMemo(()=>g.markerEnd?`url('#${mu(g.markerEnd,x)}')`:void 0,[g.markerEnd,x]);if(g.hidden||I===null||O===null||q===null||$===null)return null;const D=Q=>{var ne;const{addSelectedEdges:K,unselectNodesAndEdges:W,multiSelectionActive:X}=R.getState();k&&(R.setState({nodesSelectionActive:!1}),g.selected&&X?(W({nodes:[],edges:[g]}),(ne=T.current)==null||ne.blur()):K([e])),i&&i(Q,g)},B=a?Q=>{a(Q,{...g})}:void 0,G=s?Q=>{s(Q,{...g})}:void 0,V=o?Q=>{o(Q,{...g})}:void 0,Y=u?Q=>{u(Q,{...g})}:void 0,Z=l?Q=>{l(Q,{...g})}:void 0,ee=Q=>{var K;if(!_&&Nv.includes(Q.key)&&k){const{unselectNodesAndEdges:W,addSelectedEdges:X}=R.getState();Q.key==="Escape"?((K=T.current)==null||K.blur(),W({edges:[g]})):X([e])}};return p.jsx("svg",{style:{zIndex:S},children:p.jsxs("g",{className:ue(["react-flow__edge",`react-flow__edge-${N}`,g.className,v,{selected:g.selected,animated:g.animated,inactive:!k&&!i,updating:M,selectable:k}]),onClick:D,onDoubleClick:B,onContextMenu:G,onMouseEnter:V,onMouseMove:Y,onMouseLeave:Z,onKeyDown:w?ee:void 0,tabIndex:w?0:void 0,role:g.ariaRole??(w?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":g.ariaLabel===null?void 0:g.ariaLabel||`Edge from ${g.source} to ${g.target}`,"aria-describedby":w?`${ty}-${x}`:void 0,ref:T,...g.domAttributes,children:[!F&&p.jsx(E,{id:e,source:g.source,target:g.target,type:g.type,selected:g.selected,animated:g.animated,selectable:k,deletable:g.deletable??!0,label:g.label,labelStyle:g.labelStyle,labelShowBg:g.labelShowBg,labelBgStyle:g.labelBgStyle,labelBgPadding:g.labelBgPadding,labelBgBorderRadius:g.labelBgBorderRadius,sourceX:I,sourceY:O,targetX:q,targetY:$,sourcePosition:z,targetPosition:H,data:g.data,style:g.style,sourceHandleId:g.sourceHandle,targetHandleId:g.targetHandle,markerStart:U,markerEnd:P,pathOptions:"pathOptions"in g?g.pathOptions:void 0,interactionWidth:g.interactionWidth}),A&&p.jsx(sS,{edge:g,isReconnectable:A,reconnectRadius:c,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,sourceX:I,sourceY:O,targetX:q,targetY:$,sourcePosition:z,targetPosition:H,setUpdateHover:L,setReconnecting:C})]})})}const cS=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Ay({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:r,edgeTypes:n,noPanClassName:i,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:o,onEdgeMouseMove:u,onEdgeMouseLeave:l,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:x,disableKeyboardA11y:m}){const{edgesFocusable:v,edgesReconnectable:y,elementsSelectable:_,onError:g}=re(cS,oe),b=YE(t);return p.jsxs("div",{className:"react-flow__edges",children:[p.jsx(JE,{defaultColor:e,rfId:r}),b.map(N=>p.jsx(oS,{id:N,edgesFocusable:v,edgesReconnectable:y,elementsSelectable:_,noPanClassName:i,onReconnect:a,onContextMenu:s,onMouseEnter:o,onMouseMove:u,onMouseLeave:l,onClick:c,reconnectRadius:d,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:x,rfId:r,onError:g,edgeTypes:n,disableKeyboardA11y:m},N))]})}Ay.displayName="EdgeRenderer";const uS=j.memo(Ay),lS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function dS({children:e}){const t=re(lS);return p.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function fS(e){const t=cn(),r=j.useRef(!1);j.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const hS=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function pS(e){const t=re(hS),r=ae();return j.useEffect(()=>{e&&(t==null||t(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function gS(e){return e.connection.inProgress?{...e.connection,to:nr(e.connection.to,e.transform)}:{...e.connection}}function mS(e){return gS}function vS(e){const t=mS();return re(t,oe)}const yS=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function xS({containerStyle:e,style:t,type:r,component:n}){const{nodesConnectable:i,width:a,height:s,isValid:o,inProgress:u}=re(yS,oe);return!(a&&i&&u)?null:p.jsx("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:p.jsx("g",{className:ue(["react-flow__connection",Cv(o)]),children:p.jsx(ky,{style:t,type:r,CustomComponent:n,isValid:o})})})}const ky=({style:e,type:t=Je.Bezier,CustomComponent:r,isValid:n})=>{const{inProgress:i,from:a,fromNode:s,fromHandle:o,fromPosition:u,to:l,toNode:c,toHandle:d,toPosition:f}=vS();if(!i)return;if(r)return p.jsx(r,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:o,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:u,toPosition:f,connectionStatus:Cv(n),toNode:c,toHandle:d});let h="";const x={sourceX:a.x,sourceY:a.y,sourcePosition:u,targetX:l.x,targetY:l.y,targetPosition:f};switch(t){case Je.Bezier:[h]=Ov(x);break;case Je.SimpleBezier:[h]=gy(x);break;case Je.Step:[h]=gu({...x,borderRadius:0});break;case Je.SmoothStep:[h]=gu(x);break;default:[h]=Bv(x)}return p.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};ky.displayName="ConnectionLine";const bS={};function fd(e=bS){j.useRef(e),ae(),j.useEffect(()=>{},[e])}function _S(){ae(),j.useRef(!1),j.useEffect(()=>{},[])}function Iy({nodeTypes:e,edgeTypes:t,onInit:r,onNodeClick:n,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:o,onNodeMouseMove:u,onNodeMouseLeave:l,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:h,connectionLineType:x,connectionLineStyle:m,connectionLineComponent:v,connectionLineContainerStyle:y,selectionKeyCode:_,selectionOnDrag:g,selectionMode:b,multiSelectionKeyCode:N,panActivationKeyCode:E,zoomActivationKeyCode:w,deleteKeyCode:A,onlyRenderVisibleElements:k,elementsSelectable:T,defaultViewport:M,translateExtent:L,minZoom:F,maxZoom:C,preventScrolling:R,defaultMarkerColor:S,zoomOnScroll:I,zoomOnPinch:O,panOnScroll:q,panOnScrollSpeed:$,panOnScrollMode:z,zoomOnDoubleClick:H,panOnDrag:U,onPaneClick:P,onPaneMouseEnter:D,onPaneMouseMove:B,onPaneMouseLeave:G,onPaneScroll:V,onPaneContextMenu:Y,paneClickDistance:Z,nodeClickDistance:ee,onEdgeContextMenu:Q,onEdgeMouseEnter:K,onEdgeMouseMove:W,onEdgeMouseLeave:X,reconnectRadius:ne,onReconnect:te,onReconnectStart:pe,onReconnectEnd:xe,noDragClassName:ft,noWheelClassName:Pe,noPanClassName:de,disableKeyboardA11y:ce,nodeExtent:Ye,rfId:Le,viewport:We,onViewportChange:Xe}){return fd(e),fd(t),_S(),fS(r),pS(We),p.jsx(OE,{onPaneClick:P,onPaneMouseEnter:D,onPaneMouseMove:B,onPaneMouseLeave:G,onPaneContextMenu:Y,onPaneScroll:V,paneClickDistance:Z,deleteKeyCode:A,selectionKeyCode:_,selectionOnDrag:g,selectionMode:b,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:N,panActivationKeyCode:E,zoomActivationKeyCode:w,elementsSelectable:T,zoomOnScroll:I,zoomOnPinch:O,zoomOnDoubleClick:H,panOnScroll:q,panOnScrollSpeed:$,panOnScrollMode:z,panOnDrag:U,defaultViewport:M,translateExtent:L,minZoom:F,maxZoom:C,onSelectionContextMenu:d,preventScrolling:R,noDragClassName:ft,noWheelClassName:Pe,noPanClassName:de,disableKeyboardA11y:ce,onViewportChange:Xe,isControlledViewport:!!We,children:p.jsxs(dS,{children:[p.jsx(uS,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:te,onReconnectStart:pe,onReconnectEnd:xe,onlyRenderVisibleElements:k,onEdgeContextMenu:Q,onEdgeMouseEnter:K,onEdgeMouseMove:W,onEdgeMouseLeave:X,reconnectRadius:ne,defaultMarkerColor:S,noPanClassName:de,disableKeyboardA11y:ce,rfId:Le}),p.jsx(xS,{style:m,type:x,component:v,containerStyle:y}),p.jsx("div",{className:"react-flow__edgelabel-renderer"}),p.jsx(UE,{nodeTypes:e,onNodeClick:n,onNodeDoubleClick:a,onNodeMouseEnter:o,onNodeMouseMove:u,onNodeMouseLeave:l,onNodeContextMenu:c,nodeClickDistance:ee,onlyRenderVisibleElements:k,noPanClassName:de,noDragClassName:ft,disableKeyboardA11y:ce,nodeExtent:Ye,rfId:Le}),p.jsx("div",{className:"react-flow__viewport-portal"})]})})}Iy.displayName="GraphView";const wS=j.memo(Iy),hd=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:u=.5,maxZoom:l=2,nodeOrigin:c,nodeExtent:d}={})=>{const f=new Map,h=new Map,x=new Map,m=new Map,v=n??t??[],y=r??e??[],_=c??[0,0],g=d??Yt;Hv(x,m,v);const b=vu(y,f,h,{nodeOrigin:_,nodeExtent:g,elevateNodesOnSelect:!1});let N=[0,0,1];if(s&&i&&a){const E=rr(f,{filter:T=>!!((T.width||T.initialWidth)&&(T.height||T.initialHeight))}),{x:w,y:A,zoom:k}=Ru(E,i,a,u,l,(o==null?void 0:o.padding)??.1);N=[w,A,k]}return{rfId:"1",width:0,height:0,transform:N,nodes:y,nodesInitialized:b,nodeLookup:f,parentLookup:h,edges:v,edgeLookup:m,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:n!==void 0,panZoom:null,minZoom:u,maxZoom:l,translateExtent:Yt,nodeExtent:g,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:st.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:_,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:o,fitViewResolver:null,connection:{...Sv},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Yw,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Ev}},NS=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:u,maxZoom:l,nodeOrigin:c,nodeExtent:d})=>HN((f,h)=>{async function x(){const{nodeLookup:m,panZoom:v,fitViewOptions:y,fitViewResolver:_,width:g,height:b,minZoom:N,maxZoom:E}=h();v&&(await Vw({nodes:m,width:g,height:b,panZoom:v,minZoom:N,maxZoom:E},y),_==null||_.resolve(!0),f({fitViewResolver:null}))}return{...hd({nodes:e,edges:t,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:u,maxZoom:l,nodeOrigin:c,nodeExtent:d,defaultNodes:r,defaultEdges:n}),setNodes:m=>{const{nodeLookup:v,parentLookup:y,nodeOrigin:_,elevateNodesOnSelect:g,fitViewQueued:b}=h(),N=vu(m,v,y,{nodeOrigin:_,nodeExtent:d,elevateNodesOnSelect:g,checkEquality:!0});b&&N?(x(),f({nodes:m,nodesInitialized:N,fitViewQueued:!1,fitViewOptions:void 0})):f({nodes:m,nodesInitialized:N})},setEdges:m=>{const{connectionLookup:v,edgeLookup:y}=h();Hv(v,y,m),f({edges:m})},setDefaultNodesAndEdges:(m,v)=>{if(m){const{setNodes:y}=h();y(m),f({hasDefaultNodes:!0})}if(v){const{setEdges:y}=h();y(v),f({hasDefaultEdges:!0})}},updateNodeInternals:m=>{const{triggerNodeChanges:v,nodeLookup:y,parentLookup:_,domNode:g,nodeOrigin:b,nodeExtent:N,debug:E,fitViewQueued:w}=h(),{changes:A,updatedInternals:k}=fN(m,y,_,g,b,N);k&&(uN(y,_,{nodeOrigin:b,nodeExtent:N}),w?(x(),f({fitViewQueued:!1,fitViewOptions:void 0})):f({}),(A==null?void 0:A.length)>0&&(E&&console.log("React Flow: trigger node changes",A),v==null||v(A)))},updateNodePositions:(m,v=!1)=>{const y=[],_=[],{nodeLookup:g,triggerNodeChanges:b}=h();for(const[N,E]of m){const w=g.get(N),A=!!(w!=null&&w.expandParent&&(w!=null&&w.parentId)&&(E!=null&&E.position)),k={id:N,type:"position",position:A?{x:Math.max(0,E.position.x),y:Math.max(0,E.position.y)}:E.position,dragging:v};A&&w.parentId&&y.push({id:N,parentId:w.parentId,rect:{...E.internals.positionAbsolute,width:E.measured.width??0,height:E.measured.height??0}}),_.push(k)}if(y.length>0){const{parentLookup:N,nodeOrigin:E}=h(),w=Lu(y,g,N,E);_.push(...w)}b(_)},triggerNodeChanges:m=>{const{onNodesChange:v,setNodes:y,nodes:_,hasDefaultNodes:g,debug:b}=h();if(m!=null&&m.length){if(g){const N=iy(m,_);y(N)}b&&console.log("React Flow: trigger node changes",m),v==null||v(m)}},triggerEdgeChanges:m=>{const{onEdgesChange:v,setEdges:y,edges:_,hasDefaultEdges:g,debug:b}=h();if(m!=null&&m.length){if(g){const N=ay(m,_);y(N)}b&&console.log("React Flow: trigger edge changes",m),v==null||v(m)}},addSelectedNodes:m=>{const{multiSelectionActive:v,edgeLookup:y,nodeLookup:_,triggerNodeChanges:g,triggerEdgeChanges:b}=h();if(v){const N=m.map(E=>et(E,!0));g(N);return}g(mt(_,new Set([...m]),!0)),b(mt(y))},addSelectedEdges:m=>{const{multiSelectionActive:v,edgeLookup:y,nodeLookup:_,triggerNodeChanges:g,triggerEdgeChanges:b}=h();if(v){const N=m.map(E=>et(E,!0));b(N);return}b(mt(y,new Set([...m]))),g(mt(_,new Set,!0))},unselectNodesAndEdges:({nodes:m,edges:v}={})=>{const{edges:y,nodes:_,nodeLookup:g,triggerNodeChanges:b,triggerEdgeChanges:N}=h(),E=m||_,w=v||y,A=E.map(T=>{const M=g.get(T.id);return M&&(M.selected=!1),et(T.id,!1)}),k=w.map(T=>et(T.id,!1));b(A),N(k)},setMinZoom:m=>{const{panZoom:v,maxZoom:y}=h();v==null||v.setScaleExtent([m,y]),f({minZoom:m})},setMaxZoom:m=>{const{panZoom:v,minZoom:y}=h();v==null||v.setScaleExtent([y,m]),f({maxZoom:m})},setTranslateExtent:m=>{var v;(v=h().panZoom)==null||v.setTranslateExtent(m),f({translateExtent:m})},setPaneClickDistance:m=>{var v;(v=h().panZoom)==null||v.setClickDistance(m)},resetSelectedElements:()=>{const{edges:m,nodes:v,triggerNodeChanges:y,triggerEdgeChanges:_,elementsSelectable:g}=h();if(!g)return;const b=v.reduce((E,w)=>w.selected?[...E,et(w.id,!1)]:E,[]),N=m.reduce((E,w)=>w.selected?[...E,et(w.id,!1)]:E,[]);y(b),_(N)},setNodeExtent:m=>{const{nodes:v,nodeLookup:y,parentLookup:_,nodeOrigin:g,elevateNodesOnSelect:b,nodeExtent:N}=h();m[0][0]===N[0][0]&&m[0][1]===N[0][1]&&m[1][0]===N[1][0]&&m[1][1]===N[1][1]||(vu(v,y,_,{nodeOrigin:g,nodeExtent:m,elevateNodesOnSelect:b,checkEquality:!1}),f({nodeExtent:m}))},panBy:m=>{const{transform:v,width:y,height:_,panZoom:g,translateExtent:b}=h();return hN({delta:m,panZoom:g,transform:v,translateExtent:b,width:y,height:_})},setCenter:async(m,v,y)=>{const{width:_,height:g,maxZoom:b,panZoom:N}=h();if(!N)return Promise.resolve(!1);const E=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:b;return await N.setViewport({x:_/2-m*E,y:g/2-v*E,zoom:E},{duration:y==null?void 0:y.duration,ease:y==null?void 0:y.ease,interpolate:y==null?void 0:y.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{f({connection:{...Sv}})},updateConnection:m=>{f({connection:m})},reset:()=>f({...hd()})}},Object.is);function jy({initialNodes:e,initialEdges:t,defaultNodes:r,defaultEdges:n,initialWidth:i,initialHeight:a,initialMinZoom:s,initialMaxZoom:o,initialFitViewOptions:u,fitView:l,nodeOrigin:c,nodeExtent:d,children:f}){const[h]=j.useState(()=>NS({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:a,fitView:l,minZoom:s,maxZoom:o,fitViewOptions:u,nodeOrigin:c,nodeExtent:d}));return p.jsx(GN,{value:h,children:p.jsx(hE,{children:f})})}function ES({children:e,nodes:t,edges:r,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:o,fitViewOptions:u,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:f}){return j.useContext(on)?p.jsx(p.Fragment,{children:e}):p.jsx(jy,{initialNodes:t,initialEdges:r,defaultNodes:n,defaultEdges:i,initialWidth:a,initialHeight:s,fitView:o,initialFitViewOptions:u,initialMinZoom:l,initialMaxZoom:c,nodeOrigin:d,nodeExtent:f,children:e})}const SS={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function CS({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:i,nodeTypes:a,edgeTypes:s,onNodeClick:o,onEdgeClick:u,onInit:l,onMove:c,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:x,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:_,onNodeMouseMove:g,onNodeMouseLeave:b,onNodeContextMenu:N,onNodeDoubleClick:E,onNodeDragStart:w,onNodeDrag:A,onNodeDragStop:k,onNodesDelete:T,onEdgesDelete:M,onDelete:L,onSelectionChange:F,onSelectionDragStart:C,onSelectionDrag:R,onSelectionDragStop:S,onSelectionContextMenu:I,onSelectionStart:O,onSelectionEnd:q,onBeforeDelete:$,connectionMode:z,connectionLineType:H=Je.Bezier,connectionLineStyle:U,connectionLineComponent:P,connectionLineContainerStyle:D,deleteKeyCode:B="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:V=!1,selectionMode:Y=Wt.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:ee=Gr()?"Meta":"Control",zoomActivationKeyCode:Q=Gr()?"Meta":"Control",snapToGrid:K,snapGrid:W,onlyRenderVisibleElements:X=!1,selectNodesOnDrag:ne,nodesDraggable:te,autoPanOnNodeFocus:pe,nodesConnectable:xe,nodesFocusable:ft,nodeOrigin:Pe=ry,edgesFocusable:de,edgesReconnectable:ce,elementsSelectable:Ye=!0,defaultViewport:Le=nE,minZoom:We=.5,maxZoom:Xe=2,translateExtent:De=Yt,preventScrolling:dr=!0,nodeExtent:ht,defaultMarkerColor:In="#b1b1b7",zoomOnScroll:fr=!0,zoomOnPinch:Ae=!0,panOnScroll:Oe=!1,panOnScrollSpeed:ax=.5,panOnScrollMode:sx=nt.Free,zoomOnDoubleClick:ox=!0,panOnDrag:cx=!0,onPaneClick:ux,onPaneMouseEnter:lx,onPaneMouseMove:dx,onPaneMouseLeave:fx,onPaneScroll:hx,onPaneContextMenu:px,paneClickDistance:al=0,nodeClickDistance:gx=0,children:mx,onReconnect:vx,onReconnectStart:yx,onReconnectEnd:xx,onEdgeContextMenu:bx,onEdgeDoubleClick:_x,onEdgeMouseEnter:wx,onEdgeMouseMove:Nx,onEdgeMouseLeave:Ex,reconnectRadius:Sx=10,onNodesChange:Cx,onEdgesChange:Ax,noDragClassName:kx="nodrag",noWheelClassName:Ix="nowheel",noPanClassName:sl="nopan",fitView:ol,fitViewOptions:cl,connectOnClick:jx,attributionPosition:Rx,proOptions:Mx,defaultEdgeOptions:Tx,elevateNodesOnSelect:qx,elevateEdgesOnSelect:Px,disableKeyboardA11y:ul=!1,autoPanOnConnect:Lx,autoPanOnNodeDrag:Dx,autoPanSpeed:Ox,connectionRadius:Fx,isValidConnection:$x,onError:Bx,style:zx,id:ll,nodeDragThreshold:Hx,connectionDragThreshold:Gx,viewport:Vx,onViewportChange:Ux,width:Yx,height:Wx,colorMode:Xx="light",debug:Kx,onScroll:hr,ariaLabelConfig:Zx,...Jx},Qx){const jn=ll||"1",eb=oE(Xx),tb=j.useCallback(dl=>{dl.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),hr==null||hr(dl)},[hr]);return p.jsx("div",{"data-testid":"rf__wrapper",...Jx,onScroll:tb,style:{...zx,...SS},ref:Qx,className:ue(["react-flow",i,eb]),id:ll,role:"application",children:p.jsxs(ES,{nodes:e,edges:t,width:Yx,height:Wx,fitView:ol,fitViewOptions:cl,minZoom:We,maxZoom:Xe,nodeOrigin:Pe,nodeExtent:ht,children:[p.jsx(wS,{onInit:l,onNodeClick:o,onEdgeClick:u,onNodeMouseEnter:_,onNodeMouseMove:g,onNodeMouseLeave:b,onNodeContextMenu:N,onNodeDoubleClick:E,nodeTypes:a,edgeTypes:s,connectionLineType:H,connectionLineStyle:U,connectionLineComponent:P,connectionLineContainerStyle:D,selectionKeyCode:G,selectionOnDrag:V,selectionMode:Y,deleteKeyCode:B,multiSelectionKeyCode:ee,panActivationKeyCode:Z,zoomActivationKeyCode:Q,onlyRenderVisibleElements:X,defaultViewport:Le,translateExtent:De,minZoom:We,maxZoom:Xe,preventScrolling:dr,zoomOnScroll:fr,zoomOnPinch:Ae,zoomOnDoubleClick:ox,panOnScroll:Oe,panOnScrollSpeed:ax,panOnScrollMode:sx,panOnDrag:cx,onPaneClick:ux,onPaneMouseEnter:lx,onPaneMouseMove:dx,onPaneMouseLeave:fx,onPaneScroll:hx,onPaneContextMenu:px,paneClickDistance:al,nodeClickDistance:gx,onSelectionContextMenu:I,onSelectionStart:O,onSelectionEnd:q,onReconnect:vx,onReconnectStart:yx,onReconnectEnd:xx,onEdgeContextMenu:bx,onEdgeDoubleClick:_x,onEdgeMouseEnter:wx,onEdgeMouseMove:Nx,onEdgeMouseLeave:Ex,reconnectRadius:Sx,defaultMarkerColor:In,noDragClassName:kx,noWheelClassName:Ix,noPanClassName:sl,rfId:jn,disableKeyboardA11y:ul,nodeExtent:ht,viewport:Vx,onViewportChange:Ux}),p.jsx(sE,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:h,onConnectStart:x,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:te,autoPanOnNodeFocus:pe,nodesConnectable:xe,nodesFocusable:ft,edgesFocusable:de,edgesReconnectable:ce,elementsSelectable:Ye,elevateNodesOnSelect:qx,elevateEdgesOnSelect:Px,minZoom:We,maxZoom:Xe,nodeExtent:ht,onNodesChange:Cx,onEdgesChange:Ax,snapToGrid:K,snapGrid:W,connectionMode:z,translateExtent:De,connectOnClick:jx,defaultEdgeOptions:Tx,fitView:ol,fitViewOptions:cl,onNodesDelete:T,onEdgesDelete:M,onDelete:L,onNodeDragStart:w,onNodeDrag:A,onNodeDragStop:k,onSelectionDrag:R,onSelectionDragStart:C,onSelectionDragStop:S,onMove:c,onMoveStart:d,onMoveEnd:f,noPanClassName:sl,nodeOrigin:Pe,rfId:jn,autoPanOnConnect:Lx,autoPanOnNodeDrag:Dx,autoPanSpeed:Ox,onError:Bx,connectionRadius:Fx,isValidConnection:$x,selectNodesOnDrag:ne,nodeDragThreshold:Hx,connectionDragThreshold:Gx,onBeforeDelete:$,paneClickDistance:al,debug:Kx,ariaLabelConfig:Zx}),p.jsx(rE,{onSelectionChange:F}),mx,p.jsx(ZN,{proOptions:Mx,position:Rx}),p.jsx(KN,{rfId:jn,disableKeyboardA11y:ul})]})})}var AS=sy(CS);function kS(e){const[t,r]=j.useState(e),n=j.useCallback(i=>r(a=>iy(i,a)),[]);return[t,r,n]}function IS(e){const[t,r]=j.useState(e),n=j.useCallback(i=>r(a=>ay(i,a)),[]);return[t,r,n]}function jS({dimensions:e,lineWidth:t,variant:r,className:n}){return p.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ue(["react-flow__background-pattern",r,n])})}function RS({radius:e,className:t}){return p.jsx("circle",{cx:e,cy:e,r:e,className:ue(["react-flow__background-pattern","dots",t])})}var Be;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Be||(Be={}));const MS={[Be.Dots]:1,[Be.Lines]:1,[Be.Cross]:6},TS=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ry({id:e,variant:t=Be.Dots,gap:r=20,size:n,lineWidth:i=1,offset:a=0,color:s,bgColor:o,style:u,className:l,patternClassName:c}){const d=j.useRef(null),{transform:f,patternId:h}=re(TS,oe),x=n||MS[t],m=t===Be.Dots,v=t===Be.Cross,y=Array.isArray(r)?r:[r,r],_=[y[0]*f[2]||1,y[1]*f[2]||1],g=x*f[2],b=Array.isArray(a)?a:[a,a],N=v?[g,g]:_,E=[b[0]*f[2]||1+N[0]/2,b[1]*f[2]||1+N[1]/2],w=`${h}${e||""}`;return p.jsxs("svg",{className:ue(["react-flow__background",l]),style:{...u,...un,"--xy-background-color-props":o,"--xy-background-pattern-color-props":s},ref:d,"data-testid":"rf__background",children:[p.jsx("pattern",{id:w,x:f[0]%_[0],y:f[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:m?p.jsx(RS,{radius:g/2,className:c}):p.jsx(jS,{dimensions:N,lineWidth:i,variant:t,className:c})}),p.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${w})`})]})}Ry.displayName="Background";const qS=j.memo(Ry);function PS(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:p.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function LS(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:p.jsx("path",{d:"M0 0h32v4.2H0z"})})}function DS(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:p.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function OS(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:p.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function FS(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:p.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Nr({children:e,className:t,...r}){return p.jsx("button",{type:"button",className:ue(["react-flow__controls-button",t]),...r,children:e})}const $S=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function My({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:o,onInteractiveChange:u,className:l,children:c,position:d="bottom-left",orientation:f="vertical","aria-label":h}){const x=ae(),{isInteractive:m,minZoomReached:v,maxZoomReached:y,ariaLabelConfig:_}=re($S,oe),{zoomIn:g,zoomOut:b,fitView:N}=cn(),E=()=>{g(),a==null||a()},w=()=>{b(),s==null||s()},A=()=>{N(i),o==null||o()},k=()=>{x.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),u==null||u(!m)},T=f==="horizontal"?"horizontal":"vertical";return p.jsxs(ir,{className:ue(["react-flow__controls",T,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??_["controls.ariaLabel"],children:[t&&p.jsxs(p.Fragment,{children:[p.jsx(Nr,{onClick:E,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:y,children:p.jsx(PS,{})}),p.jsx(Nr,{onClick:w,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:v,children:p.jsx(LS,{})})]}),r&&p.jsx(Nr,{className:"react-flow__controls-fitview",onClick:A,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:p.jsx(DS,{})}),n&&p.jsx(Nr,{className:"react-flow__controls-interactive",onClick:k,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:m?p.jsx(FS,{}):p.jsx(OS,{})}),c]})}My.displayName="Controls";const BS=j.memo(My);function zS({id:e,x:t,y:r,width:n,height:i,style:a,color:s,strokeColor:o,strokeWidth:u,className:l,borderRadius:c,shapeRendering:d,selected:f,onClick:h}){const{background:x,backgroundColor:m}=a||{},v=s||x||m;return p.jsx("rect",{className:ue(["react-flow__minimap-node",{selected:f},l]),x:t,y:r,rx:c,ry:c,width:n,height:i,style:{fill:v,stroke:o,strokeWidth:u},shapeRendering:d,onClick:h?y=>h(y,e):void 0})}const HS=j.memo(zS),GS=e=>e.nodes.map(t=>t.id),Fn=e=>e instanceof Function?e:()=>e;function VS({nodeStrokeColor:e,nodeColor:t,nodeClassName:r="",nodeBorderRadius:n=5,nodeStrokeWidth:i,nodeComponent:a=HS,onClick:s}){const o=re(GS,oe),u=Fn(t),l=Fn(e),c=Fn(r),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return p.jsx(p.Fragment,{children:o.map(f=>p.jsx(YS,{id:f,nodeColorFunc:u,nodeStrokeColorFunc:l,nodeClassNameFunc:c,nodeBorderRadius:n,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:d},f))})}function US({id:e,nodeColorFunc:t,nodeStrokeColorFunc:r,nodeClassNameFunc:n,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:o,onClick:u}){const{node:l,x:c,y:d,width:f,height:h}=re(x=>{const{internals:m}=x.nodeLookup.get(e),v=m.userNode,{x:y,y:_}=m.positionAbsolute,{width:g,height:b}=Ge(v);return{node:v,x:y,y:_,width:g,height:b}},oe);return!l||l.hidden||!Mv(l)?null:p.jsx(o,{x:c,y:d,width:f,height:h,style:l.style,selected:!!l.selected,className:n(l),color:t(l),borderRadius:i,strokeColor:r(l),strokeWidth:a,shapeRendering:s,onClick:u,id:l.id})}const YS=j.memo(US);var WS=j.memo(VS);const XS=200,KS=150,ZS=e=>!e.hidden,JS=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Rv(rr(e.nodeLookup,{filter:ZS}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},QS="react-flow__minimap-desc";function Ty({style:e,className:t,nodeStrokeColor:r,nodeColor:n,nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:o,bgColor:u,maskColor:l,maskStrokeColor:c,maskStrokeWidth:d,position:f="bottom-right",onClick:h,onNodeClick:x,pannable:m=!1,zoomable:v=!1,ariaLabel:y,inversePan:_,zoomStep:g=10,offsetScale:b=5}){const N=ae(),E=j.useRef(null),{boundingRect:w,viewBB:A,rfId:k,panZoom:T,translateExtent:M,flowWidth:L,flowHeight:F,ariaLabelConfig:C}=re(JS,oe),R=(e==null?void 0:e.width)??XS,S=(e==null?void 0:e.height)??KS,I=w.width/R,O=w.height/S,q=Math.max(I,O),$=q*R,z=q*S,H=b*q,U=w.x-($-w.width)/2-H,P=w.y-(z-w.height)/2-H,D=$+H*2,B=z+H*2,G=`${QS}-${k}`,V=j.useRef(0),Y=j.useRef();V.current=q,j.useEffect(()=>{if(E.current&&T)return Y.current=_N({domNode:E.current,panZoom:T,getTransform:()=>N.getState().transform,getViewScale:()=>V.current}),()=>{var K;(K=Y.current)==null||K.destroy()}},[T]),j.useEffect(()=>{var K;(K=Y.current)==null||K.update({translateExtent:M,width:L,height:F,inversePan:_,pannable:m,zoomStep:g,zoomable:v})},[m,v,_,g,M,L,F]);const Z=h?K=>{var ne;const[W,X]=((ne=Y.current)==null?void 0:ne.pointer(K))||[0,0];h(K,{x:W,y:X})}:void 0,ee=x?j.useCallback((K,W)=>{const X=N.getState().nodeLookup.get(W).internals.userNode;x(K,X)},[]):void 0,Q=y??C["minimap.ariaLabel"];return p.jsx(ir,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*q:void 0,"--xy-minimap-node-background-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:ue(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:p.jsxs("svg",{width:R,height:S,viewBox:`${U} ${P} ${D} ${B}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":G,ref:E,onClick:Z,children:[Q&&p.jsx("title",{id:G,children:Q}),p.jsx(WS,{onClick:ee,nodeColor:n,nodeStrokeColor:r,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:o}),p.jsx("path",{className:"react-flow__minimap-mask",d:`M${U-H},${P-H}h${D+H*2}v${B+H*2}h${-D-H*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ty.displayName="MiniMap";const eC=j.memo(Ty),tC=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,rC={[Et.Line]:"right",[Et.Handle]:"bottom-right"};function nC({nodeId:e,position:t,variant:r=Et.Handle,className:n,style:i=void 0,children:a,color:s,minWidth:o=10,minHeight:u=10,maxWidth:l=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:f,autoScale:h=!0,shouldResize:x,onResizeStart:m,onResize:v,onResizeEnd:y}){const _=ly(),g=typeof e=="string"?e:_,b=ae(),N=j.useRef(null),E=r===Et.Handle,w=re(j.useCallback(tC(E&&h),[E,h]),oe),A=j.useRef(null),k=t??rC[r];j.useEffect(()=>{if(!(!N.current||!g))return A.current||(A.current=DN({domNode:N.current,nodeId:g,getStoreItems:()=>{const{nodeLookup:M,transform:L,snapGrid:F,snapToGrid:C,nodeOrigin:R,domNode:S}=b.getState();return{nodeLookup:M,transform:L,snapGrid:F,snapToGrid:C,nodeOrigin:R,paneDomNode:S}},onChange:(M,L)=>{const{triggerNodeChanges:F,nodeLookup:C,parentLookup:R,nodeOrigin:S}=b.getState(),I=[],O={x:M.x,y:M.y},q=C.get(g);if(q&&q.expandParent&&q.parentId){const $=q.origin??S,z=M.width??q.measured.width??0,H=M.height??q.measured.height??0,U={id:q.id,parentId:q.parentId,rect:{width:z,height:H,...Tv({x:M.x??q.position.x,y:M.y??q.position.y},{width:z,height:H},q.parentId,C,$)}},P=Lu([U],C,R,S);I.push(...P),O.x=M.x?Math.max($[0]*z,M.x):void 0,O.y=M.y?Math.max($[1]*H,M.y):void 0}if(O.x!==void 0&&O.y!==void 0){const $={id:g,type:"position",position:{...O}};I.push($)}if(M.width!==void 0&&M.height!==void 0){const z={id:g,type:"dimensions",resizing:!0,setAttributes:f?f==="horizontal"?"width":"height":!0,dimensions:{width:M.width,height:M.height}};I.push(z)}for(const $ of L){const z={...$,type:"position"};I.push(z)}F(I)},onEnd:({width:M,height:L})=>{const F={id:g,type:"dimensions",resizing:!1,dimensions:{width:M,height:L}};b.getState().triggerNodeChanges([F])}})),A.current.update({controlPosition:k,boundaries:{minWidth:o,minHeight:u,maxWidth:l,maxHeight:c},keepAspectRatio:d,resizeDirection:f,onResizeStart:m,onResize:v,onResizeEnd:y,shouldResize:x}),()=>{var M;(M=A.current)==null||M.destroy()}},[k,o,u,l,c,d,m,v,y,x]);const T=k.split("-");return p.jsx("div",{className:ue(["react-flow__resize-control","nodrag",...T,r,n]),ref:N,style:{...i,scale:w,...s&&{[E?"backgroundColor":"borderColor"]:s}},children:a})}j.memo(nC);const pd={foundation:"bg-primary text-primary-foreground border-primary",technique:"bg-chart-2 text-white border-chart-2",combination:"bg-chart-1 text-white border-chart-1",application:"bg-accent text-accent-foreground border-accent",usecase:"bg-chart-5 text-white border-chart-5",product:"bg-destructive text-destructive-foreground border-destructive",default:"bg-muted text-muted-foreground border-muted"},iC={Finance:"bg-blue-500",Medical:"bg-green-500",Legal:"bg-purple-500",Education:"bg-yellow-500",Retail:"bg-orange-500",Gaming:"bg-pink-500",Technology:"bg-cyan-500",Banking:"bg-indigo-500",Insurance:"bg-red-500",Government:"bg-gray-500",Pharma:"bg-emerald-500",Automotive:"bg-teal-500",Energy:"bg-amber-500",Manufacturing:"bg-slate-500",Transportation:"bg-violet-500",Logistics:"bg-lime-500",Entertainment:"bg-rose-500",Media:"bg-fuchsia-500",Marketing:"bg-sky-500",Fashion:"bg-pink-400",Software:"bg-blue-400","Customer Service":"bg-indigo-400",Art:"bg-purple-400",Blockchain:"bg-orange-400",Training:"bg-yellow-400"},aC=e=>pd[e]||pd.default,sC=e=>iC[e]||"bg-gray-400",gd={background:"transparent",border:"none",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1,height:1},oC=({data:e,selected:t})=>{const r=e,n=r.nodeType||r.category||"default",i=j.useMemo(()=>aC(n),[n]),a=j.useMemo(()=>`px-3 py-2 rounded-md border shadow-sm transition-all min-w-[140px] relative ${i} ${t?"ring-2 ring-ring ring-offset-1":""}`,[i,t]);return p.jsxs(p.Fragment,{children:[p.jsx(St,{type:"source",position:J.Top,id:"source",className:"!opacity-0 !pointer-events-none",style:gd}),p.jsx(St,{type:"target",position:J.Bottom,id:"target",className:"!opacity-0 !pointer-events-none",style:gd}),p.jsx("div",{className:a,children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-medium text-xs",children:r.label}),n!=="product"&&n!=="application"&&n!=="default"&&p.jsx("div",{className:"text-xs opacity-70 mt-0.5",children:n.charAt(0).toUpperCase()+n.slice(1)}),(n==="product"||n==="application")&&r.domains&&r.domains.length>0&&p.jsxs("div",{className:"flex justify-center gap-0.5 mt-1",children:[r.domains.slice(0,3).map(s=>p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${sC(s)}`,title:s},s)),r.domains.length>3&&p.jsxs("div",{className:"text-xs opacity-50",children:["+",r.domains.length-3]})]})]})})]})},cC=j.memo(oC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],lC=ie("calendar",uC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qy=ie("check",dC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Py=ie("chevron-down",fC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ly=ie("chevron-up",hC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dy=ie("circle-check-big",pC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mC=ie("circle",gC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],yC=ie("code",vC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],md=ie("cpu",xC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Ur=ie("file-json",bC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],wC=ie("git-branch",_C);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Er=ie("grid-3x3",NC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],SC=ie("grip-vertical",EC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],AC=ie("layers",CC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],IC=ie("lightbulb",kC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],RC=ie("maximize-2",jC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]],TC=ie("merge",MC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],PC=ie("minimize-2",qC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],DC=ie("package",LC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],FC=ie("plus",OC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],BC=ie("settings-2",$C);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],vd=ie("tag",zC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],GC=ie("trash-2",HC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],UC=ie("trending-up",VC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Oy=ie("triangle-alert",YC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],XC=ie("trophy",WC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yr=ie("upload",KC);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ou=ie("x",ZC),Fy=j.createContext(void 0),Fu=()=>{const e=j.useContext(Fy);if(!e)throw new Error("useData must be used within a DataProvider");return e},JC=[{id:"sample1",type:"custom",position:{x:250,y:100},data:{label:"AI Foundation",nodeType:"foundation",category:"core",domains:["Technology"]}},{id:"sample2",type:"custom",position:{x:100,y:200},data:{label:"Machine Learning",nodeType:"technique",category:"algorithm",domains:["Technology","Finance"]}},{id:"sample3",type:"custom",position:{x:400,y:200},data:{label:"Deep Learning",nodeType:"technique",category:"algorithm",domains:["Technology","Medical"]}},{id:"sample4",type:"custom",position:{x:250,y:300},data:{label:"Neural Networks",nodeType:"combination",category:"hybrid",domains:["Technology"]}},{id:"sample5",type:"custom",position:{x:250,y:400},data:{label:"AI Assistant",nodeType:"product",category:"solution",domains:["Technology","Retail","Education"]}}],QC=[{id:"e1-2",source:"sample1",target:"sample2",type:"simplebezier",data:{edgeType:"dependency"}},{id:"e1-3",source:"sample1",target:"sample3",type:"simplebezier",data:{edgeType:"dependency"}},{id:"e2-4",source:"sample2",target:"sample4",type:"simplebezier",data:{edgeType:"evolution"}},{id:"e3-4",source:"sample3",target:"sample4",type:"simplebezier",data:{edgeType:"evolution"}},{id:"e4-5",source:"sample4",target:"sample5",type:"simplebezier",data:{edgeType:"implementation"}}],e2={sample1:{description:"The foundational concepts and theories that underpin artificial intelligence",capabilities:["Pattern Recognition","Data Processing","Automated Decision Making"],limitations:["Requires Large Datasets","Computational Resources"],useCases:["Automation","Prediction","Optimization"],technicalDetails:"Core algorithms and mathematical frameworks for AI systems"},sample2:{description:"Algorithms that enable computers to learn from and make predictions based on data",capabilities:["Supervised Learning","Unsupervised Learning","Feature Extraction"],limitations:["Data Quality Dependency","Overfitting Risk"],useCases:["Classification","Regression","Clustering"],technicalDetails:"Statistical methods and optimization techniques for model training"},sample3:{description:"Advanced machine learning using artificial neural networks with multiple layers",capabilities:["Complex Pattern Recognition","Feature Learning","High-dimensional Data Processing"],limitations:["Requires Massive Data","Black Box Nature","High Computational Cost"],useCases:["Image Recognition","Natural Language Processing","Speech Recognition"],technicalDetails:"Multi-layer neural networks with backpropagation and gradient descent"},sample4:{description:"Computational models inspired by biological neural networks",capabilities:["Non-linear Modeling","Parallel Processing","Adaptive Learning"],limitations:["Training Complexity","Interpretability"],useCases:["Pattern Recognition","Function Approximation","Time Series Prediction"],technicalDetails:"Interconnected nodes with weights, biases, and activation functions"},sample5:{description:"AI-powered virtual assistant providing automated help and support",capabilities:["Natural Language Understanding","Task Automation","Contextual Responses"],limitations:["Limited to Training Data","May Produce Errors"],useCases:["Customer Service","Personal Assistance","Information Retrieval"],technicalDetails:"Combines NLP, machine learning, and dialogue management systems"}},t2=({children:e})=>{const[t,r]=j.useState(JC),[n,i]=j.useState(QC),[a,s]=j.useState(e2),[o,u]=j.useState([]);j.useEffect(()=>{const x=localStorage.getItem("ai-capability-map-loaded-files");if(x)try{const v=JSON.parse(x).map(y=>({...y,loadedAt:new Date(y.loadedAt)}));u(v)}catch(m){console.error("Failed to load saved files:",m)}},[]),j.useEffect(()=>{o.length>0?localStorage.setItem("ai-capability-map-loaded-files",JSON.stringify(o)):localStorage.removeItem("ai-capability-map-loaded-files")},[o]);const l=x=>{r(x.nodes),i(x.edges),s(x.descriptions)},c=x=>{u(m=>[...m,x])},d=x=>{u(m=>m.filter(v=>v.id!==x))},f=()=>{u([]),localStorage.removeItem("ai-capability-map-loaded-files")},h=t.length>0;return p.jsx(Fy.Provider,{value:{nodes:t,edges:n,descriptions:a,setData:l,hasData:h,loadedFiles:o,setLoadedFiles:u,addLoadedFile:c,removeLoadedFile:d,clearLoadedFiles:f},children:e})},r2=e=>({Finance:"bg-blue-500",Medical:"bg-green-500",Legal:"bg-purple-500",Education:"bg-yellow-500",Retail:"bg-orange-500",Gaming:"bg-pink-500",Technology:"bg-cyan-500",Banking:"bg-indigo-500",Insurance:"bg-red-500",Government:"bg-gray-500",Pharma:"bg-emerald-500",Automotive:"bg-teal-500",Energy:"bg-amber-500",Manufacturing:"bg-slate-500",Transportation:"bg-violet-500",Logistics:"bg-lime-500",Entertainment:"bg-rose-500",Media:"bg-fuchsia-500",Marketing:"bg-sky-500",Fashion:"bg-pink-400",Software:"bg-blue-400","Customer Service":"bg-indigo-400",Art:"bg-purple-400",Blockchain:"bg-orange-400",Training:"bg-yellow-400"})[e]||"bg-gray-400",n2=({node:e,onClose:t,connectedNodes:r,onNodeClick:n})=>{const{descriptions:i}=Fu();if(!e)return null;const a=i[e.id];return a?p.jsxs("div",{className:"fixed right-0 top-0 h-full w-96 bg-background border-l shadow-xl z-50 overflow-hidden flex flex-col",children:[p.jsx("div",{className:"p-6 border-b bg-muted/30",children:p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:a.title||e.data.label}),p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(e.data.nodeType||e.data.category||"NODE").toUpperCase()})]}),p.jsx("button",{onClick:t,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:p.jsx(Ou,{className:"w-5 h-5"})})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(a.description||a.shortDescription||a.fullDescription)&&p.jsx("div",{children:p.jsx("p",{className:"text-muted-foreground leading-relaxed",children:a.description||a.shortDescription||a.fullDescription})}),e.data.domains&&e.data.domains.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[p.jsx(vd,{className:"w-4 h-4"}),"Industries & Domains"]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:e.data.domains.map(s=>p.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-muted text-muted-foreground text-xs font-medium border",children:[p.jsx("div",{className:`w-2 h-2 rounded-full ${r2(s)}`}),s]},s))})]}),a.capabilities&&a.capabilities.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(Dy,{className:"w-4 h-4 text-green-500"}),"Capabilities"]}),p.jsx("ul",{className:"space-y-2",children:a.capabilities.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-green-500 mr-2 mt-0.5",children:"✓"}),p.jsx("span",{children:s})]},o))})]}),a.keyFeatures&&a.keyFeatures.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Key Features"}),p.jsx("ul",{className:"space-y-2",children:a.keyFeatures.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-primary mr-2",children:"•"}),p.jsx("span",{children:s})]},o))})]}),a.limitations&&a.limitations.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(Oy,{className:"w-4 h-4 text-yellow-500"}),"Limitations"]}),p.jsx("ul",{className:"space-y-2",children:a.limitations.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-yellow-500 mr-2 mt-0.5",children:"⚠"}),p.jsx("span",{children:s})]},o))})]}),a.useCases&&a.useCases.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(IC,{className:"w-4 h-4 text-blue-500"}),"Use Cases"]}),p.jsx("ul",{className:"space-y-2",children:a.useCases.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),p.jsx("span",{children:s})]},o))})]}),a.technicalDetails&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(yC,{className:"w-4 h-4 text-purple-500"}),"Technical Details"]}),p.jsx("div",{className:"text-sm text-muted-foreground bg-muted/30 p-4 rounded-lg border border-border/50",children:p.jsx("p",{className:"leading-relaxed font-mono text-xs",children:a.technicalDetails})})]}),a.features&&a.features.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(DC,{className:"w-4 h-4 text-indigo-500"}),"Product Features"]}),p.jsx("ul",{className:"space-y-2",children:a.features.map((s,o)=>p.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[p.jsx("span",{className:"text-indigo-500 mr-2 mt-0.5",children:"★"}),p.jsx("span",{children:s})]},o))})]}),a.achievements&&a.achievements.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(XC,{className:"w-4 h-4 text-yellow-500"}),"Key Achievements"]}),p.jsx("div",{className:"space-y-3",children:a.achievements.map((s,o)=>p.jsx("div",{className:"bg-gradient-to-r from-yellow-500/10 to-transparent p-3 rounded-lg border-l-2 border-yellow-500",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:s.title}),s.description&&p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]}),s.year&&p.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:s.year})]})},o))})]}),a.timeline&&a.timeline.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[p.jsx(ab,{className:"w-4 h-4 text-teal-500"}),"Product Timeline"]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute left-2 top-3 bottom-3 w-0.5 bg-border"}),p.jsx("div",{className:"space-y-4",children:a.timeline.map((s,o)=>p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"relative",children:p.jsx("div",{className:"w-4 h-4 rounded-full bg-teal-500 border-2 border-background"})}),p.jsxs("div",{className:"flex-1 -mt-1",children:[p.jsx("div",{className:"flex items-center gap-2 mb-1",children:p.jsx("span",{className:"text-xs font-medium text-teal-600 dark:text-teal-400",children:s.date})}),p.jsx("p",{className:"text-sm font-medium text-foreground",children:s.event}),s.description&&p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]})]},o))})]})]}),(a.yearIntroduced||a.marketSize)&&p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.yearIntroduced&&p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx(lC,{className:"w-4 h-4 text-muted-foreground"}),p.jsxs("span",{className:"text-muted-foreground",children:["Introduced: ",a.yearIntroduced]})]}),a.marketSize&&p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx(UC,{className:"w-4 h-4 text-muted-foreground"}),p.jsx("span",{className:"text-muted-foreground",children:a.marketSize})]})]}),a.tags&&a.tags.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(s=>p.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium",children:[p.jsx(vd,{className:"w-3 h-3"}),s]},s))}),r&&p.jsxs("div",{className:"space-y-4",children:[r.source.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[p.jsx(md,{className:"w-4 h-4"}),"Enabled By"]}),p.jsx("div",{className:"space-y-1",children:r.source.map(s=>p.jsx("div",{className:"text-sm text-muted-foreground bg-muted/30 p-2 rounded cursor-pointer hover:bg-muted/50 hover:text-foreground transition-colors group",onClick:()=>n==null?void 0:n(s.id),children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[s.data.label,p.jsxs("span",{className:"text-xs ml-2 opacity-60",children:["(",s.data.nodeType,")"]})]}),p.jsx("span",{className:"text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"→"})]})},s.id))})]}),r.target.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[p.jsx(md,{className:"w-4 h-4"}),"Enables"]}),p.jsx("div",{className:"space-y-1",children:r.target.map(s=>p.jsx("div",{className:"text-sm text-muted-foreground bg-muted/30 p-2 rounded cursor-pointer hover:bg-muted/50 hover:text-foreground transition-colors group",onClick:()=>n==null?void 0:n(s.id),children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[s.data.label,p.jsxs("span",{className:"text-xs ml-2 opacity-60",children:["(",s.data.nodeType,")"]})]}),p.jsx("span",{className:"text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"→"})]})},s.id))})]})]}),a.relatedLinks&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Learn More"}),p.jsx("div",{className:"space-y-2",children:a.relatedLinks.map((s,o)=>p.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[p.jsx(sb,{className:"w-4 h-4"}),s.title]},o))})]})]})]}):null},i2={hierarchical:["nodeSpacingX","nodeSpacingY","rankSpacing","alignment","ranker","animate"],radial:["radialSpacing","startAngle","endAngle","animate"],TB:["nodeSpacingX","nodeSpacingY","rankSpacing","animate"],LR:["nodeSpacingX","nodeSpacingY","rankSpacing","animate"],BT:["nodeSpacingX","nodeSpacingY","rankSpacing","animate"],RL:["nodeSpacingX","nodeSpacingY","rankSpacing","animate"],manual:["animate"]},a2=({config:e,onConfigChange:t,onLayoutSelect:r,selectedLayout:n})=>{const[i,a]=ke.useState(!1),s=ke.useMemo(()=>({...e,radialSpacing:e.radialSpacing??200,startAngle:e.startAngle??0,endAngle:e.endAngle??360}),[e]),o=[{id:"hierarchical",name:"Hierarchical",icon:wC},{id:"radial",name:"Radial",icon:mC},{id:"TB",name:"Top-Bottom",icon:Er},{id:"LR",name:"Left-Right",icon:Er},{id:"BT",name:"Bottom-Top",icon:Er},{id:"RL",name:"Right-Left",icon:Er}],u=i2[n]||[],l=u.length>0;return p.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[p.jsx(BC,{className:"w-4 h-4"}),"Layout Options"]}),l&&p.jsx("button",{onClick:()=>a(!i),className:"p-1 hover:bg-muted rounded transition-colors",title:i?"Collapse settings":"Expand settings",children:i?p.jsx(PC,{className:"w-4 h-4"}):p.jsx(RC,{className:"w-4 h-4"})})]}),p.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.map(c=>{const d=c.icon;return p.jsxs("button",{onClick:()=>r(c.id),className:`px-3 py-2 text-xs font-medium rounded-md transition-colors flex items-center justify-center gap-1 ${n===c.id?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,title:c.name,children:[p.jsx(d,{className:"w-3 h-3"}),p.jsx("span",{className:"hidden sm:inline",children:c.name})]},c.id)})}),i&&l&&p.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[u.includes("nodeSpacingX")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Horizontal Spacing"}),p.jsxs("span",{children:[s.nodeSpacingX,"px"]})]}),p.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:s.nodeSpacingX,onChange:c=>t({...s,nodeSpacingX:parseInt(c.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),u.includes("nodeSpacingY")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Vertical Spacing"}),p.jsxs("span",{children:[s.nodeSpacingY,"px"]})]}),p.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:s.nodeSpacingY,onChange:c=>t({...s,nodeSpacingY:parseInt(c.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),u.includes("rankSpacing")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Layer Distance"}),p.jsxs("span",{children:[s.rankSpacing,"px"]})]}),p.jsx("input",{type:"range",min:"100",max:"400",step:"10",value:s.rankSpacing,onChange:c=>t({...s,rankSpacing:parseInt(c.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),u.includes("radialSpacing")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Radial Distance"}),p.jsxs("span",{children:[s.radialSpacing,"px"]})]}),p.jsx("input",{type:"range",min:"100",max:"500",step:"20",value:s.radialSpacing,onChange:c=>t({...s,radialSpacing:parseInt(c.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),u.includes("startAngle")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"Start Angle"}),p.jsxs("span",{children:[s.startAngle,"°"]})]}),p.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:s.startAngle,onChange:c=>t({...s,startAngle:parseInt(c.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),u.includes("endAngle")&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex justify-between mb-1",children:[p.jsx("span",{children:"End Angle"}),p.jsxs("span",{children:[s.endAngle,"°"]})]}),p.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:s.endAngle,onChange:c=>t({...s,endAngle:parseInt(c.target.value)}),className:"w-full h-1 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"})]}),u.includes("alignment")&&p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Node Alignment"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"UL",label:"Up-Left"},{value:"UR",label:"Up-Right"},{value:"DL",label:"Down-Left"},{value:"DR",label:"Down-Right"}].map(c=>p.jsx("button",{onClick:()=>t({...s,alignment:c.value}),className:`px-2 py-1 text-xs rounded transition-colors ${s.alignment===c.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:c.label},c.value))})]}),u.includes("ranker")&&p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Layout Algorithm"}),p.jsxs("select",{value:s.ranker,onChange:c=>t({...s,ranker:c.target.value}),className:"w-full px-2 py-1 text-xs bg-muted text-foreground rounded border border-border",children:[p.jsx("option",{value:"network-simplex",children:"Network Simplex (Balanced)"}),p.jsx("option",{value:"tight-tree",children:"Tight Tree (Compact)"}),p.jsx("option",{value:"longest-path",children:"Longest Path (Hierarchical)"})]})]}),u.includes("animate")&&p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Animate Transitions"}),p.jsx("button",{onClick:()=>t({...s,animate:!s.animate}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.animate?"bg-primary":"bg-muted"}`,children:p.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${s.animate?"translate-x-5":"translate-x-1"}`})})]}),p.jsx("button",{onClick:()=>{t({nodeSpacingX:100,nodeSpacingY:100,rankSpacing:150,alignment:"UL",ranker:"network-simplex",animate:!0,radialSpacing:200,startAngle:0,endAngle:360})},className:"w-full px-3 py-1.5 text-xs bg-secondary text-secondary-foreground hover:bg-secondary/80 rounded-md transition-colors",children:"Reset to Defaults"})]}),i&&!l&&p.jsx("div",{className:"pt-3 border-t",children:p.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"No configuration options for manual layout"})})]})};function yd({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:Jt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function ze(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function s2(e){const t=e+"CollectionProvider",[r,n]=_u(t),[i,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:v,children:y}=m,_=ke.useRef(null),g=ke.useRef(new Map).current;return p.jsx(i,{scope:v,itemMap:g,collectionRef:_,children:y})};s.displayName=t;const o=e+"CollectionSlot",u=fl(o),l=ke.forwardRef((m,v)=>{const{scope:y,children:_}=m,g=a(o,y),b=Mr(v,g.collectionRef);return p.jsx(u,{ref:b,children:_})});l.displayName=o;const c=e+"CollectionItemSlot",d="data-radix-collection-item",f=fl(c),h=ke.forwardRef((m,v)=>{const{scope:y,children:_,...g}=m,b=ke.useRef(null),N=Mr(v,b),E=a(c,y);return ke.useEffect(()=>(E.itemMap.set(b,{ref:b,...g}),()=>void E.itemMap.delete(b))),p.jsx(f,{[d]:"",ref:N,children:_})});h.displayName=c;function x(m){const v=a(e+"CollectionConsumer",m);return ke.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const g=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,w)=>g.indexOf(E.ref.current)-g.indexOf(w.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:s,Slot:l,ItemSlot:h},x,n]}var Wr=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},o2=zm[" useId ".trim().toString()]||(()=>{}),c2=0;function $y(e){const[t,r]=j.useState(o2());return Wr(()=>{r(n=>n??String(c2++))},[e]),e||(t?`radix-${t}`:"")}function u2(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var l2=zm[" useInsertionEffect ".trim().toString()]||Wr;function By({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,a,s]=d2({defaultProp:t,onChange:r}),o=e!==void 0,u=o?e:i;{const c=j.useRef(e!==void 0);j.useEffect(()=>{const d=c.current;d!==o&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=o},[o,n])}const l=j.useCallback(c=>{var d;if(o){const f=f2(c)?c(e):c;f!==e&&((d=s.current)==null||d.call(s,f))}else a(c)},[o,e,a,s]);return[u,l]}function d2({defaultProp:e,onChange:t}){const[r,n]=j.useState(e),i=j.useRef(r),a=j.useRef(t);return l2(()=>{a.current=t},[t]),j.useEffect(()=>{var s;i.current!==r&&((s=a.current)==null||s.call(a,r),i.current=r)},[r,i]),[r,n,a]}function f2(e){return typeof e=="function"}var h2=j.createContext(void 0);function zy(e){const t=j.useContext(h2);return e||t||"ltr"}var $n="rovingFocusGroup.onEntryFocus",p2={bubbles:!1,cancelable:!0},ar="RovingFocusGroup",[bu,Hy,g2]=s2(ar),[m2,Gy]=_u(ar,[g2]),[v2,y2]=m2(ar),Vy=j.forwardRef((e,t)=>p.jsx(bu.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(bu.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(x2,{...e,ref:t})})}));Vy.displayName=ar;var x2=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:u,onEntryFocus:l,preventScrollOnEntryFocus:c=!1,...d}=e,f=j.useRef(null),h=Mr(t,f),x=zy(a),[m,v]=By({prop:s,defaultProp:o??null,onChange:u,caller:ar}),[y,_]=j.useState(!1),g=u2(l),b=Hy(r),N=j.useRef(!1),[E,w]=j.useState(0);return j.useEffect(()=>{const A=f.current;if(A)return A.addEventListener($n,g),()=>A.removeEventListener($n,g)},[g]),p.jsx(v2,{scope:r,orientation:n,dir:x,loop:i,currentTabStopId:m,onItemFocus:j.useCallback(A=>v(A),[v]),onItemShiftTab:j.useCallback(()=>_(!0),[]),onFocusableItemAdd:j.useCallback(()=>w(A=>A+1),[]),onFocusableItemRemove:j.useCallback(()=>w(A=>A-1),[]),children:p.jsx(Ct.div,{tabIndex:y||E===0?-1:0,"data-orientation":n,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:ze(e.onMouseDown,()=>{N.current=!0}),onFocus:ze(e.onFocus,A=>{const k=!N.current;if(A.target===A.currentTarget&&k&&!y){const T=new CustomEvent($n,p2);if(A.currentTarget.dispatchEvent(T),!T.defaultPrevented){const M=b().filter(S=>S.focusable),L=M.find(S=>S.active),F=M.find(S=>S.id===m),R=[L,F,...M].filter(Boolean).map(S=>S.ref.current);Wy(R,c)}}N.current=!1}),onBlur:ze(e.onBlur,()=>_(!1))})})}),Uy="RovingFocusGroupItem",Yy=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,children:s,...o}=e,u=$y(),l=a||u,c=y2(Uy,r),d=c.currentTabStopId===l,f=Hy(r),{onFocusableItemAdd:h,onFocusableItemRemove:x,currentTabStopId:m}=c;return j.useEffect(()=>{if(n)return h(),()=>x()},[n,h,x]),p.jsx(bu.ItemSlot,{scope:r,id:l,focusable:n,active:i,children:p.jsx(Ct.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:ze(e.onMouseDown,v=>{n?c.onItemFocus(l):v.preventDefault()}),onFocus:ze(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:ze(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=w2(v,c.orientation,c.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let g=f().filter(b=>b.focusable).map(b=>b.ref.current);if(y==="last")g.reverse();else if(y==="prev"||y==="next"){y==="prev"&&g.reverse();const b=g.indexOf(v.currentTarget);g=c.loop?N2(g,b+1):g.slice(b+1)}setTimeout(()=>Wy(g))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:m!=null}):s})})});Yy.displayName=Uy;var b2={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _2(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function w2(e,t,r){const n=_2(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return b2[n]}function Wy(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function N2(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var E2=Vy,S2=Yy;function C2(e,t){return j.useReducer((r,n)=>t[r][n]??r,e)}var Xy=e=>{const{present:t,children:r}=e,n=A2(t),i=typeof r=="function"?r({present:n.isPresent}):j.Children.only(r),a=Mr(n.ref,k2(i));return typeof r=="function"||n.isPresent?j.cloneElement(i,{ref:a}):null};Xy.displayName="Presence";function A2(e){const[t,r]=j.useState(),n=j.useRef(null),i=j.useRef(e),a=j.useRef("none"),s=e?"mounted":"unmounted",[o,u]=C2(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const l=Sr(n.current);a.current=o==="mounted"?l:"none"},[o]),Wr(()=>{const l=n.current,c=i.current;if(c!==e){const f=a.current,h=Sr(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),Wr(()=>{if(t){let l;const c=t.ownerDocument.defaultView??window,d=h=>{const m=Sr(n.current).includes(h.animationName);if(h.target===t&&m&&(u("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",l=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},f=h=>{h.target===t&&(a.current=Sr(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{c.clearTimeout(l),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:j.useCallback(l=>{n.current=l?getComputedStyle(l):null,r(l)},[])}}function Sr(e){return(e==null?void 0:e.animationName)||"none"}function k2(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var dn="Tabs",[I2,mj]=_u(dn,[Gy]),Ky=Gy(),[j2,$u]=I2(dn),Zy=j.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:o,activationMode:u="automatic",...l}=e,c=zy(o),[d,f]=By({prop:n,onChange:i,defaultProp:a??"",caller:dn});return p.jsx(j2,{scope:r,baseId:$y(),value:d,onValueChange:f,orientation:s,dir:c,activationMode:u,children:p.jsx(Ct.div,{dir:c,"data-orientation":s,...l,ref:t})})});Zy.displayName=dn;var Jy="TabsList",Qy=j.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,a=$u(Jy,r),s=Ky(r);return p.jsx(E2,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:n,children:p.jsx(Ct.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});Qy.displayName=Jy;var e0="TabsTrigger",t0=j.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=e,s=$u(e0,r),o=Ky(r),u=i0(s.baseId,n),l=a0(s.baseId,n),c=n===s.value;return p.jsx(S2,{asChild:!0,...o,focusable:!i,active:c,children:p.jsx(Ct.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":l,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:t,onMouseDown:ze(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?s.onValueChange(n):d.preventDefault()}),onKeyDown:ze(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&s.onValueChange(n)}),onFocus:ze(e.onFocus,()=>{const d=s.activationMode!=="manual";!c&&!i&&d&&s.onValueChange(n)})})})});t0.displayName=e0;var r0="TabsContent",n0=j.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...s}=e,o=$u(r0,r),u=i0(o.baseId,n),l=a0(o.baseId,n),c=n===o.value,d=j.useRef(c);return j.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),p.jsx(Xy,{present:i||c,children:({present:f})=>p.jsx(Ct.div,{"data-state":c?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":u,hidden:!f,id:l,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&a})})});n0.displayName=r0;function i0(e,t){return`${e}-trigger-${t}`}function a0(e,t){return`${e}-content-${t}`}var R2=Zy,M2=Qy,T2=t0,q2=n0;function P2({className:e,...t}){return p.jsx(R2,{"data-slot":"tabs",className:Jt("flex flex-col gap-2",e),...t})}function L2({className:e,...t}){return p.jsx(M2,{"data-slot":"tabs-list",className:Jt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function xd({className:e,...t}){return p.jsx(T2,{"data-slot":"tabs-trigger",className:Jt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function bd({className:e,...t}){return p.jsx(q2,{"data-slot":"tabs-content",className:Jt("flex-1 outline-none",e),...t})}const D2=({onDataMerged:e})=>{const{loadedFiles:t,setLoadedFiles:r,addLoadedFile:n,removeLoadedFile:i,clearLoadedFiles:a}=Fu(),[s,o]=j.useState([]),[u,l]=j.useState(!1),[c,d]=j.useState(""),[f,h]=j.useState(""),[x,m]=j.useState(!1),[v,y]=j.useState(null),_=j.useCallback(S=>{S.preventDefault(),S.stopPropagation(),S.type==="dragenter"||S.type==="dragover"?m(!0):S.type==="dragleave"&&m(!1)},[]),g=j.useCallback(S=>{S.preventDefault(),S.stopPropagation(),m(!1),Array.from(S.dataTransfer.files).forEach(O=>b(O))},[]),b=j.useCallback(S=>{if(!S.name.endsWith(".json")){d("Please upload JSON files only");return}const I=new FileReader;I.onload=O=>{var q,$,z;try{const H=JSON.parse((q=O.target)==null?void 0:q.result),U=`${S.name}-${Date.now()}`;let P,D=0,B=0,G=0;if(H.nodes&&H.edges)P="graph",D=(($=H.nodes)==null?void 0:$.length)||0,B=((z=H.edges)==null?void 0:z.length)||0;else if(H.descriptions||typeof H=="object"&&!Array.isArray(H)){P="descriptions";const Y=H.descriptions||H;G=Object.keys(Y).length}else throw new Error("Unknown JSON format. Expected graph data (nodes/edges) or descriptions.");const V={id:U,name:S.name,type:P,data:H,nodeCount:D,edgeCount:B,descriptionCount:G,loadedAt:new Date};n(V),h(`Successfully loaded ${S.name} (${P} data)`),d("")}catch(H){d(`Error parsing ${S.name}: ${H instanceof Error?H.message:"Unknown error"}`)}},I.readAsText(S)},[]),N=j.useCallback(S=>{Array.from(S.target.files||[]).forEach(O=>b(O))},[b]),E=j.useCallback(S=>{if(S<=0)return;const I=[...t];[I[S-1],I[S]]=[I[S],I[S-1]],r(I)},[t,r]),w=j.useCallback(S=>{if(S>=t.length-1)return;const I=[...t];[I[S],I[S+1]]=[I[S+1],I[S]],r(I)},[t,r]),A=j.useCallback((S,I)=>{y(I),S.dataTransfer.effectAllowed="move"},[]),k=j.useCallback(S=>{S.preventDefault(),S.dataTransfer.dropEffect="move"},[]),T=j.useCallback((S,I)=>{if(S.preventDefault(),!v||v===I)return;const O=t.findIndex(H=>H.id===v),q=t.findIndex(H=>H.id===I);if(O===-1||q===-1)return;const $=[...t],[z]=$.splice(O,1);$.splice(q,0,z),r($),y(null)},[v,t,r]),M=j.useCallback(S=>{const I=new Map,O=new Map,q=[];return S.forEach(($,z)=>{var U,P;const H=$.data;(U=H.nodes)==null||U.forEach(D=>{if(I.has(D.id)){const B=I.get(D.id+"_source");q.push({key:D.id,source1:B||`File ${z}`,source2:$.name,value1:I.get(D.id),value2:D,resolved:"keep2"})}I.set(D.id,D),I.set(D.id+"_source",$.name)}),(P=H.edges)==null||P.forEach(D=>{if(O.has(D.id)){const B=O.get(D.id+"_source");q.push({key:D.id,source1:B||`File ${z}`,source2:$.name,value1:O.get(D.id),value2:D,resolved:"keep2"})}O.set(D.id,D),O.set(D.id+"_source",$.name)})}),Array.from(I.keys()).filter($=>$.endsWith("_source")).forEach($=>I.delete($)),Array.from(O.keys()).filter($=>$.endsWith("_source")).forEach($=>O.delete($)),{nodes:Array.from(I.values()),edges:Array.from(O.values()),conflicts:q}},[]),L=j.useCallback(S=>{const I=new Map,O=[];return S.forEach((q,$)=>{const z=q.data.descriptions||q.data;Object.entries(z).forEach(([H,U])=>{if(I.has(H)){const P=I.get(H+"_source");O.push({key:H,source1:P||`File ${$}`,source2:q.name,value1:I.get(H),value2:U,resolved:"keep2"})}I.set(H,U),I.set(H+"_source",q.name)})}),Array.from(I.keys()).filter(q=>q.endsWith("_source")).forEach(q=>I.delete(q)),{descriptions:Object.fromEntries(I),conflicts:O}},[]),F=j.useCallback(()=>{l(!0),d(""),h("");try{const S=t.filter(H=>H.type==="graph"),I=t.filter(H=>H.type==="descriptions");let O=[],q=[],$={},z=[];if(S.length>0){const H=M(S);O=H.nodes,q=H.edges,z.push(...H.conflicts)}if(I.length>0){const H=L(I);$=H.descriptions,z.push(...H.conflicts)}o(z),z.length>0?h(`Merged data with ${z.length} conflicts resolved automatically`):h("Data merged successfully without conflicts"),e(O,q,$)}catch(S){d(`Merge failed: ${S instanceof Error?S.message:"Unknown error"}`)}finally{l(!1)}},[t,M,L,e]),R=j.useCallback(()=>{const S=t.filter(z=>z.type==="graph"),I=t.filter(z=>z.type==="descriptions"),O=S.reduce((z,H)=>z+(H.nodeCount||0),0),q=S.reduce((z,H)=>z+(H.edgeCount||0),0),$=I.reduce((z,H)=>z+(H.descriptionCount||0),0);return{totalNodes:O,totalEdges:q,totalDescs:$,graphFiles:S.length,descFiles:I.length}},[t])();return p.jsxs(Hm,{className:"w-full",children:[p.jsx(Gm,{children:p.jsxs(Vm,{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ur,{className:"h-5 w-5"}),"Multi-File JSON Loader"]}),t.length>0&&p.jsxs("div",{className:"text-sm font-normal text-muted-foreground",children:[t.length," file",t.length!==1?"s":""," loaded"]})]})}),p.jsxs(Um,{className:"space-y-4",children:[p.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${x?"border-primary bg-primary/5":"border-border"}`,onDragEnter:_,onDragLeave:_,onDragOver:_,onDrop:g,children:[p.jsx(Yr,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop JSON files here, or click to browse"}),p.jsx("input",{type:"file",multiple:!0,accept:".json",onChange:N,className:"hidden",id:"multi-file-input"}),p.jsx("label",{htmlFor:"multi-file-input",children:p.jsx(_e,{variant:"outline",size:"sm",asChild:!0,children:p.jsxs("span",{className:"cursor-pointer",children:[p.jsx(FC,{className:"h-4 w-4 mr-2"}),"Add JSON Files"]})})})]}),t.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-sm font-medium",children:"Loaded Files (Order: First → Last):"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Drag to reorder or use arrows"})]}),p.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map((S,I)=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors cursor-move",draggable:!0,onDragStart:O=>A(O,S.id),onDragOver:k,onDrop:O=>T(O,S.id),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[p.jsx(SC,{className:"h-4 w-4 text-muted-foreground"}),p.jsx("span",{className:"text-xs font-bold text-muted-foreground",children:I+1}),p.jsx(Ur,{className:"h-4 w-4 text-muted-foreground"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium",children:S.name}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Type: ",S.type," |",S.type==="graph"?` ${S.nodeCount} nodes, ${S.edgeCount} edges`:` ${S.descriptionCount} descriptions`]})]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>E(I),disabled:I===0,className:"h-8 w-8 p-0",children:p.jsx(Ly,{className:"h-4 w-4"})}),p.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>w(I),disabled:I===t.length-1,className:"h-8 w-8 p-0",children:p.jsx(Py,{className:"h-4 w-4"})}),p.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>i(S.id),className:"text-destructive hover:text-destructive h-8 w-8 p-0",children:p.jsx(Ou,{className:"h-4 w-4"})})]})]},S.id))})]}),t.length>1&&p.jsxs("div",{className:"grid grid-cols-2 gap-2 p-3 bg-muted/30 rounded-lg",children:[p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Graph files:"}),p.jsx("span",{className:"ml-2 font-medium",children:R.graphFiles})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Description files:"}),p.jsx("span",{className:"ml-2 font-medium",children:R.descFiles})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Total nodes:"}),p.jsx("span",{className:"ml-2 font-medium",children:R.totalNodes})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Total edges:"}),p.jsx("span",{className:"ml-2 font-medium",children:R.totalEdges})]})]}),t.length>0&&p.jsxs(_e,{onClick:F,disabled:u,className:"w-full",children:[p.jsx(TC,{className:"h-4 w-4 mr-2"}),u?"Merging...":"Merge and Load Data"]}),s.length>0&&p.jsxs(Ft,{children:[p.jsx(Tr,{className:"h-4 w-4"}),p.jsxs($t,{children:[p.jsx("p",{className:"font-medium mb-2",children:"Merge Results:"}),p.jsxs("p",{className:"text-sm",children:[s.length," duplicate ",s.length===1?"key was":"keys were"," found and replaced."]}),p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Files lower in the list override data from files higher in the list."}),s.length<=5&&p.jsxs("div",{className:"mt-2 text-xs",children:[p.jsx("p",{className:"font-medium",children:"Replacements:"}),s.map(S=>p.jsxs("p",{className:"text-muted-foreground",children:["• ",S.key,": ",S.source1," → ",S.source2]},S.key))]})]})]}),c&&p.jsxs(Ft,{variant:"destructive",children:[p.jsx(Tr,{className:"h-4 w-4"}),p.jsx($t,{children:c})]}),f&&p.jsxs(Ft,{className:"border-green-500 bg-green-50 dark:bg-green-950/20",children:[p.jsx(qy,{className:"h-4 w-4 text-green-500"}),p.jsx($t,{className:"text-green-700 dark:text-green-400",children:f})]}),t.length>0&&p.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>{a(),o([]),h("All files cleared from memory")},className:"w-full text-destructive hover:text-destructive",children:[p.jsx(GC,{className:"h-4 w-4 mr-2"}),"Clear All Files"]})]})]})},O2=({onDataLoaded:e})=>{const[t,r]=j.useState(""),[n,i]=j.useState(""),[a,s]=j.useState(null),[o,u]=j.useState(!1),[l,c]=j.useState(!1),[d,f]=j.useState(!1),h=j.useCallback(()=>{s(null),u(!1);try{if(!t.trim())throw new Error("Graph data is required");const w=JSON.parse(t);if(!w.nodes||!Array.isArray(w.nodes))throw new Error('Graph data must contain a "nodes" array');if(!w.edges||!Array.isArray(w.edges))throw new Error('Graph data must contain an "edges" array');w.nodes.forEach((k,T)=>{if(!k.id)throw new Error(`Node at index ${T} is missing "id"`);if(!k.type)throw new Error(`Node at index ${T} is missing "type"`);if(!k.position||typeof k.position.x!="number"||typeof k.position.y!="number")throw new Error(`Node at index ${T} has invalid position`);if(!k.data||!k.data.label)throw new Error(`Node at index ${T} is missing data.label`)}),w.edges.forEach((k,T)=>{if(!k.id)throw new Error(`Edge at index ${T} is missing "id"`);if(!k.source)throw new Error(`Edge at index ${T} is missing "source"`);if(!k.target)throw new Error(`Edge at index ${T} is missing "target"`)});let A={};if(n.trim()){const k=JSON.parse(n);if(k.descriptions&&typeof k.descriptions=="object")A=k.descriptions;else if(typeof k=="object")A=k;else throw new Error('Descriptions must be an object or contain a "descriptions" object')}e({nodes:w.nodes,edges:w.edges,descriptions:A}),u(!0),setTimeout(()=>u(!1),3e3)}catch(w){s(w instanceof Error?w.message:"Invalid JSON data")}},[t,n,e]);j.useCallback((w,A)=>{var T;const k=(T=w.target.files)==null?void 0:T[0];k&&x(k,A)},[]);const x=j.useCallback((w,A)=>{if(!w.name.endsWith(".json")){s("Please upload a JSON file");return}const k=new FileReader;k.onload=T=>{var L;const M=(L=T.target)==null?void 0:L.result;try{JSON.parse(M),A==="graph"?(r(M),s(null)):(i(M),s(null))}catch{s(`Invalid JSON in ${w.name}`)}},k.onerror=()=>{s(`Failed to read ${w.name}`)},k.readAsText(w)},[]),m=j.useCallback(w=>{w.preventDefault(),w.stopPropagation()},[]),v=j.useCallback((w,A)=>{w.preventDefault(),w.stopPropagation(),A==="graph"?c(!0):f(!0)},[]),y=j.useCallback((w,A)=>{w.preventDefault(),w.stopPropagation(),A==="graph"?c(!1):f(!1)},[]),_=j.useCallback((w,A)=>{w.preventDefault(),w.stopPropagation(),A==="graph"?c(!1):f(!1);const T=Array.from(w.dataTransfer.files).find(M=>M.name.endsWith(".json"));T?x(T,A):s("Please drop a JSON file")},[x]),g=`{
  "nodes": [
    {
      "id": "node1",
      "type": "custom",
      "position": { "x": 0, "y": 0 },
      "data": {
        "label": "Sample Node",
        "nodeType": "foundation",
        "category": "core",
        "domains": ["Technology"]
      }
    }
  ],
  "edges": [
    {
      "id": "edge1",
      "source": "node1",
      "target": "node2",
      "type": "smoothstep",
      "data": { "edgeType": "dependency" }
    }
  ]
}`,b=`{
  "descriptions": {
    "node1": {
      "description": "This is a sample node description",
      "capabilities": ["Capability 1", "Capability 2"],
      "limitations": ["Limitation 1"],
      "useCases": ["Use case 1"],
      "technicalDetails": "Technical implementation details"
    }
  }
}`,[N,E]=j.useState("paste");return p.jsxs(Hm,{className:"w-full max-w-4xl mx-auto",children:[p.jsxs(Gm,{children:[p.jsx(Vm,{children:"Load JSON Data"}),p.jsx(ib,{children:"Upload or paste your graph data and node descriptions in JSON format"})]}),p.jsxs(Um,{children:[p.jsxs(P2,{defaultValue:"paste",value:N,onValueChange:E,className:"w-full",children:[p.jsxs(L2,{className:"grid w-full grid-cols-2",children:[p.jsx(xd,{value:"paste",children:"Paste JSON"}),p.jsxs(xd,{value:"upload",children:[p.jsx(AC,{className:"w-4 h-4 mr-1"}),"Upload Files"]})]}),p.jsxs(bd,{value:"paste",className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-sm font-medium",children:["Graph Data (Required) ",p.jsx(Ur,{className:"inline w-4 h-4 ml-1"})]}),p.jsxs("div",{onDragOver:m,onDragEnter:w=>v(w,"graph"),onDragLeave:w=>y(w,"graph"),onDrop:w=>_(w,"graph"),className:`relative transition-all duration-200 ${l?"ring-2 ring-primary ring-offset-2 bg-primary/5":""}`,children:[p.jsx(yd,{placeholder:g,value:t,onChange:w=>r(w.target.value),className:"font-mono text-xs h-64"}),l&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-md pointer-events-none",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Yr,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),p.jsx("p",{className:"text-sm font-medium",children:"Drop JSON file here"})]})})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-sm font-medium",children:["Node Descriptions (Optional) ",p.jsx(Ur,{className:"inline w-4 h-4 ml-1"})]}),p.jsxs("div",{onDragOver:m,onDragEnter:w=>v(w,"descriptions"),onDragLeave:w=>y(w,"descriptions"),onDrop:w=>_(w,"descriptions"),className:`relative transition-all duration-200 ${d?"ring-2 ring-primary ring-offset-2 bg-primary/5":""}`,children:[p.jsx(yd,{placeholder:b,value:n,onChange:w=>i(w.target.value),className:"font-mono text-xs h-64"}),d&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-md pointer-events-none",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Yr,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),p.jsx("p",{className:"text-sm font-medium",children:"Drop JSON file here"})]})})]})]})]}),p.jsx(bd,{value:"upload",className:"space-y-4",children:p.jsx(D2,{onDataMerged:(w,A,k)=>{e({nodes:w,edges:A,descriptions:k}),u(!0),setTimeout(()=>u(!1),3e3)}})})]}),a&&p.jsxs(Ft,{variant:"destructive",className:"mt-4",children:[p.jsx(Tr,{className:"h-4 w-4"}),p.jsx($t,{children:a})]}),o&&p.jsx(Ft,{className:"mt-4 border-green-500 text-green-600",children:p.jsx($t,{children:"Data loaded successfully!"})}),N==="paste"&&p.jsx("div",{className:"flex justify-end mt-6",children:p.jsx(_e,{onClick:h,disabled:!t,children:"Load Data"})})]})]})};function F2(e,t,r){const n=[],i=new Map(e.map(c=>[c.id,c])),a=new Map,s=new Map;t.forEach(c=>{a.has(c.source)||a.set(c.source,[]),a.get(c.source).push(c),s.has(c.target)||s.set(c.target,[]),s.get(c.target).push(c)});const o={product:0,application:0,technique:0,foundation:0,combination:0,domain:0,other:0};let u=0;const l=new Set;return e.forEach(c=>{var x,m,v,y,_,g;if(!c||!c.data){n.push({type:"error",category:"invalid_hierarchy",nodeId:(c==null?void 0:c.id)||"unknown",message:`Node ${(c==null?void 0:c.id)||"unknown"} has invalid or missing data`,details:"Node data is null or undefined"});return}const d=((x=c.data)==null?void 0:x.nodeType)||((m=c.data)==null?void 0:m.category)||"other";o[d]=(o[d]||0)+1,r[c.id]?u++:n.push({type:"warning",category:"missing_description",nodeId:c.id,message:`Node "${((v=c.data)==null?void 0:v.label)||c.id}" is missing a description`,details:`Node type: ${d}`}),d==="product"&&((s.get(c.id)||[]).some(E=>{var k,T;const w=i.get(E.source);return(((k=w==null?void 0:w.data)==null?void 0:k.nodeType)||((T=w==null?void 0:w.data)==null?void 0:T.category))==="application"})||n.push({type:"error",category:"invalid_hierarchy",nodeId:c.id,message:`Product node "${((y=c.data)==null?void 0:y.label)||c.id}" is not connected from any application node`,details:"All product nodes must be connected from at least one application node"})),d==="application"&&((s.get(c.id)||[]).some(E=>{var k,T;const w=i.get(E.source),A=((k=w==null?void 0:w.data)==null?void 0:k.nodeType)||((T=w==null?void 0:w.data)==null?void 0:T.category);return A==="technique"||A==="foundation"||A==="combination"})||n.push({type:"error",category:"invalid_hierarchy",nodeId:c.id,message:`Application node "${((_=c.data)==null?void 0:_.label)||c.id}" has no technique or technology connections`,details:"Application nodes must have at least one connection from a technique, foundation, or combination node"}));const f=s.has(c.id),h=a.has(c.id);!f&&!h&&(l.add(c.id),n.push({type:"warning",category:"orphaned_node",nodeId:c.id,message:`Node "${((g=c.data)==null?void 0:g.label)||c.id}" has no connections`,details:"This node is not connected to any other nodes in the graph"}))}),t.forEach(c=>{i.has(c.source)||n.push({type:"error",category:"missing_connection",message:`Edge "${c.id}" references non-existent source node "${c.source}"`}),i.has(c.target)||n.push({type:"error",category:"missing_connection",message:`Edge "${c.id}" references non-existent target node "${c.target}"`})}),n.sort((c,d)=>c.type!==d.type?c.type==="error"?-1:1:c.category.localeCompare(d.category)),{isValid:n.filter(c=>c.type==="error").length===0,issues:n,stats:{totalNodes:e.length,totalEdges:t.length,nodesWithDescriptions:u,productNodes:o.product,applicationNodes:o.application,techniqueNodes:o.technique,foundationNodes:o.foundation,orphanedNodes:l.size}}}function $2(e){return e==="error"?"text-red-500":"text-yellow-500"}function Cr(e){switch(e){case"missing_connection":return"🔗";case"missing_description":return"📝";case"invalid_hierarchy":return"🏗️";case"orphaned_node":return"🏝️";default:return"⚠️"}}const B2=({nodes:e,edges:t,descriptions:r,onNodeClick:n})=>{const[i,a]=j.useState(!1),[s,o]=j.useState("all"),[u,l]=j.useState(!1),c=j.useMemo(()=>F2(e,t,r),[e,t,r]),d=j.useMemo(()=>s==="all"?c.issues:c.issues.filter(g=>g.category===s),[c.issues,s]),f=c.issues.filter(g=>g.type==="error").length,h=c.issues.filter(g=>g.type==="warning").length,x=j.useMemo(()=>{const g={};return c.issues.forEach(b=>{g[b.category]=(g[b.category]||0)+1}),g},[c.issues]),m=()=>f>0?"border-red-500 bg-red-50 dark:bg-red-950/20":h>0?"border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20":"border-green-500 bg-green-50 dark:bg-green-950/20",v=()=>f>0?p.jsx(Tr,{className:"w-4 h-4 text-red-500"}):h>0?p.jsx(Oy,{className:"w-4 h-4 text-yellow-500"}):p.jsx(Dy,{className:"w-4 h-4 text-green-500"}),y=()=>{const g=[];if(g.push("=== AI CAPABILITY MAP VALIDATION REPORT ==="),g.push(`Generated: ${new Date().toLocaleString()}`),g.push(""),g.push("SUMMARY"),g.push("-------"),g.push(`Total Nodes: ${c.stats.totalNodes}`),g.push(`Total Edges: ${c.stats.totalEdges}`),g.push(`Nodes with Descriptions: ${c.stats.nodesWithDescriptions}/${c.stats.totalNodes}`),g.push(`Orphaned Nodes: ${c.stats.orphanedNodes}`),g.push(""),g.push(`Errors: ${f}`),g.push(`Warnings: ${h}`),g.push(""),c.issues.reduce((b,N)=>(b[N.category]||(b[N.category]=[]),b[N.category].push(N),b),{}),c.issues.length>0){g.push("ISSUES"),g.push("------");const b=c.issues.filter(E=>E.type==="error");b.length>0&&(g.push(""),g.push("### ERRORS ###"),b.forEach((E,w)=>{g.push(`${w+1}. [${Cr(E.category)}] ${E.message}`),E.details&&g.push(`   Details: ${E.details}`),E.nodeId&&g.push(`   Node ID: ${E.nodeId}`)}));const N=c.issues.filter(E=>E.type==="warning");N.length>0&&(g.push(""),g.push("### WARNINGS ###"),N.forEach((E,w)=>{g.push(`${w+1}. [${Cr(E.category)}] ${E.message}`),E.details&&g.push(`   Details: ${E.details}`),E.nodeId&&g.push(`   Node ID: ${E.nodeId}`)}))}else g.push("✅ All validation checks passed!");return g.push(""),g.push("=== END OF REPORT ==="),g.join(`
`)},_=async()=>{try{const g=y();await navigator.clipboard.writeText(g),l(!0),setTimeout(()=>l(!1),2e3)}catch(g){console.error("Failed to copy:",g)}};return p.jsxs("div",{className:`fixed top-4 right-4 max-w-md bg-card border-2 rounded-lg shadow-xl z-40 ${m()}`,children:[p.jsx("div",{className:"p-4",children:p.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 transition-colors rounded p-2 -m-2",onClick:()=>a(!i),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[v(),p.jsx("span",{className:"font-semibold whitespace-nowrap",children:"Data Validation"}),(f>0||h>0)&&p.jsxs("div",{className:"flex gap-1",children:[f>0&&p.jsxs("span",{className:"text-xs px-2 py-0.5 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 rounded-full whitespace-nowrap",children:[f," error",f!==1?"s":""]}),h>0&&p.jsxs("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 rounded-full whitespace-nowrap",children:[h," warning",h!==1?"s":""]})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(_e,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:g=>{g.stopPropagation(),_()},title:"Copy validation report to clipboard",children:u?p.jsxs(p.Fragment,{children:[p.jsx(qy,{className:"w-3 h-3 mr-1"}),p.jsx("span",{className:"text-xs",children:"Copied!"})]}):p.jsxs(p.Fragment,{children:[p.jsx(ob,{className:"w-3 h-3 mr-1"}),p.jsx("span",{className:"text-xs",children:"Copy Report"})]})}),i?p.jsx(Py,{className:"w-4 h-4"}):p.jsx(Ly,{className:"w-4 h-4"})]})]})}),i&&p.jsxs("div",{className:"border-t border-border",children:[p.jsx("div",{className:"p-4 bg-muted/30",children:p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[p.jsxs("div",{children:["Total Nodes: ",p.jsx("span",{className:"font-semibold",children:c.stats.totalNodes})]}),p.jsxs("div",{children:["Total Edges: ",p.jsx("span",{className:"font-semibold",children:c.stats.totalEdges})]}),p.jsxs("div",{children:["With Descriptions: ",p.jsxs("span",{className:"font-semibold",children:[c.stats.nodesWithDescriptions,"/",c.stats.totalNodes]})]}),p.jsxs("div",{children:["Orphaned Nodes: ",p.jsx("span",{className:"font-semibold",children:c.stats.orphanedNodes})]}),p.jsxs("div",{children:["Product Nodes: ",p.jsx("span",{className:"font-semibold",children:c.stats.productNodes})]}),p.jsxs("div",{children:["Application Nodes: ",p.jsx("span",{className:"font-semibold",children:c.stats.applicationNodes})]})]})}),c.issues.length>0&&p.jsx("div",{className:"p-4 border-t border-border",children:p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-1 text-xs rounded transition-colors ${s==="all"?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:["All (",c.issues.length,")"]}),Object.entries(x).map(([g,b])=>p.jsxs("button",{onClick:()=>o(g),className:`px-3 py-1 text-xs rounded transition-colors ${s===g?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:[Cr(g)," ",g.replace("_"," ")," (",b,")"]},g))]})}),p.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.length===0?p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:c.issues.length===0?"✅ All validation checks passed!":"No issues in this category"}):p.jsx("div",{className:"p-4 space-y-2",children:d.map((g,b)=>p.jsx("div",{className:"p-3 bg-background rounded-lg border text-sm space-y-1",children:p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[p.jsx("span",{className:"mt-0.5",children:Cr(g.category)}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:`font-medium ${$2(g.type)}`,children:g.message}),g.details&&p.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:g.details})]})]}),g.nodeId&&n&&p.jsx(_e,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>n(g.nodeId),children:"Go to node"})]})},b))})})]})]})};function Bu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bn,_d;function z2(){if(_d)return Bn;_d=1;function e(){this.__data__=[],this.size=0}return Bn=e,Bn}var zn,wd;function At(){if(wd)return zn;wd=1;function e(t,r){return t===r||t!==t&&r!==r}return zn=e,zn}var Hn,Nd;function fn(){if(Nd)return Hn;Nd=1;var e=At();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return Hn=t,Hn}var Gn,Ed;function H2(){if(Ed)return Gn;Ed=1;var e=fn(),t=Array.prototype,r=t.splice;function n(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():r.call(a,s,1),--this.size,!0}return Gn=n,Gn}var Vn,Sd;function G2(){if(Sd)return Vn;Sd=1;var e=fn();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return Vn=t,Vn}var Un,Cd;function V2(){if(Cd)return Un;Cd=1;var e=fn();function t(r){return e(this.__data__,r)>-1}return Un=t,Un}var Yn,Ad;function U2(){if(Ad)return Yn;Ad=1;var e=fn();function t(r,n){var i=this.__data__,a=e(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return Yn=t,Yn}var Wn,kd;function hn(){if(kd)return Wn;kd=1;var e=z2(),t=H2(),r=G2(),n=V2(),i=U2();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Wn=a,Wn}var Xn,Id;function Y2(){if(Id)return Xn;Id=1;var e=hn();function t(){this.__data__=new e,this.size=0}return Xn=t,Xn}var Kn,jd;function W2(){if(jd)return Kn;jd=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Kn=e,Kn}var Zn,Rd;function X2(){if(Rd)return Zn;Rd=1;function e(t){return this.__data__.get(t)}return Zn=e,Zn}var Jn,Md;function K2(){if(Md)return Jn;Md=1;function e(t){return this.__data__.has(t)}return Jn=e,Jn}var Qn,Td;function s0(){if(Td)return Qn;Td=1;var e=typeof pr=="object"&&pr&&pr.Object===Object&&pr;return Qn=e,Qn}var ei,qd;function Ce(){if(qd)return ei;qd=1;var e=s0(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return ei=r,ei}var ti,Pd;function kt(){if(Pd)return ti;Pd=1;var e=Ce(),t=e.Symbol;return ti=t,ti}var ri,Ld;function Z2(){if(Ld)return ri;Ld=1;var e=kt(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=r.call(s,i),u=s[i];try{s[i]=void 0;var l=!0}catch{}var c=n.call(s);return l&&(o?s[i]=u:delete s[i]),c}return ri=a,ri}var ni,Dd;function J2(){if(Dd)return ni;Dd=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return ni=r,ni}var ii,Od;function ct(){if(Od)return ii;Od=1;var e=kt(),t=Z2(),r=J2(),n="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:n:a&&a in Object(o)?t(o):r(o)}return ii=s,ii}var ai,Fd;function ve(){if(Fd)return ai;Fd=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return ai=e,ai}var si,$d;function sr(){if($d)return si;$d=1;var e=ct(),t=ve(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var u=e(o);return u==n||u==i||u==r||u==a}return si=s,si}var oi,Bd;function Q2(){if(Bd)return oi;Bd=1;var e=Ce(),t=e["__core-js_shared__"];return oi=t,oi}var ci,zd;function eA(){if(zd)return ci;zd=1;var e=Q2(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return ci=r,ci}var ui,Hd;function o0(){if(Hd)return ui;Hd=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return ui=r,ui}var li,Gd;function tA(){if(Gd)return li;Gd=1;var e=sr(),t=eA(),r=ve(),n=o0(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!r(f)||t(f))return!1;var h=e(f)?c:a;return h.test(n(f))}return li=d,li}var di,Vd;function rA(){if(Vd)return di;Vd=1;function e(t,r){return t==null?void 0:t[r]}return di=e,di}var fi,Ud;function ut(){if(Ud)return fi;Ud=1;var e=tA(),t=rA();function r(n,i){var a=t(n,i);return e(a)?a:void 0}return fi=r,fi}var hi,Yd;function zu(){if(Yd)return hi;Yd=1;var e=ut(),t=Ce(),r=e(t,"Map");return hi=r,hi}var pi,Wd;function pn(){if(Wd)return pi;Wd=1;var e=ut(),t=e(Object,"create");return pi=t,pi}var gi,Xd;function nA(){if(Xd)return gi;Xd=1;var e=pn();function t(){this.__data__=e?e(null):{},this.size=0}return gi=t,gi}var mi,Kd;function iA(){if(Kd)return mi;Kd=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return mi=e,mi}var vi,Zd;function aA(){if(Zd)return vi;Zd=1;var e=pn(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return n.call(s,a)?s[a]:void 0}return vi=i,vi}var yi,Jd;function sA(){if(Jd)return yi;Jd=1;var e=pn(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var a=this.__data__;return e?a[i]!==void 0:r.call(a,i)}return yi=n,yi}var xi,Qd;function oA(){if(Qd)return xi;Qd=1;var e=pn(),t="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=e&&i===void 0?t:i,this}return xi=r,xi}var bi,ef;function cA(){if(ef)return bi;ef=1;var e=nA(),t=iA(),r=aA(),n=sA(),i=oA();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,bi=a,bi}var _i,tf;function uA(){if(tf)return _i;tf=1;var e=cA(),t=hn(),r=zu();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return _i=n,_i}var wi,rf;function lA(){if(rf)return wi;rf=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return wi=e,wi}var Ni,nf;function gn(){if(nf)return Ni;nf=1;var e=lA();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Ni=t,Ni}var Ei,af;function dA(){if(af)return Ei;af=1;var e=gn();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Ei=t,Ei}var Si,sf;function fA(){if(sf)return Si;sf=1;var e=gn();function t(r){return e(this,r).get(r)}return Si=t,Si}var Ci,of;function hA(){if(of)return Ci;of=1;var e=gn();function t(r){return e(this,r).has(r)}return Ci=t,Ci}var Ai,cf;function pA(){if(cf)return Ai;cf=1;var e=gn();function t(r,n){var i=e(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return Ai=t,Ai}var ki,uf;function Hu(){if(uf)return ki;uf=1;var e=uA(),t=dA(),r=fA(),n=hA(),i=pA();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,ki=a,ki}var Ii,lf;function gA(){if(lf)return Ii;lf=1;var e=hn(),t=zu(),r=Hu(),n=200;function i(a,s){var o=this.__data__;if(o instanceof e){var u=o.__data__;if(!t||u.length<n-1)return u.push([a,s]),this.size=++o.size,this;o=this.__data__=new r(u)}return o.set(a,s),this.size=o.size,this}return Ii=i,Ii}var ji,df;function mn(){if(df)return ji;df=1;var e=hn(),t=Y2(),r=W2(),n=X2(),i=K2(),a=gA();function s(o){var u=this.__data__=new e(o);this.size=u.size}return s.prototype.clear=t,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,ji=s,ji}var Ri,ff;function Gu(){if(ff)return Ri;ff=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return Ri=e,Ri}var Mi,hf;function c0(){if(hf)return Mi;hf=1;var e=ut(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Mi=t,Mi}var Ti,pf;function vn(){if(pf)return Ti;pf=1;var e=c0();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return Ti=t,Ti}var qi,gf;function yn(){if(gf)return qi;gf=1;var e=vn(),t=At(),r=Object.prototype,n=r.hasOwnProperty;function i(a,s,o){var u=a[s];(!(n.call(a,s)&&t(u,o))||o===void 0&&!(s in a))&&e(a,s,o)}return qi=i,qi}var Pi,mf;function or(){if(mf)return Pi;mf=1;var e=yn(),t=vn();function r(n,i,a,s){var o=!a;a||(a={});for(var u=-1,l=i.length;++u<l;){var c=i[u],d=s?s(a[c],n[c],c,a,n):void 0;d===void 0&&(d=n[c]),o?t(a,c,d):e(a,c,d)}return a}return Pi=r,Pi}var Li,vf;function mA(){if(vf)return Li;vf=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return Li=e,Li}var Di,yf;function qe(){if(yf)return Di;yf=1;function e(t){return t!=null&&typeof t=="object"}return Di=e,Di}var Oi,xf;function vA(){if(xf)return Oi;xf=1;var e=ct(),t=qe(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return Oi=n,Oi}var Fi,bf;function cr(){if(bf)return Fi;bf=1;var e=vA(),t=qe(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return Fi=a,Fi}var $i,_f;function le(){if(_f)return $i;_f=1;var e=Array.isArray;return $i=e,$i}var Lt={exports:{}},Bi,wf;function yA(){if(wf)return Bi;wf=1;function e(){return!1}return Bi=e,Bi}Lt.exports;var Nf;function It(){return Nf||(Nf=1,function(e,t){var r=Ce(),n=yA(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?r.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||n;e.exports=l}(Lt,Lt.exports)),Lt.exports}var zi,Ef;function xn(){if(Ef)return zi;Ef=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return zi=r,zi}var Hi,Sf;function Vu(){if(Sf)return Hi;Sf=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Hi=t,Hi}var Gi,Cf;function xA(){if(Cf)return Gi;Cf=1;var e=ct(),t=Vu(),r=qe(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",x="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",_="[object Float32Array]",g="[object Float64Array]",b="[object Int8Array]",N="[object Int16Array]",E="[object Int32Array]",w="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",T="[object Uint32Array]",M={};M[_]=M[g]=M[b]=M[N]=M[E]=M[w]=M[A]=M[k]=M[T]=!0,M[n]=M[i]=M[v]=M[a]=M[y]=M[s]=M[o]=M[u]=M[l]=M[c]=M[d]=M[f]=M[h]=M[x]=M[m]=!1;function L(F){return r(F)&&t(F.length)&&!!M[e(F)]}return Gi=L,Gi}var Vi,Af;function bn(){if(Af)return Vi;Af=1;function e(t){return function(r){return t(r)}}return Vi=e,Vi}var Dt={exports:{}};Dt.exports;var kf;function Uu(){return kf||(kf=1,function(e,t){var r=s0(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,s=a&&r.process,o=function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Dt,Dt.exports)),Dt.exports}var Ui,If;function ur(){if(If)return Ui;If=1;var e=xA(),t=bn(),r=Uu(),n=r&&r.isTypedArray,i=n?t(n):e;return Ui=i,Ui}var Yi,jf;function u0(){if(jf)return Yi;jf=1;var e=mA(),t=cr(),r=le(),n=It(),i=xn(),a=ur(),s=Object.prototype,o=s.hasOwnProperty;function u(l,c){var d=r(l),f=!d&&t(l),h=!d&&!f&&n(l),x=!d&&!f&&!h&&a(l),m=d||f||h||x,v=m?e(l.length,String):[],y=v.length;for(var _ in l)(c||o.call(l,_))&&!(m&&(_=="length"||h&&(_=="offset"||_=="parent")||x&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,y)))&&v.push(_);return v}return Yi=u,Yi}var Wi,Rf;function _n(){if(Rf)return Wi;Rf=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return Wi=t,Wi}var Xi,Mf;function l0(){if(Mf)return Xi;Mf=1;function e(t,r){return function(n){return t(r(n))}}return Xi=e,Xi}var Ki,Tf;function bA(){if(Tf)return Ki;Tf=1;var e=l0(),t=e(Object.keys,Object);return Ki=t,Ki}var Zi,qf;function Yu(){if(qf)return Zi;qf=1;var e=_n(),t=bA(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))n.call(a,o)&&o!="constructor"&&s.push(o);return s}return Zi=i,Zi}var Ji,Pf;function Ve(){if(Pf)return Ji;Pf=1;var e=sr(),t=Vu();function r(n){return n!=null&&t(n.length)&&!e(n)}return Ji=r,Ji}var Qi,Lf;function Qe(){if(Lf)return Qi;Lf=1;var e=u0(),t=Yu(),r=Ve();function n(i){return r(i)?e(i):t(i)}return Qi=n,Qi}var ea,Df;function _A(){if(Df)return ea;Df=1;var e=or(),t=Qe();function r(n,i){return n&&e(i,t(i),n)}return ea=r,ea}var ta,Of;function wA(){if(Of)return ta;Of=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return ta=e,ta}var ra,Ff;function NA(){if(Ff)return ra;Ff=1;var e=ve(),t=_n(),r=wA(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!e(s))return r(s);var o=t(s),u=[];for(var l in s)l=="constructor"&&(o||!i.call(s,l))||u.push(l);return u}return ra=a,ra}var na,$f;function lt(){if($f)return na;$f=1;var e=u0(),t=NA(),r=Ve();function n(i){return r(i)?e(i,!0):t(i)}return na=n,na}var ia,Bf;function EA(){if(Bf)return ia;Bf=1;var e=or(),t=lt();function r(n,i){return n&&e(i,t(i),n)}return ia=r,ia}var Ot={exports:{}};Ot.exports;var zf;function d0(){return zf||(zf=1,function(e,t){var r=Ce(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,s=a?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var d=l.length,f=o?o(d):new l.constructor(d);return l.copy(f),f}e.exports=u}(Ot,Ot.exports)),Ot.exports}var aa,Hf;function f0(){if(Hf)return aa;Hf=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return aa=e,aa}var sa,Gf;function h0(){if(Gf)return sa;Gf=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=0,s=[];++n<i;){var o=t[n];r(o,n,t)&&(s[a++]=o)}return s}return sa=e,sa}var oa,Vf;function p0(){if(Vf)return oa;Vf=1;function e(){return[]}return oa=e,oa}var ca,Uf;function Wu(){if(Uf)return ca;Uf=1;var e=h0(),t=p0(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return n.call(s,o)}))}:t;return ca=a,ca}var ua,Yf;function SA(){if(Yf)return ua;Yf=1;var e=or(),t=Wu();function r(n,i){return e(n,t(n),i)}return ua=r,ua}var la,Wf;function Xu(){if(Wf)return la;Wf=1;function e(t,r){for(var n=-1,i=r.length,a=t.length;++n<i;)t[a+n]=r[n];return t}return la=e,la}var da,Xf;function wn(){if(Xf)return da;Xf=1;var e=l0(),t=e(Object.getPrototypeOf,Object);return da=t,da}var fa,Kf;function g0(){if(Kf)return fa;Kf=1;var e=Xu(),t=wn(),r=Wu(),n=p0(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,r(s)),s=t(s);return o}:n;return fa=a,fa}var ha,Zf;function CA(){if(Zf)return ha;Zf=1;var e=or(),t=g0();function r(n,i){return e(n,t(n),i)}return ha=r,ha}var pa,Jf;function m0(){if(Jf)return pa;Jf=1;var e=Xu(),t=le();function r(n,i,a){var s=i(n);return t(n)?s:e(s,a(n))}return pa=r,pa}var ga,Qf;function v0(){if(Qf)return ga;Qf=1;var e=m0(),t=Wu(),r=Qe();function n(i){return e(i,r,t)}return ga=n,ga}var ma,eh;function AA(){if(eh)return ma;eh=1;var e=m0(),t=g0(),r=lt();function n(i){return e(i,r,t)}return ma=n,ma}var va,th;function kA(){if(th)return va;th=1;var e=ut(),t=Ce(),r=e(t,"DataView");return va=r,va}var ya,rh;function IA(){if(rh)return ya;rh=1;var e=ut(),t=Ce(),r=e(t,"Promise");return ya=r,ya}var xa,nh;function y0(){if(nh)return xa;nh=1;var e=ut(),t=Ce(),r=e(t,"Set");return xa=r,xa}var ba,ih;function jA(){if(ih)return ba;ih=1;var e=ut(),t=Ce(),r=e(t,"WeakMap");return ba=r,ba}var _a,ah;function jt(){if(ah)return _a;ah=1;var e=kA(),t=zu(),r=IA(),n=y0(),i=jA(),a=ct(),s=o0(),o="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=s(e),x=s(t),m=s(r),v=s(n),y=s(i),_=a;return(e&&_(new e(new ArrayBuffer(1)))!=f||t&&_(new t)!=o||r&&_(r.resolve())!=l||n&&_(new n)!=c||i&&_(new i)!=d)&&(_=function(g){var b=a(g),N=b==u?g.constructor:void 0,E=N?s(N):"";if(E)switch(E){case h:return f;case x:return o;case m:return l;case v:return c;case y:return d}return b}),_a=_,_a}var wa,sh;function RA(){if(sh)return wa;sh=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return wa=r,wa}var Na,oh;function x0(){if(oh)return Na;oh=1;var e=Ce(),t=e.Uint8Array;return Na=t,Na}var Ea,ch;function Ku(){if(ch)return Ea;ch=1;var e=x0();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return Ea=t,Ea}var Sa,uh;function MA(){if(uh)return Sa;uh=1;var e=Ku();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return Sa=t,Sa}var Ca,lh;function TA(){if(lh)return Ca;lh=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return Ca=t,Ca}var Aa,dh;function qA(){if(dh)return Aa;dh=1;var e=kt(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return Aa=n,Aa}var ka,fh;function b0(){if(fh)return ka;fh=1;var e=Ku();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return ka=t,ka}var Ia,hh;function PA(){if(hh)return Ia;hh=1;var e=Ku(),t=MA(),r=TA(),n=qA(),i=b0(),a="[object Boolean]",s="[object Date]",o="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",x="[object DataView]",m="[object Float32Array]",v="[object Float64Array]",y="[object Int8Array]",_="[object Int16Array]",g="[object Int32Array]",b="[object Uint8Array]",N="[object Uint8ClampedArray]",E="[object Uint16Array]",w="[object Uint32Array]";function A(k,T,M){var L=k.constructor;switch(T){case h:return e(k);case a:case s:return new L(+k);case x:return t(k,M);case m:case v:case y:case _:case g:case b:case N:case E:case w:return i(k,M);case o:return new L;case u:case d:return new L(k);case l:return r(k);case c:return new L;case f:return n(k)}}return Ia=A,Ia}var ja,ph;function _0(){if(ph)return ja;ph=1;var e=ve(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}();return ja=r,ja}var Ra,gh;function w0(){if(gh)return Ra;gh=1;var e=_0(),t=wn(),r=_n();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return Ra=n,Ra}var Ma,mh;function LA(){if(mh)return Ma;mh=1;var e=jt(),t=qe(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return Ma=n,Ma}var Ta,vh;function DA(){if(vh)return Ta;vh=1;var e=LA(),t=bn(),r=Uu(),n=r&&r.isMap,i=n?t(n):e;return Ta=i,Ta}var qa,yh;function OA(){if(yh)return qa;yh=1;var e=jt(),t=qe(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return qa=n,qa}var Pa,xh;function FA(){if(xh)return Pa;xh=1;var e=OA(),t=bn(),r=Uu(),n=r&&r.isSet,i=n?t(n):e;return Pa=i,Pa}var La,bh;function N0(){if(bh)return La;bh=1;var e=mn(),t=Gu(),r=yn(),n=_A(),i=EA(),a=d0(),s=f0(),o=SA(),u=CA(),l=v0(),c=AA(),d=jt(),f=RA(),h=PA(),x=w0(),m=le(),v=It(),y=DA(),_=ve(),g=FA(),b=Qe(),N=lt(),E=1,w=2,A=4,k="[object Arguments]",T="[object Array]",M="[object Boolean]",L="[object Date]",F="[object Error]",C="[object Function]",R="[object GeneratorFunction]",S="[object Map]",I="[object Number]",O="[object Object]",q="[object RegExp]",$="[object Set]",z="[object String]",H="[object Symbol]",U="[object WeakMap]",P="[object ArrayBuffer]",D="[object DataView]",B="[object Float32Array]",G="[object Float64Array]",V="[object Int8Array]",Y="[object Int16Array]",Z="[object Int32Array]",ee="[object Uint8Array]",Q="[object Uint8ClampedArray]",K="[object Uint16Array]",W="[object Uint32Array]",X={};X[k]=X[T]=X[P]=X[D]=X[M]=X[L]=X[B]=X[G]=X[V]=X[Y]=X[Z]=X[S]=X[I]=X[O]=X[q]=X[$]=X[z]=X[H]=X[ee]=X[Q]=X[K]=X[W]=!0,X[F]=X[C]=X[U]=!1;function ne(te,pe,xe,ft,Pe,de){var ce,Ye=pe&E,Le=pe&w,We=pe&A;if(xe&&(ce=Pe?xe(te,ft,Pe,de):xe(te)),ce!==void 0)return ce;if(!_(te))return te;var Xe=m(te);if(Xe){if(ce=f(te),!Ye)return s(te,ce)}else{var De=d(te),dr=De==C||De==R;if(v(te))return a(te,Ye);if(De==O||De==k||dr&&!Pe){if(ce=Le||dr?{}:x(te),!Ye)return Le?u(te,i(ce,te)):o(te,n(ce,te))}else{if(!X[De])return Pe?te:{};ce=h(te,De,Ye)}}de||(de=new e);var ht=de.get(te);if(ht)return ht;de.set(te,ce),g(te)?te.forEach(function(Ae){ce.add(ne(Ae,pe,xe,Ae,te,de))}):y(te)&&te.forEach(function(Ae,Oe){ce.set(Oe,ne(Ae,pe,xe,Oe,te,de))});var In=We?Le?c:l:Le?N:b,fr=Xe?void 0:In(te);return t(fr||te,function(Ae,Oe){fr&&(Oe=Ae,Ae=te[Oe]),r(ce,Oe,ne(Ae,pe,xe,Oe,te,de))}),ce}return La=ne,La}var Da,_h;function $A(){if(_h)return Da;_h=1;var e=N0(),t=4;function r(n){return e(n,t)}return Da=r,Da}var Oa,wh;function Zu(){if(wh)return Oa;wh=1;function e(t){return function(){return t}}return Oa=e,Oa}var Fa,Nh;function BA(){if(Nh)return Fa;Nh=1;function e(t){return function(r,n,i){for(var a=-1,s=Object(r),o=i(r),u=o.length;u--;){var l=o[t?u:++a];if(n(s[l],l,s)===!1)break}return r}}return Fa=e,Fa}var $a,Eh;function Ju(){if(Eh)return $a;Eh=1;var e=BA(),t=e();return $a=t,$a}var Ba,Sh;function Qu(){if(Sh)return Ba;Sh=1;var e=Ju(),t=Qe();function r(n,i){return n&&e(n,i,t)}return Ba=r,Ba}var za,Ch;function zA(){if(Ch)return za;Ch=1;var e=Ve();function t(r,n){return function(i,a){if(i==null)return i;if(!e(i))return r(i,a);for(var s=i.length,o=n?s:-1,u=Object(i);(n?o--:++o<s)&&a(u[o],o,u)!==!1;);return i}}return za=t,za}var Ha,Ah;function Nn(){if(Ah)return Ha;Ah=1;var e=Qu(),t=zA(),r=t(e);return Ha=r,Ha}var Ga,kh;function dt(){if(kh)return Ga;kh=1;function e(t){return t}return Ga=e,Ga}var Va,Ih;function E0(){if(Ih)return Va;Ih=1;var e=dt();function t(r){return typeof r=="function"?r:e}return Va=t,Va}var Ua,jh;function S0(){if(jh)return Ua;jh=1;var e=Gu(),t=Nn(),r=E0(),n=le();function i(a,s){var o=n(a)?e:t;return o(a,r(s))}return Ua=i,Ua}var Ya,Rh;function C0(){return Rh||(Rh=1,Ya=S0()),Ya}var Wa,Mh;function HA(){if(Mh)return Wa;Mh=1;var e=Nn();function t(r,n){var i=[];return e(r,function(a,s,o){n(a,s,o)&&i.push(a)}),i}return Wa=t,Wa}var Xa,Th;function GA(){if(Th)return Xa;Th=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Xa=t,Xa}var Ka,qh;function VA(){if(qh)return Ka;qh=1;function e(t){return this.__data__.has(t)}return Ka=e,Ka}var Za,Ph;function A0(){if(Ph)return Za;Ph=1;var e=Hu(),t=GA(),r=VA();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,Za=n,Za}var Ja,Lh;function UA(){if(Lh)return Ja;Lh=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return Ja=e,Ja}var Qa,Dh;function k0(){if(Dh)return Qa;Dh=1;function e(t,r){return t.has(r)}return Qa=e,Qa}var es,Oh;function I0(){if(Oh)return es;Oh=1;var e=A0(),t=UA(),r=k0(),n=1,i=2;function a(s,o,u,l,c,d){var f=u&n,h=s.length,x=o.length;if(h!=x&&!(f&&x>h))return!1;var m=d.get(s),v=d.get(o);if(m&&v)return m==o&&v==s;var y=-1,_=!0,g=u&i?new e:void 0;for(d.set(s,o),d.set(o,s);++y<h;){var b=s[y],N=o[y];if(l)var E=f?l(N,b,y,o,s,d):l(b,N,y,s,o,d);if(E!==void 0){if(E)continue;_=!1;break}if(g){if(!t(o,function(w,A){if(!r(g,A)&&(b===w||c(b,w,u,l,d)))return g.push(A)})){_=!1;break}}else if(!(b===N||c(b,N,u,l,d))){_=!1;break}}return d.delete(s),d.delete(o),_}return es=a,es}var ts,Fh;function YA(){if(Fh)return ts;Fh=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,a){n[++r]=[a,i]}),n}return ts=e,ts}var rs,$h;function el(){if($h)return rs;$h=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return rs=e,rs}var ns,Bh;function WA(){if(Bh)return ns;Bh=1;var e=kt(),t=x0(),r=At(),n=I0(),i=YA(),a=el(),s=1,o=2,u="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",x="[object Set]",m="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",_="[object DataView]",g=e?e.prototype:void 0,b=g?g.valueOf:void 0;function N(E,w,A,k,T,M,L){switch(A){case _:if(E.byteLength!=w.byteLength||E.byteOffset!=w.byteOffset)return!1;E=E.buffer,w=w.buffer;case y:return!(E.byteLength!=w.byteLength||!M(new t(E),new t(w)));case u:case l:case f:return r(+E,+w);case c:return E.name==w.name&&E.message==w.message;case h:case m:return E==w+"";case d:var F=i;case x:var C=k&s;if(F||(F=a),E.size!=w.size&&!C)return!1;var R=L.get(E);if(R)return R==w;k|=o,L.set(E,w);var S=n(F(E),F(w),k,T,M,L);return L.delete(E),S;case v:if(b)return b.call(E)==b.call(w)}return!1}return ns=N,ns}var is,zh;function XA(){if(zh)return is;zh=1;var e=v0(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,s,o,u,l,c){var d=o&t,f=e(a),h=f.length,x=e(s),m=x.length;if(h!=m&&!d)return!1;for(var v=h;v--;){var y=f[v];if(!(d?y in s:n.call(s,y)))return!1}var _=c.get(a),g=c.get(s);if(_&&g)return _==s&&g==a;var b=!0;c.set(a,s),c.set(s,a);for(var N=d;++v<h;){y=f[v];var E=a[y],w=s[y];if(u)var A=d?u(w,E,y,s,a,c):u(E,w,y,a,s,c);if(!(A===void 0?E===w||l(E,w,o,u,c):A)){b=!1;break}N||(N=y=="constructor")}if(b&&!N){var k=a.constructor,T=s.constructor;k!=T&&"constructor"in a&&"constructor"in s&&!(typeof k=="function"&&k instanceof k&&typeof T=="function"&&T instanceof T)&&(b=!1)}return c.delete(a),c.delete(s),b}return is=i,is}var as,Hh;function KA(){if(Hh)return as;Hh=1;var e=mn(),t=I0(),r=WA(),n=XA(),i=jt(),a=le(),s=It(),o=ur(),u=1,l="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function x(m,v,y,_,g,b){var N=a(m),E=a(v),w=N?c:i(m),A=E?c:i(v);w=w==l?d:w,A=A==l?d:A;var k=w==d,T=A==d,M=w==A;if(M&&s(m)){if(!s(v))return!1;N=!0,k=!1}if(M&&!k)return b||(b=new e),N||o(m)?t(m,v,y,_,g,b):r(m,v,w,y,_,g,b);if(!(y&u)){var L=k&&h.call(m,"__wrapped__"),F=T&&h.call(v,"__wrapped__");if(L||F){var C=L?m.value():m,R=F?v.value():v;return b||(b=new e),g(C,R,y,_,b)}}return M?(b||(b=new e),n(m,v,y,_,g,b)):!1}return as=x,as}var ss,Gh;function j0(){if(Gh)return ss;Gh=1;var e=KA(),t=qe();function r(n,i,a,s,o){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,a,s,r,o)}return ss=r,ss}var os,Vh;function ZA(){if(Vh)return os;Vh=1;var e=mn(),t=j0(),r=1,n=2;function i(a,s,o,u){var l=o.length,c=l,d=!u;if(a==null)return!c;for(a=Object(a);l--;){var f=o[l];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++l<c;){f=o[l];var h=f[0],x=a[h],m=f[1];if(d&&f[2]){if(x===void 0&&!(h in a))return!1}else{var v=new e;if(u)var y=u(x,m,h,a,s,v);if(!(y===void 0?t(m,x,r|n,u,v):y))return!1}}return!0}return os=i,os}var cs,Uh;function R0(){if(Uh)return cs;Uh=1;var e=ve();function t(r){return r===r&&!e(r)}return cs=t,cs}var us,Yh;function JA(){if(Yh)return us;Yh=1;var e=R0(),t=Qe();function r(n){for(var i=t(n),a=i.length;a--;){var s=i[a],o=n[s];i[a]=[s,o,e(o)]}return i}return us=r,us}var ls,Wh;function M0(){if(Wh)return ls;Wh=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return ls=e,ls}var ds,Xh;function QA(){if(Xh)return ds;Xh=1;var e=ZA(),t=JA(),r=M0();function n(i){var a=t(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return ds=n,ds}var fs,Kh;function Rt(){if(Kh)return fs;Kh=1;var e=ct(),t=qe(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return fs=n,fs}var hs,Zh;function tl(){if(Zh)return hs;Zh=1;var e=le(),t=Rt(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:n.test(a)||!r.test(a)||s!=null&&a in Object(s)}return hs=i,hs}var ps,Jh;function ek(){if(Jh)return ps;Jh=1;var e=Hu(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],u=a.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return a.cache=u.set(o,l)||u,l};return a.cache=new(r.Cache||e),a}return r.Cache=e,ps=r,ps}var gs,Qh;function tk(){if(Qh)return gs;Qh=1;var e=ek(),t=500;function r(n){var i=e(n,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return gs=r,gs}var ms,ep;function rk(){if(ep)return ms;ep=1;var e=tk(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,u,l){a.push(u?l.replace(r,"$1"):o||s)}),a});return ms=n,ms}var vs,tp;function En(){if(tp)return vs;tp=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=Array(i);++n<i;)a[n]=r(t[n],n,t);return a}return vs=e,vs}var ys,rp;function nk(){if(rp)return ys;rp=1;var e=kt(),t=En(),r=le(),n=Rt(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return t(o,s)+"";if(n(o))return a?a.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return ys=s,ys}var xs,np;function T0(){if(np)return xs;np=1;var e=nk();function t(r){return r==null?"":e(r)}return xs=t,xs}var bs,ip;function Sn(){if(ip)return bs;ip=1;var e=le(),t=tl(),r=rk(),n=T0();function i(a,s){return e(a)?a:t(a,s)?[a]:r(n(a))}return bs=i,bs}var _s,ap;function lr(){if(ap)return _s;ap=1;var e=Rt();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return _s=t,_s}var ws,sp;function Cn(){if(sp)return ws;sp=1;var e=Sn(),t=lr();function r(n,i){i=e(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[t(i[a++])];return a&&a==s?n:void 0}return ws=r,ws}var Ns,op;function ik(){if(op)return Ns;op=1;var e=Cn();function t(r,n,i){var a=r==null?void 0:e(r,n);return a===void 0?i:a}return Ns=t,Ns}var Es,cp;function ak(){if(cp)return Es;cp=1;function e(t,r){return t!=null&&r in Object(t)}return Es=e,Es}var Ss,up;function q0(){if(up)return Ss;up=1;var e=Sn(),t=cr(),r=le(),n=xn(),i=Vu(),a=lr();function s(o,u,l){u=e(u,o);for(var c=-1,d=u.length,f=!1;++c<d;){var h=a(u[c]);if(!(f=o!=null&&l(o,h)))break;o=o[h]}return f||++c!=d?f:(d=o==null?0:o.length,!!d&&i(d)&&n(h,d)&&(r(o)||t(o)))}return Ss=s,Ss}var Cs,lp;function P0(){if(lp)return Cs;lp=1;var e=ak(),t=q0();function r(n,i){return n!=null&&t(n,i,e)}return Cs=r,Cs}var As,dp;function sk(){if(dp)return As;dp=1;var e=j0(),t=ik(),r=P0(),n=tl(),i=R0(),a=M0(),s=lr(),o=1,u=2;function l(c,d){return n(c)&&i(d)?a(s(c),d):function(f){var h=t(f,c);return h===void 0&&h===d?r(f,c):e(d,h,o|u)}}return As=l,As}var ks,fp;function L0(){if(fp)return ks;fp=1;function e(t){return function(r){return r==null?void 0:r[t]}}return ks=e,ks}var Is,hp;function ok(){if(hp)return Is;hp=1;var e=Cn();function t(r){return function(n){return e(n,r)}}return Is=t,Is}var js,pp;function ck(){if(pp)return js;pp=1;var e=L0(),t=ok(),r=tl(),n=lr();function i(a){return r(a)?e(n(a)):t(a)}return js=i,js}var Rs,gp;function Ue(){if(gp)return Rs;gp=1;var e=QA(),t=sk(),r=dt(),n=le(),i=ck();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?t(s[0],s[1]):e(s):i(s)}return Rs=a,Rs}var Ms,mp;function D0(){if(mp)return Ms;mp=1;var e=h0(),t=HA(),r=Ue(),n=le();function i(a,s){var o=n(a)?e:t;return o(a,r(s,3))}return Ms=i,Ms}var Ts,vp;function uk(){if(vp)return Ts;vp=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return Ts=r,Ts}var qs,yp;function O0(){if(yp)return qs;yp=1;var e=uk(),t=q0();function r(n,i){return n!=null&&t(n,i,e)}return qs=r,qs}var Ps,xp;function lk(){if(xp)return Ps;xp=1;var e=Yu(),t=jt(),r=cr(),n=le(),i=Ve(),a=It(),s=_n(),o=ur(),u="[object Map]",l="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||o(h)||r(h)))return!h.length;var x=t(h);if(x==u||x==l)return!h.size;if(s(h))return!e(h).length;for(var m in h)if(d.call(h,m))return!1;return!0}return Ps=f,Ps}var Ls,bp;function F0(){if(bp)return Ls;bp=1;function e(t){return t===void 0}return Ls=e,Ls}var Ds,_p;function $0(){if(_p)return Ds;_p=1;var e=Nn(),t=Ve();function r(n,i){var a=-1,s=t(n)?Array(n.length):[];return e(n,function(o,u,l){s[++a]=i(o,u,l)}),s}return Ds=r,Ds}var Os,wp;function B0(){if(wp)return Os;wp=1;var e=En(),t=Ue(),r=$0(),n=le();function i(a,s){var o=n(a)?e:r;return o(a,t(s,3))}return Os=i,Os}var Fs,Np;function dk(){if(Np)return Fs;Np=1;function e(t,r,n,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(n=t[++a]);++a<s;)n=r(n,t[a],a,t);return n}return Fs=e,Fs}var $s,Ep;function fk(){if(Ep)return $s;Ep=1;function e(t,r,n,i,a){return a(t,function(s,o,u){n=i?(i=!1,s):r(n,s,o,u)}),n}return $s=e,$s}var Bs,Sp;function z0(){if(Sp)return Bs;Sp=1;var e=dk(),t=Nn(),r=Ue(),n=fk(),i=le();function a(s,o,u){var l=i(s)?e:n,c=arguments.length<3;return l(s,r(o,4),u,c,t)}return Bs=a,Bs}var zs,Cp;function hk(){if(Cp)return zs;Cp=1;var e=ct(),t=le(),r=qe(),n="[object String]";function i(a){return typeof a=="string"||!t(a)&&r(a)&&e(a)==n}return zs=i,zs}var Hs,Ap;function pk(){if(Ap)return Hs;Ap=1;var e=L0(),t=e("length");return Hs=t,Hs}var Gs,kp;function gk(){if(kp)return Gs;kp=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function u(l){return o.test(l)}return Gs=u,Gs}var Vs,Ip;function mk(){if(Ip)return Vs;Ip=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+u+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",x=l+"?",m="["+a+"]?",v="(?:"+h+"(?:"+[c,d,f].join("|")+")"+m+x+")*",y=m+x+v,_="(?:"+[c+o+"?",o,d,f,s].join("|")+")",g=RegExp(u+"(?="+u+")|"+_+y,"g");function b(N){for(var E=g.lastIndex=0;g.test(N);)++E;return E}return Vs=b,Vs}var Us,jp;function vk(){if(jp)return Us;jp=1;var e=pk(),t=gk(),r=mk();function n(i){return t(i)?r(i):e(i)}return Us=n,Us}var Ys,Rp;function yk(){if(Rp)return Ys;Rp=1;var e=Yu(),t=jt(),r=Ve(),n=hk(),i=vk(),a="[object Map]",s="[object Set]";function o(u){if(u==null)return 0;if(r(u))return n(u)?i(u):u.length;var l=t(u);return l==a||l==s?u.size:e(u).length}return Ys=o,Ys}var Ws,Mp;function xk(){if(Mp)return Ws;Mp=1;var e=Gu(),t=_0(),r=Qu(),n=Ue(),i=wn(),a=le(),s=It(),o=sr(),u=ve(),l=ur();function c(d,f,h){var x=a(d),m=x||s(d)||l(d);if(f=n(f,4),h==null){var v=d&&d.constructor;m?h=x?new v:[]:u(d)?h=o(v)?t(i(d)):{}:h={}}return(m?e:r)(d,function(y,_,g){return f(h,y,_,g)}),h}return Ws=c,Ws}var Xs,Tp;function bk(){if(Tp)return Xs;Tp=1;var e=kt(),t=cr(),r=le(),n=e?e.isConcatSpreadable:void 0;function i(a){return r(a)||t(a)||!!(n&&a&&a[n])}return Xs=i,Xs}var Ks,qp;function rl(){if(qp)return Ks;qp=1;var e=Xu(),t=bk();function r(n,i,a,s,o){var u=-1,l=n.length;for(a||(a=t),o||(o=[]);++u<l;){var c=n[u];i>0&&a(c)?i>1?r(c,i-1,a,s,o):e(o,c):s||(o[o.length]=c)}return o}return Ks=r,Ks}var Zs,Pp;function _k(){if(Pp)return Zs;Pp=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return Zs=e,Zs}var Js,Lp;function H0(){if(Lp)return Js;Lp=1;var e=_k(),t=Math.max;function r(n,i,a){return i=t(i===void 0?n.length-1:i,0),function(){for(var s=arguments,o=-1,u=t(s.length-i,0),l=Array(u);++o<u;)l[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(l),e(n,this,c)}}return Js=r,Js}var Qs,Dp;function wk(){if(Dp)return Qs;Dp=1;var e=Zu(),t=c0(),r=dt(),n=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return Qs=n,Qs}var eo,Op;function Nk(){if(Op)return eo;Op=1;var e=800,t=16,r=Date.now;function n(i){var a=0,s=0;return function(){var o=r(),u=t-(o-s);if(s=o,u>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return eo=n,eo}var to,Fp;function G0(){if(Fp)return to;Fp=1;var e=wk(),t=Nk(),r=t(e);return to=r,to}var ro,$p;function An(){if($p)return ro;$p=1;var e=dt(),t=H0(),r=G0();function n(i,a){return r(t(i,a,e),i+"")}return ro=n,ro}var no,Bp;function V0(){if(Bp)return no;Bp=1;function e(t,r,n,i){for(var a=t.length,s=n+(i?1:-1);i?s--:++s<a;)if(r(t[s],s,t))return s;return-1}return no=e,no}var io,zp;function Ek(){if(zp)return io;zp=1;function e(t){return t!==t}return io=e,io}var ao,Hp;function Sk(){if(Hp)return ao;Hp=1;function e(t,r,n){for(var i=n-1,a=t.length;++i<a;)if(t[i]===r)return i;return-1}return ao=e,ao}var so,Gp;function Ck(){if(Gp)return so;Gp=1;var e=V0(),t=Ek(),r=Sk();function n(i,a,s){return a===a?r(i,a,s):e(i,t,s)}return so=n,so}var oo,Vp;function Ak(){if(Vp)return oo;Vp=1;var e=Ck();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return oo=t,oo}var co,Up;function kk(){if(Up)return co;Up=1;function e(t,r,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(r,t[i]))return!0;return!1}return co=e,co}var uo,Yp;function Ik(){if(Yp)return uo;Yp=1;function e(){}return uo=e,uo}var lo,Wp;function jk(){if(Wp)return lo;Wp=1;var e=y0(),t=Ik(),r=el(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(a){return new e(a)}:t;return lo=i,lo}var fo,Xp;function Rk(){if(Xp)return fo;Xp=1;var e=A0(),t=Ak(),r=kk(),n=k0(),i=jk(),a=el(),s=200;function o(u,l,c){var d=-1,f=t,h=u.length,x=!0,m=[],v=m;if(c)x=!1,f=r;else if(h>=s){var y=l?null:i(u);if(y)return a(y);x=!1,f=n,v=new e}else v=l?[]:m;e:for(;++d<h;){var _=u[d],g=l?l(_):_;if(_=c||_!==0?_:0,x&&g===g){for(var b=v.length;b--;)if(v[b]===g)continue e;l&&v.push(g),m.push(_)}else f(v,g,c)||(v!==m&&v.push(g),m.push(_))}return m}return fo=o,fo}var ho,Kp;function U0(){if(Kp)return ho;Kp=1;var e=Ve(),t=qe();function r(n){return t(n)&&e(n)}return ho=r,ho}var po,Zp;function Mk(){if(Zp)return po;Zp=1;var e=rl(),t=An(),r=Rk(),n=U0(),i=t(function(a){return r(e(a,1,n,!0))});return po=i,po}var go,Jp;function Tk(){if(Jp)return go;Jp=1;var e=En();function t(r,n){return e(n,function(i){return r[i]})}return go=t,go}var mo,Qp;function Y0(){if(Qp)return mo;Qp=1;var e=Tk(),t=Qe();function r(n){return n==null?[]:e(n,t(n))}return mo=r,mo}var vo,eg;function ye(){if(eg)return vo;eg=1;var e;if(typeof Bu=="function")try{e={clone:$A(),constant:Zu(),each:C0(),filter:D0(),has:O0(),isArray:le(),isEmpty:lk(),isFunction:sr(),isUndefined:F0(),keys:Qe(),map:B0(),reduce:z0(),size:yk(),transform:xk(),union:Mk(),values:Y0()}}catch{}return e||(e=window._),vo=e,vo}var yo,tg;function nl(){if(tg)return yo;tg=1;var e=ye();yo=i;var t="\0",r="\0",n="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,h=this;return e.each(c,function(x){f.length>1?h.setNode(x,d):h.setNode(x)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=r,this._children[c]={},this._children[r][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){d.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=r;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==r)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=r),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===r)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(m,v){c(v)&&d.setNode(v,m)}),e.each(this._edgeObjs,function(m){d.hasNode(m.v)&&d.hasNode(m.w)&&d.setEdge(m,f.edge(m))});var h={};function x(m){var v=f.parent(m);return v===void 0||d.hasNode(v)?(h[m]=v,v):v in h?h[v]:x(v)}return this._isCompound&&e.each(d.nodes(),function(m){d.setParent(m,x(m))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,h=arguments;return e.reduce(c,function(x,m){return h.length>1?f.setEdge(x,m,d):f.setEdge(x,m),m}),this},i.prototype.setEdge=function(){var c,d,f,h,x=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,d=m.w,f=m.name,arguments.length===2&&(h=arguments[1],x=!0)):(c=m,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],x=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var v=o(this._isDirected,c,d,f);if(e.has(this._edgeLabels,v))return x&&(this._edgeLabels[v]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[v]=x?h:this._defaultEdgeLabelFn(c,d,f);var y=u(this._isDirected,c,d,f);return c=y.v,d=y.w,Object.freeze(y),this._edgeObjs[v]=y,a(this._preds[d],c),a(this._sucs[c],d),this._in[d][v]=y,this._out[c][v]=y,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,d,f),x=this._edgeObjs[h];return x&&(c=x.v,d=x.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[d],c),s(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var h=e.values(f);return d?e.filter(h,function(x){return x.v===d}):h}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var h=e.values(f);return d?e.filter(h,function(x){return x.w===d}):h}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function a(c,d){c[d]?c[d]++:c[d]=1}function s(c,d){--c[d]||delete c[d]}function o(c,d,f,h){var x=""+d,m=""+f;if(!c&&x>m){var v=x;x=m,m=v}return x+n+m+n+(e.isUndefined(h)?t:h)}function u(c,d,f,h){var x=""+d,m=""+f;if(!c&&x>m){var v=x;x=m,m=v}var y={v:x,w:m};return h&&(y.name=h),y}function l(c,d){return o(c,d.v,d.w,d.name)}return yo}var xo,rg;function qk(){return rg||(rg=1,xo="2.1.8"),xo}var bo,ng;function Pk(){return ng||(ng=1,bo={Graph:nl(),version:qk()}),bo}var _o,ig;function Lk(){if(ig)return _o;ig=1;var e=ye(),t=nl();_o={write:r,read:a};function r(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function n(s){return e.map(s.nodes(),function(o){var u=s.node(o),l=s.parent(o),c={v:o};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function i(s){return e.map(s.edges(),function(o){var u=s.edge(o),l={v:o.v,w:o.w};return e.isUndefined(o.name)||(l.name=o.name),e.isUndefined(u)||(l.value=u),l})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(u){o.setNode(u.v,u.value),u.parent&&o.setParent(u.v,u.parent)}),e.each(s.edges,function(u){o.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),o}return _o}var wo,ag;function Dk(){if(ag)return wo;ag=1;var e=ye();wo=t;function t(r){var n={},i=[],a;function s(o){e.has(n,o)||(n[o]=!0,a.push(o),e.each(r.successors(o),s),e.each(r.predecessors(o),s))}return e.each(r.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return wo}var No,sg;function W0(){if(sg)return No;sg=1;var e=ye();No=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var a=this._arr,s=a.length;return i[r]=s,a.push({key:r,priority:n}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,a=i+1,s=r;i<n.length&&(s=n[i].priority<n[s].priority?i:s,a<n.length&&(s=n[a].priority<n[s].priority?a:s),s!==r&&(this._swap(r,s),this._heapify(s)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,a;r!==0&&(a=r>>1,!(n[a].priority<i));)this._swap(r,a),r=a},t.prototype._swap=function(r,n){var i=this._arr,a=this._keyIndices,s=i[r],o=i[n];i[r]=o,i[n]=s,a[o.key]=r,a[s.key]=n},No}var Eo,og;function X0(){if(og)return Eo;og=1;var e=ye(),t=W0();Eo=n;var r=e.constant(1);function n(a,s,o,u){return i(a,String(s),o||r,u||function(l){return a.outEdges(l)})}function i(a,s,o,u){var l={},c=new t,d,f,h=function(x){var m=x.v!==d?x.v:x.w,v=l[m],y=o(x),_=f.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+y);_<v.distance&&(v.distance=_,v.predecessor=d,c.decrease(m,_))};for(a.nodes().forEach(function(x){var m=x===s?0:Number.POSITIVE_INFINITY;l[x]={distance:m},c.add(x,m)});c.size()>0&&(d=c.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)u(d).forEach(h);return l}return Eo}var So,cg;function Ok(){if(cg)return So;cg=1;var e=X0(),t=ye();So=r;function r(n,i,a){return t.transform(n.nodes(),function(s,o){s[o]=e(n,o,i,a)},{})}return So}var Co,ug;function K0(){if(ug)return Co;ug=1;var e=ye();Co=t;function t(r){var n=0,i=[],a={},s=[];function o(u){var l=a[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),r.successors(u).forEach(function(f){e.has(a,f)?a[f].onStack&&(l.lowlink=Math.min(l.lowlink,a[f].index)):(o(f),l.lowlink=Math.min(l.lowlink,a[f].lowlink))}),l.lowlink===l.index){var c=[],d;do d=i.pop(),a[d].onStack=!1,c.push(d);while(u!==d);s.push(c)}}return r.nodes().forEach(function(u){e.has(a,u)||o(u)}),s}return Co}var Ao,lg;function Fk(){if(lg)return Ao;lg=1;var e=ye(),t=K0();Ao=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return Ao}var ko,dg;function $k(){if(dg)return ko;dg=1;var e=ye();ko=r;var t=e.constant(1);function r(i,a,s){return n(i,a||t,s||function(o){return i.outEdges(o)})}function n(i,a,s){var o={},u=i.nodes();return u.forEach(function(l){o[l]={},o[l][l]={distance:0},u.forEach(function(c){l!==c&&(o[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var d=c.v===l?c.w:c.v,f=a(c);o[l][d]={distance:f,predecessor:l}})}),u.forEach(function(l){var c=o[l];u.forEach(function(d){var f=o[d];u.forEach(function(h){var x=f[l],m=c[h],v=f[h],y=x.distance+m.distance;y<v.distance&&(v.distance=y,v.predecessor=m.predecessor)})})}),o}return ko}var Io,fg;function Z0(){if(fg)return Io;fg=1;var e=ye();Io=t,t.CycleException=r;function t(n){var i={},a={},s=[];function o(u){if(e.has(a,u))throw new r;e.has(i,u)||(a[u]=!0,i[u]=!0,e.each(n.predecessors(u),o),delete a[u],s.push(u))}if(e.each(n.sinks(),o),e.size(i)!==n.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,Io}var jo,hg;function Bk(){if(hg)return jo;hg=1;var e=Z0();jo=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return jo}var Ro,pg;function J0(){if(pg)return Ro;pg=1;var e=ye();Ro=t;function t(n,i,a){e.isArray(i)||(i=[i]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],u={};return e.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);r(n,l,a==="post",u,s,o)}),o}function r(n,i,a,s,o,u){e.has(s,i)||(s[i]=!0,a||u.push(i),e.each(o(i),function(l){r(n,l,a,s,o,u)}),a&&u.push(i))}return Ro}var Mo,gg;function zk(){if(gg)return Mo;gg=1;var e=J0();Mo=t;function t(r,n){return e(r,n,"post")}return Mo}var To,mg;function Hk(){if(mg)return To;mg=1;var e=J0();To=t;function t(r,n){return e(r,n,"pre")}return To}var qo,vg;function Gk(){if(vg)return qo;vg=1;var e=ye(),t=nl(),r=W0();qo=n;function n(i,a){var s=new t,o={},u=new r,l;function c(f){var h=f.v===l?f.w:f.v,x=u.priority(h);if(x!==void 0){var m=a(f);m<x&&(o[h]=l,u.decrease(h,m))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),s.setNode(f)}),u.decrease(i.nodes()[0],0);for(var d=!1;u.size()>0;){if(l=u.removeMin(),e.has(o,l))s.setEdge(l,o[l]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(l).forEach(c)}return s}return qo}var Po,yg;function Vk(){return yg||(yg=1,Po={components:Dk(),dijkstra:X0(),dijkstraAll:Ok(),findCycles:Fk(),floydWarshall:$k(),isAcyclic:Bk(),postorder:zk(),preorder:Hk(),prim:Gk(),tarjan:K0(),topsort:Z0()}),Po}var Lo,xg;function Uk(){if(xg)return Lo;xg=1;var e=Pk();return Lo={Graph:e.Graph,json:Lk(),alg:Vk(),version:e.version},Lo}var Do,bg;function Ee(){if(bg)return Do;bg=1;var e;if(typeof Bu=="function")try{e=Uk()}catch{}return e||(e=window.graphlib),Do=e,Do}var Oo,_g;function Yk(){if(_g)return Oo;_g=1;var e=N0(),t=1,r=4;function n(i){return e(i,t|r)}return Oo=n,Oo}var Fo,wg;function kn(){if(wg)return Fo;wg=1;var e=At(),t=Ve(),r=xn(),n=ve();function i(a,s,o){if(!n(o))return!1;var u=typeof s;return(u=="number"?t(o)&&r(s,o.length):u=="string"&&s in o)?e(o[s],a):!1}return Fo=i,Fo}var $o,Ng;function Wk(){if(Ng)return $o;Ng=1;var e=An(),t=At(),r=kn(),n=lt(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,u){o=Object(o);var l=-1,c=u.length,d=c>2?u[2]:void 0;for(d&&r(u[0],u[1],d)&&(c=1);++l<c;)for(var f=u[l],h=n(f),x=-1,m=h.length;++x<m;){var v=h[x],y=o[v];(y===void 0||t(y,i[v])&&!a.call(o,v))&&(o[v]=f[v])}return o});return $o=s,$o}var Bo,Eg;function Xk(){if(Eg)return Bo;Eg=1;var e=Ue(),t=Ve(),r=Qe();function n(i){return function(a,s,o){var u=Object(a);if(!t(a)){var l=e(s,3);a=r(a),s=function(d){return l(u[d],d,u)}}var c=i(a,s,o);return c>-1?u[l?a[c]:c]:void 0}}return Bo=n,Bo}var zo,Sg;function Kk(){if(Sg)return zo;Sg=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return zo=t,zo}var Ho,Cg;function Zk(){if(Cg)return Ho;Cg=1;var e=Kk(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Ho=r,Ho}var Go,Ag;function Jk(){if(Ag)return Go;Ag=1;var e=Zk(),t=ve(),r=Rt(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return n;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=a.test(l);return d||s.test(l)?o(l.slice(2),d?2:8):i.test(l)?n:+l}return Go=u,Go}var Vo,kg;function Q0(){if(kg)return Vo;kg=1;var e=Jk(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*r}return i===i?i:0}return Vo=n,Vo}var Uo,Ig;function Qk(){if(Ig)return Uo;Ig=1;var e=Q0();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return Uo=t,Uo}var Yo,jg;function eI(){if(jg)return Yo;jg=1;var e=V0(),t=Ue(),r=Qk(),n=Math.max;function i(a,s,o){var u=a==null?0:a.length;if(!u)return-1;var l=o==null?0:r(o);return l<0&&(l=n(u+l,0)),e(a,t(s,3),l)}return Yo=i,Yo}var Wo,Rg;function tI(){if(Rg)return Wo;Rg=1;var e=Xk(),t=eI(),r=e(t);return Wo=r,Wo}var Xo,Mg;function ex(){if(Mg)return Xo;Mg=1;var e=rl();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return Xo=t,Xo}var Ko,Tg;function rI(){if(Tg)return Ko;Tg=1;var e=Ju(),t=E0(),r=lt();function n(i,a){return i==null?i:e(i,t(a),r)}return Ko=n,Ko}var Zo,qg;function nI(){if(qg)return Zo;qg=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Zo=e,Zo}var Jo,Pg;function iI(){if(Pg)return Jo;Pg=1;var e=vn(),t=Qu(),r=Ue();function n(i,a){var s={};return a=r(a,3),t(i,function(o,u,l){e(s,u,a(o,u,l))}),s}return Jo=n,Jo}var Qo,Lg;function il(){if(Lg)return Qo;Lg=1;var e=Rt();function t(r,n,i){for(var a=-1,s=r.length;++a<s;){var o=r[a],u=n(o);if(u!=null&&(l===void 0?u===u&&!e(u):i(u,l)))var l=u,c=o}return c}return Qo=t,Qo}var ec,Dg;function aI(){if(Dg)return ec;Dg=1;function e(t,r){return t>r}return ec=e,ec}var tc,Og;function sI(){if(Og)return tc;Og=1;var e=il(),t=aI(),r=dt();function n(i){return i&&i.length?e(i,r,t):void 0}return tc=n,tc}var rc,Fg;function tx(){if(Fg)return rc;Fg=1;var e=vn(),t=At();function r(n,i,a){(a!==void 0&&!t(n[i],a)||a===void 0&&!(i in n))&&e(n,i,a)}return rc=r,rc}var nc,$g;function oI(){if($g)return nc;$g=1;var e=ct(),t=wn(),r=qe(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,u=s.call(Object);function l(c){if(!r(c)||e(c)!=n)return!1;var d=t(c);if(d===null)return!0;var f=o.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&s.call(f)==u}return nc=l,nc}var ic,Bg;function rx(){if(Bg)return ic;Bg=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return ic=e,ic}var ac,zg;function cI(){if(zg)return ac;zg=1;var e=or(),t=lt();function r(n){return e(n,t(n))}return ac=r,ac}var sc,Hg;function uI(){if(Hg)return sc;Hg=1;var e=tx(),t=d0(),r=b0(),n=f0(),i=w0(),a=cr(),s=le(),o=U0(),u=It(),l=sr(),c=ve(),d=oI(),f=ur(),h=rx(),x=cI();function m(v,y,_,g,b,N,E){var w=h(v,_),A=h(y,_),k=E.get(A);if(k){e(v,_,k);return}var T=N?N(w,A,_+"",v,y,E):void 0,M=T===void 0;if(M){var L=s(A),F=!L&&u(A),C=!L&&!F&&f(A);T=A,L||F||C?s(w)?T=w:o(w)?T=n(w):F?(M=!1,T=t(A,!0)):C?(M=!1,T=r(A,!0)):T=[]:d(A)||a(A)?(T=w,a(w)?T=x(w):(!c(w)||l(w))&&(T=i(A))):M=!1}M&&(E.set(A,T),b(T,A,g,N,E),E.delete(A)),e(v,_,T)}return sc=m,sc}var oc,Gg;function lI(){if(Gg)return oc;Gg=1;var e=mn(),t=tx(),r=Ju(),n=uI(),i=ve(),a=lt(),s=rx();function o(u,l,c,d,f){u!==l&&r(l,function(h,x){if(f||(f=new e),i(h))n(u,l,x,c,o,d,f);else{var m=d?d(s(u,x),h,x+"",u,l,f):void 0;m===void 0&&(m=h),t(u,x,m)}},a)}return oc=o,oc}var cc,Vg;function dI(){if(Vg)return cc;Vg=1;var e=An(),t=kn();function r(n){return e(function(i,a){var s=-1,o=a.length,u=o>1?a[o-1]:void 0,l=o>2?a[2]:void 0;for(u=n.length>3&&typeof u=="function"?(o--,u):void 0,l&&t(a[0],a[1],l)&&(u=o<3?void 0:u,o=1),i=Object(i);++s<o;){var c=a[s];c&&n(i,c,s,u)}return i})}return cc=r,cc}var uc,Ug;function fI(){if(Ug)return uc;Ug=1;var e=lI(),t=dI(),r=t(function(n,i,a){e(n,i,a)});return uc=r,uc}var lc,Yg;function nx(){if(Yg)return lc;Yg=1;function e(t,r){return t<r}return lc=e,lc}var dc,Wg;function hI(){if(Wg)return dc;Wg=1;var e=il(),t=nx(),r=dt();function n(i){return i&&i.length?e(i,r,t):void 0}return dc=n,dc}var fc,Xg;function pI(){if(Xg)return fc;Xg=1;var e=il(),t=Ue(),r=nx();function n(i,a){return i&&i.length?e(i,t(a,2),r):void 0}return fc=n,fc}var hc,Kg;function gI(){if(Kg)return hc;Kg=1;var e=Ce(),t=function(){return e.Date.now()};return hc=t,hc}var pc,Zg;function mI(){if(Zg)return pc;Zg=1;var e=yn(),t=Sn(),r=xn(),n=ve(),i=lr();function a(s,o,u,l){if(!n(s))return s;o=t(o,s);for(var c=-1,d=o.length,f=d-1,h=s;h!=null&&++c<d;){var x=i(o[c]),m=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return s;if(c!=f){var v=h[x];m=l?l(v,x,h):void 0,m===void 0&&(m=n(v)?v:r(o[c+1])?[]:{})}e(h,x,m),h=h[x]}return s}return pc=a,pc}var gc,Jg;function vI(){if(Jg)return gc;Jg=1;var e=Cn(),t=mI(),r=Sn();function n(i,a,s){for(var o=-1,u=a.length,l={};++o<u;){var c=a[o],d=e(i,c);s(d,c)&&t(l,r(c,i),d)}return l}return gc=n,gc}var mc,Qg;function yI(){if(Qg)return mc;Qg=1;var e=vI(),t=P0();function r(n,i){return e(n,i,function(a,s){return t(n,s)})}return mc=r,mc}var vc,em;function xI(){if(em)return vc;em=1;var e=ex(),t=H0(),r=G0();function n(i){return r(t(i,void 0,e),i+"")}return vc=n,vc}var yc,tm;function bI(){if(tm)return yc;tm=1;var e=yI(),t=xI(),r=t(function(n,i){return n==null?{}:e(n,i)});return yc=r,yc}var xc,rm;function _I(){if(rm)return xc;rm=1;var e=Math.ceil,t=Math.max;function r(n,i,a,s){for(var o=-1,u=t(e((i-n)/(a||1)),0),l=Array(u);u--;)l[s?u:++o]=n,n+=a;return l}return xc=r,xc}var bc,nm;function wI(){if(nm)return bc;nm=1;var e=_I(),t=kn(),r=Q0();function n(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),o=o===void 0?a<s?1:-1:r(o),e(a,s,o,i)}}return bc=n,bc}var _c,im;function NI(){if(im)return _c;im=1;var e=wI(),t=e();return _c=t,_c}var wc,am;function EI(){if(am)return wc;am=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return wc=e,wc}var Nc,sm;function SI(){if(sm)return Nc;sm=1;var e=Rt();function t(r,n){if(r!==n){var i=r!==void 0,a=r===null,s=r===r,o=e(r),u=n!==void 0,l=n===null,c=n===n,d=e(n);if(!l&&!d&&!o&&r>n||o&&u&&c&&!l&&!d||a&&u&&c||!i&&c||!s)return 1;if(!a&&!o&&!d&&r<n||d&&i&&s&&!a&&!o||l&&i&&s||!u&&s||!c)return-1}return 0}return Nc=t,Nc}var Ec,om;function CI(){if(om)return Ec;om=1;var e=SI();function t(r,n,i){for(var a=-1,s=r.criteria,o=n.criteria,u=s.length,l=i.length;++a<u;){var c=e(s[a],o[a]);if(c){if(a>=l)return c;var d=i[a];return c*(d=="desc"?-1:1)}}return r.index-n.index}return Ec=t,Ec}var Sc,cm;function AI(){if(cm)return Sc;cm=1;var e=En(),t=Cn(),r=Ue(),n=$0(),i=EI(),a=bn(),s=CI(),o=dt(),u=le();function l(c,d,f){d.length?d=e(d,function(m){return u(m)?function(v){return t(v,m.length===1?m[0]:m)}:m}):d=[o];var h=-1;d=e(d,a(r));var x=n(c,function(m,v,y){var _=e(d,function(g){return g(m)});return{criteria:_,index:++h,value:m}});return i(x,function(m,v){return s(m,v,f)})}return Sc=l,Sc}var Cc,um;function kI(){if(um)return Cc;um=1;var e=rl(),t=AI(),r=An(),n=kn(),i=r(function(a,s){if(a==null)return[];var o=s.length;return o>1&&n(a,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return Cc=i,Cc}var Ac,lm;function II(){if(lm)return Ac;lm=1;var e=T0(),t=0;function r(n){var i=++t;return e(n)+i}return Ac=r,Ac}var kc,dm;function jI(){if(dm)return kc;dm=1;function e(t,r,n){for(var i=-1,a=t.length,s=r.length,o={};++i<a;){var u=i<s?r[i]:void 0;n(o,t[i],u)}return o}return kc=e,kc}var Ic,fm;function RI(){if(fm)return Ic;fm=1;var e=yn(),t=jI();function r(n,i){return t(n||[],i||[],e)}return Ic=r,Ic}var jc,hm;function se(){if(hm)return jc;hm=1;var e;if(typeof Bu=="function")try{e={cloneDeep:Yk(),constant:Zu(),defaults:Wk(),each:C0(),filter:D0(),find:tI(),flatten:ex(),forEach:S0(),forIn:rI(),has:O0(),isUndefined:F0(),last:nI(),map:B0(),mapValues:iI(),max:sI(),merge:fI(),min:hI(),minBy:pI(),now:gI(),pick:bI(),range:NI(),reduce:z0(),sortBy:kI(),uniqueId:II(),values:Y0(),zipObject:RI()}}catch{}return e||(e=window._),jc=e,jc}var Rc,pm;function MI(){if(pm)return Rc;pm=1,Rc=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,a=i._prev;a!==i;)n.push(JSON.stringify(a,r)),a=a._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return Rc}var Mc,gm;function TI(){if(gm)return Mc;gm=1;var e=se(),t=Ee().Graph,r=MI();Mc=i;var n=e.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var d=o(l,c||n),f=a(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(f,function(h){return l.outEdges(h.v,h.w)}),!0)}function a(l,c,d){for(var f=[],h=c[c.length-1],x=c[0],m;l.nodeCount();){for(;m=x.dequeue();)s(l,c,d,m);for(;m=h.dequeue();)s(l,c,d,m);if(l.nodeCount()){for(var v=c.length-2;v>0;--v)if(m=c[v].dequeue(),m){f=f.concat(s(l,c,d,m,!0));break}}}return f}function s(l,c,d,f,h){var x=h?[]:void 0;return e.forEach(l.inEdges(f.v),function(m){var v=l.edge(m),y=l.node(m.v);h&&x.push({v:m.v,w:m.w}),y.out-=v,u(c,d,y)}),e.forEach(l.outEdges(f.v),function(m){var v=l.edge(m),y=m.w,_=l.node(y);_.in-=v,u(c,d,_)}),l.removeNode(f.v),x}function o(l,c){var d=new t,f=0,h=0;e.forEach(l.nodes(),function(v){d.setNode(v,{v,in:0,out:0})}),e.forEach(l.edges(),function(v){var y=d.edge(v.v,v.w)||0,_=c(v),g=y+_;d.setEdge(v.v,v.w,g),h=Math.max(h,d.node(v.v).out+=_),f=Math.max(f,d.node(v.w).in+=_)});var x=e.range(h+f+3).map(function(){return new r}),m=f+1;return e.forEach(d.nodes(),function(v){u(x,m,d.node(v))}),{graph:d,buckets:x,zeroIdx:m}}function u(l,c,d){d.out?d.in?l[d.out-d.in+c].enqueue(d):l[l.length-1].enqueue(d):l[0].enqueue(d)}return Mc}var Tc,mm;function qI(){if(mm)return Tc;mm=1;var e=se(),t=TI();Tc={run:r,undo:i};function r(a){var s=a.graph().acyclicer==="greedy"?t(a,o(a)):n(a);e.forEach(s,function(u){var l=a.edge(u);a.removeEdge(u),l.forwardName=u.name,l.reversed=!0,a.setEdge(u.w,u.v,l,e.uniqueId("rev"))});function o(u){return function(l){return u.edge(l).weight}}}function n(a){var s=[],o={},u={};function l(c){e.has(u,c)||(u[c]=!0,o[c]=!0,e.forEach(a.outEdges(c),function(d){e.has(o,d.w)?s.push(d):l(d.w)}),delete o[c])}return e.forEach(a.nodes(),l),s}function i(a){e.forEach(a.edges(),function(s){var o=a.edge(s);if(o.reversed){a.removeEdge(s);var u=o.forwardName;delete o.reversed,delete o.forwardName,a.setEdge(s.w,s.v,o,u)}})}return Tc}var qc,vm;function he(){if(vm)return qc;vm=1;var e=se(),t=Ee().Graph;qc={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:s,intersectRect:o,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:d,maxRank:f,partition:h,time:x,notime:m};function r(v,y,_,g){var b;do b=e.uniqueId(g);while(v.hasNode(b));return _.dummy=y,v.setNode(b,_),b}function n(v){var y=new t().setGraph(v.graph());return e.forEach(v.nodes(),function(_){y.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){var g=y.edge(_.v,_.w)||{weight:0,minlen:1},b=v.edge(_);y.setEdge(_.v,_.w,{weight:g.weight+b.weight,minlen:Math.max(g.minlen,b.minlen)})}),y}function i(v){var y=new t({multigraph:v.isMultigraph()}).setGraph(v.graph());return e.forEach(v.nodes(),function(_){v.children(_).length||y.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){y.setEdge(_,v.edge(_))}),y}function a(v){var y=e.map(v.nodes(),function(_){var g={};return e.forEach(v.outEdges(_),function(b){g[b.w]=(g[b.w]||0)+v.edge(b).weight}),g});return e.zipObject(v.nodes(),y)}function s(v){var y=e.map(v.nodes(),function(_){var g={};return e.forEach(v.inEdges(_),function(b){g[b.v]=(g[b.v]||0)+v.edge(b).weight}),g});return e.zipObject(v.nodes(),y)}function o(v,y){var _=v.x,g=v.y,b=y.x-_,N=y.y-g,E=v.width/2,w=v.height/2;if(!b&&!N)throw new Error("Not possible to find intersection inside of the rectangle");var A,k;return Math.abs(N)*E>Math.abs(b)*w?(N<0&&(w=-w),A=w*b/N,k=w):(b<0&&(E=-E),A=E,k=E*N/b),{x:_+A,y:g+k}}function u(v){var y=e.map(e.range(f(v)+1),function(){return[]});return e.forEach(v.nodes(),function(_){var g=v.node(_),b=g.rank;e.isUndefined(b)||(y[b][g.order]=_)}),y}function l(v){var y=e.min(e.map(v.nodes(),function(_){return v.node(_).rank}));e.forEach(v.nodes(),function(_){var g=v.node(_);e.has(g,"rank")&&(g.rank-=y)})}function c(v){var y=e.min(e.map(v.nodes(),function(N){return v.node(N).rank})),_=[];e.forEach(v.nodes(),function(N){var E=v.node(N).rank-y;_[E]||(_[E]=[]),_[E].push(N)});var g=0,b=v.graph().nodeRankFactor;e.forEach(_,function(N,E){e.isUndefined(N)&&E%b!==0?--g:g&&e.forEach(N,function(w){v.node(w).rank+=g})})}function d(v,y,_,g){var b={width:0,height:0};return arguments.length>=4&&(b.rank=_,b.order=g),r(v,"border",b,y)}function f(v){return e.max(e.map(v.nodes(),function(y){var _=v.node(y).rank;if(!e.isUndefined(_))return _}))}function h(v,y){var _={lhs:[],rhs:[]};return e.forEach(v,function(g){y(g)?_.lhs.push(g):_.rhs.push(g)}),_}function x(v,y){var _=e.now();try{return y()}finally{console.log(v+" time: "+(e.now()-_)+"ms")}}function m(v,y){return y()}return qc}var Pc,ym;function PI(){if(ym)return Pc;ym=1;var e=se(),t=he();Pc={run:r,undo:i};function r(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(s){n(a,s)})}function n(a,s){var o=s.v,u=a.node(o).rank,l=s.w,c=a.node(l).rank,d=s.name,f=a.edge(s),h=f.labelRank;if(c!==u+1){a.removeEdge(s);var x,m,v;for(v=0,++u;u<c;++v,++u)f.points=[],m={width:0,height:0,edgeLabel:f,edgeObj:s,rank:u},x=t.addDummyNode(a,"edge",m,"_d"),u===h&&(m.width=f.width,m.height=f.height,m.dummy="edge-label",m.labelpos=f.labelpos),a.setEdge(o,x,{weight:f.weight},d),v===0&&a.graph().dummyChains.push(x),o=x;a.setEdge(o,l,{weight:f.weight},d)}}function i(a){e.forEach(a.graph().dummyChains,function(s){var o=a.node(s),u=o.edgeLabel,l;for(a.setEdge(o.edgeObj,u);o.dummy;)l=a.successors(s)[0],a.removeNode(s),u.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(u.x=o.x,u.y=o.y,u.width=o.width,u.height=o.height),s=l,o=a.node(s)})}return Pc}var Lc,xm;function Xr(){if(xm)return Lc;xm=1;var e=se();Lc={longestPath:t,slack:r};function t(n){var i={};function a(s){var o=n.node(s);if(e.has(i,s))return o.rank;i[s]=!0;var u=e.min(e.map(n.outEdges(s),function(l){return a(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),o.rank=u}e.forEach(n.sources(),a)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return Lc}var Dc,bm;function ix(){if(bm)return Dc;bm=1;var e=se(),t=Ee().Graph,r=Xr().slack;Dc=n;function n(o){var u=new t({directed:!1}),l=o.nodes()[0],c=o.nodeCount();u.setNode(l,{});for(var d,f;i(u,o)<c;)d=a(u,o),f=u.hasNode(d.v)?r(o,d):-r(o,d),s(u,o,f);return u}function i(o,u){function l(c){e.forEach(u.nodeEdges(c),function(d){var f=d.v,h=c===f?d.w:f;!o.hasNode(h)&&!r(u,d)&&(o.setNode(h,{}),o.setEdge(c,h,{}),l(h))})}return e.forEach(o.nodes(),l),o.nodeCount()}function a(o,u){return e.minBy(u.edges(),function(l){if(o.hasNode(l.v)!==o.hasNode(l.w))return r(u,l)})}function s(o,u,l){e.forEach(o.nodes(),function(c){u.node(c).rank+=l})}return Dc}var Oc,_m;function LI(){if(_m)return Oc;_m=1;var e=se(),t=ix(),r=Xr().slack,n=Xr().longestPath,i=Ee().alg.preorder,a=Ee().alg.postorder,s=he().simplify;Oc=o,o.initLowLimValues=d,o.initCutValues=u,o.calcCutValue=c,o.leaveEdge=h,o.enterEdge=x,o.exchangeEdges=m;function o(g){g=s(g),n(g);var b=t(g);d(b),u(b,g);for(var N,E;N=h(b);)E=x(b,g,N),m(b,g,N,E)}function u(g,b){var N=a(g,g.nodes());N=N.slice(0,N.length-1),e.forEach(N,function(E){l(g,b,E)})}function l(g,b,N){var E=g.node(N),w=E.parent;g.edge(N,w).cutvalue=c(g,b,N)}function c(g,b,N){var E=g.node(N),w=E.parent,A=!0,k=b.edge(N,w),T=0;return k||(A=!1,k=b.edge(w,N)),T=k.weight,e.forEach(b.nodeEdges(N),function(M){var L=M.v===N,F=L?M.w:M.v;if(F!==w){var C=L===A,R=b.edge(M).weight;if(T+=C?R:-R,y(g,N,F)){var S=g.edge(N,F).cutvalue;T+=C?-S:S}}}),T}function d(g,b){arguments.length<2&&(b=g.nodes()[0]),f(g,{},1,b)}function f(g,b,N,E,w){var A=N,k=g.node(E);return b[E]=!0,e.forEach(g.neighbors(E),function(T){e.has(b,T)||(N=f(g,b,N,T,E))}),k.low=A,k.lim=N++,w?k.parent=w:delete k.parent,N}function h(g){return e.find(g.edges(),function(b){return g.edge(b).cutvalue<0})}function x(g,b,N){var E=N.v,w=N.w;b.hasEdge(E,w)||(E=N.w,w=N.v);var A=g.node(E),k=g.node(w),T=A,M=!1;A.lim>k.lim&&(T=k,M=!0);var L=e.filter(b.edges(),function(F){return M===_(g,g.node(F.v),T)&&M!==_(g,g.node(F.w),T)});return e.minBy(L,function(F){return r(b,F)})}function m(g,b,N,E){var w=N.v,A=N.w;g.removeEdge(w,A),g.setEdge(E.v,E.w,{}),d(g),u(g,b),v(g,b)}function v(g,b){var N=e.find(g.nodes(),function(w){return!b.node(w).parent}),E=i(g,N);E=E.slice(1),e.forEach(E,function(w){var A=g.node(w).parent,k=b.edge(w,A),T=!1;k||(k=b.edge(A,w),T=!0),b.node(w).rank=b.node(A).rank+(T?k.minlen:-k.minlen)})}function y(g,b,N){return g.hasEdge(b,N)}function _(g,b,N){return N.low<=b.lim&&b.lim<=N.lim}return Oc}var Fc,wm;function DI(){if(wm)return Fc;wm=1;var e=Xr(),t=e.longestPath,r=ix(),n=LI();Fc=i;function i(u){switch(u.graph().ranker){case"network-simplex":o(u);break;case"tight-tree":s(u);break;case"longest-path":a(u);break;default:o(u)}}var a=t;function s(u){t(u),r(u)}function o(u){n(u)}return Fc}var $c,Nm;function OI(){if(Nm)return $c;Nm=1;var e=se();$c=t;function t(i){var a=n(i);e.forEach(i.graph().dummyChains,function(s){for(var o=i.node(s),u=o.edgeObj,l=r(i,a,u.v,u.w),c=l.path,d=l.lca,f=0,h=c[f],x=!0;s!==u.w;){if(o=i.node(s),x){for(;(h=c[f])!==d&&i.node(h).maxRank<o.rank;)f++;h===d&&(x=!1)}if(!x){for(;f<c.length-1&&i.node(h=c[f+1]).minRank<=o.rank;)f++;h=c[f]}i.setParent(s,h),s=i.successors(s)[0]}})}function r(i,a,s,o){var u=[],l=[],c=Math.min(a[s].low,a[o].low),d=Math.max(a[s].lim,a[o].lim),f,h;f=s;do f=i.parent(f),u.push(f);while(f&&(a[f].low>c||d>a[f].lim));for(h=f,f=o;(f=i.parent(f))!==h;)l.push(f);return{path:u.concat(l.reverse()),lca:h}}function n(i){var a={},s=0;function o(u){var l=s;e.forEach(i.children(u),o),a[u]={low:l,lim:s++}}return e.forEach(i.children(),o),a}return $c}var Bc,Em;function FI(){if(Em)return Bc;Em=1;var e=se(),t=he();Bc={run:r,cleanup:s};function r(o){var u=t.addDummyNode(o,"root",{},"_root"),l=i(o),c=e.max(e.values(l))-1,d=2*c+1;o.graph().nestingRoot=u,e.forEach(o.edges(),function(h){o.edge(h).minlen*=d});var f=a(o)+1;e.forEach(o.children(),function(h){n(o,u,d,f,c,l,h)}),o.graph().nodeRankFactor=d}function n(o,u,l,c,d,f,h){var x=o.children(h);if(!x.length){h!==u&&o.setEdge(u,h,{weight:0,minlen:l});return}var m=t.addBorderNode(o,"_bt"),v=t.addBorderNode(o,"_bb"),y=o.node(h);o.setParent(m,h),y.borderTop=m,o.setParent(v,h),y.borderBottom=v,e.forEach(x,function(_){n(o,u,l,c,d,f,_);var g=o.node(_),b=g.borderTop?g.borderTop:_,N=g.borderBottom?g.borderBottom:_,E=g.borderTop?c:2*c,w=b!==N?1:d-f[h]+1;o.setEdge(m,b,{weight:E,minlen:w,nestingEdge:!0}),o.setEdge(N,v,{weight:E,minlen:w,nestingEdge:!0})}),o.parent(h)||o.setEdge(u,m,{weight:0,minlen:d+f[h]})}function i(o){var u={};function l(c,d){var f=o.children(c);f&&f.length&&e.forEach(f,function(h){l(h,d+1)}),u[c]=d}return e.forEach(o.children(),function(c){l(c,1)}),u}function a(o){return e.reduce(o.edges(),function(u,l){return u+o.edge(l).weight},0)}function s(o){var u=o.graph();o.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(o.edges(),function(l){var c=o.edge(l);c.nestingEdge&&o.removeEdge(l)})}return Bc}var zc,Sm;function $I(){if(Sm)return zc;Sm=1;var e=se(),t=he();zc=r;function r(i){function a(s){var o=i.children(s),u=i.node(s);if(o.length&&e.forEach(o,a),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)n(i,"borderLeft","_bl",s,u,l),n(i,"borderRight","_br",s,u,l)}}e.forEach(i.children(),a)}function n(i,a,s,o,u,l){var c={width:0,height:0,rank:l,borderType:a},d=u[a][l-1],f=t.addDummyNode(i,"border",c,s);u[a][l]=f,i.setParent(f,o),d&&i.setEdge(d,f,{weight:1})}return zc}var Hc,Cm;function BI(){if(Cm)return Hc;Cm=1;var e=se();Hc={adjust:t,undo:r};function t(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function r(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&a(l),(c==="lr"||c==="rl")&&(o(l),n(l))}function n(l){e.forEach(l.nodes(),function(c){i(l.node(c))}),e.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function a(l){e.forEach(l.nodes(),function(c){s(l.node(c))}),e.forEach(l.edges(),function(c){var d=l.edge(c);e.forEach(d.points,s),e.has(d,"y")&&s(d)})}function s(l){l.y=-l.y}function o(l){e.forEach(l.nodes(),function(c){u(l.node(c))}),e.forEach(l.edges(),function(c){var d=l.edge(c);e.forEach(d.points,u),e.has(d,"x")&&u(d)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return Hc}var Gc,Am;function zI(){if(Am)return Gc;Am=1;var e=se();Gc=t;function t(r){var n={},i=e.filter(r.nodes(),function(l){return!r.children(l).length}),a=e.max(e.map(i,function(l){return r.node(l).rank})),s=e.map(e.range(a+1),function(){return[]});function o(l){if(!e.has(n,l)){n[l]=!0;var c=r.node(l);s[c.rank].push(l),e.forEach(r.successors(l),o)}}var u=e.sortBy(i,function(l){return r.node(l).rank});return e.forEach(u,o),s}return Gc}var Vc,km;function HI(){if(km)return Vc;km=1;var e=se();Vc=t;function t(n,i){for(var a=0,s=1;s<i.length;++s)a+=r(n,i[s-1],i[s]);return a}function r(n,i,a){for(var s=e.zipObject(a,e.map(a,function(f,h){return h})),o=e.flatten(e.map(i,function(f){return e.sortBy(e.map(n.outEdges(f),function(h){return{pos:s[h.w],weight:n.edge(h).weight}}),"pos")}),!0),u=1;u<a.length;)u<<=1;var l=2*u-1;u-=1;var c=e.map(new Array(l),function(){return 0}),d=0;return e.forEach(o.forEach(function(f){var h=f.pos+u;c[h]+=f.weight;for(var x=0;h>0;)h%2&&(x+=c[h+1]),h=h-1>>1,c[h]+=f.weight;d+=f.weight*x})),d}return Vc}var Uc,Im;function GI(){if(Im)return Uc;Im=1;var e=se();Uc=t;function t(r,n){return e.map(n,function(i){var a=r.inEdges(i);if(a.length){var s=e.reduce(a,function(o,u){var l=r.edge(u),c=r.node(u.v);return{sum:o.sum+l.weight*c.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return Uc}var Yc,jm;function VI(){if(jm)return Yc;jm=1;var e=se();Yc=t;function t(i,a){var s={};e.forEach(i,function(u,l){var c=s[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};e.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),e.forEach(a.edges(),function(u){var l=s[u.v],c=s[u.w];!e.isUndefined(l)&&!e.isUndefined(c)&&(c.indegree++,l.out.push(s[u.w]))});var o=e.filter(s,function(u){return!u.indegree});return r(o)}function r(i){var a=[];function s(l){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&n(l,c)}}function o(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();a.push(u),e.forEach(u.in.reverse(),s(u)),e.forEach(u.out,o(u))}return e.map(e.filter(a,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function n(i,a){var s=0,o=0;i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=s/o,i.weight=o,i.i=Math.min(a.i,i.i),a.merged=!0}return Yc}var Wc,Rm;function UI(){if(Rm)return Wc;Rm=1;var e=se(),t=he();Wc=r;function r(a,s){var o=t.partition(a,function(m){return e.has(m,"barycenter")}),u=o.lhs,l=e.sortBy(o.rhs,function(m){return-m.i}),c=[],d=0,f=0,h=0;u.sort(i(!!s)),h=n(c,l,h),e.forEach(u,function(m){h+=m.vs.length,c.push(m.vs),d+=m.barycenter*m.weight,f+=m.weight,h=n(c,l,h)});var x={vs:e.flatten(c,!0)};return f&&(x.barycenter=d/f,x.weight=f),x}function n(a,s,o){for(var u;s.length&&(u=e.last(s)).i<=o;)s.pop(),a.push(u.vs),o++;return o}function i(a){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:a?o.i-s.i:s.i-o.i}}return Wc}var Xc,Mm;function YI(){if(Mm)return Xc;Mm=1;var e=se(),t=GI(),r=VI(),n=UI();Xc=i;function i(o,u,l,c){var d=o.children(u),f=o.node(u),h=f?f.borderLeft:void 0,x=f?f.borderRight:void 0,m={};h&&(d=e.filter(d,function(N){return N!==h&&N!==x}));var v=t(o,d);e.forEach(v,function(N){if(o.children(N.v).length){var E=i(o,N.v,l,c);m[N.v]=E,e.has(E,"barycenter")&&s(N,E)}});var y=r(v,l);a(y,m);var _=n(y,c);if(h&&(_.vs=e.flatten([h,_.vs,x],!0),o.predecessors(h).length)){var g=o.node(o.predecessors(h)[0]),b=o.node(o.predecessors(x)[0]);e.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+g.order+b.order)/(_.weight+2),_.weight+=2}return _}function a(o,u){e.forEach(o,function(l){l.vs=e.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function s(o,u){e.isUndefined(o.barycenter)?(o.barycenter=u.barycenter,o.weight=u.weight):(o.barycenter=(o.barycenter*o.weight+u.barycenter*u.weight)/(o.weight+u.weight),o.weight+=u.weight)}return Xc}var Kc,Tm;function WI(){if(Tm)return Kc;Tm=1;var e=se(),t=Ee().Graph;Kc=r;function r(i,a,s){var o=n(i),u=new t({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(l){return i.node(l)});return e.forEach(i.nodes(),function(l){var c=i.node(l),d=i.parent(l);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(u.setNode(l),u.setParent(l,d||o),e.forEach(i[s](l),function(f){var h=f.v===l?f.w:f.v,x=u.edge(h,l),m=e.isUndefined(x)?0:x.weight;u.setEdge(h,l,{weight:i.edge(f).weight+m})}),e.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),u}function n(i){for(var a;i.hasNode(a=e.uniqueId("_root")););return a}return Kc}var Zc,qm;function XI(){if(qm)return Zc;qm=1;var e=se();Zc=t;function t(r,n,i){var a={},s;e.forEach(i,function(o){for(var u=r.parent(o),l,c;u;){if(l=r.parent(u),l?(c=a[l],a[l]=u):(c=s,s=u),c&&c!==u){n.setEdge(c,u);return}u=l}})}return Zc}var Jc,Pm;function KI(){if(Pm)return Jc;Pm=1;var e=se(),t=zI(),r=HI(),n=YI(),i=WI(),a=XI(),s=Ee().Graph,o=he();Jc=u;function u(f){var h=o.maxRank(f),x=l(f,e.range(1,h+1),"inEdges"),m=l(f,e.range(h-1,-1,-1),"outEdges"),v=t(f);d(f,v);for(var y=Number.POSITIVE_INFINITY,_,g=0,b=0;b<4;++g,++b){c(g%2?x:m,g%4>=2),v=o.buildLayerMatrix(f);var N=r(f,v);N<y&&(b=0,_=e.cloneDeep(v),y=N)}d(f,_)}function l(f,h,x){return e.map(h,function(m){return i(f,m,x)})}function c(f,h){var x=new s;e.forEach(f,function(m){var v=m.graph().root,y=n(m,v,x,h);e.forEach(y.vs,function(_,g){m.node(_).order=g}),a(m,x,y.vs)})}function d(f,h){e.forEach(h,function(x){e.forEach(x,function(m,v){f.node(m).order=v})})}return Jc}var Qc,Lm;function ZI(){if(Lm)return Qc;Lm=1;var e=se(),t=Ee().Graph,r=he();Qc={positionX:x,findType1Conflicts:n,findType2Conflicts:i,addConflict:s,hasConflict:o,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:d,balance:h};function n(y,_){var g={};function b(N,E){var w=0,A=0,k=N.length,T=e.last(E);return e.forEach(E,function(M,L){var F=a(y,M),C=F?y.node(F).order:k;(F||M===T)&&(e.forEach(E.slice(A,L+1),function(R){e.forEach(y.predecessors(R),function(S){var I=y.node(S),O=I.order;(O<w||C<O)&&!(I.dummy&&y.node(R).dummy)&&s(g,S,R)})}),A=L+1,w=C)}),E}return e.reduce(_,b),g}function i(y,_){var g={};function b(E,w,A,k,T){var M;e.forEach(e.range(w,A),function(L){M=E[L],y.node(M).dummy&&e.forEach(y.predecessors(M),function(F){var C=y.node(F);C.dummy&&(C.order<k||C.order>T)&&s(g,F,M)})})}function N(E,w){var A=-1,k,T=0;return e.forEach(w,function(M,L){if(y.node(M).dummy==="border"){var F=y.predecessors(M);F.length&&(k=y.node(F[0]).order,b(w,T,L,A,k),T=L,A=k)}b(w,T,w.length,k,E.length)}),w}return e.reduce(_,N),g}function a(y,_){if(y.node(_).dummy)return e.find(y.predecessors(_),function(g){return y.node(g).dummy})}function s(y,_,g){if(_>g){var b=_;_=g,g=b}var N=y[_];N||(y[_]=N={}),N[g]=!0}function o(y,_,g){if(_>g){var b=_;_=g,g=b}return e.has(y[_],g)}function u(y,_,g,b){var N={},E={},w={};return e.forEach(_,function(A){e.forEach(A,function(k,T){N[k]=k,E[k]=k,w[k]=T})}),e.forEach(_,function(A){var k=-1;e.forEach(A,function(T){var M=b(T);if(M.length){M=e.sortBy(M,function(S){return w[S]});for(var L=(M.length-1)/2,F=Math.floor(L),C=Math.ceil(L);F<=C;++F){var R=M[F];E[T]===T&&k<w[R]&&!o(g,T,R)&&(E[R]=T,E[T]=N[T]=N[R],k=w[R])}}})}),{root:N,align:E}}function l(y,_,g,b,N){var E={},w=c(y,_,g,N),A=N?"borderLeft":"borderRight";function k(L,F){for(var C=w.nodes(),R=C.pop(),S={};R;)S[R]?L(R):(S[R]=!0,C.push(R),C=C.concat(F(R))),R=C.pop()}function T(L){E[L]=w.inEdges(L).reduce(function(F,C){return Math.max(F,E[C.v]+w.edge(C))},0)}function M(L){var F=w.outEdges(L).reduce(function(R,S){return Math.min(R,E[S.w]-w.edge(S))},Number.POSITIVE_INFINITY),C=y.node(L);F!==Number.POSITIVE_INFINITY&&C.borderType!==A&&(E[L]=Math.max(E[L],F))}return k(T,w.predecessors.bind(w)),k(M,w.successors.bind(w)),e.forEach(b,function(L){E[L]=E[g[L]]}),E}function c(y,_,g,b){var N=new t,E=y.graph(),w=m(E.nodesep,E.edgesep,b);return e.forEach(_,function(A){var k;e.forEach(A,function(T){var M=g[T];if(N.setNode(M),k){var L=g[k],F=N.edge(L,M);N.setEdge(L,M,Math.max(w(y,T,k),F||0))}k=T})}),N}function d(y,_){return e.minBy(e.values(_),function(g){var b=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY;return e.forIn(g,function(E,w){var A=v(y,w)/2;b=Math.max(E+A,b),N=Math.min(E-A,N)}),b-N})}function f(y,_){var g=e.values(_),b=e.min(g),N=e.max(g);e.forEach(["u","d"],function(E){e.forEach(["l","r"],function(w){var A=E+w,k=y[A],T;if(k!==_){var M=e.values(k);T=w==="l"?b-e.min(M):N-e.max(M),T&&(y[A]=e.mapValues(k,function(L){return L+T}))}})})}function h(y,_){return e.mapValues(y.ul,function(g,b){if(_)return y[_.toLowerCase()][b];var N=e.sortBy(e.map(y,b));return(N[1]+N[2])/2})}function x(y){var _=r.buildLayerMatrix(y),g=e.merge(n(y,_),i(y,_)),b={},N;e.forEach(["u","d"],function(w){N=w==="u"?_:e.values(_).reverse(),e.forEach(["l","r"],function(A){A==="r"&&(N=e.map(N,function(L){return e.values(L).reverse()}));var k=(w==="u"?y.predecessors:y.successors).bind(y),T=u(y,N,g,k),M=l(y,N,T.root,T.align,A==="r");A==="r"&&(M=e.mapValues(M,function(L){return-L})),b[w+A]=M})});var E=d(y,b);return f(b,E),h(b,y.graph().align)}function m(y,_,g){return function(b,N,E){var w=b.node(N),A=b.node(E),k=0,T;if(k+=w.width/2,e.has(w,"labelpos"))switch(w.labelpos.toLowerCase()){case"l":T=-w.width/2;break;case"r":T=w.width/2;break}if(T&&(k+=g?T:-T),T=0,k+=(w.dummy?_:y)/2,k+=(A.dummy?_:y)/2,k+=A.width/2,e.has(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":T=A.width/2;break;case"r":T=-A.width/2;break}return T&&(k+=g?T:-T),T=0,k}}function v(y,_){return y.node(_).width}return Qc}var eu,Dm;function JI(){if(Dm)return eu;Dm=1;var e=se(),t=he(),r=ZI().positionX;eu=n;function n(a){a=t.asNonCompoundGraph(a),i(a),e.forEach(r(a),function(s,o){a.node(o).x=s})}function i(a){var s=t.buildLayerMatrix(a),o=a.graph().ranksep,u=0;e.forEach(s,function(l){var c=e.max(e.map(l,function(d){return a.node(d).height}));e.forEach(l,function(d){a.node(d).y=u+c/2}),u+=c+o})}return eu}var tu,Om;function QI(){if(Om)return tu;Om=1;var e=se(),t=qI(),r=PI(),n=DI(),i=he().normalizeRanks,a=OI(),s=he().removeEmptyRanks,o=FI(),u=$I(),l=BI(),c=KI(),d=JI(),f=he(),h=Ee().Graph;tu=x;function x(P,D){var B=D&&D.debugTiming?f.time:f.notime;B("layout",function(){var G=B("  buildLayoutGraph",function(){return k(P)});B("  runLayout",function(){m(G,B)}),B("  updateInputGraph",function(){v(P,G)})})}function m(P,D){D("    makeSpaceForEdgeLabels",function(){T(P)}),D("    removeSelfEdges",function(){q(P)}),D("    acyclic",function(){t.run(P)}),D("    nestingGraph.run",function(){o.run(P)}),D("    rank",function(){n(f.asNonCompoundGraph(P))}),D("    injectEdgeLabelProxies",function(){M(P)}),D("    removeEmptyRanks",function(){s(P)}),D("    nestingGraph.cleanup",function(){o.cleanup(P)}),D("    normalizeRanks",function(){i(P)}),D("    assignRankMinMax",function(){L(P)}),D("    removeEdgeLabelProxies",function(){F(P)}),D("    normalize.run",function(){r.run(P)}),D("    parentDummyChains",function(){a(P)}),D("    addBorderSegments",function(){u(P)}),D("    order",function(){c(P)}),D("    insertSelfEdges",function(){$(P)}),D("    adjustCoordinateSystem",function(){l.adjust(P)}),D("    position",function(){d(P)}),D("    positionSelfEdges",function(){z(P)}),D("    removeBorderNodes",function(){O(P)}),D("    normalize.undo",function(){r.undo(P)}),D("    fixupEdgeLabelCoords",function(){S(P)}),D("    undoCoordinateSystem",function(){l.undo(P)}),D("    translateGraph",function(){C(P)}),D("    assignNodeIntersects",function(){R(P)}),D("    reversePoints",function(){I(P)}),D("    acyclic.undo",function(){t.undo(P)})}function v(P,D){e.forEach(P.nodes(),function(B){var G=P.node(B),V=D.node(B);G&&(G.x=V.x,G.y=V.y,D.children(B).length&&(G.width=V.width,G.height=V.height))}),e.forEach(P.edges(),function(B){var G=P.edge(B),V=D.edge(B);G.points=V.points,e.has(V,"x")&&(G.x=V.x,G.y=V.y)}),P.graph().width=D.graph().width,P.graph().height=D.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],b=["width","height"],N={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],w={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function k(P){var D=new h({multigraph:!0,compound:!0}),B=U(P.graph());return D.setGraph(e.merge({},_,H(B,y),e.pick(B,g))),e.forEach(P.nodes(),function(G){var V=U(P.node(G));D.setNode(G,e.defaults(H(V,b),N)),D.setParent(G,P.parent(G))}),e.forEach(P.edges(),function(G){var V=U(P.edge(G));D.setEdge(G,e.merge({},w,H(V,E),e.pick(V,A)))}),D}function T(P){var D=P.graph();D.ranksep/=2,e.forEach(P.edges(),function(B){var G=P.edge(B);G.minlen*=2,G.labelpos.toLowerCase()!=="c"&&(D.rankdir==="TB"||D.rankdir==="BT"?G.width+=G.labeloffset:G.height+=G.labeloffset)})}function M(P){e.forEach(P.edges(),function(D){var B=P.edge(D);if(B.width&&B.height){var G=P.node(D.v),V=P.node(D.w),Y={rank:(V.rank-G.rank)/2+G.rank,e:D};f.addDummyNode(P,"edge-proxy",Y,"_ep")}})}function L(P){var D=0;e.forEach(P.nodes(),function(B){var G=P.node(B);G.borderTop&&(G.minRank=P.node(G.borderTop).rank,G.maxRank=P.node(G.borderBottom).rank,D=e.max(D,G.maxRank))}),P.graph().maxRank=D}function F(P){e.forEach(P.nodes(),function(D){var B=P.node(D);B.dummy==="edge-proxy"&&(P.edge(B.e).labelRank=B.rank,P.removeNode(D))})}function C(P){var D=Number.POSITIVE_INFINITY,B=0,G=Number.POSITIVE_INFINITY,V=0,Y=P.graph(),Z=Y.marginx||0,ee=Y.marginy||0;function Q(K){var W=K.x,X=K.y,ne=K.width,te=K.height;D=Math.min(D,W-ne/2),B=Math.max(B,W+ne/2),G=Math.min(G,X-te/2),V=Math.max(V,X+te/2)}e.forEach(P.nodes(),function(K){Q(P.node(K))}),e.forEach(P.edges(),function(K){var W=P.edge(K);e.has(W,"x")&&Q(W)}),D-=Z,G-=ee,e.forEach(P.nodes(),function(K){var W=P.node(K);W.x-=D,W.y-=G}),e.forEach(P.edges(),function(K){var W=P.edge(K);e.forEach(W.points,function(X){X.x-=D,X.y-=G}),e.has(W,"x")&&(W.x-=D),e.has(W,"y")&&(W.y-=G)}),Y.width=B-D+Z,Y.height=V-G+ee}function R(P){e.forEach(P.edges(),function(D){var B=P.edge(D),G=P.node(D.v),V=P.node(D.w),Y,Z;B.points?(Y=B.points[0],Z=B.points[B.points.length-1]):(B.points=[],Y=V,Z=G),B.points.unshift(f.intersectRect(G,Y)),B.points.push(f.intersectRect(V,Z))})}function S(P){e.forEach(P.edges(),function(D){var B=P.edge(D);if(e.has(B,"x"))switch((B.labelpos==="l"||B.labelpos==="r")&&(B.width-=B.labeloffset),B.labelpos){case"l":B.x-=B.width/2+B.labeloffset;break;case"r":B.x+=B.width/2+B.labeloffset;break}})}function I(P){e.forEach(P.edges(),function(D){var B=P.edge(D);B.reversed&&B.points.reverse()})}function O(P){e.forEach(P.nodes(),function(D){if(P.children(D).length){var B=P.node(D),G=P.node(B.borderTop),V=P.node(B.borderBottom),Y=P.node(e.last(B.borderLeft)),Z=P.node(e.last(B.borderRight));B.width=Math.abs(Z.x-Y.x),B.height=Math.abs(V.y-G.y),B.x=Y.x+B.width/2,B.y=G.y+B.height/2}}),e.forEach(P.nodes(),function(D){P.node(D).dummy==="border"&&P.removeNode(D)})}function q(P){e.forEach(P.edges(),function(D){if(D.v===D.w){var B=P.node(D.v);B.selfEdges||(B.selfEdges=[]),B.selfEdges.push({e:D,label:P.edge(D)}),P.removeEdge(D)}})}function $(P){var D=f.buildLayerMatrix(P);e.forEach(D,function(B){var G=0;e.forEach(B,function(V,Y){var Z=P.node(V);Z.order=Y+G,e.forEach(Z.selfEdges,function(ee){f.addDummyNode(P,"selfedge",{width:ee.label.width,height:ee.label.height,rank:Z.rank,order:Y+ ++G,e:ee.e,label:ee.label},"_se")}),delete Z.selfEdges})})}function z(P){e.forEach(P.nodes(),function(D){var B=P.node(D);if(B.dummy==="selfedge"){var G=P.node(B.e.v),V=G.x+G.width/2,Y=G.y,Z=B.x-V,ee=G.height/2;P.setEdge(B.e,B.label),P.removeNode(D),B.label.points=[{x:V+2*Z/3,y:Y-ee},{x:V+5*Z/6,y:Y-ee},{x:V+Z,y:Y},{x:V+5*Z/6,y:Y+ee},{x:V+2*Z/3,y:Y+ee}],B.label.x=B.x,B.label.y=B.y}})}function H(P,D){return e.mapValues(e.pick(P,D),Number)}function U(P){var D={};return e.forEach(P,function(B,G){D[G.toLowerCase()]=B}),D}return tu}var ru,Fm;function ej(){if(Fm)return ru;Fm=1;var e=se(),t=he(),r=Ee().Graph;ru={debugOrdering:n};function n(i){var a=t.buildLayerMatrix(i),s=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+i.node(o).rank)}),e.forEach(i.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),e.forEach(a,function(o,u){var l="layer"+u;s.setNode(l,{rank:"same"}),e.reduce(o,function(c,d){return s.setEdge(c,d,{style:"invis"}),d})}),s}return ru}var nu,$m;function tj(){return $m||($m=1,nu="0.8.5"),nu}var iu,Bm;function rj(){return Bm||(Bm=1,iu={graphlib:Ee(),layout:QI(),debug:ej(),util:{time:he().time,notime:he().notime},version:tj()}),iu}var nj=rj();const Kr=nb(nj),ij=(e,t,r="TB",n)=>{const i=new Kr.graphlib.Graph;i.setDefaultEdgeLabel(()=>({}));const a=180,s=100,o={nodeSpacingX:(n==null?void 0:n.nodeSpacingX)||100,nodeSpacingY:(n==null?void 0:n.nodeSpacingY)||100,rankSpacing:(n==null?void 0:n.rankSpacing)||150,alignment:(n==null?void 0:n.alignment)||"UL",ranker:(n==null?void 0:n.ranker)||"network-simplex"};return i.setGraph({rankdir:r,nodesep:r==="LR"||r==="RL"?o.nodeSpacingY:o.nodeSpacingX,ranksep:o.rankSpacing,marginx:50,marginy:50,align:o.alignment,ranker:o.ranker}),e.forEach(l=>{i.setNode(l.id,{width:a,height:s})}),t.forEach(l=>{i.setEdge(l.source,l.target)}),Kr.layout(i),{nodes:e.map(l=>{const c=i.node(l.id);return{...l,position:{x:c.x-a/2,y:c.y-s/2}}}),edges:t}},au=(e,t,r)=>{const n=new Map,i=new Map,a=new Map;e.forEach(m=>{a.set(m.id,m),n.set(m.id,[]),i.set(m.id,[])}),t.forEach(m=>{var v,y,_,g,b;((v=m.data)==null?void 0:v.edgeType)==="enables"||((y=m.data)==null?void 0:y.edgeType)==="produces"?((_=n.get(m.source))==null||_.push(m.target),(g=i.get(m.target))==null||g.push(m.source)):(b=m.data)==null||b.edgeType});const s=(m,v=new Set)=>{if(v.has(m))return 0;v.add(m);const y=n.get(m)||[];let _=y.length;return y.forEach(g=>{_+=s(g,v)}),_},o=new Map;e.forEach(m=>{o.set(m.id,s(m.id))});const u=new Kr.graphlib.Graph;u.setDefaultEdgeLabel(()=>({}));const l=180,c=100,d=(r==null?void 0:r.nodeSpacingX)||80,f=(r==null?void 0:r.rankSpacing)||150;u.setGraph({rankdir:"TB",nodesep:d,ranksep:f,marginx:50,marginy:50,align:(r==null?void 0:r.alignment)||"UL",ranker:"longest-path"}),e.forEach(m=>{const v=o.get(m.id)||0,y=Math.min(v*10,200);u.setNode(m.id,{width:l+y,height:c})}),t.forEach(m=>{u.setEdge(m.source,m.target)}),Kr.layout(u);const h=e.map(m=>{const v=u.node(m.id),y=o.get(m.id)||0,_=Math.min(y*10,200);return{...m,position:{x:v.x-(l+_)/2,y:v.y-c/2}}});return{nodes:h.map(m=>{const v=i.get(m.id)||[];if(v.length>0){const y=h.find(_=>_.id===v[0]);if(y){const _=y.position.x-m.position.x;return{...m,position:{x:m.position.x+_*.1,y:m.position.y}}}}return m}),edges:t}},aj=(e,t,r,n)=>{var x;const i={x:0,y:0},a=(r==null?void 0:r.radialSpacing)||300,s=((r==null?void 0:r.startAngle)||0)*Math.PI/180,o=((r==null?void 0:r.endAngle)||360)*Math.PI/180,u=new Map,l=new Set,c=new Map;t.forEach(m=>{c.has(m.source)||c.set(m.source,[]),c.has(m.target)||c.set(m.target,[]),c.get(m.source).push(m.target),c.get(m.target).push(m.source)});const d=(x=e[0])==null?void 0:x.id;if(d){const m=[d];for(u.set(d,0),l.add(d);m.length>0;){const v=m.shift(),y=u.get(v);(c.get(v)||[]).forEach(g=>{l.has(g)||(l.add(g),u.set(g,y+1),m.push(g))})}}const f=new Map;return e.forEach(m=>{const v=u.get(m.id)||0;f.has(v)||f.set(v,[]),f.get(v).push(m)}),{nodes:e.map(m=>{const v=u.get(m.id)||0,y=f.get(v)||[],_=y.indexOf(m),g=o-s,b=g/Math.max(y.length-(g>=2*Math.PI?0:1),1),N=s+_*b,E=a*(v+1);return{...m,position:{x:i.x+Math.cos(N)*E,y:i.y+Math.sin(N)*E}}}),edges:t}},sj=j.memo(cC),oj={custom:sj},cj={},uj=()=>{const{nodes:e,edges:t,descriptions:r,setData:n}=Fu(),[i,a]=j.useState(!1),s=cn(),[o,u]=j.useState({nodeSpacingX:60,nodeSpacingY:60,rankSpacing:120,alignment:"UL",ranker:"longest-path",animate:!0}),[l,c]=j.useState("simplebezier"),d=j.useMemo(()=>{const R=t.map(I=>({id:I.id,source:I.source,target:I.target,type:l,animated:!1,data:I.data,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));return au(e,R,o)},[e,t,l,o]),[f,h,x]=kS(d.nodes),[m,v,y]=IS(d.edges);j.useEffect(()=>{const R=au(e,t,o),S=R.edges.map(I=>({...I,type:l,animated:!1,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));h(R.nodes),v(S)},[e,t,h,v,l,o]),j.useEffect(()=>{v(R=>R.map(S=>({...S,type:l})))},[l,v]);const[_,g]=j.useState("hierarchical"),[b,N]=j.useState(null),E=j.useCallback(R=>{const S=f.find(I=>I.id===R);S&&(N(S),s&&s.setCenter(S.position.x,S.position.y,{duration:800,zoom:1.5}),v(I=>{const O=new Set;return I.forEach(q=>{(q.source===R||q.target===R)&&O.add(q.id)}),I.map(q=>{const $=O.has(q.id);return{...q,animated:!1,style:{stroke:$?"#3b82f6":"#94a3b8",strokeWidth:$?2:1,opacity:$?.8:.2}}})}))},[f,N,s,v]),w=j.useCallback((R,S)=>{const I=S;N(I),v(O=>{const q=new Set;return O.forEach($=>{($.source===I.id||$.target===I.id)&&q.add($.id)}),O.map($=>{var H;const z=q.has($.id);return!z&&((H=$.style)==null?void 0:H.opacity)===.2?$:{...$,animated:!1,style:{stroke:z?"#3b82f6":"#94a3b8",strokeWidth:z?2:1,opacity:z?.8:.2}}})})},[v]),A=j.useCallback(()=>{N(null),v(R=>R.map(S=>({...S,animated:!1,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}})))},[v]),k=j.useMemo(()=>{if(!b)return{source:[],target:[]};const R=m.filter(I=>I.target===b.id).map(I=>f.find(O=>O.id===I.source)).filter(Boolean),S=m.filter(I=>I.source===b.id).map(I=>f.find(O=>O.id===I.target)).filter(Boolean);return{source:R,target:S}},[b,f,m]),T=j.useCallback(R=>v(S=>$v({...R,type:l,animated:!1,style:{strokeWidth:1,stroke:"#6b7280",opacity:.5}},S)),[v,l]),M=j.useCallback(R=>{let S;switch(R){case"hierarchical":S=au(f,m,o);break;case"radial":S=aj(f,m,{radialSpacing:o.radialSpacing,startAngle:o.startAngle,endAngle:o.endAngle});break;case"TB":case"LR":case"BT":case"RL":S=ij(f,m,R,o);break;default:return}const I=S.edges.map(O=>({...O,type:l,animated:!1,data:O.data,style:{stroke:"#94a3b8",strokeWidth:1,opacity:.5}}));if(o.animate){const q=f.map(U=>({...U.position})),$=S.nodes.map(U=>U.position),z=Date.now(),H=()=>{const U=Date.now()-z,P=Math.min(U/500,1),D=1-Math.pow(1-P,3),B=f.map((G,V)=>({...S.nodes[V],position:{x:q[V].x+($[V].x-q[V].x)*D,y:q[V].y+($[V].y-q[V].y)*D}}));h(B),P<1?requestAnimationFrame(H):v(I)};H()}else h(S.nodes),v(I);g(R)},[f,m,h,v,o,l]),L=j.useCallback(R=>{n(R),a(!1)},[n]),F=R=>{var S;switch((S=R.data)==null?void 0:S.nodeType){case"foundation":return"hsl(var(--primary))";case"technique":return"hsl(var(--chart-2))";case"combination":return"hsl(var(--chart-1))";case"application":return"hsl(var(--accent))";case"product":return"hsl(var(--destructive))";case"domain":return"hsl(var(--secondary))";default:return"hsl(var(--muted))"}},C=j.useMemo(()=>({type:l,animated:!1,style:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1,opacity:.5}}),[l]);return i?p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-background p-8",children:p.jsxs("div",{className:"relative",children:[p.jsx(_e,{onClick:()=>a(!1),variant:"ghost",size:"icon",className:"absolute -top-12 right-0",children:p.jsx(Ou,{className:"h-4 w-4"})}),p.jsx(O2,{onDataLoaded:L})]})}):p.jsxs("div",{className:"w-full h-full",children:[p.jsxs(AS,{nodes:f,edges:m,onNodesChange:x,onEdgesChange:y,onConnect:T,onNodeClick:w,onPaneClick:A,nodeTypes:oj,edgeTypes:cj,defaultEdgeOptions:C,fitView:!0,fitViewOptions:{padding:.2,maxZoom:1},className:"bg-background",minZoom:.1,maxZoom:2,connectionMode:st.Loose,elevateNodesOnSelect:!1,elevateEdgesOnSelect:!1,selectNodesOnDrag:!1,proOptions:{hideAttribution:!0},children:[p.jsx(qS,{variant:Be.Dots,gap:20,size:1,color:"hsl(var(--muted-foreground) / 0.2)"}),p.jsx(BS,{className:"bg-card border shadow-lg"}),p.jsx(eC,{nodeColor:F,className:"!bg-card !border !shadow-lg",maskColor:"hsl(var(--background) / 0.6)"}),p.jsxs(ir,{position:"top-left",className:"space-y-2 max-w-sm",children:[p.jsxs(_e,{onClick:()=>a(!0),className:"w-full mb-2",variant:"outline",children:[p.jsx(Yr,{className:"mr-2 h-4 w-4"}),"Load JSON Data"]}),p.jsx(a2,{config:o,onConfigChange:R=>{u(R),_!=="manual"&&M(_)},onLayoutSelect:R=>M(R),selectedLayout:_}),p.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[p.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Edge Type"}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx("button",{onClick:()=>c("straight"),className:`px-3 py-1 text-xs rounded transition-colors ${l==="straight"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Fastest performance",children:"Straight"}),p.jsx("button",{onClick:()=>c("smoothstep"),className:`px-3 py-1 text-xs rounded transition-colors ${l==="smoothstep"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Balanced performance and aesthetics",children:"Smooth Step"}),p.jsx("button",{onClick:()=>c("simplebezier"),className:`px-3 py-1 text-xs rounded transition-colors ${l==="simplebezier"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Simple curves",children:"Simple Bezier"}),p.jsx("button",{onClick:()=>c("bezier"),className:`px-3 py-1 text-xs rounded transition-colors ${l==="bezier"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,title:"Complex curves",children:"Bezier"})]}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[l==="straight"&&"⚡ Fastest rendering",l==="smoothstep"&&"⚖️ Good balance",l==="simplebezier"&&"〰️ Simple curves",l==="bezier"&&"🎨 Best aesthetics"]})]}),p.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[p.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Node Types"}),p.jsxs("div",{className:"space-y-1 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-primary"}),p.jsx("span",{className:"text-muted-foreground",children:"Foundation"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-chart-2"}),p.jsx("span",{className:"text-muted-foreground",children:"Technique"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-chart-1"}),p.jsx("span",{className:"text-muted-foreground",children:"Combination"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-accent"}),p.jsx("span",{className:"text-muted-foreground",children:"Application"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded bg-destructive"}),p.jsx("span",{className:"text-muted-foreground",children:"Product"})]})]})]}),p.jsxs("div",{className:"bg-card p-4 rounded-lg border shadow-lg",children:[p.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:"Domain Tags"}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Finance"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Medical"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Legal"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Education"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Retail"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-pink-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Gaming"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Technology"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-teal-500"}),p.jsx("span",{className:"text-muted-foreground",children:"Automotive"})]})]})]})]})]}),p.jsx(n2,{node:b,onClose:()=>N(null),connectedNodes:k,onNodeClick:E}),p.jsx(B2,{nodes:f,edges:m,descriptions:r,onNodeClick:E})]})},lj=()=>p.jsx(jy,{children:p.jsx(uj,{})}),dj=()=>p.jsx(t2,{children:p.jsx(lj,{})}),fj=()=>p.jsx("div",{className:"w-full h-screen bg-background",children:p.jsx(dj,{})}),vj=fj;export{vj as component};
